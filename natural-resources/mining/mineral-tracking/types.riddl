// Mineral Tracking - Shared Types

type MineralBatchId is Id(MineralTrackingContext.MineralBatch) with {
  briefly "Mineral batch identifier"
  described by "Unique identifier for a mineral batch."
}

type MineId is UUID with {
  briefly "Mine identifier"
  described by "Reference to a mine site."
}

type StockpileId is UUID with {
  briefly "Stockpile identifier"
  described by "Reference to a stockpile location."
}

type ShipmentId is UUID with {
  briefly "Shipment identifier"
  described by "Reference to a smelter shipment."
}

type BatchStatus is any of {
  Extracted,
  Assayed,
  Stockpiled,
  Processing,
  Processed,
  Shipped,
  Delivered,
  Rejected
} with {
  briefly "Batch status"
  described by "Mineral batch lifecycle status."
}

type MineralType is any of {
  Gold,
  Silver,
  Copper,
  Iron,
  Zinc,
  Nickel,
  Platinum,
  Lithium,
  Coal,
  Other
} with {
  briefly "Mineral type"
  described by "Type of mineral being tracked."
}

type GradeUnit is any of {
  GramsPerTonne,
  Percent,
  PartsPerMillion,
  OuncesPerTonne
} with {
  briefly "Grade unit"
  described by "Unit of measure for mineral grade."
}

type ExtractionInfo is {
  batchId is MineralBatchId with {
    briefly "Batch ID"
    described by "Mineral batch identifier."
  }
  mineId is MineId with {
    briefly "Mine"
    described by "Source mine identifier."
  }
  mineralType is MineralType with {
    briefly "Mineral"
    described by "Type of mineral extracted."
  }
  extractionZone is String(3, 200) with {
    briefly "Zone"
    described by "Mine zone or block where ore was extracted."
  }
  tonnage is Decimal(12, 2) with {
    briefly "Tonnage"
    described by "Weight in tonnes of ore extracted."
  }
  extractedAt is TimeStamp with {
    briefly "Extracted"
    described by "Extraction date and time."
  }
  operatorNotes is optional String(1, 1000) with {
    briefly "Notes"
    described by "Operator notes on extraction."
  }
} with {
  briefly "Extraction info"
  described by "Ore extraction details."
}

type AssayResult is {
  sampleId is UUID with {
    briefly "Sample ID"
    described by "Assay sample identifier."
  }
  mineralType is MineralType with {
    briefly "Mineral"
    described by "Mineral being assayed."
  }
  grade is Decimal(10, 4) with {
    briefly "Grade"
    described by "Measured mineral grade."
  }
  gradeUnit is GradeUnit with {
    briefly "Unit"
    described by "Grade unit of measure."
  }
  moisture is Decimal(5, 2) with {
    briefly "Moisture"
    described by "Moisture percentage."
  }
  impurities is optional String(1, 500) with {
    briefly "Impurities"
    described by "Identified impurities."
  }
  assayedAt is TimeStamp with {
    briefly "Assayed"
    described by "Assay date and time."
  }
  laboratory is String(3, 200) with {
    briefly "Lab"
    described by "Laboratory that performed the assay."
  }
} with {
  briefly "Assay result"
  described by "Mineral assay analysis result."
}

type StockpileInfo is {
  stockpileId is StockpileId with {
    briefly "Stockpile"
    described by "Stockpile identifier."
  }
  location is String(3, 200) with {
    briefly "Location"
    described by "Stockpile physical location."
  }
  currentTonnage is Decimal(12, 2) with {
    briefly "Tonnage"
    described by "Current stockpile tonnage."
  }
  averageGrade is Decimal(10, 4) with {
    briefly "Avg grade"
    described by "Average mineral grade in stockpile."
  }
  gradeUnit is GradeUnit with {
    briefly "Unit"
    described by "Grade unit of measure."
  }
} with {
  briefly "Stockpile info"
  described by "Stockpile details and current levels."
}

type ProcessingRecord is {
  plantId is UUID with {
    briefly "Plant ID"
    described by "Processing plant identifier."
  }
  inputTonnage is Decimal(12, 2) with {
    briefly "Input"
    described by "Ore input tonnage."
  }
  outputTonnage is Decimal(12, 2) with {
    briefly "Output"
    described by "Concentrate output tonnage."
  }
  recoveryRate is Decimal(5, 2) with {
    briefly "Recovery"
    described by "Mineral recovery rate percentage."
  }
  concentrateGrade is Decimal(10, 4) with {
    briefly "Concentrate grade"
    described by "Grade of output concentrate."
  }
  gradeUnit is GradeUnit with {
    briefly "Unit"
    described by "Grade unit of measure."
  }
  processedAt is TimeStamp with {
    briefly "Processed"
    described by "Processing completion time."
  }
  processNotes is optional String(1, 1000) with {
    briefly "Notes"
    described by "Processing notes."
  }
} with {
  briefly "Processing record"
  described by "Processing plant throughput record."
}

type GradeReconciliation is {
  expectedGrade is Decimal(10, 4) with {
    briefly "Expected"
    described by "Expected grade from geological model."
  }
  actualGrade is Decimal(10, 4) with {
    briefly "Actual"
    described by "Actual grade from assay."
  }
  variance is Decimal(10, 4) with {
    briefly "Variance"
    described by "Grade variance between expected and actual."
  }
  gradeUnit is GradeUnit with {
    briefly "Unit"
    described by "Grade unit of measure."
  }
  reconciledAt is TimeStamp with {
    briefly "Reconciled"
    described by "Reconciliation date and time."
  }
  reconciledBy is String(3, 100) with {
    briefly "Reconciled by"
    described by "Person who performed reconciliation."
  }
} with {
  briefly "Grade reconciliation"
  described by "Grade reconciliation between model and actual."
}

type ShipmentInfo is {
  shipmentId is ShipmentId with {
    briefly "Shipment"
    described by "Shipment identifier."
  }
  destination is String(3, 300) with {
    briefly "Destination"
    described by "Smelter destination."
  }
  tonnage is Decimal(12, 2) with {
    briefly "Tonnage"
    described by "Shipment tonnage."
  }
  concentrateGrade is Decimal(10, 4) with {
    briefly "Grade"
    described by "Concentrate grade."
  }
  gradeUnit is GradeUnit with {
    briefly "Unit"
    described by "Grade unit of measure."
  }
  carrier is String(3, 200) with {
    briefly "Carrier"
    described by "Transport carrier name."
  }
  estimatedArrival is Date with {
    briefly "ETA"
    described by "Estimated arrival date."
  }
} with {
  briefly "Shipment info"
  described by "Smelter shipment details."
}
