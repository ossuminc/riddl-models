// Mineral Tracking - Shared Types
type MineralBatchId is Id(MineralTrackingContext.MineralBatch)  with {
  briefly "Mineral batch identifier"
  described as {
    |Unique identifier for a mineral batch.
  }
}
type MineId is UUID with {
  briefly "Mine identifier"
  described as {
    |Reference to a mine site.
  }
}
type StockpileId is UUID with {
  briefly "Stockpile identifier"
  described as {
    |Reference to a stockpile location.
  }
}
type ShipmentId is UUID with {
  briefly "Shipment identifier"
  described as {
    |Reference to a smelter shipment.
  }
}
type BatchStatus is any of {
  Extracted,
  Assayed,
  Stockpiled,
  Processing,
  Processed,
  Shipped,
  Delivered,
  Rejected
} with {
  briefly "Batch status"
  described as {
    |Mineral batch lifecycle status.
  }
}
type MineralType is any of {
  Gold,
  Silver,
  Copper,
  Iron,
  Zinc,
  Nickel,
  Platinum,
  Lithium,
  Coal,
  Other
} with {
  briefly "Mineral type"
  described as {
    |Type of mineral being tracked.
  }
}
type GradeUnit is any of {
  GramsPerTonne,
  Percent,
  PartsPerMillion,
  OuncesPerTonne
} with {
  briefly "Grade unit"
  described as {
    |Unit of measure for mineral grade.
  }
}
type ExtractionInfo is {
  batchId: MineralBatchId with {
    briefly "Batch ID"
    described as {
      |Mineral batch identifier.
    }
  }
  mineId: MineId with {
    briefly "Mine"
    described as {
      |Source mine identifier.
    }
  }
  mineralType: MineralType with {
    briefly "Mineral"
    described as {
      |Type of mineral extracted.
    }
  }
  extractionZone: String(3,200) with {
    briefly "Zone"
    described as {
      |Mine zone or block where ore was extracted.
    }
  }
  tonnage: Decimal(12,2) with {
    briefly "Tonnage"
    described as {
      |Weight in tonnes of ore extracted.
    }
  }
  extractedAt: TimeStamp with {
    briefly "Extracted"
    described as {
      |Extraction date and time.
    }
  }
  operatorNotes: String(1,1000)? with {
    briefly "Notes"
    described as {
      |Operator notes on extraction.
    }
  }
} with {
  briefly "Extraction info"
  described as {
    |Ore extraction details.
  }
}
type AssayResult is {
  sampleId: UUID with {
    briefly "Sample ID"
    described as {
      |Assay sample identifier.
    }
  }
  mineralType: MineralType with {
    briefly "Mineral"
    described as {
      |Mineral being assayed.
    }
  }
  grade: Decimal(10,4) with {
    briefly "Grade"
    described as {
      |Measured mineral grade.
    }
  }
  gradeUnit: GradeUnit with {
    briefly "Unit"
    described as {
      |Grade unit of measure.
    }
  }
  moisture: Decimal(5,2) with {
    briefly "Moisture"
    described as {
      |Moisture percentage.
    }
  }
  impurities: String(1,500)? with {
    briefly "Impurities"
    described as {
      |Identified impurities.
    }
  }
  assayedAt: TimeStamp with {
    briefly "Assayed"
    described as {
      |Assay date and time.
    }
  }
  laboratory: String(3,200) with {
    briefly "Lab"
    described as {
      |Laboratory that performed the assay.
    }
  }
} with {
  briefly "Assay result"
  described as {
    |Mineral assay analysis result.
  }
}
type StockpileInfo is {
  stockpileId: StockpileId with {
    briefly "Stockpile"
    described as {
      |Stockpile identifier.
    }
  }
  location: String(3,200) with {
    briefly "Location"
    described as {
      |Stockpile physical location.
    }
  }
  currentTonnage: Decimal(12,2) with {
    briefly "Tonnage"
    described as {
      |Current stockpile tonnage.
    }
  }
  averageGrade: Decimal(10,4) with {
    briefly "Avg grade"
    described as {
      |Average mineral grade in stockpile.
    }
  }
  gradeUnit: GradeUnit with {
    briefly "Unit"
    described as {
      |Grade unit of measure.
    }
  }
} with {
  briefly "Stockpile info"
  described as {
    |Stockpile details and current levels.
  }
}
type ProcessingRecord is {
  plantId: UUID with {
    briefly "Plant ID"
    described as {
      |Processing plant identifier.
    }
  }
  inputTonnage: Decimal(12,2) with {
    briefly "Input"
    described as {
      |Ore input tonnage.
    }
  }
  outputTonnage: Decimal(12,2) with {
    briefly "Output"
    described as {
      |Concentrate output tonnage.
    }
  }
  recoveryRate: Decimal(5,2) with {
    briefly "Recovery"
    described as {
      |Mineral recovery rate percentage.
    }
  }
  concentrateGrade: Decimal(10,4) with {
    briefly "Concentrate grade"
    described as {
      |Grade of output concentrate.
    }
  }
  gradeUnit: GradeUnit with {
    briefly "Unit"
    described as {
      |Grade unit of measure.
    }
  }
  processedAt: TimeStamp with {
    briefly "Processed"
    described as {
      |Processing completion time.
    }
  }
  processNotes: String(1,1000)? with {
    briefly "Notes"
    described as {
      |Processing notes.
    }
  }
} with {
  briefly "Processing record"
  described as {
    |Processing plant throughput record.
  }
}
type GradeReconciliation is {
  expectedGrade: Decimal(10,4) with {
    briefly "Expected"
    described as {
      |Expected grade from geological model.
    }
  }
  actualGrade: Decimal(10,4) with {
    briefly "Actual"
    described as {
      |Actual grade from assay.
    }
  }
  variance: Decimal(10,4) with {
    briefly "Variance"
    described as {
      |Grade variance between expected and actual.
    }
  }
  gradeUnit: GradeUnit with {
    briefly "Unit"
    described as {
      |Grade unit of measure.
    }
  }
  reconciledAt: TimeStamp with {
    briefly "Reconciled"
    described as {
      |Reconciliation date and time.
    }
  }
  reconciledBy: String(3,100) with {
    briefly "Reconciled by"
    described as {
      |Person who performed reconciliation.
    }
  }
} with {
  briefly "Grade reconciliation"
  described as {
    |Grade reconciliation between model and actual.
  }
}
type ShipmentInfo is {
  shipmentId: ShipmentId with {
    briefly "Shipment"
    described as {
      |Shipment identifier.
    }
  }
  destination: String(3,300) with {
    briefly "Destination"
    described as {
      |Smelter destination.
    }
  }
  tonnage: Decimal(12,2) with {
    briefly "Tonnage"
    described as {
      |Shipment tonnage.
    }
  }
  concentrateGrade: Decimal(10,4) with {
    briefly "Grade"
    described as {
      |Concentrate grade.
    }
  }
  gradeUnit: GradeUnit with {
    briefly "Unit"
    described as {
      |Grade unit of measure.
    }
  }
  carrier: String(3,200) with {
    briefly "Carrier"
    described as {
      |Transport carrier name.
    }
  }
  estimatedArrival: Date with {
    briefly "ETA"
    described as {
      |Estimated arrival date.
    }
  }
} with {
  briefly "Shipment info"
  described as {
    |Smelter shipment details.
  }
}
