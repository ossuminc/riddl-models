// Well Management - External Contexts
context RegulatorySystem is {
  command SubmitPermitApplication is  {
    wellId: WellId with {
      briefly "Well"
      described as {
        |Well ID.
      }
    }
    application: String(1,5000) with {
      briefly "Application"
      described as {
        |Permit application.
      }
    }
  } with {
    briefly "Submit permit application"
    described as {
      |Submits permit to regulator.
    }
  }
  event PermitDecisionReceived is  {
    wellId: WellId with {
      briefly "Well"
      described as {
        |Well ID.
      }
    }
    approved: Boolean with {
      briefly "Approved"
      described as {
        |Permit approved.
      }
    }
    updatedPermitNumber: String(1,100)? with {
      briefly "Permit"
      described as {
        |Permit number.
      }
    }
    conditions: String(1,2000)? with {
      briefly "Conditions"
      described as {
        |Permit conditions.
      }
    }
  } with {
    briefly "Permit decision received"
    described as {
      |Emitted when permit decision is received.
    }
  }
  command SubmitProductionReport is  {
    wellId: WellId with {
      briefly "Well"
      described as {
        |Well ID.
      }
    }
    reportingPeriod: String(1,50) with {
      briefly "Period"
      described as {
        |Reporting period.
      }
    }
    production: ProductionData with {
      briefly "Production"
      described as {
        |Production data.
      }
    }
  } with {
    briefly "Submit production report"
    described as {
      |Submits production to regulator.
    }
  }
} with {
  option external()
  briefly "External regulatory system"
  described as {
    |State/federal regulatory agency.
  }
}
context LandManagement is {
  query GetLeaseInfo is  {
    leaseId: LeaseId with {
      briefly "Lease"
      described as {
        |Lease ID.
      }
    }
  } with {
    briefly "Get lease info"
    described as {
      |Gets mineral lease information.
    }
  }
  result LeaseInfo is  {
    leaseId: LeaseId with {
      briefly "Lease"
      described as {
        |Lease ID.
      }
    }
    leaseName: String(1,200) with {
      briefly "Name"
      described as {
        |Lease name.
      }
    }
    royaltyRate: Decimal(5,4) with {
      briefly "Royalty"
      described as {
        |Royalty rate.
      }
    }
    expirationDate: Date with {
      briefly "Expiration"
      described as {
        |Lease expiration.
      }
    }
    workingInterest: Decimal(5,4) with {
      briefly "WI"
      described as {
        |Working interest.
      }
    }
  } with {
    briefly "Lease information"
    described as {
      |Mineral lease details.
    }
  }
} with {
  option external()
  briefly "External land management"
  described as {
    |Land and lease management system.
  }
}
context ProductionAccounting is {
  command RecordSales is  {
    wellId: WellId with {
      briefly "Well"
      described as {
        |Well ID.
      }
    }
    salesDate: Date with {
      briefly "Date"
      described as {
        |Sales date.
      }
    }
    oilVolume: Decimal(12,2) with {
      briefly "Oil"
      described as {
        |Oil volume sold.
      }
    }
    gasVolume: Decimal(12,2) with {
      briefly "Gas"
      described as {
        |Gas volume sold.
      }
    }
    revenue: Decimal(12,2) with {
      briefly "Revenue"
      described as {
        |Sales revenue.
      }
    }
  } with {
    briefly "Record sales"
    described as {
      |Records production sales.
    }
  }
  event SalesRecorded is  {
    wellId: WellId with {
      briefly "Well"
      described as {
        |Well ID.
      }
    }
    revenue: Decimal(12,2) with {
      briefly "Revenue"
      described as {
        |Sales revenue.
      }
    }
    recordedAt: TimeStamp with {
      briefly "Recorded"
      described as {
        |Record time.
      }
    }
  } with {
    briefly "Sales recorded"
    described as {
      |Emitted when sales are recorded.
    }
  }
} with {
  option external()
  briefly "External production accounting"
  described as {
    |Production revenue accounting system.
  }
}
context SCADA is {
  query GetWellTelemetry is  {
    wellId: WellId with {
      briefly "Well"
      described as {
        |Well ID.
      }
    }
  } with {
    briefly "Get well telemetry"
    described as {
      |Gets real-time well data.
    }
  }
  result WellTelemetry is  {
    wellId: WellId with {
      briefly "Well"
      described as {
        |Well ID.
      }
    }
    timestamp: TimeStamp with {
      briefly "Time"
      described as {
        |Reading time.
      }
    }
    tubingPressure: Decimal(8,2) with {
      briefly "THP"
      described as {
        |Tubing head pressure.
      }
    }
    casingPressure: Decimal(8,2) with {
      briefly "CHP"
      described as {
        |Casing head pressure.
      }
    }
    flowRate: Decimal(10,2) with {
      briefly "Flow"
      described as {
        |Flow rate.
      }
    }
    temperature: Decimal(6,2) with {
      briefly "Temp"
      described as {
        |Temperature.
      }
    }
  } with {
    briefly "Well telemetry"
    described as {
      |Real-time well measurements.
    }
  }
} with {
  option external()
  briefly "External SCADA system"
  described as {
    |Supervisory control and data acquisition.
  }
}
