// Well Management - External Contexts

context RegulatorySystem is {

  command SubmitPermitApplication is {
    wellId is WellId with { briefly "Well" described by "Well ID." }
    application is String(1, 5000) with { briefly "Application" described by "Permit application." }
  } with {
    briefly "Submit permit application"
    described by "Submits permit to regulator."
  }

  event PermitDecisionReceived is {
    wellId is WellId with { briefly "Well" described by "Well ID." }
    approved is Boolean with { briefly "Approved" described by "Permit approved." }
    permitNumber is optional String(1, 100) with { briefly "Permit" described by "Permit number." }
    conditions is optional String(1, 2000) with { briefly "Conditions" described by "Permit conditions." }
  } with {
    briefly "Permit decision received"
    described by "Emitted when permit decision is received."
  }

  command SubmitProductionReport is {
    wellId is WellId with { briefly "Well" described by "Well ID." }
    reportingPeriod is String(1, 50) with { briefly "Period" described by "Reporting period." }
    production is ProductionData with { briefly "Production" described by "Production data." }
  } with {
    briefly "Submit production report"
    described by "Submits production to regulator."
  }

} with {
  option is external
  briefly "External regulatory system"
  described by "State/federal regulatory agency."
}

context LandManagement is {

  query GetLeaseInfo is {
    leaseId is LeaseId with { briefly "Lease" described by "Lease ID." }
  } with {
    briefly "Get lease info"
    described by "Gets mineral lease information."
  }

  result LeaseInfo is {
    leaseId is LeaseId with { briefly "Lease" described by "Lease ID." }
    leaseName is String(1, 200) with { briefly "Name" described by "Lease name." }
    royaltyRate is Decimal(5, 4) with { briefly "Royalty" described by "Royalty rate." }
    expirationDate is Date with { briefly "Expiration" described by "Lease expiration." }
    workingInterest is Decimal(5, 4) with { briefly "WI" described by "Working interest." }
  } with {
    briefly "Lease information"
    described by "Mineral lease details."
  }

} with {
  option is external
  briefly "External land management"
  described by "Land and lease management system."
}

context ProductionAccounting is {

  command RecordSales is {
    wellId is WellId with { briefly "Well" described by "Well ID." }
    salesDate is Date with { briefly "Date" described by "Sales date." }
    oilVolume is Decimal(12, 2) with { briefly "Oil" described by "Oil volume sold." }
    gasVolume is Decimal(12, 2) with { briefly "Gas" described by "Gas volume sold." }
    revenue is Decimal(12, 2) with { briefly "Revenue" described by "Sales revenue." }
  } with {
    briefly "Record sales"
    described by "Records production sales."
  }

  event SalesRecorded is {
    wellId is WellId with { briefly "Well" described by "Well ID." }
    revenue is Decimal(12, 2) with { briefly "Revenue" described by "Sales revenue." }
    recordedAt is TimeStamp with { briefly "Recorded" described by "Record time." }
  } with {
    briefly "Sales recorded"
    described by "Emitted when sales are recorded."
  }

} with {
  option is external
  briefly "External production accounting"
  described by "Production revenue accounting system."
}

context SCADA is {

  query GetWellTelemetry is {
    wellId is WellId with { briefly "Well" described by "Well ID." }
  } with {
    briefly "Get well telemetry"
    described by "Gets real-time well data."
  }

  result WellTelemetry is {
    wellId is WellId with { briefly "Well" described by "Well ID." }
    timestamp is TimeStamp with { briefly "Time" described by "Reading time." }
    tubingPressure is Decimal(8, 2) with { briefly "THP" described by "Tubing head pressure." }
    casingPressure is Decimal(8, 2) with { briefly "CHP" described by "Casing head pressure." }
    flowRate is Decimal(10, 2) with { briefly "Flow" described by "Flow rate." }
    temperature is Decimal(6, 2) with { briefly "Temp" described by "Temperature." }
  } with {
    briefly "Well telemetry"
    described by "Real-time well measurements."
  }

} with {
  option is external
  briefly "External SCADA system"
  described by "Supervisory control and data acquisition."
}
