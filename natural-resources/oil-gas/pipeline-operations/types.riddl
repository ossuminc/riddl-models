// Pipeline Operations - Shared Types

type SegmentId is Id(PipelineContext.PipelineSegment) with {
  briefly "Segment identifier"
  described by "Unique identifier for a pipeline segment."
}

type PipelineId is UUID with {
  briefly "Pipeline identifier"
  described by "Reference to a pipeline."
}

type InspectionId is UUID with {
  briefly "Inspection identifier"
  described by "Reference to an inspection record."
}

type WorkOrderId is UUID with {
  briefly "Work order identifier"
  described by "Reference to a maintenance work order."
}

type SegmentStatus is any of {
  Commissioning,
  Operational,
  Degraded,
  MaintenanceRequired,
  UnderMaintenance,
  ShutDown,
  Decommissioned
} with {
  briefly "Segment status"
  described by "Operational status of a pipeline segment."
}

type FlowMedium is any of {
  CrudeOil,
  NaturalGas,
  RefinedProduct,
  NaturalGasLiquids,
  Water,
  Multiphase
} with {
  briefly "Flow medium"
  described by "Type of fluid transported in the pipeline."
}

type AlertSeverity is any of {
  Informational,
  Warning,
  Critical,
  Emergency
} with {
  briefly "Alert severity"
  described by "Severity level of a pipeline alert."
}

type MaintenanceType is any of {
  Preventive,
  Corrective,
  Predictive,
  Emergency,
  Regulatory
} with {
  briefly "Maintenance type"
  described by "Category of maintenance activity."
}

type SegmentInfo is {
  segmentId is SegmentId with {
    briefly "Segment ID"
    described by "Pipeline segment identifier."
  }
  pipelineId is PipelineId with {
    briefly "Pipeline"
    described by "Parent pipeline identifier."
  }
  segmentName is String(3, 200) with {
    briefly "Name"
    described by "Segment name."
  }
  medium is FlowMedium with {
    briefly "Medium"
    described by "Transported medium."
  }
  lengthKm is Decimal(8, 3) with {
    briefly "Length"
    described by "Segment length in kilometers."
  }
  diameterMm is Decimal(8, 2) with {
    briefly "Diameter"
    described by "Pipe diameter in millimeters."
  }
  maxPressureKpa is Decimal(10, 2) with {
    briefly "Max pressure"
    described by "Maximum allowable operating pressure in kPa."
  }
  installDate is Date with {
    briefly "Installed"
    described by "Installation date."
  }
} with {
  briefly "Segment info"
  described by "Pipeline segment details."
}

type FlowReading is {
  flowRateLpm is Decimal(12, 3) with {
    briefly "Flow rate"
    described by "Flow rate in liters per minute."
  }
  pressureKpa is Decimal(10, 2) with {
    briefly "Pressure"
    described by "Pressure reading in kPa."
  }
  temperatureC is Decimal(6, 2) with {
    briefly "Temperature"
    described by "Temperature in Celsius."
  }
  recordedAt is TimeStamp with {
    briefly "Recorded"
    described by "Reading timestamp."
  }
} with {
  briefly "Flow reading"
  described by "Pipeline flow and pressure telemetry reading."
}

type LeakIndicator is {
  location is String(3, 300) with {
    briefly "Location"
    described by "Suspected leak location."
  }
  pressureDropKpa is Decimal(10, 2) with {
    briefly "Pressure drop"
    described by "Observed pressure drop in kPa."
  }
  flowDiscrepancyPct is Decimal(6, 3) with {
    briefly "Flow discrepancy"
    described by "Flow discrepancy percentage."
  }
  severity is AlertSeverity with {
    briefly "Severity"
    described by "Alert severity."
  }
  detectedAt is TimeStamp with {
    briefly "Detected"
    described by "Detection timestamp."
  }
} with {
  briefly "Leak indicator"
  described by "Leak detection indicator data."
}

type MaintenanceRecord is {
  workOrderId is WorkOrderId with {
    briefly "Work order"
    described by "Work order identifier."
  }
  maintenanceType is MaintenanceType with {
    briefly "Type"
    described by "Maintenance type."
  }
  description is String(3, 1000) with {
    briefly "Description"
    described by "Maintenance description."
  }
  scheduledDate is Date with {
    briefly "Scheduled"
    described by "Scheduled date."
  }
  completedAt is optional TimeStamp with {
    briefly "Completed"
    described by "Completion timestamp."
  }
  performedBy is optional String(3, 200) with {
    briefly "Performed by"
    described by "Person who performed maintenance."
  }
  findings is optional String(3, 2000) with {
    briefly "Findings"
    described by "Maintenance findings."
  }
} with {
  briefly "Maintenance record"
  described by "Pipeline maintenance activity record."
}

type InspectionReport is {
  inspectionId is InspectionId with {
    briefly "Inspection ID"
    described by "Inspection identifier."
  }
  inspectorName is String(3, 200) with {
    briefly "Inspector"
    described by "Inspector name."
  }
  inspectionDate is Date with {
    briefly "Date"
    described by "Inspection date."
  }
  wallThicknessMm is optional Decimal(6, 2) with {
    briefly "Wall thickness"
    described by "Measured wall thickness in millimeters."
  }
  corrosionRateMmPerYear is optional Decimal(6, 4) with {
    briefly "Corrosion rate"
    described by "Corrosion rate in mm per year."
  }
  overallCondition is String(3, 100) with {
    briefly "Condition"
    described by "Overall segment condition assessment."
  }
  recommendations is many String(3, 500) with {
    briefly "Recommendations"
    described by "Inspector recommendations."
  }
} with {
  briefly "Inspection report"
  described by "Pipeline inspection report."
}

type ComplianceFiling is {
  filingId is UUID with {
    briefly "Filing ID"
    described by "Compliance filing identifier."
  }
  regulatoryBody is String(3, 200) with {
    briefly "Regulatory body"
    described by "Regulatory authority name."
  }
  filingType is String(3, 200) with {
    briefly "Filing type"
    described by "Type of regulatory filing."
  }
  filedAt is TimeStamp with {
    briefly "Filed"
    described by "Filing timestamp."
  }
  status is String(3, 100) with {
    briefly "Status"
    described by "Filing status."
  }
} with {
  briefly "Compliance filing"
  described by "Regulatory compliance filing record."
}
