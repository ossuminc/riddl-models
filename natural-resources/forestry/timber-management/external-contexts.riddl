// Timber Management - External Contexts

context ForestryRegulator is {

  command SubmitHarvestNotification is {
    standId is StandId with { briefly "Stand" described by "Stand ID." }
    harvestMethod is HarvestMethod with { briefly "Method" described by "Harvest method." }
    acres is Decimal(8, 2) with { briefly "Acres" described by "Harvest acres." }
    startDate is Date with { briefly "Start" described by "Planned start." }
  } with {
    briefly "Submit harvest notification"
    described by "Notifies regulator of harvest."
  }

  event HarvestApproved is {
    standId is StandId with { briefly "Stand" described by "Stand ID." }
    permitNumber is String(1, 100) with { briefly "Permit" described by "Permit number." }
    conditions is optional String(1, 1000) with { briefly "Conditions" described by "Permit conditions." }
  } with {
    briefly "Harvest approved"
    described by "Emitted when harvest is approved."
  }

  command SubmitReforestationReport is {
    standId is StandId with { briefly "Stand" described by "Stand ID." }
    treesPlanted is Natural with { briefly "Trees" described by "Trees planted." }
    acres is Decimal(8, 2) with { briefly "Acres" described by "Acres planted." }
    species is String(1, 200) with { briefly "Species" described by "Species planted." }
  } with {
    briefly "Submit reforestation report"
    described by "Reports reforestation activities."
  }

} with {
  option is external
  briefly "External forestry regulator"
  described by "State forestry agency."
}

context TimberBuyer is {

  query GetCurrentPrices is {
    region is String(1, 100) with { briefly "Region" described by "Market region." }
    speciesType is SpeciesType with { briefly "Species" described by "Species type." }
  } with {
    briefly "Get current prices"
    described by "Gets current timber prices."
  }

  result TimberPrices is {
    region is String(1, 100) with { briefly "Region" described by "Market region." }
    sawlogPrice is Decimal(8, 2) with { briefly "Sawlog" described by "Sawlog price per MBF." }
    pulpwoodPrice is Decimal(8, 2) with { briefly "Pulpwood" described by "Pulpwood price per cord." }
    veneerPrice is Decimal(8, 2) with { briefly "Veneer" described by "Veneer price per MBF." }
    asOf is Date with { briefly "As of" described by "Price date." }
  } with {
    briefly "Timber prices"
    described by "Current timber prices."
  }

  command SubmitBid is {
    saleId is TimberSaleId with { briefly "Sale" described by "Timber sale ID." }
    buyerName is String(1, 200) with { briefly "Buyer" described by "Buyer name." }
    bidAmount is Decimal(12, 2) with { briefly "Amount" described by "Bid amount." }
  } with {
    briefly "Submit bid"
    described by "Submits bid on timber sale."
  }

} with {
  option is external
  briefly "External timber buyer"
  described by "Timber purchasing company."
}

context LoggingContractor is {

  command AssignCrew is {
    standId is StandId with { briefly "Stand" described by "Stand ID." }
    crewId is UUID with { briefly "Crew" described by "Crew ID." }
    startDate is Date with { briefly "Start" described by "Start date." }
  } with {
    briefly "Assign crew"
    described by "Assigns logging crew."
  }

  query GetCrewAvailability is {
    startDate is Date with { briefly "Start" described by "Requested start." }
    durationDays is Natural with { briefly "Duration" described by "Job duration days." }
  } with {
    briefly "Get crew availability"
    described by "Checks crew availability."
  }

  result CrewAvailability is {
    availableCrews is Natural with { briefly "Available" described by "Available crews." }
    earliestStart is Date with { briefly "Earliest" described by "Earliest available start." }
  } with {
    briefly "Crew availability"
    described by "Logging crew availability."
  }

} with {
  option is external
  briefly "External logging contractor"
  described by "Timber harvesting contractor."
}

context NurserySupplier is {

  query GetSeedlingAvailability is {
    species is String(1, 100) with { briefly "Species" described by "Tree species." }
    quantity is Natural with { briefly "Quantity" described by "Seedlings needed." }
  } with {
    briefly "Get seedling availability"
    described by "Checks seedling availability."
  }

  result SeedlingAvailability is {
    species is String(1, 100) with { briefly "Species" described by "Tree species." }
    available is Natural with { briefly "Available" described by "Available count." }
    pricePerThousand is Decimal(8, 2) with { briefly "Price" described by "Price per thousand." }
    deliveryDate is Date with { briefly "Delivery" described by "Available delivery." }
  } with {
    briefly "Seedling availability"
    described by "Nursery seedling supply."
  }

  command OrderSeedlings is {
    standId is StandId with { briefly "Stand" described by "Destination stand." }
    species is String(1, 100) with { briefly "Species" described by "Tree species." }
    quantity is Natural with { briefly "Quantity" described by "Number of seedlings." }
    deliveryDate is Date with { briefly "Delivery" described by "Requested delivery." }
  } with {
    briefly "Order seedlings"
    described by "Orders seedlings for planting."
  }

} with {
  option is external
  briefly "External nursery supplier"
  described by "Tree seedling nursery."
}
