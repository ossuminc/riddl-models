// Timber Management - External Contexts
context ForestryRegulator is {
  command SubmitHarvestNotification is  {
    standId: StandId with {
      briefly "Stand"
      described as {
        |Stand ID.
      }
    }
    harvestMethod: HarvestMethod with {
      briefly "Method"
      described as {
        |Harvest method.
      }
    }
    acres: Decimal(8,2) with {
      briefly "Acres"
      described as {
        |Harvest acres.
      }
    }
    startDate: Date with {
      briefly "Start"
      described as {
        |Planned start.
      }
    }
  } with {
    briefly "Submit harvest notification"
    described as {
      |Notifies regulator of harvest.
    }
  }
  event HarvestApproved is  {
    standId: StandId with {
      briefly "Stand"
      described as {
        |Stand ID.
      }
    }
    permitNumber: String(1,100) with {
      briefly "Permit"
      described as {
        |Permit number.
      }
    }
    conditions: String(1,1000)? with {
      briefly "Conditions"
      described as {
        |Permit conditions.
      }
    }
  } with {
    briefly "Harvest approved"
    described as {
      |Emitted when harvest is approved.
    }
  }
  command SubmitReforestationReport is  {
    standId: StandId with {
      briefly "Stand"
      described as {
        |Stand ID.
      }
    }
    treesPlanted: Natural with {
      briefly "Trees"
      described as {
        |Trees planted.
      }
    }
    acres: Decimal(8,2) with {
      briefly "Acres"
      described as {
        |Acres planted.
      }
    }
    species: String(1,200) with {
      briefly "Species"
      described as {
        |Species planted.
      }
    }
  } with {
    briefly "Submit reforestation report"
    described as {
      |Reports reforestation activities.
    }
  }
} with {
  option external()
  briefly "External forestry regulator"
  described as {
    |State forestry agency.
  }
}
context TimberBuyer is {
  query GetCurrentPrices is  {
    region: String(1,100) with {
      briefly "Region"
      described as {
        |Market region.
      }
    }
    speciesType: SpeciesType with {
      briefly "Species"
      described as {
        |Species type.
      }
    }
  } with {
    briefly "Get current prices"
    described as {
      |Gets current timber prices.
    }
  }
  result TimberPrices is  {
    region: String(1,100) with {
      briefly "Region"
      described as {
        |Market region.
      }
    }
    sawlogPrice: Decimal(8,2) with {
      briefly "Sawlog"
      described as {
        |Sawlog price per MBF.
      }
    }
    pulpwoodPrice: Decimal(8,2) with {
      briefly "Pulpwood"
      described as {
        |Pulpwood price per cord.
      }
    }
    veneerPrice: Decimal(8,2) with {
      briefly "Veneer"
      described as {
        |Veneer price per MBF.
      }
    }
    asOf: Date with {
      briefly "As of"
      described as {
        |Price date.
      }
    }
  } with {
    briefly "Timber prices"
    described as {
      |Current timber prices.
    }
  }
  command SubmitBid is  {
    saleId: TimberSaleId with {
      briefly "Sale"
      described as {
        |Timber sale ID.
      }
    }
    buyerName: String(1,200) with {
      briefly "Buyer"
      described as {
        |Buyer name.
      }
    }
    bidAmount: Decimal(12,2) with {
      briefly "Amount"
      described as {
        |Bid amount.
      }
    }
  } with {
    briefly "Submit bid"
    described as {
      |Submits bid on timber sale.
    }
  }
} with {
  option external()
  briefly "External timber buyer"
  described as {
    |Timber purchasing company.
  }
}
context LoggingContractor is {
  command AssignCrew is  {
    standId: StandId with {
      briefly "Stand"
      described as {
        |Stand ID.
      }
    }
    crewId: UUID with {
      briefly "Crew"
      described as {
        |Crew ID.
      }
    }
    startDate: Date with {
      briefly "Start"
      described as {
        |Start date.
      }
    }
  } with {
    briefly "Assign crew"
    described as {
      |Assigns logging crew.
    }
  }
  query GetCrewAvailability is  {
    startDate: Date with {
      briefly "Start"
      described as {
        |Requested start.
      }
    }
    durationDays: Natural with {
      briefly "Duration"
      described as {
        |Job duration days.
      }
    }
  } with {
    briefly "Get crew availability"
    described as {
      |Checks crew availability.
    }
  }
  result CrewAvailability is  {
    availableCrews: Natural with {
      briefly "Available"
      described as {
        |Available crews.
      }
    }
    earliestStart: Date with {
      briefly "Earliest"
      described as {
        |Earliest available start.
      }
    }
  } with {
    briefly "Crew availability"
    described as {
      |Logging crew availability.
    }
  }
} with {
  option external()
  briefly "External logging contractor"
  described as {
    |Timber harvesting contractor.
  }
}
context NurserySupplier is {
  query GetSeedlingAvailability is  {
    species: String(1,100) with {
      briefly "Species"
      described as {
        |Tree species.
      }
    }
    quantity: Natural with {
      briefly "Quantity"
      described as {
        |Seedlings needed.
      }
    }
  } with {
    briefly "Get seedling availability"
    described as {
      |Checks seedling availability.
    }
  }
  result SeedlingAvailability is  {
    species: String(1,100) with {
      briefly "Species"
      described as {
        |Tree species.
      }
    }
    available: Natural with {
      briefly "Available"
      described as {
        |Available count.
      }
    }
    pricePerThousand: Decimal(8,2) with {
      briefly "Price"
      described as {
        |Price per thousand.
      }
    }
    deliveryDate: Date with {
      briefly "Delivery"
      described as {
        |Available delivery.
      }
    }
  } with {
    briefly "Seedling availability"
    described as {
      |Nursery seedling supply.
    }
  }
  command OrderSeedlings is  {
    standId: StandId with {
      briefly "Stand"
      described as {
        |Destination stand.
      }
    }
    species: String(1,100) with {
      briefly "Species"
      described as {
        |Tree species.
      }
    }
    quantity: Natural with {
      briefly "Quantity"
      described as {
        |Number of seedlings.
      }
    }
    deliveryDate: Date with {
      briefly "Delivery"
      described as {
        |Requested delivery.
      }
    }
  } with {
    briefly "Order seedlings"
    described as {
      |Orders seedlings for planting.
    }
  }
} with {
  option external()
  briefly "External nursery supplier"
  described as {
    |Tree seedling nursery.
  }
}
