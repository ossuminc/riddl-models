// Smart Metering - Shared Types

type MeterId is Id(MeteringContext.Meter) with {
  briefly "Meter identifier"
  described by "Unique identifier for a meter."
}

type AccountId is UUID with {
  briefly "Account identifier"
  described by "Reference to customer account."
}

type ReadingId is UUID with {
  briefly "Reading identifier"
  described by "Reference to a meter reading."
}

type MeterStatus is any of {
  Active,
  Inactive,
  Maintenance,
  Disconnected,
  Decommissioned
} with {
  briefly "Meter status"
  described by "Meter operational status."
}

type MeterType is any of {
  Electric,
  Gas,
  Water,
  DualFuel
} with {
  briefly "Meter type"
  described by "Type of utility metered."
}

type ReadingType is any of {
  Scheduled,
  OnDemand,
  CustomerInitiated,
  Diagnostic
} with {
  briefly "Reading type"
  described by "Type of meter reading."
}

type AlertSeverity is any of {
  Info,
  Warning,
  Critical
} with {
  briefly "Alert severity"
  described by "Meter alert severity level."
}

type MeterInfo is {
  serialNumber is String(1, 50) with {
    briefly "Serial"
    described by "Meter serial number."
  }
  meterType is MeterType with {
    briefly "Type"
    described by "Meter type."
  }
  manufacturer is String(1, 100) with {
    briefly "Manufacturer"
    described by "Meter manufacturer."
  }
  model is String(1, 100) with {
    briefly "Model"
    described by "Meter model."
  }
  firmwareVersion is String(1, 20) with {
    briefly "Firmware"
    described by "Firmware version."
  }
  installDate is Date with {
    briefly "Installed"
    described by "Installation date."
  }
  serviceAddress is String(1, 300) with {
    briefly "Address"
    described by "Service address."
  }
} with {
  briefly "Meter info"
  described by "Meter device information."
}

type MeterReading is {
  readingId is ReadingId with {
    briefly "Reading"
    described by "Reading identifier."
  }
  timestamp is TimeStamp with {
    briefly "Time"
    described by "Reading timestamp."
  }
  readingType is ReadingType with {
    briefly "Type"
    described by "Reading type."
  }
  value is Decimal(15, 3) with {
    briefly "Value"
    described by "Meter reading value."
  }
  unit is String(1, 20) with {
    briefly "Unit"
    described by "Unit of measure."
  }
  quality is String(1, 20) with {
    briefly "Quality"
    described by "Reading quality flag."
  }
} with {
  briefly "Meter reading"
  described by "Meter reading data."
}

type IntervalData is {
  intervalStart is TimeStamp with {
    briefly "Start"
    described by "Interval start time."
  }
  intervalEnd is TimeStamp with {
    briefly "End"
    described by "Interval end time."
  }
  consumption is Decimal(12, 3) with {
    briefly "Consumption"
    described by "Interval consumption."
  }
  demand is optional Decimal(10, 3) with {
    briefly "Demand"
    described by "Peak demand."
  }
} with {
  briefly "Interval data"
  described by "Time interval consumption."
}

type MeterAlert is {
  alertId is UUID with {
    briefly "Alert"
    described by "Alert identifier."
  }
  timestamp is TimeStamp with {
    briefly "Time"
    described by "Alert timestamp."
  }
  alertType is String(1, 50) with {
    briefly "Type"
    described by "Alert type."
  }
  severity is AlertSeverity with {
    briefly "Severity"
    described by "Alert severity."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Alert description."
  }
  resolved is Boolean with {
    briefly "Resolved"
    described by "Is resolved."
  }
} with {
  briefly "Meter alert"
  described by "Meter system alert."
}

type CommunicationStatus is {
  lastContact is TimeStamp with {
    briefly "Last contact"
    described by "Last communication time."
  }
  signalStrength is Decimal(5, 2) with {
    briefly "Signal"
    described by "Signal strength."
  }
  protocol is String(1, 50) with {
    briefly "Protocol"
    described by "Communication protocol."
  }
  networkId is String(1, 50) with {
    briefly "Network"
    described by "Network identifier."
  }
} with {
  briefly "Communication status"
  described by "Meter communication status."
}

type MaintenanceRecord is {
  workOrderId is UUID with {
    briefly "Work order"
    described by "Work order ID."
  }
  workType is String(1, 100) with {
    briefly "Type"
    described by "Maintenance type."
  }
  scheduledDate is Date with {
    briefly "Scheduled"
    described by "Scheduled date."
  }
  completedDate is optional Date with {
    briefly "Completed"
    described by "Completion date."
  }
  technician is String(1, 100) with {
    briefly "Technician"
    described by "Assigned technician."
  }
  notes is optional String(1, 1000) with {
    briefly "Notes"
    described by "Work notes."
  }
} with {
  briefly "Maintenance record"
  described by "Meter maintenance work."
}
