// Water Distribution - Shared Types

type Year is Integer with {
  briefly "Year"
  described by "A calendar year."
}

type DistributionZoneId is Id(WaterContext.DistributionZone) with {
  briefly "Distribution zone identifier"
  described by "Unique identifier for a distribution zone."
}

type PumpStationId is UUID with {
  briefly "Pump station identifier"
  described by "Reference to a pump station."
}

type ReservoirId is UUID with {
  briefly "Reservoir identifier"
  described by "Reference to a water reservoir."
}

type MainId is UUID with {
  briefly "Main identifier"
  described by "Reference to a water main."
}

type ZoneStatus is any of {
  Normal,
  LowPressure,
  HighPressure,
  Maintenance,
  BoilWaterAdvisory,
  ServiceInterruption
} with {
  briefly "Zone status"
  described by "Distribution zone status."
}

type LeakSeverity is any of {
  Minor,
  Moderate,
  Major,
  Emergency
} with {
  briefly "Leak severity"
  described by "Severity of water main leak."
}

type WaterQualityStatus is any of {
  Compliant,
  Warning,
  Violation,
  PendingTest
} with {
  briefly "Quality status"
  described by "Water quality compliance status."
}

type PressureReading is {
  timestamp is TimeStamp with {
    briefly "Timestamp"
    described by "Reading timestamp."
  }
  pressurePSI is Decimal(6, 2) with {
    briefly "Pressure"
    described by "Pressure in PSI."
  }
  flowGPM is Decimal(10, 2) with {
    briefly "Flow"
    described by "Flow in gallons per minute."
  }
  location is String(1, 100) with {
    briefly "Location"
    described by "Sensor location."
  }
} with {
  briefly "Pressure reading"
  described by "Pressure and flow measurement."
}

type WaterQualitySample is {
  sampleId is UUID with {
    briefly "Sample ID"
    described by "Sample identifier."
  }
  sampleDate is TimeStamp with {
    briefly "Date"
    described by "Sample date."
  }
  location is String(1, 200) with {
    briefly "Location"
    described by "Sample location."
  }
  chlorineResidual is Decimal(4, 2) with {
    briefly "Chlorine"
    described by "Chlorine residual mg/L."
  }
  turbidity is Decimal(5, 2) with {
    briefly "Turbidity"
    described by "Turbidity NTU."
  }
  phLevel is Decimal(4, 2) with {
    briefly "pH"
    described by "pH level."
  }
  bacteriaPresent is Boolean with {
    briefly "Bacteria"
    described by "Coliform bacteria present."
  }
  leadLevel is optional Decimal(6, 3) with {
    briefly "Lead"
    described by "Lead level ppb."
  }
} with {
  briefly "Water quality sample"
  described by "Water quality test results."
}

type LeakReport is {
  reportId is UUID with {
    briefly "Report ID"
    described by "Leak report identifier."
  }
  reportedAt is TimeStamp with {
    briefly "Reported"
    described by "Report time."
  }
  location is String(1, 200) with {
    briefly "Location"
    described by "Leak location."
  }
  severity is LeakSeverity with {
    briefly "Severity"
    described by "Leak severity."
  }
  estimatedLossGPM is Decimal(10, 2) with {
    briefly "Loss"
    described by "Estimated water loss GPM."
  }
  mainId is optional MainId with {
    briefly "Main"
    described by "Affected water main."
  }
} with {
  briefly "Leak report"
  described by "Water main leak report."
}

type MaintenanceWork is {
  workOrderId is UUID with {
    briefly "Work order"
    described by "Work order identifier."
  }
  workType is String(1, 100) with {
    briefly "Type"
    described by "Maintenance type."
  }
  scheduledStart is TimeStamp with {
    briefly "Scheduled"
    described by "Scheduled start time."
  }
  affectedCustomers is Natural with {
    briefly "Customers"
    described by "Affected customer count."
  }
  status is String(1, 50) with {
    briefly "Status"
    described by "Work status."
  }
} with {
  briefly "Maintenance work"
  described by "Scheduled maintenance work."
}

type ReservoirLevel is {
  reservoirId is ReservoirId with {
    briefly "Reservoir"
    described by "Reservoir identifier."
  }
  timestamp is TimeStamp with {
    briefly "Timestamp"
    described by "Reading time."
  }
  levelFeet is Decimal(6, 2) with {
    briefly "Level"
    described by "Water level in feet."
  }
  capacityPercent is Decimal(5, 2) with {
    briefly "Capacity"
    described by "Percent of capacity."
  }
  volumeGallons is Decimal(15, 2) with {
    briefly "Volume"
    described by "Volume in gallons."
  }
} with {
  briefly "Reservoir level"
  described by "Reservoir storage level."
}
