// Grid Operations - External Contexts
context SCADASystem is {
  query GetRealTimeData is  {
    sectionId: GridSectionId with {
      briefly "Section"
      described as {
        |Section ID.
      }
    }
  } with {
    briefly "Get real-time data"
    described as {
      |Retrieves real-time SCADA data.
    }
  }
  result RealTimeData is  {
    sectionId: GridSectionId with {
      briefly "Section"
      described as {
        |Section ID.
      }
    }
    load: LoadInfo with {
      briefly "Load"
      described as {
        |Current load.
      }
    }
    switchStatus: String(1,100)+ with {
      briefly "Switches"
      described as {
        |Switch statuses.
      }
    }
    alarms: String(1,200)+ with {
      briefly "Alarms"
      described as {
        |Active alarms.
      }
    }
  } with {
    briefly "Real-time data"
    described as {
      |SCADA real-time readings.
    }
  }
  command SendControlCommand is  {
    deviceId: UUID with {
      briefly "Device"
      described as {
        |Device identifier.
      }
    }
    commandType: String(1,50) with {
      briefly "Command"
      described as {
        |Command type.
      }
    }
    parameters: String(1,500) with {
      briefly "Parameters"
      described as {
        |Command parameters.
      }
    }
  } with {
    briefly "Send control command"
    described as {
      |Sends control command to device.
    }
  }
  event ControlCommandExecuted is  {
    deviceId: UUID with {
      briefly "Device"
      described as {
        |Device ID.
      }
    }
    executedAt: TimeStamp with {
      briefly "Executed"
      described as {
        |Execution time.
      }
    }
    success: Boolean with {
      briefly "Success"
      described as {
        |Execution success.
      }
    }
  } with {
    briefly "Control command executed"
    described as {
      |Emitted when command executes.
    }
  }
} with {
  option external()
  briefly "External SCADA system"
  described as {
    |Supervisory control and data acquisition.
  }
}
context OutageManagementSystem is {
  command CreateOutageTicket is  {
    outageId: OutageId with {
      briefly "Outage"
      described as {
        |Outage ID.
      }
    }
    location: String(1,200) with {
      briefly "Location"
      described as {
        |Outage location.
      }
    }
    reportedBy: String(1,100) with {
      briefly "Reporter"
      described as {
        |Reported by.
      }
    }
    description: String(1,1000) with {
      briefly "Description"
      described as {
        |Outage description.
      }
    }
  } with {
    briefly "Create outage ticket"
    described as {
      |Creates outage management ticket.
    }
  }
  event TicketCreated is  {
    ticketId: UUID with {
      briefly "Ticket"
      described as {
        |Ticket ID.
      }
    }
    outageId: OutageId with {
      briefly "Outage"
      described as {
        |Outage ID.
      }
    }
    createdAt: TimeStamp with {
      briefly "Created"
      described as {
        |Creation time.
      }
    }
  } with {
    briefly "Ticket created"
    described as {
      |Emitted when ticket is created.
    }
  }
  query GetOutageStatus is  {
    outageId: OutageId with {
      briefly "Outage"
      described as {
        |Outage ID.
      }
    }
  } with {
    briefly "Get outage status"
    described as {
      |Retrieves outage status.
    }
  }
  result OutageStatusInfo is  {
    outageId: OutageId with {
      briefly "Outage"
      described as {
        |Outage ID.
      }
    }
    status: OutageStatus with {
      briefly "Status"
      described as {
        |Current status.
      }
    }
    crewsAssigned: Natural with {
      briefly "Crews"
      described as {
        |Crews assigned.
      }
    }
    etr: TimeStamp? with {
      briefly "ETR"
      described as {
        |Estimated restoration.
      }
    }
  } with {
    briefly "Outage status"
    described as {
      |Outage status information.
    }
  }
} with {
  option external()
  briefly "External outage management"
  described as {
    |Outage management system.
  }
}
context EnergyMarketSystem is {
  query GetMarketPrices is  {
    region: String(1,50) with {
      briefly "Region"
      described as {
        |Market region.
      }
    }
    timestamp: TimeStamp with {
      briefly "Time"
      described as {
        |Price timestamp.
      }
    }
  } with {
    briefly "Get market prices"
    described as {
      |Retrieves energy market prices.
    }
  }
  result MarketPrices is  {
    region: String(1,50) with {
      briefly "Region"
      described as {
        |Market region.
      }
    }
    lmpPrice: Decimal(10,2) with {
      briefly "LMP"
      described as {
        |Locational marginal price.
      }
    }
    congestionPrice: Decimal(10,2) with {
      briefly "Congestion"
      described as {
        |Congestion price.
      }
    }
    lossPrice: Decimal(10,2) with {
      briefly "Loss"
      described as {
        |Loss price.
      }
    }
  } with {
    briefly "Market prices"
    described as {
      |Energy market prices.
    }
  }
  command SubmitGenerationBid is  {
    generatorId: GeneratorId with {
      briefly "Generator"
      described as {
        |Generator ID.
      }
    }
    hour: TimeStamp with {
      briefly "Hour"
      described as {
        |Bidding hour.
      }
    }
    quantityMW: Decimal(10,2) with {
      briefly "Quantity"
      described as {
        |Bid quantity MW.
      }
    }
    priceMWh: Decimal(10,2) with {
      briefly "Price"
      described as {
        |Bid price per MWh.
      }
    }
  } with {
    briefly "Submit generation bid"
    described as {
      |Submits generation bid to market.
    }
  }
  event BidSubmitted is  {
    generatorId: GeneratorId with {
      briefly "Generator"
      described as {
        |Generator ID.
      }
    }
    submittedAt: TimeStamp with {
      briefly "Submitted"
      described as {
        |Submission time.
      }
    }
  } with {
    briefly "Bid submitted"
    described as {
      |Emitted when bid is submitted.
    }
  }
} with {
  option external()
  briefly "External energy market"
  described as {
    |Energy market trading system.
  }
}
