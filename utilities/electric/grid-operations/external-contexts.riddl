// Grid Operations - External Contexts

context SCADASystem is {

  query GetRealTimeData is {
    sectionId is GridSectionId with { briefly "Section" described by "Section ID." }
  } with {
    briefly "Get real-time data"
    described by "Retrieves real-time SCADA data."
  }

  result RealTimeData is {
    sectionId is GridSectionId with { briefly "Section" described by "Section ID." }
    load is LoadInfo with { briefly "Load" described by "Current load." }
    switchStatus is many String(1, 100) with { briefly "Switches" described by "Switch statuses." }
    alarms is many String(1, 200) with { briefly "Alarms" described by "Active alarms." }
  } with {
    briefly "Real-time data"
    described by "SCADA real-time readings."
  }

  command SendControlCommand is {
    deviceId is UUID with { briefly "Device" described by "Device identifier." }
    commandType is String(1, 50) with { briefly "Command" described by "Command type." }
    parameters is String(1, 500) with { briefly "Parameters" described by "Command parameters." }
  } with {
    briefly "Send control command"
    described by "Sends control command to device."
  }

  event ControlCommandExecuted is {
    deviceId is UUID with { briefly "Device" described by "Device ID." }
    executedAt is TimeStamp with { briefly "Executed" described by "Execution time." }
    success is Boolean with { briefly "Success" described by "Execution success." }
  } with {
    briefly "Control command executed"
    described by "Emitted when command executes."
  }

} with {
  option is external
  briefly "External SCADA system"
  described by "Supervisory control and data acquisition."
}

context OutageManagementSystem is {

  command CreateOutageTicket is {
    outageId is OutageId with { briefly "Outage" described by "Outage ID." }
    location is String(1, 200) with { briefly "Location" described by "Outage location." }
    reportedBy is String(1, 100) with { briefly "Reporter" described by "Reported by." }
    description is String(1, 1000) with { briefly "Description" described by "Outage description." }
  } with {
    briefly "Create outage ticket"
    described by "Creates outage management ticket."
  }

  event TicketCreated is {
    ticketId is UUID with { briefly "Ticket" described by "Ticket ID." }
    outageId is OutageId with { briefly "Outage" described by "Outage ID." }
    createdAt is TimeStamp with { briefly "Created" described by "Creation time." }
  } with {
    briefly "Ticket created"
    described by "Emitted when ticket is created."
  }

  query GetOutageStatus is {
    outageId is OutageId with { briefly "Outage" described by "Outage ID." }
  } with {
    briefly "Get outage status"
    described by "Retrieves outage status."
  }

  result OutageStatusInfo is {
    outageId is OutageId with { briefly "Outage" described by "Outage ID." }
    status is OutageStatus with { briefly "Status" described by "Current status." }
    crewsAssigned is Natural with { briefly "Crews" described by "Crews assigned." }
    etr is optional TimeStamp with { briefly "ETR" described by "Estimated restoration." }
  } with {
    briefly "Outage status"
    described by "Outage status information."
  }

} with {
  option is external
  briefly "External outage management"
  described by "Outage management system."
}

context EnergyMarketSystem is {

  query GetMarketPrices is {
    region is String(1, 50) with { briefly "Region" described by "Market region." }
    timestamp is TimeStamp with { briefly "Time" described by "Price timestamp." }
  } with {
    briefly "Get market prices"
    described by "Retrieves energy market prices."
  }

  result MarketPrices is {
    region is String(1, 50) with { briefly "Region" described by "Market region." }
    lmpPrice is Decimal(10, 2) with { briefly "LMP" described by "Locational marginal price." }
    congestionPrice is Decimal(10, 2) with { briefly "Congestion" described by "Congestion price." }
    lossPrice is Decimal(10, 2) with { briefly "Loss" described by "Loss price." }
  } with {
    briefly "Market prices"
    described by "Energy market prices."
  }

  command SubmitGenerationBid is {
    generatorId is GeneratorId with { briefly "Generator" described by "Generator ID." }
    hour is TimeStamp with { briefly "Hour" described by "Bidding hour." }
    quantityMW is Decimal(10, 2) with { briefly "Quantity" described by "Bid quantity MW." }
    priceMWh is Decimal(10, 2) with { briefly "Price" described by "Bid price per MWh." }
  } with {
    briefly "Submit generation bid"
    described by "Submits generation bid to market."
  }

  event BidSubmitted is {
    generatorId is GeneratorId with { briefly "Generator" described by "Generator ID." }
    submittedAt is TimeStamp with { briefly "Submitted" described by "Submission time." }
  } with {
    briefly "Bid submitted"
    described by "Emitted when bid is submitted."
  }

} with {
  option is external
  briefly "External energy market"
  described by "Energy market trading system."
}
