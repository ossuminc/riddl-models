// Transaction Management - Shared Types
type TransactionId is Id(TransactionContext.Transaction)  with {
  briefly "Transaction identifier"
  described as {
    |Unique identifier for a transaction.
  }
}
type PropertyId is UUID with {
  briefly "Property identifier"
  described as {
    |Reference to a property.
  }
}
type PartyId is UUID with {
  briefly "Party identifier"
  described as {
    |Reference to a transaction party.
  }
}
type Money is {
  amount: Decimal(14,2) with {
    briefly "Amount"
    described as {
      |Monetary value.
    }
  }
  currency: Currency(USD) with {
    briefly "Currency"
    described as {
      |Currency code.
    }
  }
} with {
  briefly "Monetary value"
  described as {
    |Amount with currency.
  }
}
type TransactionType is any of {
  Purchase,
  Sale,
  Lease,
  LeaseOption,
  Exchange
} with {
  briefly "Transaction type"
  described as {
    |Type of real estate transaction.
  }
}
type TransactionStatus is any of {
  Draft,
  Pending,
  UnderContract,
  InEscrow,
  Closing,
  Closed,
  Cancelled,
  Expired
} with {
  briefly "Transaction status"
  described as {
    |Current transaction status.
  }
}
type Party is {
  partyId: PartyId with {
    briefly "Party ID"
    described as {
      |Party identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Party name.
    }
  }
  partyType: PartyType with {
    briefly "Type"
    described as {
      |Party type.
    }
  }
  email: String(1,100) with {
    briefly "Email"
    described as {
      |Contact email.
    }
  }
  phone: String(1,20) with {
    briefly "Phone"
    described as {
      |Contact phone.
    }
  }
  agent: AgentInfo? with {
    briefly "Agent"
    described as {
      |Representing agent.
    }
  }
} with {
  briefly "Transaction party"
  described as {
    |Buyer, seller, or other party.
  }
}
type PartyType is any of {
  BuyerType,
  SellerType,
  AgentType,
  LenderType,
  TitleCompanyType,
  EscrowAgentType,
  AttorneyType
} with {
  briefly "Party type"
  described as {
    |Type of transaction party.
  }
}
type AgentInfo is {
  agentId: UUID with {
    briefly "Agent ID"
    described as {
      |Agent identifier.
    }
  }
  name: String(1,100) with {
    briefly "Name"
    described as {
      |Agent name.
    }
  }
  licenseNumber: String(1,50) with {
    briefly "License"
    described as {
      |License number.
    }
  }
  brokerage: String(1,200) with {
    briefly "Brokerage"
    described as {
      |Brokerage name.
    }
  }
} with {
  briefly "Agent information"
  described as {
    |Real estate agent details.
  }
}
type PropertyDetails is {
  propertyId: PropertyId with {
    briefly "Property ID"
    described as {
      |Property identifier.
    }
  }
  address: String(1,500) with {
    briefly "Address"
    described as {
      |Property address.
    }
  }
  propertyType: String(1,50) with {
    briefly "Type"
    described as {
      |Property type.
    }
  }
  listPrice: Money with {
    briefly "List price"
    described as {
      |Listing price.
    }
  }
  squareFootage: Natural with {
    briefly "Sq ft"
    described as {
      |Square footage.
    }
  }
  mlsNumber: String(1,20)? with {
    briefly "MLS"
    described as {
      |MLS listing number.
    }
  }
} with {
  briefly "Property details"
  described as {
    |Transaction property information.
  }
}
type Offer is {
  offerId: UUID with {
    briefly "Offer ID"
    described as {
      |Offer identifier.
    }
  }
  offerPrice: Money with {
    briefly "Price"
    described as {
      |Offered price.
    }
  }
  earnestMoney: Money with {
    briefly "Earnest"
    described as {
      |Earnest money deposit.
    }
  }
  financingType: FinancingType with {
    briefly "Financing"
    described as {
      |Financing type.
    }
  }
  contingencies: Contingency+ with {
    briefly "Contingencies"
    described as {
      |Offer contingencies.
    }
  }
  closingDate: Date with {
    briefly "Closing"
    described as {
      |Target closing date.
    }
  }
  expirationDate: Date with {
    briefly "Expiration"
    described as {
      |Offer expiration.
    }
  }
  status: OfferStatus with {
    briefly "Status"
    described as {
      |Offer status.
    }
  }
  submittedAt: TimeStamp with {
    briefly "Submitted"
    described as {
      |Submission time.
    }
  }
} with {
  briefly "Purchase offer"
  described as {
    |Buyer offer details.
  }
}
type OfferStatus is any of {
  Submitted,
  Countered,
  Accepted,
  Rejected,
  Withdrawn,
  Expired
} with {
  briefly "Offer status"
  described as {
    |Current offer status.
  }
}
type FinancingType is any of {
  CashFinancing,
  ConventionalLoan,
  FHALoan,
  VALoan,
  USDALoan,
  SellerFinancing
} with {
  briefly "Financing type"
  described as {
    |Type of financing.
  }
}
type Contingency is {
  contingencyType: ContingencyType with {
    briefly "Type"
    described as {
      |Contingency type.
    }
  }
  description: String(1,500) with {
    briefly "Description"
    described as {
      |Contingency details.
    }
  }
  deadline: Date with {
    briefly "Deadline"
    described as {
      |Contingency deadline.
    }
  }
  contingencyStatus: ContingencyStatus with {
    briefly "Status"
    described as {
      |Contingency status.
    }
  }
} with {
  briefly "Contract contingency"
  described as {
    |Transaction contingency.
  }
}
type ContingencyType is any of {
  Financing,
  Inspection,
  Appraisal,
  TitleSearch,
  HomeownersInsurance,
  SaleOfHome,
  Other
} with {
  briefly "Contingency type"
  described as {
    |Type of contingency.
  }
}
type ContingencyStatus is any of {
  PendingContingency,
  SatisfiedContingency,
  WaivedContingency,
  FailedContingency
} with {
  briefly "Contingency status"
  described as {
    |Status of contingency.
  }
}
type Contract is {
  contractId: UUID with {
    briefly "Contract ID"
    described as {
      |Contract identifier.
    }
  }
  purchasePrice: Money with {
    briefly "Price"
    described as {
      |Purchase price.
    }
  }
  earnestMoney: Money with {
    briefly "Earnest"
    described as {
      |Earnest money.
    }
  }
  closingCosts: ClosingCosts with {
    briefly "Closing costs"
    described as {
      |Closing cost allocation.
    }
  }
  closingDate: Date with {
    briefly "Closing"
    described as {
      |Closing date.
    }
  }
  executedAt: TimeStamp with {
    briefly "Executed"
    described as {
      |Execution time.
    }
  }
} with {
  briefly "Purchase contract"
  described as {
    |Executed purchase agreement.
  }
}
type ClosingCosts is {
  buyerCosts: Money with {
    briefly "Buyer"
    described as {
      |Buyer closing costs.
    }
  }
  sellerCosts: Money with {
    briefly "Seller"
    described as {
      |Seller closing costs.
    }
  }
  sellerConcessions: Money with {
    briefly "Concessions"
    described as {
      |Seller concessions.
    }
  }
} with {
  briefly "Closing costs"
  described as {
    |Closing cost breakdown.
  }
}
type ClosingDocument is {
  documentId: UUID with {
    briefly "Document ID"
    described as {
      |Document identifier.
    }
  }
  documentType: String(1,100) with {
    briefly "Type"
    described as {
      |Document type.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Document name.
    }
  }
  signedByBuyer: Boolean with {
    briefly "Buyer signed"
    described as {
      |Signed by buyer.
    }
  }
  signedBySeller: Boolean with {
    briefly "Seller signed"
    described as {
      |Signed by seller.
    }
  }
} with {
  briefly "Closing document"
  described as {
    |Document required for closing.
  }
}
