// Subcontractor Management - Shared Types
type SubcontractorId is Id(SubcontractorContext.Subcontractor)  with {
  briefly "Subcontractor identifier"
  described as {
    |Unique identifier for a subcontractor.
  }
}
type SubcontractId is UUID with {
  briefly "Subcontract identifier"
  described as {
    |Reference to a subcontract.
  }
}
type ProjectId is UUID with {
  briefly "Project identifier"
  described as {
    |Reference to a project.
  }
}
type Money is {
  amount: Decimal(12,2) with {
    briefly "Amount"
    described as {
      |Monetary value.
    }
  }
  currency: Currency(USD) with {
    briefly "Currency"
    described as {
      |Currency code.
    }
  }
} with {
  briefly "Monetary value"
  described as {
    |Amount with currency.
  }
}
type SubcontractorStatus is any of {
  Pending,
  Approved,
  Active,
  OnHold,
  Terminated
} with {
  briefly "Subcontractor status"
  described as {
    |Current subcontractor status.
  }
}
type Trade is any of {
  Electrical,
  Plumbing,
  HVAC,
  Framing,
  Drywall,
  Painting,
  Flooring,
  Roofing,
  Concrete,
  Masonry,
  Landscaping,
  Other
} with {
  briefly "Trade type"
  described as {
    |Construction trade specialty.
  }
}
type SubcontractorInfo is {
  companyName: String(1,200) with {
    briefly "Name"
    described as {
      |Company name.
    }
  }
  contactName: String(1,100) with {
    briefly "Contact"
    described as {
      |Primary contact.
    }
  }
  email: String(1,100) with {
    briefly "Email"
    described as {
      |Contact email.
    }
  }
  phone: String(1,20) with {
    briefly "Phone"
    described as {
      |Contact phone.
    }
  }
  address: String(1,500) with {
    briefly "Address"
    described as {
      |Business address.
    }
  }
  trades: Trade+ with {
    briefly "Trades"
    described as {
      |Licensed trades.
    }
  }
  licenseNumber: String(1,50) with {
    briefly "License"
    described as {
      |License number.
    }
  }
  licenseExpiry: Date with {
    briefly "Expiry"
    described as {
      |License expiration.
    }
  }
} with {
  briefly "Subcontractor information"
  described as {
    |Basic subcontractor details.
  }
}
type Insurance is {
  insuranceType: String(1,50) with {
    briefly "Type"
    described as {
      |Insurance type.
    }
  }
  carrier: String(1,100) with {
    briefly "Carrier"
    described as {
      |Insurance carrier.
    }
  }
  policyNumber: String(1,50) with {
    briefly "Policy"
    described as {
      |Policy number.
    }
  }
  coverageAmount: Money with {
    briefly "Coverage"
    described as {
      |Coverage amount.
    }
  }
  expiryDate: Date with {
    briefly "Expiry"
    described as {
      |Policy expiration.
    }
  }
} with {
  briefly "Insurance policy"
  described as {
    |Subcontractor insurance.
  }
}
type Subcontract is {
  subcontractId: SubcontractId with {
    briefly "Subcontract ID"
    described as {
      |Subcontract identifier.
    }
  }
  projectId: ProjectId with {
    briefly "Project"
    described as {
      |Project ID.
    }
  }
  trade: Trade with {
    briefly "Trade"
    described as {
      |Contracted trade.
    }
  }
  scope: String(1,5000) with {
    briefly "Scope"
    described as {
      |Scope of work.
    }
  }
  contractAmount: Money with {
    briefly "Amount"
    described as {
      |Contract amount.
    }
  }
  startDate: Date with {
    briefly "Start"
    described as {
      |Start date.
    }
  }
  endDate: Date with {
    briefly "End"
    described as {
      |End date.
    }
  }
  status: SubcontractStatus with {
    briefly "Status"
    described as {
      |Contract status.
    }
  }
} with {
  briefly "Subcontract"
  described as {
    |Subcontractor agreement.
  }
}
type SubcontractStatus is any of {
  Draft,
  Executed,
  InProgress,
  Complete,
  Terminated
} with {
  briefly "Subcontract status"
  described as {
    |Status of subcontract.
  }
}
type PayApplication is {
  applicationId: UUID with {
    briefly "Application ID"
    described as {
      |Pay application ID.
    }
  }
  subcontractId: SubcontractId with {
    briefly "Subcontract"
    described as {
      |Subcontract ID.
    }
  }
  periodEnd: Date with {
    briefly "Period"
    described as {
      |Period ending date.
    }
  }
  amountRequested: Money with {
    briefly "Requested"
    described as {
      |Amount requested.
    }
  }
  updatedAmountApproved: Money? with {
    briefly "Approved"
    described as {
      |Amount approved.
    }
  }
  retainage: Money with {
    briefly "Retainage"
    described as {
      |Retainage withheld.
    }
  }
  payAppStatus: PayAppStatus with {
    briefly "Status"
    described as {
      |Application status.
    }
  }
} with {
  briefly "Pay application"
  described as {
    |Subcontractor payment request.
  }
}
type PayAppStatus is any of {
  Submitted,
  UnderReview,
  Approved,
  PartiallyApproved,
  Rejected,
  Paid
} with {
  briefly "Pay app status"
  described as {
    |Status of payment application.
  }
}
type PerformanceRating is {
  category: String(1,50) with {
    briefly "Category"
    described as {
      |Rating category.
    }
  }
  score: Natural with {
    briefly "Score"
    described as {
      |Rating score 1-5.
    }
  }
  notes: String(1,500)? with {
    briefly "Notes"
    described as {
      |Rating notes.
    }
  }
  ratedBy: String(1,100) with {
    briefly "Rated by"
    described as {
      |Who rated.
    }
  }
  ratedAt: TimeStamp with {
    briefly "Rated at"
    described as {
      |Rating time.
    }
  }
} with {
  briefly "Performance rating"
  described as {
    |Subcontractor performance score.
  }
}
