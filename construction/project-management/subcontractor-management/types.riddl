// Subcontractor Management - Shared Types

type SubcontractorId is Id(SubcontractorContext.Subcontractor) with {
  briefly "Subcontractor identifier"
  described by "Unique identifier for a subcontractor."
}

type SubcontractId is UUID with {
  briefly "Subcontract identifier"
  described by "Reference to a subcontract."
}

type ProjectId is UUID with {
  briefly "Project identifier"
  described by "Reference to a project."
}

type Money is {
  amount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Monetary value."
  }
  currency is Currency(USD) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Monetary value"
  described by "Amount with currency."
}

type SubcontractorStatus is any of {
  Pending,
  Approved,
  Active,
  OnHold,
  Terminated
} with {
  briefly "Subcontractor status"
  described by "Current subcontractor status."
}

type Trade is any of {
  Electrical,
  Plumbing,
  HVAC,
  Framing,
  Drywall,
  Painting,
  Flooring,
  Roofing,
  Concrete,
  Masonry,
  Landscaping,
  Other
} with {
  briefly "Trade type"
  described by "Construction trade specialty."
}

type SubcontractorInfo is {
  companyName is String(1, 200) with {
    briefly "Name"
    described by "Company name."
  }
  contactName is String(1, 100) with {
    briefly "Contact"
    described by "Primary contact."
  }
  email is String(1, 100) with {
    briefly "Email"
    described by "Contact email."
  }
  phone is String(1, 20) with {
    briefly "Phone"
    described by "Contact phone."
  }
  address is String(1, 500) with {
    briefly "Address"
    described by "Business address."
  }
  trades is many Trade with {
    briefly "Trades"
    described by "Licensed trades."
  }
  licenseNumber is String(1, 50) with {
    briefly "License"
    described by "License number."
  }
  licenseExpiry is Date with {
    briefly "Expiry"
    described by "License expiration."
  }
} with {
  briefly "Subcontractor information"
  described by "Basic subcontractor details."
}

type Insurance is {
  insuranceType is String(1, 50) with {
    briefly "Type"
    described by "Insurance type."
  }
  carrier is String(1, 100) with {
    briefly "Carrier"
    described by "Insurance carrier."
  }
  policyNumber is String(1, 50) with {
    briefly "Policy"
    described by "Policy number."
  }
  coverageAmount is Money with {
    briefly "Coverage"
    described by "Coverage amount."
  }
  expiryDate is Date with {
    briefly "Expiry"
    described by "Policy expiration."
  }
} with {
  briefly "Insurance policy"
  described by "Subcontractor insurance."
}

type Subcontract is {
  subcontractId is SubcontractId with {
    briefly "Subcontract ID"
    described by "Subcontract identifier."
  }
  projectId is ProjectId with {
    briefly "Project"
    described by "Project ID."
  }
  trade is Trade with {
    briefly "Trade"
    described by "Contracted trade."
  }
  scope is String(1, 5000) with {
    briefly "Scope"
    described by "Scope of work."
  }
  contractAmount is Money with {
    briefly "Amount"
    described by "Contract amount."
  }
  startDate is Date with {
    briefly "Start"
    described by "Start date."
  }
  endDate is Date with {
    briefly "End"
    described by "End date."
  }
  status is SubcontractStatus with {
    briefly "Status"
    described by "Contract status."
  }
} with {
  briefly "Subcontract"
  described by "Subcontractor agreement."
}

type SubcontractStatus is any of {
  Draft,
  Executed,
  InProgress,
  Complete,
  Terminated
} with {
  briefly "Subcontract status"
  described by "Status of subcontract."
}

type PayApplication is {
  applicationId is UUID with {
    briefly "Application ID"
    described by "Pay application ID."
  }
  subcontractId is SubcontractId with {
    briefly "Subcontract"
    described by "Subcontract ID."
  }
  periodEnd is Date with {
    briefly "Period"
    described by "Period ending date."
  }
  amountRequested is Money with {
    briefly "Requested"
    described by "Amount requested."
  }
  updatedAmountApproved is optional Money with {
    briefly "Approved"
    described by "Amount approved."
  }
  retainage is Money with {
    briefly "Retainage"
    described by "Retainage withheld."
  }
  payAppStatus is PayAppStatus with {
    briefly "Status"
    described by "Application status."
  }
} with {
  briefly "Pay application"
  described by "Subcontractor payment request."
}

type PayAppStatus is any of {
  Submitted,
  UnderReview,
  Approved,
  PartiallyApproved,
  Rejected,
  Paid
} with {
  briefly "Pay app status"
  described by "Status of payment application."
}

type PerformanceRating is {
  category is String(1, 50) with {
    briefly "Category"
    described by "Rating category."
  }
  score is Natural with {
    briefly "Score"
    described by "Rating score 1-5."
  }
  notes is optional String(1, 500) with {
    briefly "Notes"
    described by "Rating notes."
  }
  ratedBy is String(1, 100) with {
    briefly "Rated by"
    described by "Who rated."
  }
  ratedAt is TimeStamp with {
    briefly "Rated at"
    described by "Rating time."
  }
} with {
  briefly "Performance rating"
  described by "Subcontractor performance score."
}
