// Bid Management - Shared Types

type BidId is Id(BidContext.Bid) with {
  briefly "Bid identifier"
  described by "Unique identifier for a bid."
}

type ProjectId is UUID with {
  briefly "Project identifier"
  described by "Reference to a construction project."
}

type ContractorId is UUID with {
  briefly "Contractor identifier"
  described by "Reference to a contractor."
}

type Money is {
  amount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Monetary value."
  }
  currency is Currency(USD) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Monetary value"
  described by "Amount with currency."
}

type BidStatus is any of {
  Draft,
  Submitted,
  UnderReview,
  Shortlisted,
  Awarded,
  Rejected,
  Withdrawn
} with {
  briefly "Bid status"
  described by "Current status of a bid."
}

type BidType is any of {
  LumpSum,
  UnitPrice,
  CostPlus,
  GMP,
  DesignBuild
} with {
  briefly "Bid type"
  described by "Type of bid pricing structure."
}

type RFPStatus is any of {
  Draft,
  Published,
  BiddingOpen,
  BiddingClosed,
  Evaluating,
  Awarded,
  Cancelled
} with {
  briefly "RFP status"
  described by "Status of request for proposal."
}

type RFP is {
  rfpId is UUID with {
    briefly "RFP ID"
    described by "RFP identifier."
  }
  projectId is ProjectId with {
    briefly "Project"
    described by "Associated project."
  }
  title is String(1, 200) with {
    briefly "Title"
    described by "RFP title."
  }
  description is String(1, 5000) with {
    briefly "Description"
    described by "Project description."
  }
  bidType is BidType with {
    briefly "Bid type"
    described by "Required bid type."
  }
  dueDate is Date with {
    briefly "Due date"
    described by "Bid submission deadline."
  }
  status is RFPStatus with {
    briefly "Status"
    described by "RFP status."
  }
  requirements is many BidRequirement with {
    briefly "Requirements"
    described by "Bid requirements."
  }
} with {
  briefly "Request for proposal"
  described by "Construction project RFP."
}

type BidRequirement is {
  category is String(1, 50) with {
    briefly "Category"
    described by "Requirement category."
  }
  description is String(1, 1000) with {
    briefly "Description"
    described by "Requirement description."
  }
  mandatory is Boolean with {
    briefly "Mandatory"
    described by "Whether required."
  }
} with {
  briefly "Bid requirement"
  described by "RFP requirement specification."
}

type BidProposal is {
  proposalId is UUID with {
    briefly "Proposal ID"
    described by "Proposal identifier."
  }
  totalPrice is Money with {
    briefly "Total price"
    described by "Proposed total price."
  }
  lineItems is many LineItem with {
    briefly "Line items"
    described by "Cost breakdown."
  }
  schedule is ProposedSchedule with {
    briefly "Schedule"
    described by "Proposed timeline."
  }
  qualifications is String(1, 5000) with {
    briefly "Qualifications"
    described by "Contractor qualifications."
  }
  exclusions is optional String(1, 2000) with {
    briefly "Exclusions"
    described by "Bid exclusions."
  }
  alternates is many optional Alternate with {
    briefly "Alternates"
    described by "Alternative options."
  }
} with {
  briefly "Bid proposal"
  described by "Contractor bid proposal."
}

type LineItem is {
  description is String(1, 200) with {
    briefly "Description"
    described by "Item description."
  }
  quantity is Decimal(10, 2) with {
    briefly "Quantity"
    described by "Item quantity."
  }
  unit is String(1, 20) with {
    briefly "Unit"
    described by "Unit of measure."
  }
  unitPrice is Money with {
    briefly "Unit price"
    described by "Price per unit."
  }
  totalPrice is Money with {
    briefly "Total"
    described by "Line total."
  }
} with {
  briefly "Line item"
  described by "Cost breakdown line item."
}

type ProposedSchedule is {
  startDate is Date with {
    briefly "Start"
    described by "Proposed start date."
  }
  completionDate is Date with {
    briefly "Completion"
    described by "Proposed completion date."
  }
  milestones is many Milestone with {
    briefly "Milestones"
    described by "Schedule milestones."
  }
} with {
  briefly "Proposed schedule"
  described by "Contractor proposed timeline."
}

type Milestone is {
  name is String(1, 100) with {
    briefly "Name"
    described by "Milestone name."
  }
  targetDate is Date with {
    briefly "Date"
    described by "Target date."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Milestone description."
  }
} with {
  briefly "Milestone"
  described by "Schedule milestone."
}

type Alternate is {
  name is String(1, 100) with {
    briefly "Name"
    described by "Alternate name."
  }
  description is String(1, 1000) with {
    briefly "Description"
    described by "Alternate description."
  }
  priceAdjustment is Money with {
    briefly "Price"
    described by "Price add/deduct."
  }
} with {
  briefly "Alternate"
  described by "Bid alternate option."
}

type BidScore is {
  priceScore is Decimal(5, 2) with {
    briefly "Price"
    described by "Price score."
  }
  qualificationScore is Decimal(5, 2) with {
    briefly "Qualifications"
    described by "Qualification score."
  }
  scheduleScore is Decimal(5, 2) with {
    briefly "Schedule"
    described by "Schedule score."
  }
  totalScore is Decimal(5, 2) with {
    briefly "Total"
    described by "Total weighted score."
  }
  notes is optional String(1, 2000) with {
    briefly "Notes"
    described by "Evaluation notes."
  }
  scoredBy is String(1, 100) with {
    briefly "Scored by"
    described by "Evaluator name."
  }
  scoredAt is TimeStamp with {
    briefly "Scored at"
    described by "Evaluation time."
  }
} with {
  briefly "Bid score"
  described by "Bid evaluation scores."
}
