// Construction Project - Shared Types
type ProjectId is Id(ProjectContext.Project)  with {
  briefly "Project identifier"
  described as {
    |Unique identifier for a project.
  }
}
type TaskId is UUID with {
  briefly "Task identifier"
  described as {
    |Reference to a project task.
  }
}
type Money is {
  amount: Decimal(14,2) with {
    briefly "Amount"
    described as {
      |Monetary value.
    }
  }
  currency: Currency(USD) with {
    briefly "Currency"
    described as {
      |Currency code.
    }
  }
} with {
  briefly "Monetary value"
  described as {
    |Amount with currency.
  }
}
type ProjectStatus is any of {
  Planning,
  Approved,
  InProgress,
  OnHold,
  Completed,
  Cancelled
} with {
  briefly "Project status"
  described as {
    |Current project status.
  }
}
type ProjectPhase is any of {
  Preconstruction,
  SiteWork,
  Foundation,
  Framing,
  MEP,
  Finishes,
  Punchlist,
  Closeout
} with {
  briefly "Project phase"
  described as {
    |Current construction phase.
  }
}
type ProjectInfo is {
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Project name.
    }
  }
  description: String(1,5000) with {
    briefly "Description"
    described as {
      |Project description.
    }
  }
  projectType: String(1,50) with {
    briefly "Type"
    described as {
      |Project type.
    }
  }
  address: String(1,500) with {
    briefly "Address"
    described as {
      |Project address.
    }
  }
  owner: String(1,200) with {
    briefly "Owner"
    described as {
      |Project owner.
    }
  }
} with {
  briefly "Project information"
  described as {
    |Basic project details.
  }
}
type ProjectBudget is {
  totalBudget: Money with {
    briefly "Total"
    described as {
      |Total budget.
    }
  }
  hardCosts: Money with {
    briefly "Hard costs"
    described as {
      |Construction hard costs.
    }
  }
  softCosts: Money with {
    briefly "Soft costs"
    described as {
      |Soft costs.
    }
  }
  contingency: Money with {
    briefly "Contingency"
    described as {
      |Contingency amount.
    }
  }
  spent: Money with {
    briefly "Spent"
    described as {
      |Amount spent to date.
    }
  }
  committed: Money with {
    briefly "Committed"
    described as {
      |Amount committed.
    }
  }
} with {
  briefly "Project budget"
  described as {
    |Project financial summary.
  }
}
type ProjectSchedule is {
  plannedStart: Date with {
    briefly "Planned start"
    described as {
      |Planned start date.
    }
  }
  plannedEnd: Date with {
    briefly "Planned end"
    described as {
      |Planned end date.
    }
  }
  updatedActualStart: Date? with {
    briefly "Actual start"
    described as {
      |Actual start date.
    }
  }
  updatedActualEnd: Date? with {
    briefly "Actual end"
    described as {
      |Actual end date.
    }
  }
  milestones: Milestone+ with {
    briefly "Milestones"
    described as {
      |Project milestones.
    }
  }
} with {
  briefly "Project schedule"
  described as {
    |Project timeline.
  }
}
type Milestone is {
  milestoneId: UUID with {
    briefly "Milestone ID"
    described as {
      |Milestone identifier.
    }
  }
  name: String(1,100) with {
    briefly "Name"
    described as {
      |Milestone name.
    }
  }
  targetDate: Date with {
    briefly "Target"
    described as {
      |Target date.
    }
  }
  actualDate: Date? with {
    briefly "Actual"
    described as {
      |Actual completion date.
    }
  }
  status: MilestoneStatus with {
    briefly "Status"
    described as {
      |Milestone status.
    }
  }
} with {
  briefly "Milestone"
  described as {
    |Project milestone.
  }
}
type MilestoneStatus is any of {
  Pending,
  InProgress,
  Completed,
  Delayed,
  Cancelled
} with {
  briefly "Milestone status"
  described as {
    |Status of milestone.
  }
}
type ProjectTask is {
  taskId: TaskId with {
    briefly "Task ID"
    described as {
      |Task identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Task name.
    }
  }
  taskDescription: String(1,1000)? with {
    briefly "Description"
    described as {
      |Task description.
    }
  }
  phase: ProjectPhase with {
    briefly "Phase"
    described as {
      |Project phase.
    }
  }
  startDate: Date with {
    briefly "Start"
    described as {
      |Start date.
    }
  }
  endDate: Date with {
    briefly "End"
    described as {
      |End date.
    }
  }
  percentComplete: Natural with {
    briefly "Complete"
    described as {
      |Percent complete.
    }
  }
  assignedTo: String(1,100)? with {
    briefly "Assigned"
    described as {
      |Assigned resource.
    }
  }
  predecessors: TaskId* with {
    briefly "Predecessors"
    described as {
      |Predecessor tasks.
    }
  }
} with {
  briefly "Project task"
  described as {
    |Construction task.
  }
}
type ChangeOrder is {
  changeOrderId: UUID with {
    briefly "CO ID"
    described as {
      |Change order ID.
    }
  }
  number: Natural with {
    briefly "Number"
    described as {
      |Change order number.
    }
  }
  description: String(1,2000) with {
    briefly "Description"
    described as {
      |Change description.
    }
  }
  reason: String(1,500) with {
    briefly "Reason"
    described as {
      |Change reason.
    }
  }
  costImpact: Money with {
    briefly "Cost"
    described as {
      |Cost impact.
    }
  }
  scheduleImpact: Integer with {
    briefly "Schedule"
    described as {
      |Schedule impact in days.
    }
  }
  changeOrderStatus: ChangeOrderStatus with {
    briefly "Status"
    described as {
      |Change order status.
    }
  }
  submittedAt: TimeStamp with {
    briefly "Submitted"
    described as {
      |Submission time.
    }
  }
  updatedApprovedAt: TimeStamp? with {
    briefly "Approved"
    described as {
      |Approval time.
    }
  }
} with {
  briefly "Change order"
  described as {
    |Project change order.
  }
}
type ChangeOrderStatus is any of {
  Pending,
  UnderReview,
  Approved,
  Rejected,
  Implemented
} with {
  briefly "Change order status"
  described as {
    |Status of change order.
  }
}
