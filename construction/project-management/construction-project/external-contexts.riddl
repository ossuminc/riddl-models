// Construction Project - External Contexts

// Document Service - Project documents
context DocumentService is {

  command StoreDocument is {
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    documentType is String(1, 50) with { briefly "Type" described by "Document type." }
    fileName is String(1, 200) with { briefly "File" described by "File name." }
    content is String with { briefly "Content" described by "Document content." }
  } with {
    briefly "Store document"
    described by "Stores a project document."
  }

  event DocumentStored is {
    documentId is UUID with { briefly "Document" described by "Document ID." }
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    storedAt is TimeStamp with { briefly "Stored" described by "Storage time." }
  } with {
    briefly "Document was stored"
    described by "Emitted when document is stored."
  }

} with {
  option is external
  briefly "External document service"
  described by "External document management system."
}

// Notification Service - Project communications
context NotificationService is {

  command SendProjectNotification is {
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    notificationType is String(1, 50) with { briefly "Type" described by "Notification type." }
    message is String(1, 2000) with { briefly "Message" described by "Notification message." }
    recipients is many String(1, 100) with { briefly "Recipients" described by "Recipients." }
  } with {
    briefly "Send project notification"
    described by "Sends notification to stakeholders."
  }

  event NotificationSent is {
    notificationId is UUID with { briefly "Notification" described by "Notification ID." }
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    sentAt is TimeStamp with { briefly "Sent" described by "Send time." }
  } with {
    briefly "Notification was sent"
    described by "Emitted when notification is delivered."
  }

} with {
  option is external
  briefly "External notification service"
  described by "External communications service."
}

// Accounting Service - Project financials
context AccountingService is {

  command RecordExpense is {
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    category is String(1, 50) with { briefly "Category" described by "Expense category." }
    expenseAmount is Money with { briefly "Amount" described by "Expense amount." }
    expenseDescription is String(1, 500) with { briefly "Description" described by "Expense description." }
    invoiceNumber is optional String(1, 50) with { briefly "Invoice" described by "Invoice number." }
  } with {
    briefly "Record expense"
    described by "Records a project expense."
  }

  event ExpenseRecorded is {
    expenseId is UUID with { briefly "Expense" described by "Expense ID." }
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    recordedAmount is Money with { briefly "Amount" described by "Expense amount." }
    recordedAt is TimeStamp with { briefly "Recorded" described by "Record time." }
  } with {
    briefly "Expense was recorded"
    described by "Emitted when expense is recorded."
  }

} with {
  option is external
  briefly "External accounting service"
  described by "External financial management system."
}

// Scheduling Service - Resource scheduling
context SchedulingService is {

  command ScheduleResource is {
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    resourceType is String(1, 50) with { briefly "Type" described by "Resource type." }
    resourceId is UUID with { briefly "Resource" described by "Resource ID." }
    startDate is Date with { briefly "Start" described by "Start date." }
    endDate is Date with { briefly "End" described by "End date." }
  } with {
    briefly "Schedule resource"
    described by "Schedules a resource for the project."
  }

  event ResourceScheduled is {
    scheduleId is UUID with { briefly "Schedule" described by "Schedule ID." }
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    resourceId is UUID with { briefly "Resource" described by "Resource ID." }
    scheduledAt is TimeStamp with { briefly "Scheduled" described by "Schedule time." }
  } with {
    briefly "Resource was scheduled"
    described by "Emitted when resource is scheduled."
  }

} with {
  option is external
  briefly "External scheduling service"
  described by "External resource scheduling system."
}
