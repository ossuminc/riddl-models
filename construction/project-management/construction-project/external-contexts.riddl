// Construction Project - External Contexts
// Document Service - Project documents
context DocumentService is {
  command StoreDocument is  {
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    documentType: String(1,50) with {
      briefly "Type"
      described as {
        |Document type.
      }
    }
    fileName: String(1,200) with {
      briefly "File"
      described as {
        |File name.
      }
    }
    content: String with {
      briefly "Content"
      described as {
        |Document content.
      }
    }
  } with {
    briefly "Store document"
    described as {
      |Stores a project document.
    }
  }
  event DocumentStored is  {
    documentId: UUID with {
      briefly "Document"
      described as {
        |Document ID.
      }
    }
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    storedAt: TimeStamp with {
      briefly "Stored"
      described as {
        |Storage time.
      }
    }
  } with {
    briefly "Document was stored"
    described as {
      |Emitted when document is stored.
    }
  }
} with {
  option external()
  briefly "External document service"
  described as {
    |External document management system.
  }
}
// Notification Service - Project communications
context NotificationService is {
  command SendProjectNotification is  {
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    notificationType: String(1,50) with {
      briefly "Type"
      described as {
        |Notification type.
      }
    }
    message: String(1,2000) with {
      briefly "Message"
      described as {
        |Notification message.
      }
    }
    recipients: String(1,100)+ with {
      briefly "Recipients"
      described as {
        |Recipients.
      }
    }
  } with {
    briefly "Send project notification"
    described as {
      |Sends notification to stakeholders.
    }
  }
  event NotificationSent is  {
    notificationId: UUID with {
      briefly "Notification"
      described as {
        |Notification ID.
      }
    }
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    sentAt: TimeStamp with {
      briefly "Sent"
      described as {
        |Send time.
      }
    }
  } with {
    briefly "Notification was sent"
    described as {
      |Emitted when notification is delivered.
    }
  }
} with {
  option external()
  briefly "External notification service"
  described as {
    |External communications service.
  }
}
// Accounting Service - Project financials
context AccountingService is {
  command RecordExpense is  {
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    category: String(1,50) with {
      briefly "Category"
      described as {
        |Expense category.
      }
    }
    expenseAmount: Money with {
      briefly "Amount"
      described as {
        |Expense amount.
      }
    }
    expenseDescription: String(1,500) with {
      briefly "Description"
      described as {
        |Expense description.
      }
    }
    invoiceNumber: String(1,50)? with {
      briefly "Invoice"
      described as {
        |Invoice number.
      }
    }
  } with {
    briefly "Record expense"
    described as {
      |Records a project expense.
    }
  }
  event ExpenseRecorded is  {
    expenseId: UUID with {
      briefly "Expense"
      described as {
        |Expense ID.
      }
    }
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    recordedAmount: Money with {
      briefly "Amount"
      described as {
        |Expense amount.
      }
    }
    recordedAt: TimeStamp with {
      briefly "Recorded"
      described as {
        |Record time.
      }
    }
  } with {
    briefly "Expense was recorded"
    described as {
      |Emitted when expense is recorded.
    }
  }
} with {
  option external()
  briefly "External accounting service"
  described as {
    |External financial management system.
  }
}
// Scheduling Service - Resource scheduling
context SchedulingService is {
  command ScheduleResource is  {
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    resourceType: String(1,50) with {
      briefly "Type"
      described as {
        |Resource type.
      }
    }
    resourceId: UUID with {
      briefly "Resource"
      described as {
        |Resource ID.
      }
    }
    startDate: Date with {
      briefly "Start"
      described as {
        |Start date.
      }
    }
    endDate: Date with {
      briefly "End"
      described as {
        |End date.
      }
    }
  } with {
    briefly "Schedule resource"
    described as {
      |Schedules a resource for the project.
    }
  }
  event ResourceScheduled is  {
    scheduleId: UUID with {
      briefly "Schedule"
      described as {
        |Schedule ID.
      }
    }
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    resourceId: UUID with {
      briefly "Resource"
      described as {
        |Resource ID.
      }
    }
    scheduledAt: TimeStamp with {
      briefly "Scheduled"
      described as {
        |Schedule time.
      }
    }
  } with {
    briefly "Resource was scheduled"
    described as {
      |Emitted when resource is scheduled.
    }
  }
} with {
  option external()
  briefly "External scheduling service"
  described as {
    |External resource scheduling system.
  }
}
