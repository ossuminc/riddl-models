// Job Site Management - Shared Types

type JobSiteId is Id(JobSiteContext.JobSite) with {
  briefly "Job site identifier"
  described by "Unique identifier for a job site."
}

type ProjectId is UUID with {
  briefly "Project identifier"
  described by "Reference to a construction project."
}

type CrewId is UUID with {
  briefly "Crew identifier"
  described by "Reference to a work crew."
}

type WorkerId is UUID with {
  briefly "Worker identifier"
  described by "Reference to a worker."
}

type Location is {
  address is String(1, 500) with {
    briefly "Address"
    described by "Site address."
  }
  latitude is Decimal(9, 6) with {
    briefly "Latitude"
    described by "GPS latitude."
  }
  longitude is Decimal(9, 6) with {
    briefly "Longitude"
    described by "GPS longitude."
  }
} with {
  briefly "Geographic location"
  described by "Site location data."
}

type SiteStatus is any of {
  PreConstruction,
  ActiveConstruction,
  Suspended,
  Completed,
  Closed
} with {
  briefly "Site status"
  described by "Current job site status."
}

type WeatherCondition is any of {
  Clear,
  Cloudy,
  Rain,
  Snow,
  ExtremeHeat,
  ExtremeCold,
  HighWind
} with {
  briefly "Weather condition"
  described by "Weather affecting site operations."
}

type DailyReport is {
  reportId is UUID with {
    briefly "Report ID"
    described by "Report identifier."
  }
  reportDate is Date with {
    briefly "Date"
    described by "Report date."
  }
  weather is WeatherCondition with {
    briefly "Weather"
    described by "Weather conditions."
  }
  workSummary is String(1, 5000) with {
    briefly "Summary"
    described by "Work performed summary."
  }
  laborHours is many LaborEntry with {
    briefly "Labor"
    described by "Labor hours logged."
  }
  issues is many SiteIssue with {
    briefly "Issues"
    described by "Issues encountered."
  }
  submittedBy is String(1, 100) with {
    briefly "Submitted by"
    described by "Report author."
  }
  submittedAt is TimeStamp with {
    briefly "Submitted"
    described by "Submission time."
  }
} with {
  briefly "Daily report"
  described by "Daily site progress report."
}

type LaborEntry is {
  crewId is CrewId with {
    briefly "Crew"
    described by "Crew identifier."
  }
  trade is String(1, 50) with {
    briefly "Trade"
    described by "Trade type."
  }
  workerCount is Natural with {
    briefly "Workers"
    described by "Number of workers."
  }
  hours is Decimal(4, 2) with {
    briefly "Hours"
    described by "Hours worked."
  }
  notes is optional String(1, 500) with {
    briefly "Notes"
    described by "Labor notes."
  }
} with {
  briefly "Labor entry"
  described by "Crew labor hours record."
}

type SiteIssue is {
  issueId is UUID with {
    briefly "Issue ID"
    described by "Issue identifier."
  }
  category is IssueCategory with {
    briefly "Category"
    described by "Issue category."
  }
  description is String(1, 1000) with {
    briefly "Description"
    described by "Issue description."
  }
  severity is IssueSeverity with {
    briefly "Severity"
    described by "Issue severity."
  }
  reportedAt is TimeStamp with {
    briefly "Reported"
    described by "When reported."
  }
  resolvedAt is optional TimeStamp with {
    briefly "Resolved"
    described by "When resolved."
  }
} with {
  briefly "Site issue"
  described by "Job site issue or problem."
}

type IssueCategory is any of {
  SafetyIssue,
  QualityIssue,
  MaterialIssue,
  EquipmentIssue,
  WeatherDelay,
  PermitIssue,
  CoordinationIssue
} with {
  briefly "Issue category"
  described by "Type of site issue."
}

type IssueSeverity is any of {
  Low,
  Medium,
  High,
  Critical
} with {
  briefly "Issue severity"
  described by "Severity level of issue."
}

type SafetyInspection is {
  inspectionId is UUID with {
    briefly "Inspection ID"
    described by "Inspection identifier."
  }
  inspectionDate is Date with {
    briefly "Date"
    described by "Inspection date."
  }
  inspector is String(1, 100) with {
    briefly "Inspector"
    described by "Who performed inspection."
  }
  findings is many SafetyFinding with {
    briefly "Findings"
    described by "Inspection findings."
  }
  overallStatus is InspectionStatus with {
    briefly "Status"
    described by "Overall inspection status."
  }
} with {
  briefly "Safety inspection"
  described by "Site safety inspection record."
}

type SafetyFinding is {
  area is String(1, 100) with {
    briefly "Area"
    described by "Site area inspected."
  }
  observation is String(1, 1000) with {
    briefly "Observation"
    described by "Finding observation."
  }
  compliant is Boolean with {
    briefly "Compliant"
    described by "Compliance status."
  }
  correctiveAction is optional String(1, 500) with {
    briefly "Action"
    described by "Required corrective action."
  }
} with {
  briefly "Safety finding"
  described by "Individual inspection finding."
}

type InspectionStatus is any of {
  Passed,
  PassedWithFindings,
  Failed,
  RequiresFollowUp
} with {
  briefly "Inspection status"
  described by "Result of safety inspection."
}

type Crew is {
  crewId is CrewId with {
    briefly "Crew ID"
    described by "Crew identifier."
  }
  name is String(1, 100) with {
    briefly "Name"
    described by "Crew name."
  }
  trade is String(1, 50) with {
    briefly "Trade"
    described by "Primary trade."
  }
  foreman is String(1, 100) with {
    briefly "Foreman"
    described by "Crew foreman."
  }
  memberCount is Natural with {
    briefly "Members"
    described by "Crew size."
  }
} with {
  briefly "Work crew"
  described by "Construction work crew."
}
