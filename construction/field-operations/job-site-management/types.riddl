// Job Site Management - Shared Types
type JobSiteId is Id(JobSiteContext.JobSite)  with {
  briefly "Job site identifier"
  described as {
    |Unique identifier for a job site.
  }
}
type ProjectId is UUID with {
  briefly "Project identifier"
  described as {
    |Reference to a construction project.
  }
}
type CrewId is UUID with {
  briefly "Crew identifier"
  described as {
    |Reference to a work crew.
  }
}
type WorkerId is UUID with {
  briefly "Worker identifier"
  described as {
    |Reference to a worker.
  }
}
type Location is {
  address: String(1,500) with {
    briefly "Address"
    described as {
      |Site address.
    }
  }
  latitude: Decimal(9,6) with {
    briefly "Latitude"
    described as {
      |GPS latitude.
    }
  }
  longitude: Decimal(9,6) with {
    briefly "Longitude"
    described as {
      |GPS longitude.
    }
  }
} with {
  briefly "Geographic location"
  described as {
    |Site location data.
  }
}
type SiteStatus is any of {
  PreConstruction,
  ActiveConstruction,
  Suspended,
  Completed,
  Closed
} with {
  briefly "Site status"
  described as {
    |Current job site status.
  }
}
type WeatherCondition is any of {
  Clear,
  Cloudy,
  Rain,
  Snow,
  ExtremeHeat,
  ExtremeCold,
  HighWind
} with {
  briefly "Weather condition"
  described as {
    |Weather affecting site operations.
  }
}
type DailyReport is {
  reportId: UUID with {
    briefly "Report ID"
    described as {
      |Report identifier.
    }
  }
  reportDate: Date with {
    briefly "Date"
    described as {
      |Report date.
    }
  }
  weather: WeatherCondition with {
    briefly "Weather"
    described as {
      |Weather conditions.
    }
  }
  workSummary: String(1,5000) with {
    briefly "Summary"
    described as {
      |Work performed summary.
    }
  }
  laborHours: LaborEntry+ with {
    briefly "Labor"
    described as {
      |Labor hours logged.
    }
  }
  issues: SiteIssue+ with {
    briefly "Issues"
    described as {
      |Issues encountered.
    }
  }
  submittedBy: String(1,100) with {
    briefly "Submitted by"
    described as {
      |Report author.
    }
  }
  submittedAt: TimeStamp with {
    briefly "Submitted"
    described as {
      |Submission time.
    }
  }
} with {
  briefly "Daily report"
  described as {
    |Daily site progress report.
  }
}
type LaborEntry is {
  crewId: CrewId with {
    briefly "Crew"
    described as {
      |Crew identifier.
    }
  }
  trade: String(1,50) with {
    briefly "Trade"
    described as {
      |Trade type.
    }
  }
  workerCount: Natural with {
    briefly "Workers"
    described as {
      |Number of workers.
    }
  }
  hours: Decimal(4,2) with {
    briefly "Hours"
    described as {
      |Hours worked.
    }
  }
  notes: String(1,500)? with {
    briefly "Notes"
    described as {
      |Labor notes.
    }
  }
} with {
  briefly "Labor entry"
  described as {
    |Crew labor hours record.
  }
}
type SiteIssue is {
  issueId: UUID with {
    briefly "Issue ID"
    described as {
      |Issue identifier.
    }
  }
  category: IssueCategory with {
    briefly "Category"
    described as {
      |Issue category.
    }
  }
  description: String(1,1000) with {
    briefly "Description"
    described as {
      |Issue description.
    }
  }
  severity: IssueSeverity with {
    briefly "Severity"
    described as {
      |Issue severity.
    }
  }
  reportedAt: TimeStamp with {
    briefly "Reported"
    described as {
      |When reported.
    }
  }
  updatedResolvedAt: TimeStamp? with {
    briefly "Resolved"
    described as {
      |When resolved.
    }
  }
} with {
  briefly "Site issue"
  described as {
    |Job site issue or problem.
  }
}
type IssueCategory is any of {
  SafetyIssue,
  QualityIssue,
  MaterialIssue,
  EquipmentIssue,
  WeatherDelay,
  PermitIssue,
  CoordinationIssue
} with {
  briefly "Issue category"
  described as {
    |Type of site issue.
  }
}
type IssueSeverity is any of {
  Low,
  Medium,
  High,
  Critical
} with {
  briefly "Issue severity"
  described as {
    |Severity level of issue.
  }
}
type SafetyInspection is {
  inspectionId: UUID with {
    briefly "Inspection ID"
    described as {
      |Inspection identifier.
    }
  }
  inspectionDate: Date with {
    briefly "Date"
    described as {
      |Inspection date.
    }
  }
  inspector: String(1,100) with {
    briefly "Inspector"
    described as {
      |Who performed inspection.
    }
  }
  findings: SafetyFinding+ with {
    briefly "Findings"
    described as {
      |Inspection findings.
    }
  }
  overallStatus: InspectionStatus with {
    briefly "Status"
    described as {
      |Overall inspection status.
    }
  }
} with {
  briefly "Safety inspection"
  described as {
    |Site safety inspection record.
  }
}
type SafetyFinding is {
  area: String(1,100) with {
    briefly "Area"
    described as {
      |Site area inspected.
    }
  }
  observation: String(1,1000) with {
    briefly "Observation"
    described as {
      |Finding observation.
    }
  }
  compliant: Boolean with {
    briefly "Compliant"
    described as {
      |Compliance status.
    }
  }
  correctiveAction: String(1,500)? with {
    briefly "Action"
    described as {
      |Required corrective action.
    }
  }
} with {
  briefly "Safety finding"
  described as {
    |Individual inspection finding.
  }
}
type InspectionStatus is any of {
  Passed,
  PassedWithFindings,
  Failed,
  RequiresFollowUp
} with {
  briefly "Inspection status"
  described as {
    |Result of safety inspection.
  }
}
type Crew is {
  crewId: CrewId with {
    briefly "Crew ID"
    described as {
      |Crew identifier.
    }
  }
  name: String(1,100) with {
    briefly "Name"
    described as {
      |Crew name.
    }
  }
  trade: String(1,50) with {
    briefly "Trade"
    described as {
      |Primary trade.
    }
  }
  foreman: String(1,100) with {
    briefly "Foreman"
    described as {
      |Crew foreman.
    }
  }
  memberCount: Natural with {
    briefly "Members"
    described as {
      |Crew size.
    }
  }
} with {
  briefly "Work crew"
  described as {
    |Construction work crew.
  }
}
