// Digital Wallet - Shared Types

type WalletId is Id(WalletContext.Wallet) with {
  briefly "Wallet identifier"
  described by "Unique identifier for a digital wallet."
}

type UserId is UUID with {
  briefly "User identifier"
  described by "Reference to wallet owner."
}

type TransactionId is UUID with {
  briefly "Transaction identifier"
  described by "Reference to a wallet transaction."
}

type PaymentMethodId is UUID with {
  briefly "Payment method identifier"
  described by "Reference to a linked payment method."
}

type WalletStatus is any of {
  Active,
  Suspended,
  Closed,
  PendingVerification
} with {
  briefly "Wallet status"
  described by "Current wallet status."
}

type TransactionType is any of {
  Payment,
  Transfer,
  TopUp,
  Withdrawal,
  Refund,
  Reward
} with {
  briefly "Transaction type"
  described by "Type of wallet transaction."
}

type TransactionStatus is any of {
  Pending,
  Processing,
  Completed,
  Failed,
  Reversed
} with {
  briefly "Transaction status"
  described by "Current transaction status."
}

type PaymentMethodType is any of {
  DebitCard,
  CreditCard,
  BankAccount,
  WalletBalance
} with {
  briefly "Payment method type"
  described by "Type of linked payment method."
}

type CardInfo is {
  last4 is String(4, 4) with {
    briefly "Last 4"
    described by "Last four digits."
  }
  brand is String(1, 20) with {
    briefly "Brand"
    described by "Card brand."
  }
  expiryMonth is Natural with {
    briefly "Expiry month"
    described by "Expiration month."
  }
  expiryYear is Natural with {
    briefly "Expiry year"
    described by "Expiration year."
  }
  cardholderName is String(1, 100) with {
    briefly "Name"
    described by "Cardholder name."
  }
} with {
  briefly "Card information"
  described by "Linked card details."
}

type BankInfo is {
  bankName is String(1, 100) with {
    briefly "Bank"
    described by "Bank name."
  }
  accountLast4 is String(4, 4) with {
    briefly "Last 4"
    described by "Last four of account."
  }
  accountType is String(1, 20) with {
    briefly "Type"
    described by "Account type."
  }
} with {
  briefly "Bank information"
  described by "Linked bank account details."
}

type LinkedPaymentMethod is {
  methodId is PaymentMethodId with {
    briefly "Method ID"
    described by "Payment method identifier."
  }
  methodType is PaymentMethodType with {
    briefly "Type"
    described by "Payment method type."
  }
  isDefault is Boolean with {
    briefly "Default"
    described by "Is default method."
  }
  nickname is optional String(1, 50) with {
    briefly "Nickname"
    described by "User-defined name."
  }
  cardInfo is optional CardInfo with {
    briefly "Card"
    described by "Card details if applicable."
  }
  bankInfo is optional BankInfo with {
    briefly "Bank"
    described by "Bank details if applicable."
  }
  addedAt is TimeStamp with {
    briefly "Added"
    described by "When method was added."
  }
} with {
  briefly "Linked payment method"
  described by "Payment method linked to wallet."
}

type WalletTransaction is {
  transactionId is TransactionId with {
    briefly "Transaction"
    described by "Transaction identifier."
  }
  transactionType is TransactionType with {
    briefly "Type"
    described by "Transaction type."
  }
  amount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Transaction amount."
  }
  currency is String(3, 3) with {
    briefly "Currency"
    described by "Currency code."
  }
  transactionStatus is TransactionStatus with {
    briefly "Transaction Status"
    described by "Transaction status."
  }
  description is optional String(1, 200) with {
    briefly "Description"
    described by "Transaction description."
  }
  createdAt is TimeStamp with {
    briefly "Created"
    described by "Creation time."
  }
} with {
  briefly "Wallet transaction"
  described by "Record of wallet activity."
}

type PaymentDetails is {
  merchantName is String(1, 100) with {
    briefly "Merchant"
    described by "Merchant name."
  }
  paymentMerchantId is optional String(1, 50) with {
    briefly "Merchant ID"
    described by "Merchant identifier."
  }
  amount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Payment amount."
  }
  currency is String(3, 3) with {
    briefly "Currency"
    described by "Currency code."
  }
  reference is optional String(1, 100) with {
    briefly "Reference"
    described by "Payment reference."
  }
} with {
  briefly "Payment details"
  described by "Details of a wallet payment."
}

type TransferDetails is {
  recipientWalletId is WalletId with {
    briefly "Recipient"
    described by "Recipient wallet."
  }
  amount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Transfer amount."
  }
  currency is String(3, 3) with {
    briefly "Currency"
    described by "Currency code."
  }
  note is optional String(1, 200) with {
    briefly "Note"
    described by "Transfer note."
  }
} with {
  briefly "Transfer details"
  described by "P2P transfer information."
}

type TopUpDetails is {
  sourceMethodId is PaymentMethodId with {
    briefly "Source"
    described by "Funding source."
  }
  amount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Top-up amount."
  }
  currency is String(3, 3) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Top-up details"
  described by "Balance top-up information."
}

type WithdrawalDetails is {
  destinationMethodId is PaymentMethodId with {
    briefly "Destination"
    described by "Withdrawal destination."
  }
  amount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Withdrawal amount."
  }
  currency is String(3, 3) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Withdrawal details"
  described by "Balance withdrawal information."
}
