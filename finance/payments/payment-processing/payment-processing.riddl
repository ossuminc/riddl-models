// Payment Processing Domain Model
// Credit card and debit transaction processing
domain PaymentProcessing is {
  author OssumInc is {
    name = "Ossum Inc."
    email = "support@ossuminc.com"
  } with {
    briefly "Domain author"
    described as {
      |Organization maintaining this domain model.
    }
  }
  user Merchant is "business accepting payments" with {
    briefly "Merchant"
    described as {
      |Business processing transactions.
    }
  }
  user Cardholder is "person making payment" with {
    briefly "Cardholder"
    described as {
      |Customer making a purchase.
    }
  }
  user PaymentOperator is "person managing payment operations" with {
    briefly "Payment Operator"
    described as {
      |Person monitoring transactions.
    }
  }
  epic PaymentEpic is {
    user Merchant wants to "to process payments securely" so that "sales are completed reliably"
    case ProcessPayment is {
      user Cardholder wants to "to pay for a purchase with card" so that "the transaction completes smoothly"
      step is "Cardholder presents" "payment card" "to merchant" with {
        briefly "Present card"
        described as {
          |Provide payment.
        }
      }
      step is "System validates" "card details" "and authorization" with {
        briefly "Validate card"
        described as {
          |Check card.
        }
      }
      step send command PaymentContext.Payment.AuthorizePayment from user Merchant to entity PaymentContext.Payment with {
        briefly "Authorize"
        described as {
          |Request authorization.
        }
      }
      step is "System captures" "funds" "from issuing bank" with {
        briefly "Capture funds"
        described as {
          |Complete payment.
        }
      }
    } with {
      briefly "Payment workflow"
      described as {
        |Standard flow for card payments.
      }
    }
  } with {
    briefly "Payment processing"
    described as {
      | Epic covering payment transactions from
      | authorization through settlement.
    }
  }
  include "PaymentContext.riddl"
  include "external-contexts.riddl"
} with {
  briefly "Payment processing domain"
  described as {
    | The PaymentProcessing domain handles credit and debit
    | card transactions including authorization and settlement.
  }
}
