// Order Management - Shared Types

type OrderId is Id(OrderContext.TradingOrder) with {
  briefly "Order identifier"
  described by "Unique identifier for a trading order."
}

type AccountId is UUID with {
  briefly "Account identifier"
  described by "Reference to trading account."
}

type SecurityId is String(1, 20) with {
  briefly "Security identifier"
  described by "Symbol or CUSIP for security."
}

type ExecutionId is UUID with {
  briefly "Execution identifier"
  described by "Reference to an execution/fill."
}

type OrderStatus is any of {
  New,
  PendingNew,
  Accepted,
  PartiallyFilled,
  Filled,
  PendingCancel,
  Canceled,
  Rejected,
  Expired,
  Suspended
} with {
  briefly "Order status"
  described by "Current order status."
}

type OrderType is any of {
  Market,
  Limit,
  Stop,
  StopLimit,
  MarketOnClose,
  LimitOnClose
} with {
  briefly "Order type"
  described by "Type of order."
}

type OrderSide is any of {
  Buy,
  Sell,
  SellShort,
  BuyToCover
} with {
  briefly "Order side"
  described by "Buy or sell direction."
}

type TimeInForce is any of {
  Day,
  GTC,
  IOC,
  FOK,
  GTD,
  OPG,
  CLO
} with {
  briefly "Time in force"
  described by "Order duration instruction."
}

type SecurityType is any of {
  Equity,
  Option,
  Future,
  Bond,
  ETF,
  MutualFund,
  Currency
} with {
  briefly "Security type"
  described by "Type of security."
}

type Exchange is any of {
  NYSE,
  NASDAQ,
  AMEX,
  ARCA,
  BATS,
  IEX,
  CME,
  CBOE
} with {
  briefly "Exchange"
  described by "Trading exchange/venue."
}

type SecurityInfo is {
  securityId is SecurityId with {
    briefly "Security"
    described by "Security identifier."
  }
  securityType is SecurityType with {
    briefly "Type"
    described by "Security type."
  }
  symbol is String(1, 10) with {
    briefly "Symbol"
    described by "Trading symbol."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Security name."
  }
  exchange is Exchange with {
    briefly "Exchange"
    described by "Primary exchange."
  }
} with {
  briefly "Security information"
  described by "Security details."
}

type OrderDetails is {
  accountId is AccountId with {
    briefly "Account"
    described by "Trading account."
  }
  security is SecurityInfo with {
    briefly "Security"
    described by "Security to trade."
  }
  side is OrderSide with {
    briefly "Side"
    described by "Buy or sell."
  }
  orderType is OrderType with {
    briefly "Type"
    described by "Order type."
  }
  quantity is Natural with {
    briefly "Quantity"
    described by "Order quantity."
  }
  limitPrice is optional Decimal(12, 4) with {
    briefly "Limit"
    described by "Limit price."
  }
  stopPrice is optional Decimal(12, 4) with {
    briefly "Stop"
    described by "Stop price."
  }
  timeInForce is TimeInForce with {
    briefly "TIF"
    described by "Time in force."
  }
  goodTilDate is optional Date with {
    briefly "GTD"
    described by "Good til date."
  }
} with {
  briefly "Order details"
  described by "Order specification."
}

type Execution is {
  executionId is ExecutionId with {
    briefly "Execution"
    described by "Execution identifier."
  }
  filledQuantity is Natural with {
    briefly "Quantity"
    described by "Filled quantity."
  }
  executionPrice is Decimal(12, 4) with {
    briefly "Price"
    described by "Execution price."
  }
  exchange is Exchange with {
    briefly "Exchange"
    described by "Execution venue."
  }
  executedAt is TimeStamp with {
    briefly "Executed"
    described by "Execution time."
  }
  commission is Decimal(10, 4) with {
    briefly "Commission"
    described by "Trading commission."
  }
  fees is Decimal(10, 4) with {
    briefly "Fees"
    described by "Exchange fees."
  }
} with {
  briefly "Execution"
  described by "Trade execution/fill."
}

type OrderAmendment is {
  newQuantity is optional Natural with {
    briefly "Quantity"
    described by "New quantity."
  }
  newLimitPrice is optional Decimal(12, 4) with {
    briefly "Limit"
    described by "New limit price."
  }
  newStopPrice is optional Decimal(12, 4) with {
    briefly "Stop"
    described by "New stop price."
  }
} with {
  briefly "Order amendment"
  described by "Order modification details."
}

type CancelReason is any of {
  UserRequested,
  Expired,
  RiskLimit,
  ComplianceBlock,
  BrokerAction,
  SystemError
} with {
  briefly "Cancel reason"
  described by "Reason for cancellation."
}

type RejectReason is {
  code is String(1, 10) with {
    briefly "Code"
    described by "Rejection code."
  }
  message is String(1, 500) with {
    briefly "Message"
    described by "Rejection message."
  }
} with {
  briefly "Reject reason"
  described by "Order rejection details."
}

type RiskCheck is {
  passed is Boolean with {
    briefly "Passed"
    described by "Risk check passed."
  }
  checkType is String(1, 50) with {
    briefly "Type"
    described by "Check type."
  }
  checkMessage is optional String(1, 200) with {
    briefly "Check Message"
    described by "Check result message."
  }
} with {
  briefly "Risk check"
  described by "Risk validation result."
}
