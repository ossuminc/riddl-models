// Trade Settlement Domain Model
// Post-trade clearing and settlement processing
domain TradeSettlement is {
  author OssumInc is {
    name = "Ossum Inc."
    email = "support@ossuminc.com"
  } with {
    briefly "Domain author"
    described as {
      |Organization maintaining this domain model.
    }
  }
  user SettlementOperator is "person managing settlement operations" with {
    briefly "Settlement Operator"
    described as {
      |Person processing trade settlements.
    }
  }
  user ReconciliationAnalyst is "person handling trade breaks" with {
    briefly "Reconciliation Analyst"
    described as {
      |Person resolving settlement discrepancies.
    }
  }
  user CustodianManager is "person managing custody relationships" with {
    briefly "Custodian Manager"
    described as {
      |Person overseeing custodian interactions.
    }
  }
  epic SettlementEpic is {
    user SettlementOperator wants to "to settle trades efficiently" so that "positions and cash are exchanged correctly"
    case SettleTrade is {
      user SettlementOperator wants to "to process a trade for settlement" so that "the transaction completes"
      step is "System receives" "executed trade details" "from OMS" with {
        briefly "Receive trade"
        described as {
          |Get execution.
        }
      }
      step is "System matches" "trade with counterparty" "for affirmation" with {
        briefly "Match trade"
        described as {
          |Confirm details.
        }
      }
      step send command SettlementContext.Settlement.InitiateSettlement from user SettlementOperator to entity SettlementContext.Settlement with {
        briefly "Initiate"
        described as {
          |Start settlement.
        }
      }
      step is "System delivers" "securities vs payment" "to custodian" with {
        briefly "DVP"
        described as {
          |Deliver vs payment.
        }
      }
    } with {
      briefly "Settlement workflow"
      described as {
        |Standard trade settlement process.
      }
    }
  } with {
    briefly "Trade settlement"
    described as {
      | Epic covering trade settlement from execution
      | through clearing, matching, and final settlement.
    }
  }
  include "SettlementContext.riddl"
  include "external-contexts.riddl"
} with {
  briefly "Trade settlement domain"
  described as {
    | The TradeSettlement domain handles post-trade processing
    | including clearing, matching, and DVP settlement.
  }
}
