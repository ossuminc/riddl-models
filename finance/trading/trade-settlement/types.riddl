// Trade Settlement - Shared Types
type SettlementId is Id(SettlementContext.Settlement)  with {
  briefly "Settlement identifier"
  described as {
    |Unique identifier for a settlement.
  }
}
type TradeId is UUID with {
  briefly "Trade identifier"
  described as {
    |Reference to executed trade.
  }
}
type AccountId is UUID with {
  briefly "Account identifier"
  described as {
    |Reference to trading account.
  }
}
type CounterpartyId is UUID with {
  briefly "Counterparty identifier"
  described as {
    |Reference to trading counterparty.
  }
}
type CustodianId is UUID with {
  briefly "Custodian identifier"
  described as {
    |Reference to custodian bank.
  }
}
type SecurityId is String(1,20) with {
  briefly "Security identifier"
  described as {
    |Symbol or CUSIP for security.
  }
}
type SettlementStatus is any of {
  Pending,
  Matched,
  Affirmed,
  ReadyToSettle,
  InstructionsDispatched,
  PartiallySettled,
  Settled,
  Failed,
  Canceled,
  OnHold
} with {
  briefly "Settlement status"
  described as {
    |Current settlement status.
  }
}
type SettlementType is any of {
  DVP,
  FOP,
  RVP,
  DFP
} with {
  briefly "Settlement type"
  described as {
    |Delivery vs payment type.
  }
}
type FailReason is any of {
  InsufficientSecurities,
  InsufficientFunds,
  CounterpartyFail,
  CustodianIssue,
  InstructionError,
  Regulatory,
  SystemError
} with {
  briefly "Fail reason"
  described as {
    |Settlement failure reason.
  }
}
type TradeDetails is {
  tradeId: TradeId with {
    briefly "Trade"
    described as {
      |Trade identifier.
    }
  }
  tradeDate: Date with {
    briefly "Trade date"
    described as {
      |Date of execution.
    }
  }
  settlementDate: Date with {
    briefly "Settlement date"
    described as {
      |Expected settlement date.
    }
  }
  securityId: SecurityId with {
    briefly "Security"
    described as {
      |Security identifier.
    }
  }
  quantity: Natural with {
    briefly "Quantity"
    described as {
      |Trade quantity.
    }
  }
  price: Decimal(12,4) with {
    briefly "Price"
    described as {
      |Trade price.
    }
  }
  grossAmount: Decimal(15,2) with {
    briefly "Gross"
    described as {
      |Gross trade value.
    }
  }
  netAmount: Decimal(15,2) with {
    briefly "Net"
    described as {
      |Net settlement amount.
    }
  }
  buyerAccountId: AccountId with {
    briefly "Buyer"
    described as {
      |Buyer account.
    }
  }
  sellerAccountId: AccountId with {
    briefly "Seller"
    described as {
      |Seller account.
    }
  }
  settlementType: SettlementType with {
    briefly "Type"
    described as {
      |Settlement type.
    }
  }
} with {
  briefly "Trade details"
  described as {
    |Executed trade information.
  }
}
type MatchingInfo is {
  matchedWith: CounterpartyId with {
    briefly "Counterparty"
    described as {
      |Matched counterparty.
    }
  }
  matchedAt: TimeStamp with {
    briefly "Matched"
    described as {
      |Match time.
    }
  }
  matchType: String(1,20) with {
    briefly "Match type"
    described as {
      |Type of match.
    }
  }
  discrepancies: String(1,200)* with {
    briefly "Discrepancies"
    described as {
      |Match discrepancies.
    }
  }
} with {
  briefly "Matching info"
  described as {
    |Trade matching details.
  }
}
type SettlementInstruction is {
  instructionId: UUID with {
    briefly "Instruction"
    described as {
      |Instruction identifier.
    }
  }
  custodianId: CustodianId with {
    briefly "Custodian"
    described as {
      |Target custodian.
    }
  }
  instructionType: String(1,20) with {
    briefly "Type"
    described as {
      |Instruction type.
    }
  }
  securityId: SecurityId with {
    briefly "Security"
    described as {
      |Security to deliver/receive.
    }
  }
  quantity: Natural with {
    briefly "Quantity"
    described as {
      |Quantity to move.
    }
  }
  amount: Decimal(15,2) with {
    briefly "Amount"
    described as {
      |Cash amount.
    }
  }
  valueDate: Date with {
    briefly "Value date"
    described as {
      |Settlement value date.
    }
  }
} with {
  briefly "Settlement instruction"
  described as {
    |Custodian settlement instruction.
  }
}
type SettlementConfirmation is {
  confirmationId: UUID with {
    briefly "Confirmation"
    described as {
      |Confirmation identifier.
    }
  }
  settledQuantity: Natural with {
    briefly "Quantity"
    described as {
      |Settled quantity.
    }
  }
  settledAmount: Decimal(15,2) with {
    briefly "Amount"
    described as {
      |Settled amount.
    }
  }
  settledAt: TimeStamp with {
    briefly "Settled"
    described as {
      |Settlement time.
    }
  }
  custodianReference: String(1,50) with {
    briefly "Reference"
    described as {
      |Custodian reference.
    }
  }
} with {
  briefly "Settlement confirmation"
  described as {
    |Settlement completion confirmation.
  }
}
type FailureInfo is {
  failReason: FailReason with {
    briefly "Reason"
    described as {
      |Failure reason.
    }
  }
  failedAt: TimeStamp with {
    briefly "Failed"
    described as {
      |Failure time.
    }
  }
  details: String(1,500) with {
    briefly "Details"
    described as {
      |Failure details.
    }
  }
  pendingQuantity: Natural with {
    briefly "Pending"
    described as {
      |Quantity not settled.
    }
  }
  pendingAmount: Decimal(15,2) with {
    briefly "Amount"
    described as {
      |Amount not settled.
    }
  }
} with {
  briefly "Failure info"
  described as {
    |Settlement failure details.
  }
}
