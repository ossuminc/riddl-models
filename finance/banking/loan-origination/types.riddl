// Loan Origination - Shared Types

type LoanId is Id(LoanContext.Loan) with {
  briefly "Loan identifier"
  described by "Unique identifier for a loan application."
}

type BorrowerId is UUID with {
  briefly "Borrower identifier"
  described by "Reference to borrower."
}

type DocumentId is UUID with {
  briefly "Document identifier"
  described by "Reference to uploaded document."
}

type LoanStatus is any of {
  Draft,
  Submitted,
  InReview,
  DocumentsRequired,
  Underwriting,
  Approved,
  ConditionallyApproved,
  Declined,
  AcceptedByBorrower,
  Closing,
  Funded,
  Withdrawn,
  Expired
} with {
  briefly "Loan status"
  described by "Current loan application status."
}

type LoanType is any of {
  PersonalLoan,
  AutoLoan,
  Mortgage,
  HomeEquity,
  StudentLoan,
  BusinessLoan,
  LineOfCredit
} with {
  briefly "Loan type"
  described by "Type of loan product."
}

type RepaymentFrequency is any of {
  Weekly,
  BiWeekly,
  SemiMonthly,
  Monthly
} with {
  briefly "Repayment frequency"
  described by "Payment schedule frequency."
}

type DocumentType is any of {
  IdentityProof,
  IncomeProof,
  EmploymentVerification,
  BankStatement,
  TaxReturn,
  PropertyAppraisal,
  TitleReport,
  InsuranceProof
} with {
  briefly "Document type"
  described by "Type of required document."
}

type DocumentStatus is any of {
  Required,
  Uploaded,
  UnderReview,
  Accepted,
  Rejected
} with {
  briefly "Document status"
  described by "Current document status."
}

type BorrowerInfo is {
  borrowerId is BorrowerId with {
    briefly "Borrower"
    described by "Borrower identifier."
  }
  firstName is String(1, 100) with {
    briefly "First name"
    described by "Borrower first name."
  }
  lastName is String(1, 100) with {
    briefly "Last name"
    described by "Borrower last name."
  }
  email is String(5, 254) with {
    briefly "Email"
    described by "Contact email."
  }
  phone is String(10, 15) with {
    briefly "Phone"
    described by "Contact phone."
  }
  ssn is String(9, 9) with {
    briefly "SSN"
    described by "Social security number."
  }
  dateOfBirth is Date with {
    briefly "DOB"
    described by "Date of birth."
  }
  annualIncome is Decimal(12, 2) with {
    briefly "Income"
    described by "Annual income."
  }
  employmentStatus is String(1, 50) with {
    briefly "Employment"
    described by "Employment status."
  }
  currentEmployer is optional String(1, 200) with {
    briefly "Current Employer"
    described by "Employer name."
  }
} with {
  briefly "Borrower information"
  described by "Core borrower details."
}

type LoanRequest is {
  loanType is LoanType with {
    briefly "Type"
    described by "Loan type."
  }
  requestedAmount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Requested loan amount."
  }
  requestedTerm is Natural with {
    briefly "Term"
    described by "Requested term in months."
  }
  purpose is String(1, 200) with {
    briefly "Purpose"
    described by "Loan purpose."
  }
  repaymentFrequency is RepaymentFrequency with {
    briefly "Frequency"
    described by "Repayment frequency."
  }
} with {
  briefly "Loan request"
  described by "Loan request details."
}

type LoanTerms is {
  approvedAmount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Approved loan amount."
  }
  interestRate is Decimal(6, 4) with {
    briefly "Rate"
    described by "Annual interest rate."
  }
  termMonths is Natural with {
    briefly "Term"
    described by "Loan term in months."
  }
  monthlyPayment is Decimal(10, 2) with {
    briefly "Payment"
    described by "Monthly payment amount."
  }
  apr is Decimal(6, 4) with {
    briefly "APR"
    described by "Annual percentage rate."
  }
  totalInterest is Decimal(12, 2) with {
    briefly "Total interest"
    described by "Total interest over term."
  }
  totalRepayment is Decimal(12, 2) with {
    briefly "Total repayment"
    described by "Total amount to repay."
  }
  firstPaymentDate is Date with {
    briefly "First payment"
    described by "First payment due date."
  }
} with {
  briefly "Loan terms"
  described by "Approved loan terms."
}

type LoanDocument is {
  documentId is DocumentId with {
    briefly "Document"
    described by "Document identifier."
  }
  documentType is DocumentType with {
    briefly "Type"
    described by "Document type."
  }
  fileName is String(1, 200) with {
    briefly "File"
    described by "File name."
  }
  documentStatus is DocumentStatus with {
    briefly "Document Status"
    described by "Document status."
  }
  documentUploadedAt is optional TimeStamp with {
    briefly "Uploaded"
    described by "Upload time."
  }
  documentReviewedAt is optional TimeStamp with {
    briefly "Reviewed"
    described by "Review time."
  }
  rejectionReason is optional String(1, 500) with {
    briefly "Rejection"
    described by "Rejection reason."
  }
} with {
  briefly "Loan document"
  described by "Document associated with loan."
}

type ClosingDetails is {
  closingDate is Date with {
    briefly "Closing date"
    described by "Scheduled closing date."
  }
  fundingAmount is Decimal(12, 2) with {
    briefly "Funding"
    described by "Amount to be funded."
  }
  closingCosts is Decimal(10, 2) with {
    briefly "Closing costs"
    described by "Total closing costs."
  }
  disbursementAccount is String(1, 50) with {
    briefly "Account"
    described by "Disbursement account."
  }
} with {
  briefly "Closing details"
  described by "Loan closing information."
}

type FundingInfo is {
  fundedAmount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Funded amount."
  }
  fundedAt is TimeStamp with {
    briefly "Funded"
    described by "Funding time."
  }
  disbursementReference is String(1, 50) with {
    briefly "Reference"
    described by "Disbursement reference."
  }
} with {
  briefly "Funding info"
  described by "Loan funding details."
}
