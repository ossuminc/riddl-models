// Credit Decisioning - Shared Types

type DecisionId is Id(DecisionContext.Decision) with {
  briefly "Decision identifier"
  described by "Unique identifier for a credit decision."
}

type ApplicationId is UUID with {
  briefly "Application identifier"
  described by "Reference to loan application."
}

type ApplicantId is UUID with {
  briefly "Applicant identifier"
  described by "Reference to credit applicant."
}

type DecisionStatus is any of {
  Pending,
  InReview,
  AutoApproved,
  AutoDeclined,
  ManualReview,
  Approved,
  Declined,
  Expired
} with {
  briefly "Decision status"
  described by "Current decision status."
}

type ProductType is any of {
  PersonalLoan,
  AutoLoan,
  Mortgage,
  CreditCard,
  LineOfCredit,
  BusinessLoan
} with {
  briefly "Product type"
  described by "Type of credit product."
}

type RiskTier is any of {
  SuperPrime,
  Prime,
  NearPrime,
  Subprime,
  DeepSubprime
} with {
  briefly "Risk tier"
  described by "Credit risk classification."
}

type DecisionOutcome is any of {
  Approved,
  ApprovedWithConditions,
  CounterOffer,
  Declined,
  ReferToUnderwriterOutcome
} with {
  briefly "Decision outcome"
  described by "Result of credit decision."
}

type ApplicantInfo is {
  applicantId is ApplicantId with {
    briefly "Applicant"
    described by "Applicant identifier."
  }
  firstName is String(1, 100) with {
    briefly "First name"
    described by "Applicant first name."
  }
  lastName is String(1, 100) with {
    briefly "Last name"
    described by "Applicant last name."
  }
  ssn is String(9, 9) with {
    briefly "SSN"
    described by "Social security number."
  }
  dateOfBirth is Date with {
    briefly "DOB"
    described by "Date of birth."
  }
  annualIncome is Decimal(12, 2) with {
    briefly "Income"
    described by "Annual income."
  }
  employmentStatus is String(1, 50) with {
    briefly "Employment"
    described by "Employment status."
  }
  employmentYears is Natural with {
    briefly "Years employed"
    described by "Years at current employer."
  }
} with {
  briefly "Applicant information"
  described by "Core applicant details."
}

type CreditRequest is {
  productType is ProductType with {
    briefly "Product"
    described by "Credit product type."
  }
  requestedAmount is Decimal(12, 2) with {
    briefly "Amount"
    described by "Requested credit amount."
  }
  requestedTerm is Natural with {
    briefly "Term"
    described by "Requested term in months."
  }
  purpose is optional String(1, 200) with {
    briefly "Purpose"
    described by "Loan purpose."
  }
} with {
  briefly "Credit request"
  described by "Credit request details."
}

type CreditBureauData is {
  bureauName is String(1, 50) with {
    briefly "Bureau"
    described by "Credit bureau name."
  }
  creditScore is Natural with {
    briefly "Score"
    described by "Credit score."
  }
  scoreDate is Date with {
    briefly "Score date"
    described by "Date of score."
  }
  totalAccounts is Natural with {
    briefly "Accounts"
    described by "Total credit accounts."
  }
  openAccounts is Natural with {
    briefly "Open"
    described by "Open accounts."
  }
  totalBalance is Decimal(12, 2) with {
    briefly "Balance"
    described by "Total outstanding balance."
  }
  utilizationRate is Decimal(5, 4) with {
    briefly "Utilization"
    described by "Credit utilization rate."
  }
  delinquencies30 is Natural with {
    briefly "30 day"
    described by "30-day delinquencies."
  }
  delinquencies60 is Natural with {
    briefly "60 day"
    described by "60-day delinquencies."
  }
  delinquencies90 is Natural with {
    briefly "90 day"
    described by "90-day delinquencies."
  }
  bankruptcies is Natural with {
    briefly "Bankruptcies"
    described by "Bankruptcy count."
  }
  inquiries is Natural with {
    briefly "Inquiries"
    described by "Recent credit inquiries."
  }
} with {
  briefly "Credit bureau data"
  described by "Credit report data."
}

type CreditScore is {
  internalScore is Natural with {
    briefly "Internal"
    described by "Internal risk score."
  }
  bureauScore is Natural with {
    briefly "Bureau"
    described by "Bureau credit score."
  }
  riskTier is RiskTier with {
    briefly "Tier"
    described by "Risk tier."
  }
  probabilityOfDefault is Decimal(5, 4) with {
    briefly "PD"
    described by "Probability of default."
  }
  expectedLoss is Decimal(12, 2) with {
    briefly "EL"
    described by "Expected loss."
  }
} with {
  briefly "Credit score"
  described by "Calculated credit scores."
}

type DecisionResult is {
  outcome is DecisionOutcome with {
    briefly "Outcome"
    described by "Decision outcome."
  }
  approvedAmount is optional Decimal(12, 2) with {
    briefly "Amount"
    described by "Approved amount."
  }
  approvedTerm is optional Natural with {
    briefly "Term"
    described by "Approved term."
  }
  interestRate is optional Decimal(6, 4) with {
    briefly "Rate"
    described by "Interest rate."
  }
  declineReasons is many optional String(1, 200) with {
    briefly "Reasons"
    described by "Decline reasons."
  }
  conditions is many optional String(1, 200) with {
    briefly "Conditions"
    described by "Approval conditions."
  }
} with {
  briefly "Decision result"
  described by "Credit decision outcome."
}

type PolicyRule is {
  ruleId is String(1, 50) with {
    briefly "Rule ID"
    described by "Policy rule identifier."
  }
  ruleName is String(1, 100) with {
    briefly "Name"
    described by "Rule name."
  }
  passed is Boolean with {
    briefly "Passed"
    described by "Rule passed."
  }
  message is optional String(1, 200) with {
    briefly "Message"
    described by "Rule result message."
  }
} with {
  briefly "Policy rule"
  described by "Credit policy rule result."
}

type OverrideInfo is {
  overrideBy is String(1, 100) with {
    briefly "Override by"
    described by "Person who overrode."
  }
  reason is String(1, 500) with {
    briefly "Reason"
    described by "Override reason."
  }
  overrideAt is TimeStamp with {
    briefly "Override time"
    described by "When overridden."
  }
} with {
  briefly "Override info"
  described by "Decision override details."
}
