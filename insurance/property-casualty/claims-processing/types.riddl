// Types for Claims Processing Domain

type ClaimId is Id(Claim) with {
  briefly "Unique identifier for a claim"
  described by {
    | A system-generated unique identifier assigned to each claim
    | at the time of filing. Used for tracking and reference throughout
    | the claims lifecycle.
  }
}

type PolicyId is String(1, 50) with {
  briefly "Reference to the insurance policy"
  described by {
    | The unique identifier of the insurance policy under which the
    | claim is being filed. Used to retrieve policy details from the
    | external PolicyService.
  }
}

type AdjusterId is String(1, 50) with {
  briefly "Unique identifier for a claims adjuster"
  described by {
    | Identifies the adjuster assigned to investigate and manage a claim.
    | Used for workload tracking and assignment management.
  }
}

type ClaimStatus is any of {
  StatusFiled with {
    briefly "Claim has been filed"
    described by "Initial claim received but not yet assigned to an adjuster."
  },
  StatusAssigned with {
    briefly "Adjuster has been assigned"
    described by "An adjuster has been assigned to investigate the claim."
  },
  StatusUnderInvestigation with {
    briefly "Investigation in progress"
    described by "Active investigation is underway by the assigned adjuster."
  },
  StatusReserveSet with {
    briefly "Financial reserves established"
    described by "Reserve estimates have been set based on investigation findings."
  },
  StatusPendingApproval with {
    briefly "Awaiting approval decision"
    described by "Investigation complete and awaiting examiner review and decision."
  },
  StatusApproved with {
    briefly "Claim approved for payment"
    described by "Claim has been approved and payment is authorized."
  },
  StatusPaymentIssued with {
    briefly "Payment has been processed"
    described by "Payment has been issued to the claimant or vendor."
  },
  StatusDenied with {
    briefly "Claim has been denied"
    described by "Claim was denied due to policy exclusions or other reasons."
  },
  StatusClosed with {
    briefly "Claim processing complete"
    described by "All claim activities are complete and the claim is closed."
  }
} with {
  briefly "Current status of a claim in the processing lifecycle"
  described by {
    | Represents the discrete states a claim can be in during processing,
    | from initial filing through final closure or denial.
  }
}

type LossType is any of {
  PropertyDamage with {
    briefly "Property damage claim"
    described by "Damage to insured property from covered perils."
  },
  Liability with {
    briefly "Liability claim"
    described by "Third-party claim for damages the insured is liable for."
  },
  BodilyInjury with {
    briefly "Bodily injury claim"
    described by "Physical injury to persons covered under the policy."
  },
  Theft with {
    briefly "Theft claim"
    described by "Loss due to theft or burglary of insured property."
  },
  Fire with {
    briefly "Fire damage claim"
    described by "Damage caused by fire or smoke."
  },
  Water with {
    briefly "Water damage claim"
    described by "Damage from water including floods, leaks, or storms."
  },
  Wind with {
    briefly "Wind damage claim"
    described by "Damage from wind, hurricanes, or tornadoes."
  },
  Collision with {
    briefly "Collision claim"
    described by "Vehicle damage from collision with another vehicle or object."
  },
  Comprehensive with {
    briefly "Comprehensive claim"
    described by "Non-collision vehicle damage such as hail, vandalism, or animals."
  },
  Other with {
    briefly "Other loss type"
    described by "Loss type not classified in standard categories."
  }
} with {
  briefly "Category of loss being claimed"
  described by {
    | Classification of the type of loss reported, which affects
    | coverage determination, investigation procedures, and reserve calculations.
  }
}

type DenialReason is any of {
  NotCovered with {
    briefly "Loss not covered by policy"
    described by "The reported loss is not covered under the policy terms."
  },
  PolicyLapsed with {
    briefly "Policy was not in force"
    described by "The policy was not active at the time of the loss."
  },
  ExclusionApplies with {
    briefly "Policy exclusion applies"
    described by "A specific exclusion in the policy precludes coverage."
  },
  FraudSuspected with {
    briefly "Fraud suspected"
    described by "Claim denied due to suspected fraudulent activity."
  },
  LateReporting with {
    briefly "Reported too late"
    described by "Claim was not reported within the required timeframe."
  },
  InsufficientDocumentation with {
    briefly "Insufficient documentation"
    described by "Required documentation was not provided to support the claim."
  },
  PreExistingCondition with {
    briefly "Pre-existing condition"
    described by "Damage existed prior to the policy effective date."
  },
  Other with {
    briefly "Other denial reason"
    described by "Denial reason not classified in standard categories."
  }
} with {
  briefly "Reason for claim denial"
  described by {
    | Categorization of why a claim was denied, required for
    | compliance reporting and policyholder communication.
  }
}

type ClaimInfo is {
  policyId is PolicyId with {
    briefly "Policy identifier"
    described by "The policy under which the claim is being filed."
  }
  lossDate is Date with {
    briefly "Date of loss"
    described by "When the loss or incident occurred."
  }
  reportDate is Date with {
    briefly "Date reported"
    described by "When the claim was first reported to the insurer."
  }
  lossType is LossType with {
    briefly "Type of loss"
    described by "Classification of the loss being claimed."
  }
  lossDescription is String(1, 2000) with {
    briefly "Loss description"
    described by "Detailed description of what happened and what was damaged."
  }
  lossLocation is String(1, 500) with {
    briefly "Location of loss"
    described by "Address or location where the loss occurred."
  }
  reportedBy is String(1, 100) with {
    briefly "Reported by"
    described by "Name of the person reporting the claim."
  }
  contactPhone is String(1, 20) with {
    briefly "Contact phone"
    described by "Phone number for claim contact."
  }
  contactEmail is String(1, 100) with {
    briefly "Contact email"
    described by "Email address for claim correspondence."
  }
  estimatedLoss is Decimal(12, 2) with {
    briefly "Estimated loss amount"
    described by "Initial estimate of the loss value in dollars."
  }
} with {
  briefly "Core information about a filed claim"
  described by {
    | Contains the essential details captured during the first notice
    | of loss (FNOL) process. This information drives the initial
    | triage and assignment decisions.
  }
}

type CoverageAnalysis is {
  policyId is PolicyId with {
    briefly "Policy identifier"
    described by "The policy being analyzed for coverage."
  }
  coverageConfirmed is Boolean with {
    briefly "Coverage confirmed"
    described by "Whether coverage was confirmed for the loss."
  }
  applicableDeductible is Decimal(10, 2) with {
    briefly "Applicable deductible"
    described by "The deductible amount that applies to this claim."
  }
  coverageLimit is Decimal(12, 2) with {
    briefly "Coverage limit"
    described by "Maximum coverage available for this type of loss."
  }
  exclusionsReviewed is Boolean with {
    briefly "Exclusions reviewed"
    described by "Whether policy exclusions were reviewed."
  }
  exclusionNotes is String(1, 2000) with {
    briefly "Exclusion notes"
    described by "Notes on any applicable exclusions."
  }
  liabilityPercent is Decimal(5, 2) with {
    briefly "Liability percentage"
    described by "Percentage of liability attributable to the insured."
  }
  analysisNotes is String(1, 2000) with {
    briefly "Analysis notes"
    described by "Notes documenting the coverage analysis."
  }
  analyzedBy is AdjusterId with {
    briefly "Analyzed by"
    described by "Adjuster who performed the coverage analysis."
  }
  analyzedDate is Date with {
    briefly "Analysis date"
    described by "Date the coverage analysis was completed."
  }
} with {
  briefly "Results of policy coverage analysis"
  described by {
    | Documents the coverage determination made during claim investigation.
    | Includes policy limits, deductibles, exclusion review, and any
    | liability apportionment for the claim.
  }
}

type PaymentInfo is {
  paymentId is String(1, 50) with {
    briefly "Payment identifier"
    described by "Unique identifier for this payment."
  }
  payeeType is String(1, 50) with {
    briefly "Payee type"
    described by "Type of payee such as policyholder, vendor, or lienholder."
  }
  payeeName is String(1, 200) with {
    briefly "Payee name"
    described by "Name of the person or entity receiving payment."
  }
  paymentAmount is Decimal(12, 2) with {
    briefly "Payment amount"
    described by "Dollar amount of the payment."
  }
  paymentDate is Date with {
    briefly "Payment date"
    described by "Date the payment was issued."
  }
  paymentMethod is String(1, 50) with {
    briefly "Payment method"
    described by "Method of payment such as check, ACH, or wire."
  }
  checkNumber is optional String(1, 50) with {
    briefly "Check number"
    described by "Check number if payment was by check."
  }
  bankAccount is optional String(1, 50) with {
    briefly "Bank account"
    described by "Last four digits of bank account for ACH payments."
  }
  paymentStatus is String(1, 20) with {
    briefly "Payment status"
    described by "Current status of the payment such as issued, cleared, or voided."
  }
} with {
  briefly "Details of a claim payment"
  described by {
    | Records payment information for settled claims including
    | payee details, amount, method, and status. Supports multiple
    | payments per claim for complex settlements.
  }
}

type ReserveInfo is {
  indemnityReserve is Decimal(12, 2) with {
    briefly "Indemnity reserve"
    described by "Estimated payment amount for the loss itself."
  }
  expenseReserve is Decimal(12, 2) with {
    briefly "Expense reserve"
    described by "Estimated costs for investigation and legal expenses."
  }
  totalReserve is Decimal(12, 2) with {
    briefly "Total reserve"
    described by "Sum of indemnity and expense reserves."
  }
  reserveDate is Date with {
    briefly "Reserve date"
    described by "Date the reserve was set or last updated."
  }
  setBy is AdjusterId with {
    briefly "Set by"
    described by "Adjuster who set or updated the reserve."
  }
  reserveNotes is String(1, 2000) with {
    briefly "Reserve notes"
    described by "Notes explaining the reserve calculation."
  }
} with {
  briefly "Financial reserve estimates for a claim"
  described by {
    | Contains the estimated financial exposure for a claim split
    | between indemnity (direct loss payment) and expense (investigation
    | and legal costs) reserves. Critical for financial reporting.
  }
}

type InvestigationNotes is {
  noteDate is Date with {
    briefly "Note date"
    described by "Date the note was recorded."
  }
  noteBy is AdjusterId with {
    briefly "Note by"
    described by "Adjuster who recorded the note."
  }
  noteType is String(1, 50) with {
    briefly "Note type"
    described by "Category of note such as interview, inspection, or document."
  }
  noteText is String(1, 4000) with {
    briefly "Note text"
    described by "Content of the investigation note."
  }
} with {
  briefly "Investigation documentation entry"
  described by {
    | Individual note or finding recorded during claim investigation.
    | Maintains an audit trail of all investigation activities.
  }
}

type ClaimMetrics is {
  claimId is ClaimId with {
    briefly "Claim identifier"
    described by "The claim these metrics apply to."
  }
  daysOpen is Integer with {
    briefly "Days open"
    described by "Number of days the claim has been open."
  }
  touchCount is Integer with {
    briefly "Touch count"
    described by "Number of activities or touches on the claim."
  }
  reserveChanges is Integer with {
    briefly "Reserve changes"
    described by "Number of times reserves were adjusted."
  }
  paymentCount is Integer with {
    briefly "Payment count"
    described by "Number of payments issued on the claim."
  }
  totalPaid is Decimal(12, 2) with {
    briefly "Total paid"
    described by "Total amount paid on the claim."
  }
} with {
  briefly "Operational metrics for a claim"
  described by {
    | Tracks key performance indicators for individual claims
    | including cycle time, activity levels, and financial outcomes.
  }
}

// Query types for ClaimRepository

query FindClaimById is {
  claimId is ClaimId with {
    briefly "Claim identifier"
    described by "The claim to retrieve."
  }
} with {
  briefly "Query to find a claim by its identifier"
  described by "Returns the complete claim record for the given ClaimId."
}

query FindClaimsByPolicy is {
  policyId is PolicyId with {
    briefly "Policy identifier"
    described by "The policy to find claims for."
  }
} with {
  briefly "Query to find all claims for a policy"
  described by "Returns all claims filed against a specific policy."
}

query FindClaimsByAdjuster is {
  adjusterId is AdjusterId with {
    briefly "Adjuster identifier"
    described by "The adjuster to find claims for."
  }
} with {
  briefly "Query to find claims assigned to an adjuster"
  described by "Returns all active claims assigned to the specified adjuster."
}

query FindClaimsByStatus is {
  status is ClaimStatus with {
    briefly "Claim status"
    described by "The status to filter by."
  }
} with {
  briefly "Query to find claims in a specific status"
  described by "Returns claims filtered by their current processing status."
}

query FindOpenClaims is {
  ???
} with {
  briefly "Query to find all open claims"
  described by "Returns all claims that are not in Closed status."
}
