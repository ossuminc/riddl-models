// Types for Member Enrollment Domain

type MemberId is Id(Enrollment) with {
  briefly "Unique identifier for a health plan member"
  described by {
    | A system-generated identifier that uniquely identifies a member
    | across all enrollment records and health plan systems.
  }
}

type EnrollmentId is Id(Enrollment) with {
  briefly "Unique identifier for an enrollment record"
  described by {
    | Identifies a specific enrollment transaction including initial
    | enrollment, plan changes, and terminations.
  }
}

type PlanId is UUID with {
  briefly "Unique identifier for a health plan product"
  described by {
    | References a specific health plan product offered by the payer,
    | including metal tier, network, and coverage details.
  }
}

type EnrollmentStatus is any of {
  StatusInitiated with {
    briefly "Enrollment started"
    described by "Enrollment application has been initiated."
  },
  StatusPlanSelected with {
    briefly "Plan selected"
    described by "Member has selected a health plan."
  },
  StatusEligibilityVerified with {
    briefly "Eligibility verified"
    described by "Member eligibility has been confirmed."
  },
  StatusConfirmed with {
    briefly "Enrollment confirmed"
    described by "Enrollment is confirmed and pending activation."
  },
  StatusActive with {
    briefly "Coverage active"
    described by "Member has active health coverage."
  },
  StatusTerminated with {
    briefly "Coverage terminated"
    described by "Member coverage has been terminated."
  },
  StatusTransferred with {
    briefly "Transferred to new plan"
    described by "Member has transferred to a different plan."
  },
  StatusCancelled with {
    briefly "Enrollment cancelled"
    described by "Enrollment was cancelled before activation."
  }
} with {
  briefly "Current state of an enrollment"
  described by {
    | Tracks the enrollment lifecycle from initiation through
    | confirmation, active coverage, and eventual termination.
  }
}

type Address is {
  street1 is String(1, 100) with {
    briefly "Primary street address"
    described by "Street number and name."
  }
  street2 is optional String(1, 100) with {
    briefly "Secondary street address"
    described by "Apartment, suite, or unit number."
  }
  city is String(1, 50) with {
    briefly "City name"
    described by "City or municipality name."
  }
  stateCode is String(2, 2) with {
    briefly "State code"
    described by "Two-letter state abbreviation."
  }
  zipCode is String(5, 10) with {
    briefly "ZIP code"
    described by "Postal ZIP code, optionally with +4 extension."
  }
  country is String(2, 3) with {
    briefly "Country code"
    described by "ISO country code, defaults to US."
  }
} with {
  briefly "Physical mailing address"
  described by {
    | Standard postal address format used for member correspondence
    | and determining service area eligibility.
  }
}

type MemberInfo is {
  memberId is MemberId with {
    briefly "Member identifier"
    described by "Unique ID for this member."
  }
  firstName is String(1, 50) with {
    briefly "First name"
    described by "Member's first or given name."
  }
  lastName is String(1, 50) with {
    briefly "Last name"
    described by "Member's last or family name."
  }
  dateOfBirth is Date with {
    briefly "Date of birth"
    described by "Member's birth date for age calculation."
  }
  ssn is String(9, 11) with {
    briefly "Social Security Number"
    described by "Member's SSN for eligibility verification."
  }
  email is String(5, 254) with {
    briefly "Email address"
    described by "Primary email for member communications."
  }
  phone is String(10, 15) with {
    briefly "Phone number"
    described by "Primary contact phone number."
  }
  address is Address with {
    briefly "Mailing address"
    described by "Member's primary mailing address."
  }
} with {
  briefly "Personal information for a health plan member"
  described by {
    | Contains demographic and contact information required for
    | enrollment processing and member communications.
  }
}

type MetalTier is any of {
  Bronze with {
    briefly "Bronze tier"
    described by "60% actuarial value, lowest premium, highest cost-sharing."
  },
  Silver with {
    briefly "Silver tier"
    described by "70% actuarial value, moderate premium and cost-sharing."
  },
  Gold with {
    briefly "Gold tier"
    described by "80% actuarial value, higher premium, lower cost-sharing."
  },
  Platinum with {
    briefly "Platinum tier"
    described by "90% actuarial value, highest premium, lowest cost-sharing."
  },
  Catastrophic with {
    briefly "Catastrophic tier"
    described by "Limited to under 30 or hardship exemption."
  }
} with {
  briefly "ACA metal tier classification"
  described by {
    | Standardized plan categories under the Affordable Care Act
    | indicating actuarial value and cost-sharing levels.
  }
}

type PlanSelection is {
  planId is PlanId with {
    briefly "Plan identifier"
    described by "Unique ID of the selected plan."
  }
  planName is String(1, 100) with {
    briefly "Plan name"
    described by "Human-readable name of the health plan."
  }
  metalTier is MetalTier with {
    briefly "Metal tier"
    described by "ACA metal tier of the selected plan."
  }
  effectiveDate is Date with {
    briefly "Effective date"
    described by "Date coverage begins under this plan."
  }
  monthlyPremium is Decimal(8, 2) with {
    briefly "Monthly premium"
    described by "Monthly premium amount before subsidies."
  }
  deductible is Decimal(8, 2) with {
    briefly "Deductible"
    described by "Annual deductible amount."
  }
  outOfPocketMax is Decimal(8, 2) with {
    briefly "Out-of-pocket maximum"
    described by "Annual out-of-pocket maximum."
  }
} with {
  briefly "Selected health plan details"
  described by {
    | Captures the specific health plan chosen by the member including
    | cost sharing parameters and effective date.
  }
}

type QualifyingEvent is any of {
  LossOfCoverage with {
    briefly "Loss of coverage"
    described by "Lost employer or other qualifying coverage."
  },
  Marriage with {
    briefly "Marriage"
    described by "Got married and can add spouse."
  },
  Birth with {
    briefly "Birth of child"
    described by "Had a baby to add to coverage."
  },
  Adoption with {
    briefly "Adoption"
    described by "Adopted a child to add to coverage."
  },
  Divorce with {
    briefly "Divorce"
    described by "Lost coverage due to divorce."
  },
  RelocationToNewServiceArea with {
    briefly "Relocation"
    described by "Moved to a new service area."
  },
  LossOfMedicaidChip with {
    briefly "Lost Medicaid/CHIP"
    described by "Lost Medicaid or CHIP eligibility."
  },
  NewCitizen with {
    briefly "New citizen"
    described by "Became a US citizen or lawful resident."
  },
  ReleaseFromIncarceration with {
    briefly "Release from incarceration"
    described by "Released from incarceration."
  },
  OpenEnrollment with {
    briefly "Open enrollment"
    described by "Annual open enrollment period."
  }
} with {
  briefly "Life event qualifying for special enrollment"
  described by {
    | Events that trigger a Special Enrollment Period outside of
    | the annual Open Enrollment Period.
  }
}

type EnrollmentPeriod is any of {
  PeriodOpenEnrollment with {
    briefly "Open enrollment"
    described by "Annual open enrollment period."
  },
  PeriodSpecialEnrollment with {
    briefly "Special enrollment"
    described by "Special enrollment due to qualifying event."
  },
  PeriodInitialEnrollment with {
    briefly "Initial enrollment"
    described by "First-time enrollment eligibility window."
  },
  PeriodAnnualRenewal with {
    briefly "Annual renewal"
    described by "Renewal of existing coverage."
  }
} with {
  briefly "Type of enrollment window"
  described by {
    | Categorizes the enrollment period which affects deadlines
    | and documentation requirements.
  }
}

type EligibilityInfo is {
  isEligible is Boolean with {
    briefly "Eligibility status"
    described by "Whether the member is eligible to enroll."
  }
  verificationDate is DateTime with {
    briefly "Verification date"
    described by "When eligibility was verified."
  }
  verificationSource is String(1, 50) with {
    briefly "Verification source"
    described by "System or process that verified eligibility."
  }
  qualifyingEvent is optional QualifyingEvent with {
    briefly "Qualifying event"
    described by "Life event qualifying for special enrollment."
  }
  enrollmentPeriod is EnrollmentPeriod with {
    briefly "Enrollment period"
    described by "Type of enrollment period."
  }
  subsidyEligible is Boolean with {
    briefly "Subsidy eligible"
    described by "Whether member qualifies for premium subsidies."
  }
  aptcAmount is optional Decimal(8, 2) with {
    briefly "APTC amount"
    described by "Monthly Advanced Premium Tax Credit amount."
  }
} with {
  briefly "Member eligibility verification details"
  described by {
    | Results of eligibility determination including qualifying life
    | events, enrollment period, and subsidy calculations.
  }
}

type CoverageInfo is {
  enrollmentId is EnrollmentId with {
    briefly "Enrollment ID"
    described by "Reference to the enrollment record."
  }
  memberId is MemberId with {
    briefly "Member ID"
    described by "Reference to the member."
  }
  planSelection is PlanSelection with {
    briefly "Plan selection"
    described by "Selected plan details."
  }
  coverageStartDate is Date with {
    briefly "Coverage start"
    described by "Date coverage began."
  }
  coverageEndDate is optional Date with {
    briefly "Coverage end"
    described by "Date coverage ended, if terminated."
  }
  dependents is many MemberId with {
    briefly "Dependents"
    described by "Member IDs of covered dependents."
  }
  status is EnrollmentStatus with {
    briefly "Status"
    described by "Current enrollment status."
  }
  premiumPaidThrough is optional Date with {
    briefly "Premium paid through"
    described by "Date through which premiums are paid."
  }
} with {
  briefly "Active coverage details for a member"
  described by {
    | Comprehensive coverage record including plan details, dates,
    | dependents, and premium payment status.
  }
}

type TerminationReason is any of {
  MemberRequest with {
    briefly "Member request"
    described by "Member requested termination."
  },
  NonPayment with {
    briefly "Non-payment"
    described by "Coverage terminated due to non-payment."
  },
  DeathOfMember with {
    briefly "Death of member"
    described by "Member passed away."
  },
  LossOfEligibility with {
    briefly "Loss of eligibility"
    described by "Member no longer eligible for coverage."
  },
  PlanDiscontinued with {
    briefly "Plan discontinued"
    described by "Health plan was discontinued."
  },
  FraudulentEnrollment with {
    briefly "Fraudulent enrollment"
    described by "Enrollment found to be fraudulent."
  },
  EmployerTermination with {
    briefly "Employer termination"
    described by "Employer terminated group coverage."
  },
  TransferToOtherPlan with {
    briefly "Transfer to other plan"
    described by "Member transferred to different plan."
  }
} with {
  briefly "Reason for coverage termination"
  described by {
    | Categorizes why coverage ended, which affects retroactivity
    | rules and potential reinstatement options.
  }
}

type TransferInfo is {
  sourceEnrollmentId is EnrollmentId with {
    briefly "Source enrollment"
    described by "Enrollment being transferred from."
  }
  targetPlanId is PlanId with {
    briefly "Target plan"
    described by "Plan being transferred to."
  }
  transferReason is String(1, 200) with {
    briefly "Transfer reason"
    described by "Explanation for the plan transfer."
  }
  effectiveDate is Date with {
    briefly "Effective date"
    described by "Date new plan coverage begins."
  }
  carryOverDeductible is Boolean with {
    briefly "Carry over deductible"
    described by "Whether to transfer accumulator balances."
  }
} with {
  briefly "Details for plan-to-plan transfer"
  described by {
    | Information needed to transfer a member between plans while
    | preserving continuity of coverage and applicable accumulators.
  }
}
