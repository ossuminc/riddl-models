// Types for Member Enrollment Domain
type MemberId is Id(Enrollment)  with {
  briefly "Unique identifier for a health plan member"
  described as {
    | A system-generated identifier that uniquely identifies a member
    | across all enrollment records and health plan systems.
  }
}
type EnrollmentId is Id(Enrollment)  with {
  briefly "Unique identifier for an enrollment record"
  described as {
    | Identifies a specific enrollment transaction including initial
    | enrollment, plan changes, and terminations.
  }
}
type PlanId is UUID with {
  briefly "Unique identifier for a health plan product"
  described as {
    | References a specific health plan product offered by the payer,
    | including metal tier, network, and coverage details.
  }
}
type EnrollmentStatus is any of {
  StatusInitiated,
  StatusPlanSelected,
  StatusEligibilityVerified,
  StatusConfirmed,
  StatusActive,
  StatusTerminated,
  StatusTransferred,
  StatusCancelled
} with {
  briefly "Current state of an enrollment"
  described as {
    | Tracks the enrollment lifecycle from initiation through
    | confirmation, active coverage, and eventual termination.
  }
}
type Address is {
  street1: String(1,100) with {
    briefly "Primary street address"
    described as {
      |Street number and name.
    }
  }
  street2: String(1,100)? with {
    briefly "Secondary street address"
    described as {
      |Apartment, suite, or unit number.
    }
  }
  city: String(1,50) with {
    briefly "City name"
    described as {
      |City or municipality name.
    }
  }
  stateCode: String(2,2) with {
    briefly "State code"
    described as {
      |Two-letter state abbreviation.
    }
  }
  zipCode: String(5,10) with {
    briefly "ZIP code"
    described as {
      |Postal ZIP code, optionally with +4 extension.
    }
  }
  country: String(2,3) with {
    briefly "Country code"
    described as {
      |ISO country code, defaults to US.
    }
  }
} with {
  briefly "Physical mailing address"
  described as {
    | Standard postal address format used for member correspondence
    | and determining service area eligibility.
  }
}
type MemberInfo is {
  memberId: MemberId with {
    briefly "Member identifier"
    described as {
      |Unique ID for this member.
    }
  }
  firstName: String(1,50) with {
    briefly "First name"
    described as {
      |Member's first or given name.
    }
  }
  lastName: String(1,50) with {
    briefly "Last name"
    described as {
      |Member's last or family name.
    }
  }
  dateOfBirth: Date with {
    briefly "Date of birth"
    described as {
      |Member's birth date for age calculation.
    }
  }
  ssn: String(9,11) with {
    briefly "Social Security Number"
    described as {
      |Member's SSN for eligibility verification.
    }
  }
  email: String(5,254) with {
    briefly "Email address"
    described as {
      |Primary email for member communications.
    }
  }
  phone: String(10,15) with {
    briefly "Phone number"
    described as {
      |Primary contact phone number.
    }
  }
  address: Address with {
    briefly "Mailing address"
    described as {
      |Member's primary mailing address.
    }
  }
} with {
  briefly "Personal information for a health plan member"
  described as {
    | Contains demographic and contact information required for
    | enrollment processing and member communications.
  }
}
type MetalTier is any of {
  Bronze,
  Silver,
  Gold,
  Platinum,
  Catastrophic
} with {
  briefly "ACA metal tier classification"
  described as {
    | Standardized plan categories under the Affordable Care Act
    | indicating actuarial value and cost-sharing levels.
  }
}
type PlanSelection is {
  planId: PlanId with {
    briefly "Plan identifier"
    described as {
      |Unique ID of the selected plan.
    }
  }
  planName: String(1,100) with {
    briefly "Plan name"
    described as {
      |Human-readable name of the health plan.
    }
  }
  metalTier: MetalTier with {
    briefly "Metal tier"
    described as {
      |ACA metal tier of the selected plan.
    }
  }
  effectiveDate: Date with {
    briefly "Effective date"
    described as {
      |Date coverage begins under this plan.
    }
  }
  monthlyPremium: Decimal(8,2) with {
    briefly "Monthly premium"
    described as {
      |Monthly premium amount before subsidies.
    }
  }
  deductible: Decimal(8,2) with {
    briefly "Deductible"
    described as {
      |Annual deductible amount.
    }
  }
  outOfPocketMax: Decimal(8,2) with {
    briefly "Out-of-pocket maximum"
    described as {
      |Annual out-of-pocket maximum.
    }
  }
} with {
  briefly "Selected health plan details"
  described as {
    | Captures the specific health plan chosen by the member including
    | cost sharing parameters and effective date.
  }
}
type QualifyingEvent is any of {
  LossOfCoverage,
  Marriage,
  Birth,
  Adoption,
  Divorce,
  RelocationToNewServiceArea,
  LossOfMedicaidChip,
  NewCitizen,
  ReleaseFromIncarceration,
  OpenEnrollment
} with {
  briefly "Life event qualifying for special enrollment"
  described as {
    | Events that trigger a Special Enrollment Period outside of
    | the annual Open Enrollment Period.
  }
}
type EnrollmentPeriod is any of {
  PeriodOpenEnrollment,
  PeriodSpecialEnrollment,
  PeriodInitialEnrollment,
  PeriodAnnualRenewal
} with {
  briefly "Type of enrollment window"
  described as {
    | Categorizes the enrollment period which affects deadlines
    | and documentation requirements.
  }
}
type EligibilityInfo is {
  isEligible: Boolean with {
    briefly "Eligibility status"
    described as {
      |Whether the member is eligible to enroll.
    }
  }
  verificationDate: DateTime with {
    briefly "Verification date"
    described as {
      |When eligibility was verified.
    }
  }
  verificationSource: String(1,50) with {
    briefly "Verification source"
    described as {
      |System or process that verified eligibility.
    }
  }
  qualifyingEvent: QualifyingEvent? with {
    briefly "Qualifying event"
    described as {
      |Life event qualifying for special enrollment.
    }
  }
  enrollmentPeriod: EnrollmentPeriod with {
    briefly "Enrollment period"
    described as {
      |Type of enrollment period.
    }
  }
  subsidyEligible: Boolean with {
    briefly "Subsidy eligible"
    described as {
      |Whether member qualifies for premium subsidies.
    }
  }
  aptcAmount: Decimal(8,2)? with {
    briefly "APTC amount"
    described as {
      |Monthly Advanced Premium Tax Credit amount.
    }
  }
} with {
  briefly "Member eligibility verification details"
  described as {
    | Results of eligibility determination including qualifying life
    | events, enrollment period, and subsidy calculations.
  }
}
type CoverageInfo is {
  enrollmentId: EnrollmentId with {
    briefly "Enrollment ID"
    described as {
      |Reference to the enrollment record.
    }
  }
  memberId: MemberId with {
    briefly "Member ID"
    described as {
      |Reference to the member.
    }
  }
  activePlanSelection: PlanSelection with {
    briefly "Plan selection"
    described as {
      |Selected plan details.
    }
  }
  coverageStartDate: Date with {
    briefly "Coverage start"
    described as {
      |Date coverage began.
    }
  }
  coverageEndDate: Date? with {
    briefly "Coverage end"
    described as {
      |Date coverage ended, if terminated.
    }
  }
  dependents: MemberId+ with {
    briefly "Dependents"
    described as {
      |Member IDs of covered dependents.
    }
  }
  status: EnrollmentStatus with {
    briefly "Status"
    described as {
      |Current enrollment status.
    }
  }
  premiumPaidThrough: Date? with {
    briefly "Premium paid through"
    described as {
      |Date through which premiums are paid.
    }
  }
} with {
  briefly "Active coverage details for a member"
  described as {
    | Comprehensive coverage record including plan details, dates,
    | dependents, and premium payment status.
  }
}
type TerminationReason is any of {
  MemberRequest,
  NonPayment,
  DeathOfMember,
  LossOfEligibility,
  PlanDiscontinued,
  FraudulentEnrollment,
  EmployerTermination,
  TransferToOtherPlan
} with {
  briefly "Reason for coverage termination"
  described as {
    | Categorizes why coverage ended, which affects retroactivity
    | rules and potential reinstatement options.
  }
}
type TransferInfo is {
  sourceEnrollmentId: EnrollmentId with {
    briefly "Source enrollment"
    described as {
      |Enrollment being transferred from.
    }
  }
  targetPlanId: PlanId with {
    briefly "Target plan"
    described as {
      |Plan being transferred to.
    }
  }
  transferReason: String(1,200) with {
    briefly "Transfer reason"
    described as {
      |Explanation for the plan transfer.
    }
  }
  effectiveDate: Date with {
    briefly "Effective date"
    described as {
      |Date new plan coverage begins.
    }
  }
  carryOverDeductible: Boolean with {
    briefly "Carry over deductible"
    described as {
      |Whether to transfer accumulator balances.
    }
  }
} with {
  briefly "Details for plan-to-plan transfer"
  described as {
    | Information needed to transfer a member between plans while
    | preserving continuity of coverage and applicable accumulators.
  }
}
