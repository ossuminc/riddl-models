// Member Enrollment Domain Model
// Healthcare Payer - Member Enrollment Management

domain MemberEnrollment is {

  author OssumInc is {
    name is "Ossum Inc."
    email is "support@ossuminc.com"
    organization is "Ossum Inc."
  } with {
    briefly "Ossum Inc. development team"
    described by {
      | Ossum Inc. provides domain-driven design consulting and
      | tooling for reactive system development.
    }
  }

  user EnrollmentSpecialist is "a staff member who processes enrollment applications" with {
    briefly "Enrollment processing specialist"
    described by {
      | Healthcare payer employee responsible for reviewing and
      | processing member enrollment applications. Verifies
      | eligibility, validates documentation, and confirms
      | enrollments in the system.
    }
  }

  user MemberServices is "a customer service representative assisting members" with {
    briefly "Member services representative"
    described by {
      | Customer service staff who assist members with enrollment
      | questions, plan selection guidance, and coverage inquiries.
      | Acts as primary point of contact for member interactions.
    }
  }

  user BrokerAgent is "a licensed insurance broker or agent" with {
    briefly "Insurance broker or agent"
    described by {
      | External licensed insurance professional who assists
      | individuals and employers with health plan selection and
      | enrollment. Earns commission on enrolled members.
    }
  }

  include "EnrollmentContext.riddl"

  epic HealthPlanEnrollment is {
    user EnrollmentSpecialist wants to "manage member enrollments"
      so that "individuals and groups can obtain health coverage"

    case EnrollIndividualMember is {
      user EnrollmentSpecialist wants to "process a new member enrollment"
        so that "the individual can obtain health coverage"

      step is "Receive enrollment application" "from individual or exchange" "to initiate"
      step is "Verify applicant eligibility" "based on qualifying event" "for enrollment"
      step is "Assist with plan selection" "comparing options" "for coverage"
      step send command InitiateEnrollment from user EnrollmentSpecialist to entity Enrollment
      step is "Confirm subsidy eligibility" "through exchange integration" "for premium assistance"
      step is "Activate coverage" "on requested effective date" "for member"
    } with {
      briefly "Process individual enrollment"
      described by {
        | An Enrollment Specialist receives an enrollment application from
        | an individual seeking health coverage. They verify the applicant's
        | eligibility based on qualifying life event or open enrollment period,
        | help select an appropriate plan, confirm subsidy eligibility through
        | exchange integration, and activate coverage effective on the
        | requested date.
      }
    }

    case EnrollEmployerGroupMember is {
      user EnrollmentSpecialist wants to "enroll an employee in group coverage"
        so that "the employee receives employer-sponsored benefits"

      step is "Receive employee enrollment request" "from employer or employee" "to start"
      step is "Verify employment eligibility" "with employer group" "for coverage"
      step is "Capture dependent information" "if applicable" "for family coverage"
      step send command InitiateEnrollment from user EnrollmentSpecialist to entity Enrollment
      step is "Apply group effective date rules" "per employer contract" "for timing"
      step is "Activate group coverage" "for employee and dependents" "to complete"
    } with {
      briefly "Process employer group enrollment"
      described by {
        | An Enrollment Specialist processes an enrollment for an employee
        | eligible for employer-sponsored health coverage. They verify
        | employment eligibility with the employer group, capture dependent
        | information, and activate coverage according to the group's
        | effective date rules.
      }
    }

    case AssistMemberWithPlanSelection is {
      user MemberServices wants to "help a member choose a health plan"
        so that "the member selects coverage appropriate for their needs"

      step is "Review available plans" "in member's service area" "for options"
      step is "Explain metal tiers" "and cost-sharing levels" "for understanding"
      step is "Compare network options" "and provider access" "for choice"
      step is "Calculate premium costs" "including subsidies if eligible" "for affordability"
      step send command SelectPlan from user MemberServices to entity Enrollment
    } with {
      briefly "Assist with plan selection"
      described by {
        | A Member Services representative assists a member in comparing
        | available health plans. They explain metal tiers, network options,
        | premium costs, and cost-sharing parameters to help the member
        | make an informed decision about their coverage.
      }
    }

    case ProcessBrokerEnrollment is {
      user BrokerAgent wants to "submit an enrollment on behalf of a client"
        so that "the client obtains health coverage through broker assistance"

      step is "Receive broker submission" "with client information" "to process"
      step is "Validate broker credentials" "and appointment status" "for authorization"
      step is "Process enrollment application" "with broker attribution" "for tracking"
      step send command InitiateEnrollment from user BrokerAgent to entity Enrollment
      step is "Record broker information" "for commission tracking" "as required"
    } with {
      briefly "Process broker-assisted enrollment"
      described by {
        | A Broker Agent submits an enrollment application on behalf of
        | their client. The broker has already assisted with plan selection
        | and gathered required documentation. The enrollment is processed
        | with broker attribution for commission tracking.
      }
    }

    case TransferMemberBetweenPlans is {
      user EnrollmentSpecialist wants to "transfer a member to a different plan"
        so that "the member can change coverage without a gap"

      step is "Verify transfer eligibility" "under current rules" "for qualification"
      step is "Review accumulator status" "for potential carryover" "to new plan"
      step is "Process plan change" "with effective date" "for transition"
      step send command TransferEnrollment from user EnrollmentSpecialist to entity Enrollment
      step is "Coordinate accumulator transfer" "if applicable" "for continuity"
      step is "Confirm continuous coverage" "with no gap" "for member protection"
    } with {
      briefly "Transfer between plans"
      described by {
        | An Enrollment Specialist processes a plan transfer for a member
        | changing from one health plan to another. They verify the transfer
        | qualifies under current rules, coordinate accumulator transfers,
        | and ensure continuous coverage during the transition.
      }
    }

    case TerminateMemberCoverage is {
      user EnrollmentSpecialist wants to "terminate a member's coverage"
        so that "coverage ends per member request or eligibility loss"

      step is "Receive termination request" "with reason" "to process"
      step is "Determine termination date" "per regulatory rules" "for compliance"
      step is "Calculate refund if applicable" "for prorated premium" "to member"
      step send command TerminateCoverage from user EnrollmentSpecialist to entity Enrollment
      step is "Generate COBRA notification" "if applicable" "as required"
      step is "Confirm coverage end" "with member communication" "to complete"
    } with {
      briefly "Terminate member coverage"
      described by {
        | An Enrollment Specialist processes a coverage termination due to
        | member request, non-payment, loss of eligibility, or other reason.
        | They determine the appropriate termination date, handle any
        | refund calculations, and ensure proper COBRA notification if
        | applicable.
      }
    }
  } with {
    briefly "Health plan enrollment management"
    described by {
      | Epic covering the complete member enrollment lifecycle for a
      | healthcare payer organization. Includes individual and group
      | enrollment, plan selection assistance, broker-assisted enrollment,
      | plan transfers, and coverage termination.
    }
  }

} with {
  briefly "Health plan member enrollment domain"
  described by {
    | Domain model for healthcare payer member enrollment operations.
    | Manages the complete enrollment lifecycle from initial application
    | through plan selection, eligibility verification, coverage activation,
    | and eventual termination or transfer. Integrates with health
    | insurance exchanges for marketplace enrollments, employer groups
    | for sponsored coverage, and benefits administration for coverage
    | activation. Supports individual, family, and group enrollments
    | across open enrollment and special enrollment periods.
  }
}
