// Types for Nursing Workflow Domain
// Defines core identifiers, enumerations, and record structures
// ============================================================================
// Identifiers
// ============================================================================
type AssignmentId is Id(NursingContext.NurseShift)  with {
  briefly "Unique identifier for a nurse-patient assignment"
  described as {
    |Links a specific nurse to their assigned patients for a shift.
  }
}
type ShiftId is Id(NursingContext.NurseShift)  with {
  briefly "Unique identifier for a nursing shift"
  described as {
    |Identifies a specific shift instance including date, time, and unit.
  }
}
type TaskId is Id(NursingContext.NurseShift)  with {
  briefly "Unique identifier for a nursing task"
  described as {
    |Tracks individual tasks that nurses must complete during their shift.
  }
}
type NurseId is UUID with {
  briefly "Unique identifier for a nurse"
  described as {
    |References a nurse in the staffing system.
  }
}
type PatientId is UUID with {
  briefly "Unique identifier for a patient"
  described as {
    |References a patient in the ADT system.
  }
}
type UnitId is UUID with {
  briefly "Unique identifier for a nursing unit"
  described as {
    |Identifies the hospital unit or ward where care is delivered.
  }
}
// ============================================================================
// Enumerations
// ============================================================================
type ShiftStatus is any of {
  Scheduled,
  Active,
  Handoff,
  Completed
} with {
  briefly "Current status of a nursing shift"
  described as {
    | Tracks the lifecycle of a nursing shift from scheduling through completion.
    | Used to determine what actions are available and what documentation is required.
  }
}
type TaskPriority is any of {
  Stat,
  Urgent,
  Routine,
  PRN
} with {
  briefly "Priority level for nursing tasks"
  described as {
    |Determines the urgency and sequencing of nursing interventions.
  }
}
type TaskStatus is any of {
  Pending,
  InProgress,
  Completed,
  Deferred,
  Cancelled
} with {
  briefly "Current status of a nursing task"
  described as {
    |Tracks task lifecycle for workflow management and compliance.
  }
}
type AssessmentType is any of {
  HeadToToe,
  Focused,
  Pain,
  Fall,
  Skin,
  Neurological
} with {
  briefly "Type of nursing assessment being documented"
  described as {
    |Categorizes assessments for charting requirements and care protocols.
  }
}
// ============================================================================
// Records
// ============================================================================
type NurseAssignment is {
  assignmentId: AssignmentId with {
    briefly "Assignment ID"
    described as {
      |Unique assignment identifier.
    }
  }
  nurseId: NurseId with {
    briefly "Nurse ID"
    described as {
      |Assigned nurse.
    }
  }
  shiftId: ShiftId with {
    briefly "Shift ID"
    described as {
      |Associated shift.
    }
  }
  patientIds: PatientId+ with {
    briefly "Patients"
    described as {
      |Assigned patients.
    }
  }
  unitId: UnitId with {
    briefly "Unit ID"
    described as {
      |Nursing unit.
    }
  }
  assignedAt: TimeStamp with {
    briefly "Assigned time"
    described as {
      |When assignment was made.
    }
  }
  assignedBy: NurseId with {
    briefly "Assigned by"
    described as {
      |Charge nurse making assignment.
    }
  }
  acuityScore: Number with {
    briefly "Acuity score"
    described as {
      |Total acuity for assigned patients.
    }
  }
  notes: String? with {
    briefly "Notes"
    described as {
      |Assignment notes.
    }
  }
} with {
  briefly "Assignment of patients to a nurse for a shift"
  described as {
    | Records the formal assignment of one or more patients to a nurse.
    | Includes acuity scoring to ensure appropriate nurse-patient ratios.
    | The assignedBy field tracks the charge nurse who made the assignment.
  }
}
type NursingTask is {
  taskId: TaskId with {
    briefly "Task ID"
    described as {
      |Unique task identifier.
    }
  }
  shiftId: ShiftId with {
    briefly "Shift ID"
    described as {
      |Associated shift.
    }
  }
  patientId: PatientId with {
    briefly "Patient ID"
    described as {
      |Task patient.
    }
  }
  assignedTo: NurseId with {
    briefly "Assigned to"
    described as {
      |Responsible nurse.
    }
  }
  taskType: String with {
    briefly "Task type"
    described as {
      |Category of task.
    }
  }
  description: String with {
    briefly "Description"
    described as {
      |Task details.
    }
  }
  priority: TaskPriority with {
    briefly "Priority"
    described as {
      |Task priority level.
    }
  }
  status: TaskStatus with {
    briefly "Status"
    described as {
      |Current task status.
    }
  }
  dueTime: TimeStamp? with {
    briefly "Due time"
    described as {
      |When task should be completed.
    }
  }
  taskCompletedAt: TimeStamp? with {
    briefly "Completed at"
    described as {
      |Task completion timestamp.
    }
  }
  taskCompletedBy: NurseId? with {
    briefly "Completed by"
    described as {
      |Nurse who completed task.
    }
  }
  notes: String? with {
    briefly "Notes"
    described as {
      |Task notes.
    }
  }
} with {
  briefly "A discrete nursing intervention or activity"
  described as {
    | Represents a single actionable item for nursing care.
    | Tasks may originate from orders, assessments, protocols, or nursing judgment.
    | Completion is tracked for quality metrics and handoff reporting.
  }
}
type PatientAssessment is {
  assessmentId: UUID with {
    briefly "Assessment ID"
    described as {
      |Unique assessment identifier.
    }
  }
  patientId: PatientId with {
    briefly "Patient ID"
    described as {
      |Assessed patient.
    }
  }
  nurseId: NurseId with {
    briefly "Nurse ID"
    described as {
      |Assessing nurse.
    }
  }
  assessmentType: AssessmentType with {
    briefly "Assessment type"
    described as {
      |Type of assessment performed.
    }
  }
  performedAt: TimeStamp with {
    briefly "Performed at"
    described as {
      |Assessment timestamp.
    }
  }
  findings: String with {
    briefly "Findings"
    described as {
      |Assessment findings.
    }
  }
  abnormalFindings: String? with {
    briefly "Abnormal findings"
    described as {
      |Notable abnormalities.
    }
  }
  interventions: String? with {
    briefly "Interventions"
    described as {
      |Actions taken.
    }
  }
  followUpRequired: Boolean with {
    briefly "Follow-up required"
    described as {
      |Whether follow-up is needed.
    }
  }
  followUpNotes: String? with {
    briefly "Follow-up notes"
    described as {
      |Follow-up details.
    }
  }
} with {
  briefly "Documentation of a nursing assessment"
  described as {
    | Captures the results of a nursing assessment including findings and interventions.
    | Abnormal findings trigger alerts and may generate follow-up tasks.
    | Forms part of the permanent medical record.
  }
}
type VitalSigns is {
  vitalsRecordId: UUID with {
    briefly "Record ID"
    described as {
      |Unique vital signs record identifier.
    }
  }
  patientId: PatientId with {
    briefly "Patient ID"
    described as {
      |Patient measured.
    }
  }
  nurseId: NurseId with {
    briefly "Nurse ID"
    described as {
      |Recording nurse.
    }
  }
  recordedAt: TimeStamp with {
    briefly "Recorded at"
    described as {
      |Measurement timestamp.
    }
  }
  temperature: Number? with {
    briefly "Temperature"
    described as {
      |Body temperature.
    }
  }
  temperatureUnit: String? with {
    briefly "Temperature unit"
    described as {
      |F or C.
    }
  }
  heartRate: Number? with {
    briefly "Heart rate"
    described as {
      |Beats per minute.
    }
  }
  respiratoryRate: Number? with {
    briefly "Respiratory rate"
    described as {
      |Breaths per minute.
    }
  }
  bloodPressureSystolic: Number? with {
    briefly "Systolic BP"
    described as {
      |Systolic blood pressure.
    }
  }
  bloodPressureDiastolic: Number? with {
    briefly "Diastolic BP"
    described as {
      |Diastolic blood pressure.
    }
  }
  oxygenSaturation: Number? with {
    briefly "O2 saturation"
    described as {
      |Oxygen saturation percentage.
    }
  }
  painLevel: Number? with {
    briefly "Pain level"
    described as {
      |Pain scale 0-10.
    }
  }
  supplementalOxygen: Boolean? with {
    briefly "Supplemental O2"
    described as {
      |Whether patient is on oxygen.
    }
  }
  oxygenFlowRate: Number? with {
    briefly "O2 flow rate"
    described as {
      |Liters per minute.
    }
  }
  notes: String? with {
    briefly "Notes"
    described as {
      |Additional observations.
    }
  }
} with {
  briefly "Patient vital signs measurement"
  described as {
    | Records a complete set of vital signs at a point in time.
    | All measurements are optional to support partial documentation.
    | Abnormal values may trigger early warning score calculations.
  }
}
type HandoffReport is {
  reportId: UUID with {
    briefly "Report ID"
    described as {
      |Unique handoff report identifier.
    }
  }
  shiftId: ShiftId with {
    briefly "Shift ID"
    described as {
      |Outgoing shift.
    }
  }
  outgoingNurseId: NurseId with {
    briefly "Outgoing nurse"
    described as {
      |Nurse giving report.
    }
  }
  incomingNurseId: NurseId with {
    briefly "Incoming nurse"
    described as {
      |Nurse receiving report.
    }
  }
  patientId: PatientId with {
    briefly "Patient ID"
    described as {
      |Patient being handed off.
    }
  }
  createdAt: TimeStamp with {
    briefly "Created at"
    described as {
      |Report creation time.
    }
  }
  handoffCompletedAt: TimeStamp? with {
    briefly "Completed at"
    described as {
      |Handoff completion time.
    }
  }
  situation: String with {
    briefly "Situation"
    described as {
      |Current patient situation.
    }
  }
  background: String with {
    briefly "Background"
    described as {
      |Relevant patient history.
    }
  }
  assessment: String with {
    briefly "Assessment"
    described as {
      |Nursing assessment summary.
    }
  }
  recommendation: String with {
    briefly "Recommendation"
    described as {
      |Recommended actions.
    }
  }
  pendingTasks: TaskId* with {
    briefly "Pending tasks"
    described as {
      |Tasks to be transferred.
    }
  }
  acknowledged: Boolean with {
    briefly "Acknowledged"
    described as {
      |Whether incoming nurse acknowledged.
    }
  }
} with {
  briefly "SBAR-formatted shift handoff communication"
  described as {
    | Structured handoff report using SBAR format (Situation, Background,
    | Assessment, Recommendation) to ensure consistent communication.
    | Tracks acknowledgment to confirm information transfer.
    | References pending tasks that transfer to the incoming nurse.
  }
}
type ShiftSummary is {
  shiftId: ShiftId with {
    briefly "Shift ID"
    described as {
      |Shift identifier.
    }
  }
  nurseId: NurseId with {
    briefly "Nurse ID"
    described as {
      |Shift nurse.
    }
  }
  unitId: UnitId with {
    briefly "Unit ID"
    described as {
      |Nursing unit.
    }
  }
  shiftStart: TimeStamp with {
    briefly "Shift start"
    described as {
      |Shift start time.
    }
  }
  shiftEnd: TimeStamp? with {
    briefly "Shift end"
    described as {
      |Shift end time.
    }
  }
  patientCount: Number with {
    briefly "Patient count"
    described as {
      |Number of patients.
    }
  }
  tasksCompleted: Number with {
    briefly "Tasks completed"
    described as {
      |Completed task count.
    }
  }
  tasksDeferred: Number with {
    briefly "Tasks deferred"
    described as {
      |Deferred task count.
    }
  }
  assessmentsPerformed: Number with {
    briefly "Assessments"
    described as {
      |Assessment count.
    }
  }
  criticalEvents: String* with {
    briefly "Critical events"
    described as {
      |Notable events during shift.
    }
  }
} with {
  briefly "Summary statistics for a completed shift"
  described as {
    | Aggregates key metrics from a nursing shift for reporting and analysis.
    | Used for workload analysis, quality improvement, and staffing decisions.
  }
}
