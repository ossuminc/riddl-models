// Operating Room Management Domain Model
// Surgery scheduling, case management, and OR workflow
domain OperatingRoom is {
  author OssumInc is {
    name = "Ossum Inc."
    email = "support@ossuminc.com"
  } with {
    briefly "Domain author"
    described as {
      |Organization maintaining this domain model.
    }
  }
  user ORScheduler is "staff member coordinating OR schedules" with {
    briefly "OR Scheduler"
    described as {
      | Staff responsible for scheduling surgical cases, coordinating
      | room assignments, and managing the surgical block schedule.
    }
  }
  user Surgeon is "physician performing surgical procedures" with {
    briefly "Surgeon"
    described as {
      | Physician responsible for performing surgical procedures,
      | submitting preference cards, and directing the surgical team.
    }
  }
  user Anesthesiologist is "physician providing anesthesia care" with {
    briefly "Anesthesiologist"
    described as {
      | Physician responsible for pre-operative assessment, anesthesia
      | administration, and patient monitoring during surgery.
    }
  }
  user ORNurse is "registered nurse in the operating room" with {
    briefly "OR Nurse"
    described as {
      | Circulating nurse responsible for patient advocacy, documentation,
      | supply management, and team coordination in the OR.
    }
  }
  user SurgicalTech is "surgical technologist assisting in procedures" with {
    briefly "Surgical Technologist"
    described as {
      | Technologist responsible for preparing the sterile field, passing
      | instruments, and maintaining sterile technique during surgery.
    }
  }
  epic SurgerySchedulingEpic is {
    user ORScheduler wants to "to efficiently schedule surgical cases" so that "OR utilization is maximized and surgeons have predictable schedules"
    case ScheduleSurgicalCase is {
      user Surgeon wants to "to schedule a surgical procedure" so that "the patient receives timely surgical care"
      step is "Surgeon submits" "surgical case request" "with procedure details" with {
        briefly "Submit request"
        described as {
          |Surgeon initiates case scheduling.
        }
      }
      step is "ORScheduler reviews" "case requirements" "for room and equipment" with {
        briefly "Review requirements"
        described as {
          |Assess resource needs.
        }
      }
      step send command ORContext.SurgicalCase.ScheduleCase from user ORScheduler to entity ORContext.SurgicalCase with {
        briefly "Schedule case"
        described as {
          |Create scheduled case record.
        }
      }
      step is "ORScheduler coordinates" "with anesthesia" "for coverage" with {
        briefly "Coordinate anesthesia"
        described as {
          |Ensure anesthesia availability.
        }
      }
      step send command ORContext.SurgicalCase.ConfirmCase from user ORScheduler to entity ORContext.SurgicalCase with {
        briefly "Confirm case"
        described as {
          |Finalize case confirmation.
        }
      }
    } with {
      briefly "Schedule surgical case workflow"
      described as {
        |Process for scheduling a new surgical procedure.
      }
    }
    case DayOfSurgeryCase is {
      user ORNurse wants to "to manage patient flow through surgery" so that "cases proceed safely and efficiently"
      step send command ORContext.SurgicalCase.StartPreOp from user ORNurse to entity ORContext.SurgicalCase with {
        briefly "Start pre-op"
        described as {
          |Patient arrives in pre-op holding.
        }
      }
      step is "Anesthesiologist performs" "pre-operative assessment" "and consent" with {
        briefly "Pre-op assessment"
        described as {
          |Anesthesia evaluation.
        }
      }
      step send command ORContext.SurgicalCase.BringToOR from user ORNurse to entity ORContext.SurgicalCase with {
        briefly "Bring to OR"
        described as {
          |Transport patient to operating room.
        }
      }
      step is "SurgicalTech verifies" "sterile supplies" "and instruments" with {
        briefly "Verify supplies"
        described as {
          |Confirm equipment ready.
        }
      }
      step send command ORContext.SurgicalCase.StartSurgery from user Surgeon to entity ORContext.SurgicalCase with {
        briefly "Start surgery"
        described as {
          |Begin surgical procedure.
        }
      }
      step send command ORContext.SurgicalCase.CompleteSurgery from user Surgeon to entity ORContext.SurgicalCase with {
        briefly "Complete surgery"
        described as {
          |End surgical procedure.
        }
      }
      step send command ORContext.SurgicalCase.MoveToRecovery from user ORNurse to entity ORContext.SurgicalCase with {
        briefly "Move to PACU"
        described as {
          |Transport to recovery.
        }
      }
    } with {
      briefly "Day of surgery workflow"
      described as {
        |Patient flow from pre-op through surgery to recovery.
      }
    }
    case CaseManagementCase is {
      user ORScheduler wants to "to manage case changes and cancellations" so that "OR resources are reallocated appropriately"
      step is "ORScheduler receives" "cancellation request" "from surgeon or patient" with {
        briefly "Receive request"
        described as {
          |Cancellation is requested.
        }
      }
      step send command ORContext.SurgicalCase.CancelCase from user ORScheduler to entity ORContext.SurgicalCase with {
        briefly "Cancel case"
        described as {
          |Process case cancellation.
        }
      }
      step is "ORScheduler notifies" "affected staff" "of schedule change" with {
        briefly "Notify staff"
        described as {
          |Alert team members.
        }
      }
      step is "ORScheduler offers" "slot to waitlist" "for utilization" with {
        briefly "Offer slot"
        described as {
          |Fill vacant time slot.
        }
      }
    } with {
      briefly "Case management workflow"
      described as {
        |Process for handling schedule changes and cancellations.
      }
    }
    case RecoveryDischargeCase is {
      user ORNurse wants to "to manage PACU recovery and discharge" so that "patients safely transition from surgery"
      step is "PACU Nurse monitors" "patient recovery" "using Aldrete criteria" with {
        briefly "Monitor recovery"
        described as {
          |Assess readiness for discharge.
        }
      }
      step send command ORContext.SurgicalCase.DischargeFromPACU from user ORNurse to entity ORContext.SurgicalCase with {
        briefly "Discharge PACU"
        described as {
          |Release from recovery.
        }
      }
    } with {
      briefly "PACU recovery workflow"
      described as {
        |Post-operative recovery and discharge process.
      }
    }
  } with {
    briefly "Surgery scheduling and management epic"
    described as {
      | Epic covering the complete surgical case lifecycle from
      | scheduling through surgery to post-operative recovery.
    }
  }
  include "ORContext.riddl"
  include "external-contexts.riddl"
} with {
  briefly "Operating room management domain"
  described as {
    | The OperatingRoom domain handles surgical case scheduling,
    | intraoperative workflow, and perioperative management.
  }
}
