// Operating Room Management - Shared Types
type CaseId is Id(ORContext.SurgicalCase)  with {
  briefly "Surgical case identifier"
  described as {
    |Unique identifier for a surgical case.
  }
}
type RoomId is UUID with {
  briefly "Operating room identifier"
  described as {
    |Unique identifier for an operating room.
  }
}
type SurgeonId is UUID with {
  briefly "Surgeon identifier"
  described as {
    |Reference to the surgeon performing the procedure.
  }
}
type ProcedureId is UUID with {
  briefly "Procedure identifier"
  described as {
    |Reference to the surgical procedure definition.
  }
}
type PatientId is UUID with {
  briefly "Patient identifier"
  described as {
    |Reference to patient record in registration system.
  }
}
type AnesthesiologistId is UUID with {
  briefly "Anesthesiologist identifier"
  described as {
    |Reference to the anesthesiologist assigned to the case.
  }
}
type CaseStatus is any of {
  Scheduled,
  PreOp,
  InOR,
  Surgery,
  Recovery,
  Completed,
  Cancelled
} with {
  briefly "Surgical case status"
  described as {
    |Current status of the surgical case in the perioperative workflow.
  }
}
type CasePriority is any of {
  Elective,
  Urgent,
  Emergent
} with {
  briefly "Case priority"
  described as {
    |Urgency level of the surgical case.
  }
}
type AnesthesiaType is any of {
  General,
  Regional,
  Spinal,
  Epidural,
  LocalWithSedation,
  LocalOnly,
  MAC
} with {
  briefly "Anesthesia type"
  described as {
    |Type of anesthesia planned for the procedure.
  }
}
type CancellationReason is any of {
  PatientRequest,
  MedicalClearanceIssue,
  NoShowPatient,
  EquipmentUnavailable,
  SurgeonUnavailable,
  AnesthesiaUnavailable,
  ORScheduleConflict,
  PatientConditionChange,
  InsuranceIssue,
  Other
} with {
  briefly "Cancellation reason"
  described as {
    |Reason the surgical case was cancelled.
  }
}
type SurgicalCaseInfo is {
  caseId: CaseId with {
    briefly "Case ID"
    described as {
      |Unique surgical case identifier.
    }
  }
  patientId: PatientId with {
    briefly "Patient"
    described as {
      |Patient undergoing surgery.
    }
  }
  primarySurgeonId: SurgeonId with {
    briefly "Primary surgeon"
    described as {
      |Lead surgeon for the procedure.
    }
  }
  procedureId: ProcedureId with {
    briefly "Procedure"
    described as {
      |Planned surgical procedure.
    }
  }
  procedureName: String(1,500) with {
    briefly "Procedure name"
    described as {
      |Description of the surgical procedure.
    }
  }
  diagnosis: String(1,500) with {
    briefly "Diagnosis"
    described as {
      |Indication for surgery.
    }
  }
  priority: CasePriority with {
    briefly "Priority"
    described as {
      |Case urgency level.
    }
  }
  scheduledDate: Date with {
    briefly "Scheduled date"
    described as {
      |Date surgery is scheduled.
    }
  }
  scheduledStartTime: Time with {
    briefly "Start time"
    described as {
      |Planned surgery start time.
    }
  }
  estimatedDuration: Duration with {
    briefly "Duration"
    described as {
      |Expected procedure duration.
    }
  }
  anesthesiaType: AnesthesiaType with {
    briefly "Anesthesia"
    described as {
      |Type of anesthesia required.
    }
  }
  status: CaseStatus with {
    briefly "Status"
    described as {
      |Current case status.
    }
  }
} with {
  briefly "Surgical case information"
  described as {
    |Core information about a scheduled surgical case.
  }
}
type RoomAssignment is {
  roomId: RoomId with {
    briefly "Room"
    described as {
      |Assigned operating room.
    }
  }
  roomName: String(1,50) with {
    briefly "Room name"
    described as {
      |Operating room name or number.
    }
  }
  caseId: CaseId with {
    briefly "Case"
    described as {
      |Assigned surgical case.
    }
  }
  assignedDate: Date with {
    briefly "Date"
    described as {
      |Date of room assignment.
    }
  }
  blockStartTime: Time with {
    briefly "Block start"
    described as {
      |Start time of scheduled block.
    }
  }
  blockEndTime: Time with {
    briefly "Block end"
    described as {
      |End time of scheduled block.
    }
  }
  isBlockTime: Boolean with {
    briefly "Block time"
    described as {
      |Whether this is surgeon block time.
    }
  }
} with {
  briefly "Room assignment"
  described as {
    |Assignment of a surgical case to an operating room.
  }
}
type SurgicalTeam is {
  caseId: CaseId with {
    briefly "Case"
    described as {
      |Surgical case for team assignment.
    }
  }
  primarySurgeonId: SurgeonId with {
    briefly "Primary surgeon"
    described as {
      |Lead surgeon.
    }
  }
  assistingSurgeonIds: SurgeonId* with {
    briefly "Assisting surgeons"
    described as {
      |Additional surgeons assisting.
    }
  }
  anesthesiologistId: AnesthesiologistId with {
    briefly "Anesthesiologist"
    described as {
      |Assigned anesthesiologist.
    }
  }
  circulatingNurseId: UUID with {
    briefly "Circulator"
    described as {
      |Circulating nurse.
    }
  }
  scrubTechId: UUID with {
    briefly "Scrub tech"
    described as {
      |Surgical technologist.
    }
  }
  additionalStaffIds: UUID* with {
    briefly "Additional staff"
    described as {
      |Other team members.
    }
  }
} with {
  briefly "Surgical team"
  described as {
    |Staff assigned to a surgical case.
  }
}
type PreferenceCard is {
  preferenceCardId: UUID with {
    briefly "Card ID"
    described as {
      |Preference card identifier.
    }
  }
  surgeonId: SurgeonId with {
    briefly "Surgeon"
    described as {
      |Surgeon whose preferences are stored.
    }
  }
  procedureId: ProcedureId with {
    briefly "Procedure"
    described as {
      |Procedure this card applies to.
    }
  }
  instrumentSets: String(1,200)+ with {
    briefly "Instruments"
    described as {
      |Required instrument sets.
    }
  }
  supplies: String(1,200)+ with {
    briefly "Supplies"
    described as {
      |Required supplies and materials.
    }
  }
  implants: String(1,200)* with {
    briefly "Implants"
    described as {
      |Required implants if applicable.
    }
  }
  equipment: String(1,200)+ with {
    briefly "Equipment"
    described as {
      |Required specialized equipment.
    }
  }
  roomSetup: String(1,1000) with {
    briefly "Room setup"
    described as {
      |Preferred room configuration.
    }
  }
  positioningPreferences: String(1,500) with {
    briefly "Positioning"
    described as {
      |Patient positioning preferences.
    }
  }
  specialInstructions: String(1,2000)? with {
    briefly "Special instructions"
    described as {
      |Additional surgeon preferences.
    }
  }
} with {
  briefly "Surgeon preference card"
  described as {
    |Surgeon-specific setup preferences for a procedure type.
  }
}
type TurnoverInfo is {
  previousCaseId: CaseId with {
    briefly "Previous case"
    described as {
      |Case that just completed.
    }
  }
  nextCaseId: CaseId with {
    briefly "Next case"
    described as {
      |Upcoming case.
    }
  }
  roomId: RoomId with {
    briefly "Room"
    described as {
      |Operating room being turned over.
    }
  }
  cleaningStartTime: TimeStamp with {
    briefly "Cleaning start"
    described as {
      |When room cleaning began.
    }
  }
  cleaningEndTime: TimeStamp? with {
    briefly "Cleaning end"
    described as {
      |When room cleaning completed.
    }
  }
  setupStartTime: TimeStamp? with {
    briefly "Setup start"
    described as {
      |When next case setup began.
    }
  }
  setupEndTime: TimeStamp? with {
    briefly "Setup end"
    described as {
      |When room is ready for next case.
    }
  }
  totalTurnoverMinutes: Natural? with {
    briefly "Turnover time"
    described as {
      |Total minutes for turnover.
    }
  }
  delayMinutes: Natural? with {
    briefly "Delay"
    described as {
      |Minutes of delay from target.
    }
  }
  delayReason: String(1,500)? with {
    briefly "Delay reason"
    described as {
      |Cause of any turnover delay.
    }
  }
} with {
  briefly "Room turnover information"
  described as {
    |Metrics for room turnover between surgical cases.
  }
}
type CaseTiming is {
  caseId: CaseId with {
    briefly "Case"
    described as {
      |Surgical case identifier.
    }
  }
  preOpArrivalTime: TimeStamp? with {
    briefly "Pre-op arrival"
    described as {
      |When patient arrived in pre-op.
    }
  }
  readyForORTime: TimeStamp? with {
    briefly "Ready for OR"
    described as {
      |When patient was cleared for OR.
    }
  }
  actualInRoomTime: TimeStamp? with {
    briefly "In room"
    described as {
      |When patient entered OR.
    }
  }
  anesthesiaStartTime: TimeStamp? with {
    briefly "Anesthesia start"
    described as {
      |When anesthesia induction began.
    }
  }
  procedureStartTime: TimeStamp? with {
    briefly "Procedure start"
    described as {
      |When incision or procedure began.
    }
  }
  procedureEndTime: TimeStamp? with {
    briefly "Procedure end"
    described as {
      |When procedure completed.
    }
  }
  anesthesiaEndTime: TimeStamp? with {
    briefly "Anesthesia end"
    described as {
      |When anesthesia concluded.
    }
  }
  outOfRoomTime: TimeStamp? with {
    briefly "Out of room"
    described as {
      |When patient left OR.
    }
  }
  pacuArrivalTime: TimeStamp? with {
    briefly "PACU arrival"
    described as {
      |When patient arrived in PACU.
    }
  }
  pacuDischargeTime: TimeStamp? with {
    briefly "PACU discharge"
    described as {
      |When patient was discharged from PACU.
    }
  }
} with {
  briefly "Case timing metrics"
  described as {
    |Timestamps tracking case progression through perioperative phases.
  }
}
