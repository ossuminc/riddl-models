// Operating Room Management - Shared Types

type CaseId is Id(ORContext.SurgicalCase) with {
  briefly "Surgical case identifier"
  described by "Unique identifier for a surgical case."
}

type RoomId is UUID with {
  briefly "Operating room identifier"
  described by "Unique identifier for an operating room."
}

type SurgeonId is UUID with {
  briefly "Surgeon identifier"
  described by "Reference to the surgeon performing the procedure."
}

type ProcedureId is UUID with {
  briefly "Procedure identifier"
  described by "Reference to the surgical procedure definition."
}

type PatientId is UUID with {
  briefly "Patient identifier"
  described by "Reference to patient record in registration system."
}

type AnesthesiologistId is UUID with {
  briefly "Anesthesiologist identifier"
  described by "Reference to the anesthesiologist assigned to the case."
}

type CaseStatus is any of {
  Scheduled,
  PreOp,
  InOR,
  Surgery,
  Recovery,
  Completed,
  Cancelled
} with {
  briefly "Surgical case status"
  described by "Current status of the surgical case in the perioperative workflow."
}

type CasePriority is any of {
  Elective,
  Urgent,
  Emergent
} with {
  briefly "Case priority"
  described by "Urgency level of the surgical case."
}

type AnesthesiaType is any of {
  General,
  Regional,
  Spinal,
  Epidural,
  LocalWithSedation,
  LocalOnly,
  MAC
} with {
  briefly "Anesthesia type"
  described by "Type of anesthesia planned for the procedure."
}

type CancellationReason is any of {
  PatientRequest,
  MedicalClearanceIssue,
  NoShowPatient,
  EquipmentUnavailable,
  SurgeonUnavailable,
  AnesthesiaUnavailable,
  ORScheduleConflict,
  PatientConditionChange,
  InsuranceIssue,
  Other
} with {
  briefly "Cancellation reason"
  described by "Reason the surgical case was cancelled."
}

type SurgicalCaseInfo is {
  caseId is CaseId with {
    briefly "Case ID"
    described by "Unique surgical case identifier."
  }
  patientId is PatientId with {
    briefly "Patient"
    described by "Patient undergoing surgery."
  }
  primarySurgeonId is SurgeonId with {
    briefly "Primary surgeon"
    described by "Lead surgeon for the procedure."
  }
  procedureId is ProcedureId with {
    briefly "Procedure"
    described by "Planned surgical procedure."
  }
  procedureName is String(1, 500) with {
    briefly "Procedure name"
    described by "Description of the surgical procedure."
  }
  diagnosis is String(1, 500) with {
    briefly "Diagnosis"
    described by "Indication for surgery."
  }
  priority is CasePriority with {
    briefly "Priority"
    described by "Case urgency level."
  }
  scheduledDate is Date with {
    briefly "Scheduled date"
    described by "Date surgery is scheduled."
  }
  scheduledStartTime is Time with {
    briefly "Start time"
    described by "Planned surgery start time."
  }
  estimatedDuration is Duration with {
    briefly "Duration"
    described by "Expected procedure duration."
  }
  anesthesiaType is AnesthesiaType with {
    briefly "Anesthesia"
    described by "Type of anesthesia required."
  }
  status is CaseStatus with {
    briefly "Status"
    described by "Current case status."
  }
} with {
  briefly "Surgical case information"
  described by "Core information about a scheduled surgical case."
}

type RoomAssignment is {
  roomId is RoomId with {
    briefly "Room"
    described by "Assigned operating room."
  }
  roomName is String(1, 50) with {
    briefly "Room name"
    described by "Operating room name or number."
  }
  caseId is CaseId with {
    briefly "Case"
    described by "Assigned surgical case."
  }
  assignedDate is Date with {
    briefly "Date"
    described by "Date of room assignment."
  }
  blockStartTime is Time with {
    briefly "Block start"
    described by "Start time of scheduled block."
  }
  blockEndTime is Time with {
    briefly "Block end"
    described by "End time of scheduled block."
  }
  isBlockTime is Boolean with {
    briefly "Block time"
    described by "Whether this is surgeon block time."
  }
} with {
  briefly "Room assignment"
  described by "Assignment of a surgical case to an operating room."
}

type SurgicalTeam is {
  caseId is CaseId with {
    briefly "Case"
    described by "Surgical case for team assignment."
  }
  primarySurgeonId is SurgeonId with {
    briefly "Primary surgeon"
    described by "Lead surgeon."
  }
  assistingSurgeonIds is many optional SurgeonId with {
    briefly "Assisting surgeons"
    described by "Additional surgeons assisting."
  }
  anesthesiologistId is AnesthesiologistId with {
    briefly "Anesthesiologist"
    described by "Assigned anesthesiologist."
  }
  circulatingNurseId is UUID with {
    briefly "Circulator"
    described by "Circulating nurse."
  }
  scrubTechId is UUID with {
    briefly "Scrub tech"
    described by "Surgical technologist."
  }
  additionalStaffIds is many optional UUID with {
    briefly "Additional staff"
    described by "Other team members."
  }
} with {
  briefly "Surgical team"
  described by "Staff assigned to a surgical case."
}

type PreferenceCard is {
  preferenceCardId is UUID with {
    briefly "Card ID"
    described by "Preference card identifier."
  }
  surgeonId is SurgeonId with {
    briefly "Surgeon"
    described by "Surgeon whose preferences are stored."
  }
  procedureId is ProcedureId with {
    briefly "Procedure"
    described by "Procedure this card applies to."
  }
  instrumentSets is many String(1, 200) with {
    briefly "Instruments"
    described by "Required instrument sets."
  }
  supplies is many String(1, 200) with {
    briefly "Supplies"
    described by "Required supplies and materials."
  }
  implants is many optional String(1, 200) with {
    briefly "Implants"
    described by "Required implants if applicable."
  }
  equipment is many String(1, 200) with {
    briefly "Equipment"
    described by "Required specialized equipment."
  }
  roomSetup is String(1, 1000) with {
    briefly "Room setup"
    described by "Preferred room configuration."
  }
  positioningPreferences is String(1, 500) with {
    briefly "Positioning"
    described by "Patient positioning preferences."
  }
  specialInstructions is optional String(1, 2000) with {
    briefly "Special instructions"
    described by "Additional surgeon preferences."
  }
} with {
  briefly "Surgeon preference card"
  described by "Surgeon-specific setup preferences for a procedure type."
}

type TurnoverInfo is {
  previousCaseId is CaseId with {
    briefly "Previous case"
    described by "Case that just completed."
  }
  nextCaseId is CaseId with {
    briefly "Next case"
    described by "Upcoming case."
  }
  roomId is RoomId with {
    briefly "Room"
    described by "Operating room being turned over."
  }
  cleaningStartTime is TimeStamp with {
    briefly "Cleaning start"
    described by "When room cleaning began."
  }
  cleaningEndTime is optional TimeStamp with {
    briefly "Cleaning end"
    described by "When room cleaning completed."
  }
  setupStartTime is optional TimeStamp with {
    briefly "Setup start"
    described by "When next case setup began."
  }
  setupEndTime is optional TimeStamp with {
    briefly "Setup end"
    described by "When room is ready for next case."
  }
  totalTurnoverMinutes is optional Natural with {
    briefly "Turnover time"
    described by "Total minutes for turnover."
  }
  delayMinutes is optional Natural with {
    briefly "Delay"
    described by "Minutes of delay from target."
  }
  delayReason is optional String(1, 500) with {
    briefly "Delay reason"
    described by "Cause of any turnover delay."
  }
} with {
  briefly "Room turnover information"
  described by "Metrics for room turnover between surgical cases."
}

type CaseTiming is {
  caseId is CaseId with {
    briefly "Case"
    described by "Surgical case identifier."
  }
  preOpArrivalTime is optional TimeStamp with {
    briefly "Pre-op arrival"
    described by "When patient arrived in pre-op."
  }
  readyForORTime is optional TimeStamp with {
    briefly "Ready for OR"
    described by "When patient was cleared for OR."
  }
  inRoomTime is optional TimeStamp with {
    briefly "In room"
    described by "When patient entered OR."
  }
  anesthesiaStartTime is optional TimeStamp with {
    briefly "Anesthesia start"
    described by "When anesthesia induction began."
  }
  procedureStartTime is optional TimeStamp with {
    briefly "Procedure start"
    described by "When incision or procedure began."
  }
  procedureEndTime is optional TimeStamp with {
    briefly "Procedure end"
    described by "When procedure completed."
  }
  anesthesiaEndTime is optional TimeStamp with {
    briefly "Anesthesia end"
    described by "When anesthesia concluded."
  }
  outOfRoomTime is optional TimeStamp with {
    briefly "Out of room"
    described by "When patient left OR."
  }
  pacuArrivalTime is optional TimeStamp with {
    briefly "PACU arrival"
    described by "When patient arrived in PACU."
  }
  pacuDischargeTime is optional TimeStamp with {
    briefly "PACU discharge"
    described by "When patient was discharged from PACU."
  }
} with {
  briefly "Case timing metrics"
  described by "Timestamps tracking case progression through perioperative phases."
}
