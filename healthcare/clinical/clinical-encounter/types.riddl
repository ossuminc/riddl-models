// Clinical Encounter - Shared Types

type EncounterId is Id(EncounterContext.Encounter) with {
  briefly "Encounter identifier"
  described by "Unique identifier for a clinical encounter."
}

type PatientId is UUID with {
  briefly "Patient identifier"
  described by "Reference to patient record."
}

type ProviderId is UUID with {
  briefly "Provider identifier"
  described by "Reference to healthcare provider."
}

type FacilityId is UUID with {
  briefly "Facility identifier"
  described by "Reference to healthcare facility."
}

type DiagnosisCode is String(3, 10) with {
  briefly "Diagnosis code"
  described by "ICD-10 diagnosis code."
}

type ProcedureCode is String(5, 10) with {
  briefly "Procedure code"
  described by "CPT/HCPCS procedure code."
}

type EncounterStatus is any of {
  Scheduled,
  CheckedIn,
  InProgress,
  Completed,
  Canceled,
  NoShow
} with {
  briefly "Encounter status"
  described by "Current encounter status."
}

type EncounterType is any of {
  OfficeVisit,
  Telehealth,
  EmergencyRoom,
  Inpatient,
  Observation,
  Procedure,
  Consultation
} with {
  briefly "Encounter type"
  described by "Type of clinical encounter."
}

type VisitReason is any of {
  Routine,
  FollowUp,
  NewProblem,
  Urgent,
  Preventive,
  Chronic,
  PreOperative,
  PostOperative
} with {
  briefly "Visit reason"
  described by "Primary reason for visit."
}

type PatientInfo is {
  patientId is PatientId with {
    briefly "Patient"
    described by "Patient identifier."
  }
  mrn is String(1, 20) with {
    briefly "MRN"
    described by "Medical record number."
  }
  firstName is String(1, 100) with {
    briefly "First name"
    described by "Patient first name."
  }
  lastName is String(1, 100) with {
    briefly "Last name"
    described by "Patient last name."
  }
  dateOfBirth is Date with {
    briefly "DOB"
    described by "Date of birth."
  }
} with {
  briefly "Patient information"
  described by "Basic patient demographics."
}

type ProviderInfo is {
  providerId is ProviderId with {
    briefly "Provider"
    described by "Provider identifier."
  }
  npi is String(10, 10) with {
    briefly "NPI"
    described by "National provider identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Provider name."
  }
  specialty is String(1, 100) with {
    briefly "Specialty"
    described by "Medical specialty."
  }
} with {
  briefly "Provider information"
  described by "Healthcare provider details."
}

type VitalSigns is {
  temperature is optional Decimal(4, 1) with {
    briefly "Temp"
    described by "Body temperature."
  }
  bloodPressureSystolic is optional Natural with {
    briefly "BP systolic"
    described by "Systolic blood pressure."
  }
  bloodPressureDiastolic is optional Natural with {
    briefly "BP diastolic"
    described by "Diastolic blood pressure."
  }
  heartRate is optional Natural with {
    briefly "HR"
    described by "Heart rate."
  }
  respiratoryRate is optional Natural with {
    briefly "RR"
    described by "Respiratory rate."
  }
  oxygenSaturation is optional Natural with {
    briefly "SpO2"
    described by "Oxygen saturation."
  }
  weight is optional Decimal(5, 1) with {
    briefly "Weight"
    described by "Weight in kg."
  }
  height is optional Decimal(5, 1) with {
    briefly "Height"
    described by "Height in cm."
  }
  recordedAt is TimeStamp with {
    briefly "Recorded"
    described by "When vitals taken."
  }
} with {
  briefly "Vital signs"
  described by "Patient vital signs."
}

type ChiefComplaint is {
  complaintText is String(1, 500) with {
    briefly "Complaint"
    described by "Patient's chief complaint."
  }
  duration is optional String(1, 100) with {
    briefly "Duration"
    described by "How long symptoms present."
  }
  severity is optional Natural with {
    briefly "Severity"
    described by "Pain scale 1-10."
  }
} with {
  briefly "Chief complaint"
  described by "Patient's primary complaint."
}

type ClinicalNote is {
  noteType is String(1, 50) with {
    briefly "Type"
    described by "Note type."
  }
  content is String(1, 10000) with {
    briefly "Content"
    described by "Note content."
  }
  authorId is ProviderId with {
    briefly "Author"
    described by "Note author."
  }
  createdAt is TimeStamp with {
    briefly "Created"
    described by "Note creation time."
  }
  noteSignedAt is optional TimeStamp with {
    briefly "Signed"
    described by "When note was signed."
  }
} with {
  briefly "Clinical note"
  described by "Clinical documentation note."
}

type Diagnosis is {
  diagnosisCode is DiagnosisCode with {
    briefly "Code"
    described by "ICD-10 code."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Diagnosis description."
  }
  isPrimary is Boolean with {
    briefly "Primary"
    described by "Is primary diagnosis."
  }
  diagnosedAt is TimeStamp with {
    briefly "Diagnosed"
    described by "When diagnosed."
  }
} with {
  briefly "Diagnosis"
  described by "Clinical diagnosis."
}

type EncounterProcedure is {
  procedureCode is ProcedureCode with {
    briefly "Code"
    described by "CPT code."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Procedure description."
  }
  performedAt is TimeStamp with {
    briefly "Performed"
    described by "When performed."
  }
  performedBy is ProviderId with {
    briefly "Performed by"
    described by "Performing provider."
  }
} with {
  briefly "Procedure"
  described by "Clinical procedure performed."
}

type EncounterOrder is {
  orderId is UUID with {
    briefly "Order"
    described by "Order identifier."
  }
  orderType is String(1, 50) with {
    briefly "Type"
    described by "Order type."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Order description."
  }
  orderedAt is TimeStamp with {
    briefly "Ordered"
    described by "When ordered."
  }
  orderedBy is ProviderId with {
    briefly "Ordered by"
    described by "Ordering provider."
  }
} with {
  briefly "Clinical order"
  described by "Order placed during encounter."
}

type DispositionInfo is {
  dispositionType is String(1, 100) with {
    briefly "Disposition"
    described by "Patient disposition."
  }
  followUpInstructions is optional String(1, 2000) with {
    briefly "Follow-up"
    described by "Follow-up instructions."
  }
  referrals is many optional String(1, 200) with {
    briefly "Referrals"
    described by "Specialist referrals."
  }
  returnVisit is optional Date with {
    briefly "Return"
    described by "Return visit date."
  }
} with {
  briefly "Disposition"
  described by "Encounter disposition."
}
