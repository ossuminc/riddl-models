// Type definitions for Customer Success domain
type AccountId is Id(CustomerSuccessContext.CustomerAccount)  with {
  briefly "Account identifier"
  described as {
    |Unique identifier for a customer account.
  }
}
type HealthScoreId is UUID with {
  briefly "Health score identifier"
  described as {
    |Unique identifier for a health score record.
  }
}
type TouchpointId is UUID with {
  briefly "Touchpoint identifier"
  described as {
    |Unique identifier for a customer touchpoint.
  }
}
type HealthStatus is any of {
  Healthy,
  AtRisk,
  Critical,
  Churned,
  New
} with {
  briefly "Health status"
  described as {
    | Represents the current health status of a customer account:
    | - Healthy: Customer is engaged and likely to renew
    | - AtRisk: Customer shows warning signs of potential churn
    | - Critical: Customer requires immediate intervention
    | - Churned: Customer has cancelled or not renewed
    | - New: Recently onboarded customer in initial assessment period
  }
}
type OnboardingStatus is any of {
  Pending,
  InProgress,
  Completed,
  Stalled
} with {
  briefly "Onboarding status"
  described as {
    |Tracks the progress of a new customer through the onboarding workflow.
  }
}
type RenewalOutcome is any of {
  Renewed,
  Expanded,
  Contracted,
  Churned,
  Pending
} with {
  briefly "Renewal outcome"
  described as {
    |Captures the result of a contract renewal including expansion or contraction.
  }
}
type CustomerAccountData is {
  accountId: AccountId with {
    briefly "Account ID"
    described as {
      |Unique identifier for this account.
    }
  }
  companyName: String(1,200) with {
    briefly "Company name"
    described as {
      |Name of the customer company.
    }
  }
  contractStartDate: Date with {
    briefly "Contract start"
    described as {
      |When the contract began.
    }
  }
  contractEndDate: Date with {
    briefly "Contract end"
    described as {
      |When the contract expires.
    }
  }
  annualContractValue: Decimal(12,2) with {
    briefly "ACV"
    described as {
      |Annual contract value in dollars.
    }
  }
  tier: String(1,50) with {
    briefly "Tier"
    described as {
      |Customer tier or segment.
    }
  }
  primaryContactName: String(1,100) with {
    briefly "Contact name"
    described as {
      |Name of primary contact.
    }
  }
  primaryContactEmail: String(5,254) with {
    briefly "Contact email"
    described as {
      |Email of primary contact.
    }
  }
  assignedCsmId: String(1,50) with {
    briefly "CSM ID"
    described as {
      |Assigned customer success manager.
    }
  }
  onboardingCompletedDate: Date? with {
    briefly "Onboarding completed"
    described as {
      |When onboarding finished.
    }
  }
  healthStatus: HealthStatus with {
    briefly "Health status"
    described as {
      |Current health classification.
    }
  }
  lastTouchpointDate: Date? with {
    briefly "Last touchpoint"
    described as {
      |Date of most recent interaction.
    }
  }
  renewalProbability: Decimal(5,2)? with {
    briefly "Renewal probability"
    described as {
      |Likelihood of renewal as percentage.
    }
  }
} with {
  briefly "Customer account data"
  described as {
    | Contains all essential information about a customer account including
    | contract details, primary contact, assigned customer success manager,
    | and current health status. This record is the foundation for all
    | customer success activities.
  }
}
type HealthScore is {
  healthScoreId: HealthScoreId with {
    briefly "Score ID"
    described as {
      |Unique identifier for this score.
    }
  }
  accountId: AccountId with {
    briefly "Account ID"
    described as {
      |Account this score belongs to.
    }
  }
  overallScore: Integer with {
    briefly "Overall score"
    described as {
      |Combined health score 0-100.
    }
  }
  productAdoptionScore: Integer with {
    briefly "Adoption score"
    described as {
      |Product adoption score 0-100.
    }
  }
  engagementScore: Integer with {
    briefly "Engagement score"
    described as {
      |Customer engagement score 0-100.
    }
  }
  supportHealthScore: Integer with {
    briefly "Support score"
    described as {
      |Support health score 0-100.
    }
  }
  financialHealthScore: Integer with {
    briefly "Financial score"
    described as {
      |Financial health score 0-100.
    }
  }
  calculatedAt: TimeStamp with {
    briefly "Calculated at"
    described as {
      |When score was calculated.
    }
  }
  factors: String(1,200)+ with {
    briefly "Factors"
    described as {
      |Contributing factors to score.
    }
  }
} with {
  briefly "Health score"
  described as {
    | A comprehensive health score calculation that combines multiple factors:
    | - Product Adoption: How well the customer uses the product features
    | - Engagement: Frequency and quality of customer interactions
    | - Support Health: Support ticket trends and resolution satisfaction
    | - Financial Health: Payment history and expansion indicators
    | Each score is 0-100, with the overall score being a weighted average.
  }
}
type TouchpointRecord is {
  touchpointId: TouchpointId with {
    briefly "Touchpoint ID"
    described as {
      |Unique identifier for this touchpoint.
    }
  }
  accountId: AccountId with {
    briefly "Account ID"
    described as {
      |Account this touchpoint belongs to.
    }
  }
  touchpointType: String(1,50) with {
    briefly "Type"
    described as {
      |Type of touchpoint (call, email, meeting, QBR).
    }
  }
  occurredAt: TimeStamp with {
    briefly "Occurred at"
    described as {
      |When the touchpoint occurred.
    }
  }
  conductedBy: String(1,100) with {
    briefly "Conducted by"
    described as {
      |Person who conducted the touchpoint.
    }
  }
  summary: String(1,1000) with {
    briefly "Summary"
    described as {
      |Summary of the interaction.
    }
  }
  sentiment: String(1,20) with {
    briefly "Sentiment"
    described as {
      |Detected sentiment (positive, neutral, negative).
    }
  }
  followUpRequired: Boolean with {
    briefly "Follow-up required"
    described as {
      |Whether follow-up action is needed.
    }
  }
  followUpDate: Date? with {
    briefly "Follow-up date"
    described as {
      |When follow-up should occur.
    }
  }
  notes: String(1,2000)? with {
    briefly "Notes"
    described as {
      |Additional notes from the interaction.
    }
  }
} with {
  briefly "Touchpoint record"
  described as {
    | Captures details of any interaction with a customer including calls,
    | emails, meetings, QBRs (Quarterly Business Reviews), and escalations.
    | Sentiment tracking helps identify trends in customer satisfaction.
  }
}
type ChurnRisk is {
  accountId: AccountId with {
    briefly "Account ID"
    described as {
      |Account being assessed for churn risk.
    }
  }
  riskLevel: String(1,20) with {
    briefly "Risk level"
    described as {
      |Risk classification (Low, Medium, High, Critical).
    }
  }
  riskScore: Integer with {
    briefly "Risk score"
    described as {
      |Numerical risk score 0-100.
    }
  }
  primaryRiskFactors: String(1,200)+ with {
    briefly "Risk factors"
    described as {
      |Primary factors contributing to churn risk.
    }
  }
  identifiedAt: TimeStamp with {
    briefly "Identified at"
    described as {
      |When risk was identified.
    }
  }
  mitigationPlan: String(1,2000)? with {
    briefly "Mitigation plan"
    described as {
      |Plan to address churn risk.
    }
  }
  estimatedChurnDate: Date? with {
    briefly "Estimated churn date"
    described as {
      |When churn is expected if unaddressed.
    }
  }
  revenueAtRisk: Decimal(12,2) with {
    briefly "Revenue at risk"
    described as {
      |Annual revenue at risk of loss.
    }
  }
} with {
  briefly "Churn risk"
  described as {
    | Documents the churn risk analysis for a customer account including
    | the risk level (Low/Medium/High/Critical), contributing factors,
    | and estimated revenue impact. Used to prioritize CSM interventions
    | and create targeted retention strategies.
  }
}
