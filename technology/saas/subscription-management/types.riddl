// Subscription Management - Shared Types
type SubscriptionId is Id(SubscriptionContext.Subscription)  with {
  briefly "Subscription identifier"
  described as {
    |Unique identifier for a subscription.
  }
}
type CustomerId is UUID with {
  briefly "Customer identifier"
  described as {
    |Reference to customer.
  }
}
type PlanId is UUID with {
  briefly "Plan identifier"
  described as {
    |Reference to subscription plan.
  }
}
type InvoiceId is UUID with {
  briefly "Invoice identifier"
  described as {
    |Reference to an invoice.
  }
}
type SubscriptionStatus is any of {
  Trial,
  Active,
  PastDue,
  Suspended,
  Canceled,
  Expired
} with {
  briefly "Subscription status"
  described as {
    |Current subscription status.
  }
}
type BillingCycle is any of {
  Monthly,
  Quarterly,
  Annual,
  Custom
} with {
  briefly "Billing cycle"
  described as {
    |Billing frequency.
  }
}
type PaymentStatus is any of {
  Pending,
  Paid,
  Failed,
  Refunded
} with {
  briefly "Payment status"
  described as {
    |Payment status.
  }
}
type PlanInfo is {
  planId: PlanId with {
    briefly "Plan"
    described as {
      |Plan identifier.
    }
  }
  name: String(1,100) with {
    briefly "Name"
    described as {
      |Plan name.
    }
  }
  tier: String(1,50) with {
    briefly "Tier"
    described as {
      |Plan tier.
    }
  }
  basePrice: Decimal(10,2) with {
    briefly "Price"
    described as {
      |Base price.
    }
  }
  billingCycle: BillingCycle with {
    briefly "Cycle"
    described as {
      |Billing cycle.
    }
  }
  features: String(1,100)+ with {
    briefly "Features"
    described as {
      |Included features.
    }
  }
} with {
  briefly "Plan info"
  described as {
    |Subscription plan details.
  }
}
type CustomerInfo is {
  customerId: CustomerId with {
    briefly "Customer"
    described as {
      |Customer identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Customer name.
    }
  }
  email: String(5,254) with {
    briefly "Email"
    described as {
      |Contact email.
    }
  }
  company: String(1,200)? with {
    briefly "Company"
    described as {
      |Company name.
    }
  }
} with {
  briefly "Customer info"
  described as {
    |Customer information.
  }
}
type PaymentMethod is {
  methodType: String(1,20) with {
    briefly "Type"
    described as {
      |Payment method type.
    }
  }
  last4: String(4,4) with {
    briefly "Last 4"
    described as {
      |Last four digits.
    }
  }
  expiryMonth: Natural? with {
    briefly "Month"
    described as {
      |Expiry month.
    }
  }
  expiryYear: Natural? with {
    briefly "Year"
    described as {
      |Expiry year.
    }
  }
  isDefault: Boolean with {
    briefly "Default"
    described as {
      |Is default method.
    }
  }
} with {
  briefly "Payment method"
  described as {
    |Customer payment method.
  }
}
type BillingInfo is {
  nextBillingDate: Date with {
    briefly "Next billing"
    described as {
      |Next billing date.
    }
  }
  amount: Decimal(10,2) with {
    briefly "Amount"
    described as {
      |Billing amount.
    }
  }
  currency: String(3,3) with {
    briefly "Currency"
    described as {
      |Currency code.
    }
  }
} with {
  briefly "Billing info"
  described as {
    |Billing information.
  }
}
type InvoiceInfo is {
  invoiceId: InvoiceId with {
    briefly "Invoice"
    described as {
      |Invoice identifier.
    }
  }
  amount: Decimal(10,2) with {
    briefly "Amount"
    described as {
      |Invoice amount.
    }
  }
  currency: String(3,3) with {
    briefly "Currency"
    described as {
      |Currency code.
    }
  }
  periodStart: Date with {
    briefly "Start"
    described as {
      |Period start.
    }
  }
  periodEnd: Date with {
    briefly "End"
    described as {
      |Period end.
    }
  }
  paymentStatus: PaymentStatus with {
    briefly "Status"
    described as {
      |Invoice status.
    }
  }
  issuedAt: TimeStamp with {
    briefly "Issued"
    described as {
      |Issue time.
    }
  }
  paidAt: TimeStamp? with {
    briefly "Paid"
    described as {
      |Payment time.
    }
  }
} with {
  briefly "Invoice info"
  described as {
    |Invoice details.
  }
}
type UsageInfo is {
  metricName: String(1,50) with {
    briefly "Metric"
    described as {
      |Usage metric name.
    }
  }
  quantity: Decimal(15,4) with {
    briefly "Quantity"
    described as {
      |Usage quantity.
    }
  }
  unitPrice: Decimal(10,4) with {
    briefly "Unit price"
    described as {
      |Price per unit.
    }
  }
  totalAmount: Decimal(12,2) with {
    briefly "Total"
    described as {
      |Total usage amount.
    }
  }
} with {
  briefly "Usage info"
  described as {
    |Usage-based billing info.
  }
}
type DiscountInfo is {
  code: String(1,50) with {
    briefly "Code"
    described as {
      |Discount code.
    }
  }
  percentOff: Decimal(5,2)? with {
    briefly "Percent"
    described as {
      |Percentage discount.
    }
  }
  amountOff: Decimal(10,2)? with {
    briefly "Amount"
    described as {
      |Fixed discount.
    }
  }
  validUntil: Date? with {
    briefly "Valid until"
    described as {
      |Expiration date.
    }
  }
} with {
  briefly "Discount info"
  described as {
    |Applied discount details.
  }
}
type CancellationInfo is {
  reason: String(1,500) with {
    briefly "Reason"
    described as {
      |Cancellation reason.
    }
  }
  feedback: String(1,1000)? with {
    briefly "Feedback"
    described as {
      |Customer feedback.
    }
  }
  effectiveDate: Date with {
    briefly "Effective"
    described as {
      |Cancellation effective date.
    }
  }
  canceledAt: TimeStamp with {
    briefly "Canceled"
    described as {
      |Cancellation time.
    }
  }
} with {
  briefly "Cancellation info"
  described as {
    |Cancellation details.
  }
}
