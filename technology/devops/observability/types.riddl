// Observability - Shared Types
type AlertId is Id(AlertContext.Alert)  with {
  briefly "Alert identifier"
  described as {
    |Unique identifier for an alert.
  }
}
type MetricId is UUID with {
  briefly "Metric identifier"
  described as {
    |Reference to a metric definition.
  }
}
type TraceId is UUID with {
  briefly "Trace identifier"
  described as {
    |Reference to a distributed trace.
  }
}
type SpanId is UUID with {
  briefly "Span identifier"
  described as {
    |Reference to a trace span.
  }
}
type DashboardId is UUID with {
  briefly "Dashboard identifier"
  described as {
    |Reference to a dashboard.
  }
}
type AlertRuleId is UUID with {
  briefly "Alert rule identifier"
  described as {
    |Reference to an alert rule.
  }
}
type AlertStatus is any of {
  Firing,
  Acknowledged,
  Resolved,
  Silenced,
  Expired
} with {
  briefly "Alert status"
  described as {
    |Current alert status.
  }
}
type AlertSeverity is any of {
  Critical,
  High,
  Medium,
  Low,
  Info
} with {
  briefly "Alert severity"
  described as {
    |Alert severity level.
  }
}
type MetricType is any of {
  Counter,
  Gauge,
  Histogram,
  Summary
} with {
  briefly "Metric type"
  described as {
    |Type of metric.
  }
}
type LogLevel is any of {
  Trace,
  Debug,
  Info,
  Warn,
  Error,
  Fatal
} with {
  briefly "Log level"
  described as {
    |Log severity level.
  }
}
type SpanStatus is any of {
  OK,
  Error,
  Unset
} with {
  briefly "Span status"
  described as {
    |Trace span status.
  }
}
type MetricDefinition is {
  metricId: MetricId with {
    briefly "Metric"
    described as {
      |Metric identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Metric name.
    }
  }
  metricType: MetricType with {
    briefly "Type"
    described as {
      |Metric type.
    }
  }
  description: String(1,500) with {
    briefly "Description"
    described as {
      |Metric description.
    }
  }
  unit: String(1,50) with {
    briefly "Unit"
    described as {
      |Measurement unit.
    }
  }
  labels: String(1,100)* with {
    briefly "Labels"
    described as {
      |Metric labels.
    }
  }
} with {
  briefly "Metric definition"
  described as {
    |Metric metadata and configuration.
  }
}
type MetricDataPoint is {
  metricId: MetricId with {
    briefly "Metric"
    described as {
      |Metric identifier.
    }
  }
  timestamp: TimeStamp with {
    briefly "Timestamp"
    described as {
      |Data point time.
    }
  }
  value: Decimal(20,6) with {
    briefly "Value"
    described as {
      |Metric value.
    }
  }
  labels: String(1,200)* with {
    briefly "Labels"
    described as {
      |Label values.
    }
  }
} with {
  briefly "Metric data point"
  described as {
    |Single metric measurement.
  }
}
type LogEntry is {
  timestamp: TimeStamp with {
    briefly "Timestamp"
    described as {
      |Log entry time.
    }
  }
  level: LogLevel with {
    briefly "Level"
    described as {
      |Log level.
    }
  }
  message: String(1,10000) with {
    briefly "Message"
    described as {
      |Log message.
    }
  }
  service: String(1,100) with {
    briefly "Service"
    described as {
      |Source service.
    }
  }
  logTraceId: TraceId? with {
    briefly "Trace"
    described as {
      |Associated trace ID.
    }
  }
  logSpanId: SpanId? with {
    briefly "Span"
    described as {
      |Associated span ID.
    }
  }
  attributes: String(1,1000)* with {
    briefly "Attributes"
    described as {
      |Additional attributes.
    }
  }
} with {
  briefly "Log entry"
  described as {
    |Single log record.
  }
}
type TraceSpan is {
  spanId: SpanId with {
    briefly "Span"
    described as {
      |Span identifier.
    }
  }
  traceId: TraceId with {
    briefly "Trace"
    described as {
      |Trace identifier.
    }
  }
  parentSpanId: SpanId? with {
    briefly "Parent"
    described as {
      |Parent span ID.
    }
  }
  operationName: String(1,200) with {
    briefly "Operation"
    described as {
      |Operation name.
    }
  }
  service: String(1,100) with {
    briefly "Service"
    described as {
      |Service name.
    }
  }
  startTime: TimeStamp with {
    briefly "Start"
    described as {
      |Span start time.
    }
  }
  endTime: TimeStamp with {
    briefly "End"
    described as {
      |Span end time.
    }
  }
  duration: Natural with {
    briefly "Duration"
    described as {
      |Duration in microseconds.
    }
  }
  spanStatus: SpanStatus with {
    briefly "Status"
    described as {
      |Span status.
    }
  }
  attributes: String(1,1000)* with {
    briefly "Attributes"
    described as {
      |Span attributes.
    }
  }
} with {
  briefly "Trace span"
  described as {
    |Distributed trace span.
  }
}
type AlertRule is {
  ruleId: AlertRuleId with {
    briefly "Rule"
    described as {
      |Rule identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Rule name.
    }
  }
  expression: String(1,2000) with {
    briefly "Expression"
    described as {
      |Alert condition expression.
    }
  }
  severity: AlertSeverity with {
    briefly "Severity"
    described as {
      |Alert severity.
    }
  }
  forDuration: Natural with {
    briefly "For duration"
    described as {
      |Duration before firing (seconds).
    }
  }
  labels: String(1,200)* with {
    briefly "Labels"
    described as {
      |Alert labels.
    }
  }
  annotations: String(1,500)* with {
    briefly "Annotations"
    described as {
      |Alert annotations.
    }
  }
} with {
  briefly "Alert rule"
  described as {
    |Alert rule configuration.
  }
}
type AlertInfo is {
  alertId: AlertId with {
    briefly "Alert"
    described as {
      |Alert identifier.
    }
  }
  rule: AlertRule with {
    briefly "Rule"
    described as {
      |Triggering rule.
    }
  }
  status: AlertStatus with {
    briefly "Status"
    described as {
      |Alert status.
    }
  }
  value: Decimal(20,6) with {
    briefly "Value"
    described as {
      |Triggering value.
    }
  }
  firedAt: TimeStamp with {
    briefly "Fired"
    described as {
      |When alert fired.
    }
  }
  updatedResolvedAt: TimeStamp? with {
    briefly "Resolved"
    described as {
      |Resolution time.
    }
  }
} with {
  briefly "Alert info"
  described as {
    |Alert instance information.
  }
}
type NotificationChannel is {
  channelType: String(1,50) with {
    briefly "Type"
    described as {
      |Channel type (slack, email, pagerduty).
    }
  }
  target: String(1,500) with {
    briefly "Target"
    described as {
      |Notification target.
    }
  }
  enabled: Boolean with {
    briefly "Enabled"
    described as {
      |Whether channel is enabled.
    }
  }
} with {
  briefly "Notification channel"
  described as {
    |Alert notification destination.
  }
}
type SilenceRule is {
  startTime: TimeStamp with {
    briefly "Start"
    described as {
      |Silence start time.
    }
  }
  endTime: TimeStamp with {
    briefly "End"
    described as {
      |Silence end time.
    }
  }
  matchers: String(1,200)+ with {
    briefly "Matchers"
    described as {
      |Label matchers.
    }
  }
  comment: String(1,500) with {
    briefly "Comment"
    described as {
      |Silence reason.
    }
  }
  createdBy: String(1,200) with {
    briefly "Created by"
    described as {
      |Silence creator.
    }
  }
} with {
  briefly "Silence rule"
  described as {
    |Alert silence configuration.
  }
}
