// Observability - Shared Types

type AlertId is Id(AlertContext.Alert) with {
  briefly "Alert identifier"
  described by "Unique identifier for an alert."
}

type MetricId is UUID with {
  briefly "Metric identifier"
  described by "Reference to a metric definition."
}

type TraceId is UUID with {
  briefly "Trace identifier"
  described by "Reference to a distributed trace."
}

type SpanId is UUID with {
  briefly "Span identifier"
  described by "Reference to a trace span."
}

type DashboardId is UUID with {
  briefly "Dashboard identifier"
  described by "Reference to a dashboard."
}

type AlertRuleId is UUID with {
  briefly "Alert rule identifier"
  described by "Reference to an alert rule."
}

type AlertStatus is any of {
  Firing,
  Acknowledged,
  Resolved,
  Silenced,
  Expired
} with {
  briefly "Alert status"
  described by "Current alert status."
}

type AlertSeverity is any of {
  Critical,
  High,
  Medium,
  Low,
  Info
} with {
  briefly "Alert severity"
  described by "Alert severity level."
}

type MetricType is any of {
  Counter,
  Gauge,
  Histogram,
  Summary
} with {
  briefly "Metric type"
  described by "Type of metric."
}

type LogLevel is any of {
  Trace,
  Debug,
  Info,
  Warn,
  Error,
  Fatal
} with {
  briefly "Log level"
  described by "Log severity level."
}

type SpanStatus is any of {
  OK,
  Error,
  Unset
} with {
  briefly "Span status"
  described by "Trace span status."
}

type MetricDefinition is {
  metricId is MetricId with {
    briefly "Metric"
    described by "Metric identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Metric name."
  }
  metricType is MetricType with {
    briefly "Type"
    described by "Metric type."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Metric description."
  }
  unit is String(1, 50) with {
    briefly "Unit"
    described by "Measurement unit."
  }
  labels is many optional String(1, 100) with {
    briefly "Labels"
    described by "Metric labels."
  }
} with {
  briefly "Metric definition"
  described by "Metric metadata and configuration."
}

type MetricDataPoint is {
  metricId is MetricId with {
    briefly "Metric"
    described by "Metric identifier."
  }
  timestamp is TimeStamp with {
    briefly "Timestamp"
    described by "Data point time."
  }
  value is Decimal(20, 6) with {
    briefly "Value"
    described by "Metric value."
  }
  labels is many optional String(1, 200) with {
    briefly "Labels"
    described by "Label values."
  }
} with {
  briefly "Metric data point"
  described by "Single metric measurement."
}

type LogEntry is {
  timestamp is TimeStamp with {
    briefly "Timestamp"
    described by "Log entry time."
  }
  level is LogLevel with {
    briefly "Level"
    described by "Log level."
  }
  message is String(1, 10000) with {
    briefly "Message"
    described by "Log message."
  }
  service is String(1, 100) with {
    briefly "Service"
    described by "Source service."
  }
  logTraceId is optional TraceId with {
    briefly "Trace"
    described by "Associated trace ID."
  }
  logSpanId is optional SpanId with {
    briefly "Span"
    described by "Associated span ID."
  }
  attributes is many optional String(1, 1000) with {
    briefly "Attributes"
    described by "Additional attributes."
  }
} with {
  briefly "Log entry"
  described by "Single log record."
}

type TraceSpan is {
  spanId is SpanId with {
    briefly "Span"
    described by "Span identifier."
  }
  traceId is TraceId with {
    briefly "Trace"
    described by "Trace identifier."
  }
  parentSpanId is optional SpanId with {
    briefly "Parent"
    described by "Parent span ID."
  }
  operationName is String(1, 200) with {
    briefly "Operation"
    described by "Operation name."
  }
  service is String(1, 100) with {
    briefly "Service"
    described by "Service name."
  }
  startTime is TimeStamp with {
    briefly "Start"
    described by "Span start time."
  }
  endTime is TimeStamp with {
    briefly "End"
    described by "Span end time."
  }
  duration is Natural with {
    briefly "Duration"
    described by "Duration in microseconds."
  }
  spanStatus is SpanStatus with {
    briefly "Status"
    described by "Span status."
  }
  attributes is many optional String(1, 1000) with {
    briefly "Attributes"
    described by "Span attributes."
  }
} with {
  briefly "Trace span"
  described by "Distributed trace span."
}

type AlertRule is {
  ruleId is AlertRuleId with {
    briefly "Rule"
    described by "Rule identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Rule name."
  }
  expression is String(1, 2000) with {
    briefly "Expression"
    described by "Alert condition expression."
  }
  severity is AlertSeverity with {
    briefly "Severity"
    described by "Alert severity."
  }
  forDuration is Natural with {
    briefly "For duration"
    described by "Duration before firing (seconds)."
  }
  labels is many optional String(1, 200) with {
    briefly "Labels"
    described by "Alert labels."
  }
  annotations is many optional String(1, 500) with {
    briefly "Annotations"
    described by "Alert annotations."
  }
} with {
  briefly "Alert rule"
  described by "Alert rule configuration."
}

type AlertInfo is {
  alertId is AlertId with {
    briefly "Alert"
    described by "Alert identifier."
  }
  rule is AlertRule with {
    briefly "Rule"
    described by "Triggering rule."
  }
  status is AlertStatus with {
    briefly "Status"
    described by "Alert status."
  }
  value is Decimal(20, 6) with {
    briefly "Value"
    described by "Triggering value."
  }
  firedAt is TimeStamp with {
    briefly "Fired"
    described by "When alert fired."
  }
  updatedResolvedAt is optional TimeStamp with {
    briefly "Resolved"
    described by "Resolution time."
  }
} with {
  briefly "Alert info"
  described by "Alert instance information."
}

type NotificationChannel is {
  channelType is String(1, 50) with {
    briefly "Type"
    described by "Channel type (slack, email, pagerduty)."
  }
  target is String(1, 500) with {
    briefly "Target"
    described by "Notification target."
  }
  enabled is Boolean with {
    briefly "Enabled"
    described by "Whether channel is enabled."
  }
} with {
  briefly "Notification channel"
  described by "Alert notification destination."
}

type SilenceRule is {
  startTime is TimeStamp with {
    briefly "Start"
    described by "Silence start time."
  }
  endTime is TimeStamp with {
    briefly "End"
    described by "Silence end time."
  }
  matchers is many String(1, 200) with {
    briefly "Matchers"
    described by "Label matchers."
  }
  comment is String(1, 500) with {
    briefly "Comment"
    described by "Silence reason."
  }
  createdBy is String(1, 200) with {
    briefly "Created by"
    described by "Silence creator."
  }
} with {
  briefly "Silence rule"
  described by "Alert silence configuration."
}
