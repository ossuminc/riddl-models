// Emergency Dispatch - Shared Types
type IncidentId is Id(IncidentContext.Incident)  with {
  briefly "Incident identifier"
  described as {
    |Unique identifier for an incident.
  }
}
type CallId is UUID with {
  briefly "Call identifier"
  described as {
    |Reference to an emergency call.
  }
}
type UnitId is UUID with {
  briefly "Unit identifier"
  described as {
    |Reference to a response unit.
  }
}
type OfficerId is UUID with {
  briefly "Officer identifier"
  described as {
    |Reference to a first responder.
  }
}
type DispatcherId is UUID with {
  briefly "Dispatcher identifier"
  described as {
    |Reference to a dispatcher.
  }
}
type IncidentStatus is any of {
  Received,
  Dispatched,
  EnRoute,
  OnScene,
  Resolved,
  Closed,
  Cancelled
} with {
  briefly "Incident status"
  described as {
    |Current incident state.
  }
}
type IncidentPriority is any of {
  Priority1,
  Priority2,
  Priority3,
  Priority4,
  NonEmergency
} with {
  briefly "Incident priority"
  described as {
    |Response urgency level.
  }
}
type IncidentType is any of {
  MedicalEmergency,
  Fire,
  TrafficAccident,
  CrimeInProgress,
  Disturbance,
  Alarm,
  WelfareCheck,
  HazMat,
  Rescue,
  Other
} with {
  briefly "Incident type"
  described as {
    |Category of emergency.
  }
}
type UnitType is any of {
  Police,
  Fire,
  EMS,
  HazMat,
  Rescue,
  Supervisor,
  K9,
  Aviation
} with {
  briefly "Unit type"
  described as {
    |Type of response unit.
  }
}
type UnitStatus is any of {
  Available,
  Dispatched,
  EnRoute,
  OnScene,
  Transporting,
  AtHospital,
  OutOfService,
  OffDuty
} with {
  briefly "Unit status"
  described as {
    |Current unit availability.
  }
}
type GpsLocation is {
  latitude: Decimal(9,6) with {
    briefly "Latitude"
    described as {
      |GPS latitude coordinate.
    }
  }
  longitude: Decimal(10,6) with {
    briefly "Longitude"
    described as {
      |GPS longitude coordinate.
    }
  }
} with {
  briefly "GPS location"
  described as {
    |Geographic coordinates.
  }
}
type Address is {
  street: String(1,200) with {
    briefly "Street"
    described as {
      |Street address.
    }
  }
  city: String(1,100) with {
    briefly "City"
    described as {
      |City.
    }
  }
  state: String(2,50) with {
    briefly "State"
    described as {
      |State.
    }
  }
  postalCode: String(5,10) with {
    briefly "Postal"
    described as {
      |ZIP code.
    }
  }
  apartment: String(1,50)? with {
    briefly "Apt"
    described as {
      |Apartment/unit number.
    }
  }
  crossStreet: String(1,200)? with {
    briefly "Cross street"
    described as {
      |Nearest cross street.
    }
  }
} with {
  briefly "Address"
  described as {
    |Physical address.
  }
}
type CallInfo is {
  callId: CallId with {
    briefly "Call"
    described as {
      |Call identifier.
    }
  }
  ani: String(10,20) with {
    briefly "ANI"
    described as {
      |Automatic number identification.
    }
  }
  ali: Address? with {
    briefly "ALI"
    described as {
      |Automatic location identification.
    }
  }
  callerName: String(1,200)? with {
    briefly "Caller"
    described as {
      |Caller name.
    }
  }
  callbackNumber: String(10,20) with {
    briefly "Callback"
    described as {
      |Callback phone number.
    }
  }
  receivedAt: TimeStamp with {
    briefly "Received"
    described as {
      |Call received time.
    }
  }
  callType: String(1,50) with {
    briefly "Type"
    described as {
      |Call type (wireless, landline, VOIP).
    }
  }
} with {
  briefly "Call info"
  described as {
    |Emergency call information.
  }
}
type IncidentDetails is {
  detailIncidentType: IncidentType with {
    briefly "Type"
    described as {
      |Incident type.
    }
  }
  detailPriority: IncidentPriority with {
    briefly "Priority"
    described as {
      |Response priority.
    }
  }
  incidentLocation: Address with {
    briefly "Location"
    described as {
      |Incident location.
    }
  }
  gpsCoordinates: GpsLocation? with {
    briefly "GPS"
    described as {
      |GPS coordinates.
    }
  }
  description: String(1,2000) with {
    briefly "Description"
    described as {
      |Incident description.
    }
  }
  weaponsInvolved: Boolean with {
    briefly "Weapons"
    described as {
      |Weapons reported.
    }
  }
  injuriesReported: Boolean with {
    briefly "Injuries"
    described as {
      |Injuries reported.
    }
  }
  numberOfVictims: Natural? with {
    briefly "Victims"
    described as {
      |Number of victims.
    }
  }
  suspectDescription: String(1,500)? with {
    briefly "Suspect"
    described as {
      |Suspect description.
    }
  }
  vehicleDescription: String(1,200)? with {
    briefly "Vehicle"
    described as {
      |Vehicle description.
    }
  }
} with {
  briefly "Incident details"
  described as {
    |Detailed incident information.
  }
}
type ResponseUnit is {
  unitId: UnitId with {
    briefly "Unit"
    described as {
      |Unit identifier.
    }
  }
  unitNumber: String(1,20) with {
    briefly "Number"
    described as {
      |Unit number/callsign.
    }
  }
  responseUnitType: UnitType with {
    briefly "Type"
    described as {
      |Unit type.
    }
  }
  unitStatus: UnitStatus with {
    briefly "Status"
    described as {
      |Current status.
    }
  }
  currentLocation: GpsLocation? with {
    briefly "Location"
    described as {
      |Current GPS location.
    }
  }
  assignedOfficers: OfficerId+ with {
    briefly "Officers"
    described as {
      |Assigned personnel.
    }
  }
} with {
  briefly "Response unit"
  described as {
    |First responder unit information.
  }
}
type DispatchRecord is {
  unitId: UnitId with {
    briefly "Unit"
    described as {
      |Dispatched unit.
    }
  }
  dispatchedAt: TimeStamp with {
    briefly "Dispatched"
    described as {
      |Dispatch time.
    }
  }
  dispatchedBy: DispatcherId with {
    briefly "By"
    described as {
      |Dispatcher who assigned.
    }
  }
  unitEnRouteAt: TimeStamp? with {
    briefly "En route"
    described as {
      |Time unit went en route.
    }
  }
  unitArrivedAt: TimeStamp? with {
    briefly "Arrived"
    described as {
      |Arrival time.
    }
  }
  unitClearedAt: TimeStamp? with {
    briefly "Cleared"
    described as {
      |Time unit cleared scene.
    }
  }
} with {
  briefly "Dispatch record"
  described as {
    |Unit dispatch history.
  }
}
type IncidentNote is {
  timestamp: TimeStamp with {
    briefly "Time"
    described as {
      |Note timestamp.
    }
  }
  author: String(1,100) with {
    briefly "Author"
    described as {
      |Note author.
    }
  }
  content: String(1,2000) with {
    briefly "Content"
    described as {
      |Note content.
    }
  }
  noteType: String(1,50) with {
    briefly "Type"
    described as {
      |Note type.
    }
  }
} with {
  briefly "Incident note"
  described as {
    |CAD notes and updates.
  }
}
type DispositionCode is {
  code: String(1,20) with {
    briefly "Code"
    described as {
      |Disposition code.
    }
  }
  description: String(1,200) with {
    briefly "Description"
    described as {
      |Code description.
    }
  }
} with {
  briefly "Disposition code"
  described as {
    |Incident closure code.
  }
}
