// Emergency Dispatch - Shared Types

type IncidentId is Id(IncidentContext.Incident) with {
  briefly "Incident identifier"
  described by "Unique identifier for an incident."
}

type CallId is UUID with {
  briefly "Call identifier"
  described by "Reference to an emergency call."
}

type UnitId is UUID with {
  briefly "Unit identifier"
  described by "Reference to a response unit."
}

type OfficerId is UUID with {
  briefly "Officer identifier"
  described by "Reference to a first responder."
}

type DispatcherId is UUID with {
  briefly "Dispatcher identifier"
  described by "Reference to a dispatcher."
}

type IncidentStatus is any of {
  Received,
  Dispatched,
  EnRoute,
  OnScene,
  Resolved,
  Closed,
  Cancelled
} with {
  briefly "Incident status"
  described by "Current incident state."
}

type IncidentPriority is any of {
  Priority1,
  Priority2,
  Priority3,
  Priority4,
  NonEmergency
} with {
  briefly "Incident priority"
  described by "Response urgency level."
}

type IncidentType is any of {
  MedicalEmergency,
  Fire,
  TrafficAccident,
  CrimeInProgress,
  Disturbance,
  Alarm,
  WelfareCheck,
  HazMat,
  Rescue,
  Other
} with {
  briefly "Incident type"
  described by "Category of emergency."
}

type UnitType is any of {
  Police,
  Fire,
  EMS,
  HazMat,
  Rescue,
  Supervisor,
  K9,
  Aviation
} with {
  briefly "Unit type"
  described by "Type of response unit."
}

type UnitStatus is any of {
  Available,
  Dispatched,
  EnRoute,
  OnScene,
  Transporting,
  AtHospital,
  OutOfService,
  OffDuty
} with {
  briefly "Unit status"
  described by "Current unit availability."
}

type GpsLocation is {
  latitude is Decimal(9, 6) with {
    briefly "Latitude"
    described by "GPS latitude coordinate."
  }
  longitude is Decimal(10, 6) with {
    briefly "Longitude"
    described by "GPS longitude coordinate."
  }
} with {
  briefly "GPS location"
  described by "Geographic coordinates."
}

type Address is {
  street is String(1, 200) with {
    briefly "Street"
    described by "Street address."
  }
  city is String(1, 100) with {
    briefly "City"
    described by "City."
  }
  state is String(2, 50) with {
    briefly "State"
    described by "State."
  }
  postalCode is String(5, 10) with {
    briefly "Postal"
    described by "ZIP code."
  }
  apartment is optional String(1, 50) with {
    briefly "Apt"
    described by "Apartment/unit number."
  }
  crossStreet is optional String(1, 200) with {
    briefly "Cross street"
    described by "Nearest cross street."
  }
} with {
  briefly "Address"
  described by "Physical address."
}

type CallInfo is {
  callId is CallId with {
    briefly "Call"
    described by "Call identifier."
  }
  ani is String(10, 20) with {
    briefly "ANI"
    described by "Automatic number identification."
  }
  ali is optional Address with {
    briefly "ALI"
    described by "Automatic location identification."
  }
  callerName is optional String(1, 200) with {
    briefly "Caller"
    described by "Caller name."
  }
  callbackNumber is String(10, 20) with {
    briefly "Callback"
    described by "Callback phone number."
  }
  receivedAt is TimeStamp with {
    briefly "Received"
    described by "Call received time."
  }
  callType is String(1, 50) with {
    briefly "Type"
    described by "Call type (wireless, landline, VOIP)."
  }
} with {
  briefly "Call info"
  described by "Emergency call information."
}

type IncidentDetails is {
  detailIncidentType is IncidentType with {
    briefly "Type"
    described by "Incident type."
  }
  detailPriority is IncidentPriority with {
    briefly "Priority"
    described by "Response priority."
  }
  incidentLocation is Address with {
    briefly "Location"
    described by "Incident location."
  }
  gpsCoordinates is optional GpsLocation with {
    briefly "GPS"
    described by "GPS coordinates."
  }
  description is String(1, 2000) with {
    briefly "Description"
    described by "Incident description."
  }
  weaponsInvolved is Boolean with {
    briefly "Weapons"
    described by "Weapons reported."
  }
  injuriesReported is Boolean with {
    briefly "Injuries"
    described by "Injuries reported."
  }
  numberOfVictims is optional Natural with {
    briefly "Victims"
    described by "Number of victims."
  }
  suspectDescription is optional String(1, 500) with {
    briefly "Suspect"
    described by "Suspect description."
  }
  vehicleDescription is optional String(1, 200) with {
    briefly "Vehicle"
    described by "Vehicle description."
  }
} with {
  briefly "Incident details"
  described by "Detailed incident information."
}

type ResponseUnit is {
  unitId is UnitId with {
    briefly "Unit"
    described by "Unit identifier."
  }
  unitNumber is String(1, 20) with {
    briefly "Number"
    described by "Unit number/callsign."
  }
  responseUnitType is UnitType with {
    briefly "Type"
    described by "Unit type."
  }
  unitStatus is UnitStatus with {
    briefly "Status"
    described by "Current status."
  }
  currentLocation is optional GpsLocation with {
    briefly "Location"
    described by "Current GPS location."
  }
  assignedOfficers is many OfficerId with {
    briefly "Officers"
    described by "Assigned personnel."
  }
} with {
  briefly "Response unit"
  described by "First responder unit information."
}

type DispatchRecord is {
  unitId is UnitId with {
    briefly "Unit"
    described by "Dispatched unit."
  }
  dispatchedAt is TimeStamp with {
    briefly "Dispatched"
    described by "Dispatch time."
  }
  dispatchedBy is DispatcherId with {
    briefly "By"
    described by "Dispatcher who assigned."
  }
  unitEnRouteAt is optional TimeStamp with {
    briefly "En route"
    described by "Time unit went en route."
  }
  unitArrivedAt is optional TimeStamp with {
    briefly "Arrived"
    described by "Arrival time."
  }
  unitClearedAt is optional TimeStamp with {
    briefly "Cleared"
    described by "Time unit cleared scene."
  }
} with {
  briefly "Dispatch record"
  described by "Unit dispatch history."
}

type IncidentNote is {
  timestamp is TimeStamp with {
    briefly "Time"
    described by "Note timestamp."
  }
  author is String(1, 100) with {
    briefly "Author"
    described by "Note author."
  }
  content is String(1, 2000) with {
    briefly "Content"
    described by "Note content."
  }
  noteType is String(1, 50) with {
    briefly "Type"
    described by "Note type."
  }
} with {
  briefly "Incident note"
  described by "CAD notes and updates."
}

type DispositionCode is {
  code is String(1, 20) with {
    briefly "Code"
    described by "Disposition code."
  }
  description is String(1, 200) with {
    briefly "Description"
    described by "Code description."
  }
} with {
  briefly "Disposition code"
  described by "Incident closure code."
}
