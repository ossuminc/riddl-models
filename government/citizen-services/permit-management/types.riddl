// Permit Management - Shared Types

type PermitId is Id(PermitContext.Permit) with {
  briefly "Permit identifier"
  described by "Unique identifier for a permit."
}

type ApplicationId is UUID with {
  briefly "Application identifier"
  described by "Reference to an application."
}

type InspectionId is UUID with {
  briefly "Inspection identifier"
  described by "Reference to an inspection."
}

type ReviewerId is UUID with {
  briefly "Reviewer identifier"
  described by "Reference to a reviewer."
}

type InspectorId is UUID with {
  briefly "Inspector identifier"
  described by "Reference to an inspector."
}

type ParcelId is String(1, 50) with {
  briefly "Parcel identifier"
  described by "Property parcel number."
}

type PermitStatus is any of {
  Draft,
  Submitted,
  InReview,
  Corrections,
  Approved,
  Issued,
  Active,
  Expired,
  Closed,
  Voided,
  Revoked
} with {
  briefly "Permit status"
  described by "Current permit state."
}

type PermitType is any of {
  Building,
  Electrical,
  Plumbing,
  Mechanical,
  Demolition,
  Grading,
  Zoning,
  SignPermit,
  FireAlarm,
  SpecialEvent,
  Encroachment
} with {
  briefly "Permit type"
  described by "Category of permit."
}

type InspectionStatus is any of {
  Scheduled,
  InProgress,
  Passed,
  Failed,
  PartialPass,
  Cancelled,
  NoAccess
} with {
  briefly "Inspection status"
  described by "Inspection result status."
}

type InspectionType is any of {
  Foundation,
  Framing,
  Rough,
  Final,
  Electrical,
  Plumbing,
  Mechanical,
  Fire,
  Zoning,
  PreInspection
} with {
  briefly "Inspection type"
  described by "Category of inspection."
}

type Address is {
  street is String(1, 200) with {
    briefly "Street"
    described by "Street address."
  }
  city is String(1, 100) with {
    briefly "City"
    described by "City."
  }
  state is String(2, 50) with {
    briefly "State"
    described by "State."
  }
  postalCode is String(5, 10) with {
    briefly "Postal"
    described by "ZIP code."
  }
} with {
  briefly "Address"
  described by "Physical address."
}

type ApplicantInfo is {
  name is String(1, 200) with {
    briefly "Name"
    described by "Applicant name."
  }
  companyName is optional String(1, 200) with {
    briefly "Company"
    described by "Company name."
  }
  address is Address with {
    briefly "Address"
    described by "Contact address."
  }
  phone is String(10, 20) with {
    briefly "Phone"
    described by "Phone number."
  }
  email is String(5, 254) with {
    briefly "Email"
    described by "Email address."
  }
  licenseNumber is optional String(1, 50) with {
    briefly "License"
    described by "Contractor license."
  }
} with {
  briefly "Applicant info"
  described by "Permit applicant information."
}

type PropertyInfo is {
  parcelId is ParcelId with {
    briefly "Parcel"
    described by "Parcel number."
  }
  address is Address with {
    briefly "Address"
    described by "Property address."
  }
  ownerName is String(1, 200) with {
    briefly "Owner"
    described by "Property owner."
  }
  zoningCode is String(1, 20) with {
    briefly "Zoning"
    described by "Zoning designation."
  }
  lotSize is Decimal(10, 2) with {
    briefly "Lot size"
    described by "Lot size in sq ft."
  }
} with {
  briefly "Property info"
  described by "Property information."
}

type ProjectInfo is {
  description is String(1, 2000) with {
    briefly "Description"
    described by "Project description."
  }
  workType is String(1, 100) with {
    briefly "Work type"
    described by "Type of work."
  }
  estimatedValue is Decimal(12, 2) with {
    briefly "Value"
    described by "Estimated project value."
  }
  squareFootage is optional Decimal(10, 2) with {
    briefly "Sq ft"
    described by "Square footage affected."
  }
  stories is optional Natural with {
    briefly "Stories"
    described by "Number of stories."
  }
  occupancyType is optional String(1, 50) with {
    briefly "Occupancy"
    described by "Building occupancy type."
  }
  constructionType is optional String(1, 50) with {
    briefly "Construction"
    described by "Construction type."
  }
} with {
  briefly "Project info"
  described by "Construction project details."
}

type DocumentSubmission is {
  documentType is String(1, 100) with {
    briefly "Type"
    described by "Document type."
  }
  fileName is String(1, 255) with {
    briefly "File"
    described by "File name."
  }
  uploadedAt is TimeStamp with {
    briefly "Uploaded"
    described by "Upload time."
  }
  reviewStatus is String(1, 50) with {
    briefly "Status"
    described by "Review status."
  }
  comments is optional String(1, 1000) with {
    briefly "Comments"
    described by "Review comments."
  }
} with {
  briefly "Document submission"
  described by "Submitted plan or document."
}

type PlanReview is {
  reviewType is String(1, 100) with {
    briefly "Type"
    described by "Review discipline."
  }
  reviewerId is ReviewerId with {
    briefly "Reviewer"
    described by "Assigned reviewer."
  }
  status is String(1, 50) with {
    briefly "Status"
    described by "Review status."
  }
  comments is many optional String(1, 1000) with {
    briefly "Comments"
    described by "Review comments."
  }
  completedAt is optional TimeStamp with {
    briefly "Completed"
    described by "Completion time."
  }
} with {
  briefly "Plan review"
  described by "Plan review record."
}

type FeeInfo is {
  feeType is String(1, 100) with {
    briefly "Type"
    described by "Fee type."
  }
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Fee amount."
  }
  paidAt is optional TimeStamp with {
    briefly "Paid"
    described by "Payment time."
  }
  receiptNumber is optional String(1, 50) with {
    briefly "Receipt"
    described by "Receipt number."
  }
} with {
  briefly "Fee info"
  described by "Permit fee record."
}

type InspectionRecord is {
  inspectionId is InspectionId with {
    briefly "Inspection"
    described by "Inspection identifier."
  }
  inspectionType is InspectionType with {
    briefly "Type"
    described by "Inspection type."
  }
  inspectorId is InspectorId with {
    briefly "Inspector"
    described by "Assigned inspector."
  }
  scheduledDate is Date with {
    briefly "Scheduled"
    described by "Scheduled date."
  }
  status is InspectionStatus with {
    briefly "Status"
    described by "Inspection result."
  }
  conductedAt is optional TimeStamp with {
    briefly "Conducted"
    described by "Inspection time."
  }
  comments is optional String(1, 2000) with {
    briefly "Comments"
    described by "Inspector comments."
  }
  corrections is many optional String(1, 500) with {
    briefly "Corrections"
    described by "Required corrections."
  }
} with {
  briefly "Inspection record"
  described by "Inspection documentation."
}

type PermitCondition is {
  conditionType is String(1, 100) with {
    briefly "Type"
    described by "Condition type."
  }
  description is String(1, 1000) with {
    briefly "Description"
    described by "Condition description."
  }
  dueDate is optional Date with {
    briefly "Due"
    described by "Compliance due date."
  }
  satisfied is Boolean with {
    briefly "Satisfied"
    described by "Condition met."
  }
} with {
  briefly "Permit condition"
  described by "Permit approval condition."
}
