// Audience Management - Shared Types

type SegmentId is Id(AudienceContext.AudienceSegment) with {
  briefly "Segment identifier"
  described by "Unique identifier for an audience segment."
}

type AudienceId is UUID with {
  briefly "Audience member identifier"
  described by "Reference to an individual audience member."
}

type PersonaId is UUID with {
  briefly "Persona identifier"
  described by "Reference to a marketing persona."
}

type CampaignId is UUID with {
  briefly "Campaign identifier"
  described by "Reference to a marketing campaign."
}

type ChannelId is UUID with {
  briefly "Channel identifier"
  described by "Reference to a marketing channel."
}

type SegmentStatus is any of {
  Draft,
  Building,
  Active,
  Paused,
  Archived,
  Failed
} with {
  briefly "Segment status"
  described by "Audience segment lifecycle status."
}

type SegmentType is any of {
  Demographic,
  Behavioral,
  Psychographic,
  Geographic,
  Firmographic,
  Lookalike,
  Custom
} with {
  briefly "Segment type"
  described by "Classification of audience segment."
}

type ActivationChannel is any of {
  Email,
  Display,
  Social,
  Search,
  Programmatic,
  DirectMail,
  PushNotification
} with {
  briefly "Activation channel"
  described by "Marketing channel for audience activation."
}

type MatchOperator is any of {
  Equals,
  NotEquals,
  GreaterThan,
  LessThan,
  Contains,
  NotContains,
  Between,
  InList
} with {
  briefly "Match operator"
  described by "Comparison operator for segment criteria."
}

type CriterionRule is {
  fieldName is String(3, 200) with {
    briefly "Field"
    described by "Data field to evaluate."
  }
  operator is MatchOperator with {
    briefly "Operator"
    described by "Comparison operator."
  }
  fieldValue is String(1, 500) with {
    briefly "Value"
    described by "Value to match against."
  }
} with {
  briefly "Criterion rule"
  described by "Single rule within a segmentation criterion."
}

type SegmentCriteria is {
  criteriaName is String(3, 200) with {
    briefly "Name"
    described by "Criteria group name."
  }
  rules is many CriterionRule with {
    briefly "Rules"
    described by "Rules in this criteria group."
  }
  matchAll is Boolean with {
    briefly "Match all"
    described by "True if all rules must match (AND), false for any (OR)."
  }
} with {
  briefly "Segment criteria"
  described by "Group of rules defining segment membership."
}

type PersonaProfile is {
  personaId is PersonaId with {
    briefly "Persona ID"
    described by "Persona identifier."
  }
  personaName is String(3, 200) with {
    briefly "Name"
    described by "Persona name."
  }
  ageRange is String(3, 50) with {
    briefly "Age range"
    described by "Target age range."
  }
  interests is many String(3, 200) with {
    briefly "Interests"
    described by "Key interests."
  }
  behaviors is many String(3, 200) with {
    briefly "Behaviors"
    described by "Behavioral traits."
  }
  preferredChannels is many ActivationChannel with {
    briefly "Channels"
    described by "Preferred marketing channels."
  }
} with {
  briefly "Persona profile"
  described by "Marketing persona characteristics."
}

type AudienceMember is {
  memberId is AudienceId with {
    briefly "Member ID"
    described by "Audience member identifier."
  }
  memberEmail is optional String(3, 300) with {
    briefly "Email"
    described by "Member email address."
  }
  attributes is many String(3, 500) with {
    briefly "Attributes"
    described by "Member attribute values."
  }
  matchScore is Decimal(5, 2) with {
    briefly "Score"
    described by "Segment match score."
  }
  addedAt is TimeStamp with {
    briefly "Added"
    described by "When member was added to segment."
  }
} with {
  briefly "Audience member"
  described by "Individual member of an audience segment."
}

type ActivationRecord is {
  channelType is ActivationChannel with {
    briefly "Channel"
    described by "Activation channel."
  }
  campaignId is CampaignId with {
    briefly "Campaign"
    described by "Target campaign."
  }
  activatedAt is TimeStamp with {
    briefly "Activated"
    described by "Activation time."
  }
  memberCount is Natural with {
    briefly "Members"
    described by "Members pushed to channel."
  }
  syncStatus is String(3, 50) with {
    briefly "Status"
    described by "Sync status with channel."
  }
} with {
  briefly "Activation record"
  described by "Record of audience activation to a channel."
}

type LookalikeConfig is {
  sourceSegmentId is SegmentId with {
    briefly "Source"
    described by "Seed segment identifier."
  }
  similarityThreshold is Decimal(3, 2) with {
    briefly "Threshold"
    described by "Minimum similarity score (0-1)."
  }
  expansionFactor is Natural with {
    briefly "Expansion"
    described by "Target audience size multiplier."
  }
  modelVersion is String(3, 50) with {
    briefly "Model"
    described by "Lookalike model version."
  }
} with {
  briefly "Lookalike configuration"
  described by "Configuration for lookalike audience modeling."
}
