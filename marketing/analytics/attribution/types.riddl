// Marketing Attribution - Shared Types

type ConversionPathId is Id(AttributionContext.ConversionPath) with {
  briefly "Conversion path identifier"
  described by "Unique identifier for a conversion path."
}

type TouchpointId is UUID with {
  briefly "Touchpoint identifier"
  described by "Reference to a customer touchpoint."
}

type CampaignId is UUID with {
  briefly "Campaign identifier"
  described by "Reference to a marketing campaign."
}

type ChannelId is UUID with {
  briefly "Channel identifier"
  described by "Reference to a marketing channel."
}

type CustomerId is UUID with {
  briefly "Customer identifier"
  described by "Reference to a customer."
}

type ConversionStatus is any of {
  Tracking,
  Converted,
  Attributed,
  Expired,
  Cancelled
} with {
  briefly "Conversion status"
  described by "Status of a conversion path."
}

type ChannelType is any of {
  OrganicSearch,
  PaidSearch,
  SocialMedia,
  Email,
  Display,
  Referral,
  DirectTraffic,
  Affiliate
} with {
  briefly "Channel type"
  described by "Type of marketing channel."
}

type AttributionModelType is any of {
  FirstTouch,
  LastTouch,
  Linear,
  TimeDecay,
  PositionBased,
  DataDriven
} with {
  briefly "Attribution model type"
  described by "Algorithm for attributing conversion credit."
}

type TouchpointInfo is {
  touchpointId is TouchpointId with {
    briefly "Touchpoint ID"
    described by "Touchpoint identifier."
  }
  channelType is ChannelType with {
    briefly "Channel"
    described by "Marketing channel."
  }
  channelId is ChannelId with {
    briefly "Channel ID"
    described by "Channel identifier."
  }
  campaignId is optional CampaignId with {
    briefly "Campaign"
    described by "Associated campaign."
  }
  interactionType is String(3, 100) with {
    briefly "Interaction"
    described by "Type of interaction."
  }
  timestamp is TimeStamp with {
    briefly "Time"
    described by "Touchpoint occurrence time."
  }
  pageUrl is optional String(3, 500) with {
    briefly "Page URL"
    described by "Page URL visited."
  }
  referrerUrl is optional String(3, 500) with {
    briefly "Referrer"
    described by "Referring URL."
  }
} with {
  briefly "Touchpoint info"
  described by "Customer touchpoint details."
}

type ConversionInfo is {
  conversionPathId is ConversionPathId with {
    briefly "Path ID"
    described by "Conversion path identifier."
  }
  customerId is CustomerId with {
    briefly "Customer"
    described by "Customer identifier."
  }
  conversionType is String(3, 100) with {
    briefly "Type"
    described by "Type of conversion."
  }
  conversionValue is Decimal(12, 2) with {
    briefly "Value"
    described by "Monetary value of conversion."
  }
  lookbackWindowDays is Natural with {
    briefly "Lookback"
    described by "Lookback window in days."
  }
  startedAt is TimeStamp with {
    briefly "Started"
    described by "Tracking start time."
  }
} with {
  briefly "Conversion info"
  described by "Conversion path details."
}

type AttributionResult is {
  touchpointId is TouchpointId with {
    briefly "Touchpoint"
    described by "Attributed touchpoint."
  }
  channelType is ChannelType with {
    briefly "Channel"
    described by "Attributed channel."
  }
  creditWeight is Decimal(5, 4) with {
    briefly "Weight"
    described by "Attribution credit weight between 0 and 1."
  }
  creditValue is Decimal(12, 2) with {
    briefly "Credit"
    described by "Monetary credit attributed."
  }
} with {
  briefly "Attribution result"
  described by "Attribution credit for a touchpoint."
}

type ChannelPerformance is {
  channelId is ChannelId with {
    briefly "Channel"
    described by "Channel identifier."
  }
  channelType is ChannelType with {
    briefly "Type"
    described by "Channel type."
  }
  totalSpend is Decimal(12, 2) with {
    briefly "Spend"
    described by "Total channel spend."
  }
  attributedRevenue is Decimal(12, 2) with {
    briefly "Revenue"
    described by "Revenue attributed to channel."
  }
  conversions is Natural with {
    briefly "Conversions"
    described by "Number of conversions."
  }
  returnOnAdSpend is Decimal(8, 4) with {
    briefly "ROAS"
    described by "Return on ad spend ratio."
  }
} with {
  briefly "Channel performance"
  described by "Channel-level attribution performance."
}

type ReportPeriod is {
  startDate is Date with {
    briefly "Start"
    described by "Report period start."
  }
  endDate is Date with {
    briefly "End"
    described by "Report period end."
  }
} with {
  briefly "Report period"
  described by "Time period for attribution reports."
}
