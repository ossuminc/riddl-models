// Email Marketing - Shared Types

type EmailCampaignId is Id(EmailContext.EmailCampaign) with {
  briefly "Campaign identifier"
  described by "Unique identifier for an email campaign."
}

type TemplateId is UUID with {
  briefly "Template identifier"
  described by "Unique identifier for an email template."
}

type ListId is UUID with {
  briefly "List identifier"
  described by "Unique identifier for a mailing list."
}

type SubscriberId is UUID with {
  briefly "Subscriber identifier"
  described by "Unique identifier for a subscriber."
}

type CampaignStatus is any of {
  Draft,
  Scheduled,
  Sending,
  Sent,
  Paused,
  Cancelled
} with {
  briefly "Campaign status"
  described by "Email campaign lifecycle status."
}

type CampaignType is any of {
  Newsletter,
  Promotional,
  Transactional,
  Automated,
  ABTest
} with {
  briefly "Campaign type"
  described by "Type of email campaign."
}

type EmailTemplate is {
  templateId is TemplateId with {
    briefly "Template ID"
    described by "Template identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Template name."
  }
  subject is String(1, 500) with {
    briefly "Subject"
    described by "Email subject line."
  }
  preheader is optional String(1, 200) with {
    briefly "Preheader"
    described by "Email preheader text."
  }
  htmlContent is String(1, 500000) with {
    briefly "HTML"
    described by "HTML email content."
  }
  plainTextContent is optional String(1, 100000) with {
    briefly "Plain text"
    described by "Plain text version."
  }
  personalizationTags is many optional String(1, 50) with {
    briefly "Tags"
    described by "Personalization tags."
  }
} with {
  briefly "Email template"
  described by "Email content template."
}

type MailingList is {
  listId is ListId with {
    briefly "List ID"
    described by "List identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "List name."
  }
  subscriberCount is Natural with {
    briefly "Subscribers"
    described by "Subscriber count."
  }
  description is optional String(1, 500) with {
    briefly "Description"
    described by "List description."
  }
} with {
  briefly "Mailing list"
  described by "Email subscriber list."
}

type SegmentCriteria is {
  field is String(1, 100) with {
    briefly "Field"
    described by "Field to segment on."
  }
  operator is String(1, 20) with {
    briefly "Operator"
    described by "Comparison operator."
  }
  value is String(1, 500) with {
    briefly "Value"
    described by "Comparison value."
  }
} with {
  briefly "Segment criteria"
  described by "Audience segmentation rule."
}

type AudienceSegment is {
  name is String(1, 200) with {
    briefly "Name"
    described by "Segment name."
  }
  criteria is many SegmentCriteria with {
    briefly "Criteria"
    described by "Segment criteria."
  }
  estimatedSize is Natural with {
    briefly "Size"
    described by "Estimated audience size."
  }
} with {
  briefly "Audience segment"
  described by "Targeted audience segment."
}

type ScheduleInfo is {
  sendAt is TimeStamp with {
    briefly "Send at"
    described by "Scheduled send time."
  }
  timezone is String(1, 50) with {
    briefly "Timezone"
    described by "Recipient timezone."
  }
  useOptimalTime is Boolean with {
    briefly "Optimal"
    described by "Use optimal send time."
  }
} with {
  briefly "Schedule info"
  described by "Campaign scheduling details."
}

type SendSettings is {
  fromName is String(1, 100) with {
    briefly "From name"
    described by "Sender display name."
  }
  fromEmail is EmailAddress with {
    briefly "From email"
    described by "Sender email address."
  }
  replyTo is optional EmailAddress with {
    briefly "Reply to"
    described by "Reply-to address."
  }
  trackOpens is Boolean with {
    briefly "Track opens"
    described by "Track email opens."
  }
  trackClicks is Boolean with {
    briefly "Track clicks"
    described by "Track link clicks."
  }
} with {
  briefly "Send settings"
  described by "Email sending configuration."
}

type ABTestConfig is {
  testType is String(1, 50) with {
    briefly "Test type"
    described by "A/B test type."
  }
  variantA is String(1, 1000) with {
    briefly "Variant A"
    described by "First variant."
  }
  variantB is String(1, 1000) with {
    briefly "Variant B"
    described by "Second variant."
  }
  testPercent is Natural with {
    briefly "Test percent"
    described by "Percent of list to test."
  }
  winnerCriteria is String(1, 50) with {
    briefly "Winner criteria"
    described by "How to pick winner."
  }
  testDuration is Natural with {
    briefly "Duration"
    described by "Test duration in hours."
  }
} with {
  briefly "A/B test config"
  described by "A/B testing configuration."
}

type DeliveryMetrics is {
  sent is Natural with {
    briefly "Sent"
    described by "Emails sent."
  }
  delivered is Natural with {
    briefly "Delivered"
    described by "Emails delivered."
  }
  bounced is Natural with {
    briefly "Bounced"
    described by "Emails bounced."
  }
  opened is Natural with {
    briefly "Opened"
    described by "Emails opened."
  }
  clicked is Natural with {
    briefly "Clicked"
    described by "Links clicked."
  }
  unsubscribed is Natural with {
    briefly "Unsubscribed"
    described by "Unsubscribes."
  }
  complained is Natural with {
    briefly "Complained"
    described by "Spam complaints."
  }
} with {
  briefly "Delivery metrics"
  described by "Email delivery statistics."
}

type EngagementRates is {
  openRate is Decimal(5, 2) with {
    briefly "Open rate"
    described by "Open rate percent."
  }
  clickRate is Decimal(5, 2) with {
    briefly "Click rate"
    described by "Click rate percent."
  }
  clickToOpenRate is Decimal(5, 2) with {
    briefly "CTOR"
    described by "Click-to-open rate."
  }
  unsubscribeRate is Decimal(5, 4) with {
    briefly "Unsubscribe"
    described by "Unsubscribe rate."
  }
  bounceRate is Decimal(5, 4) with {
    briefly "Bounce"
    described by "Bounce rate."
  }
  complaintRate is Decimal(5, 4) with {
    briefly "Complaint"
    described by "Complaint rate."
  }
} with {
  briefly "Engagement rates"
  described by "Email engagement percentages."
}

type LinkClick is {
  url is URL with {
    briefly "URL"
    described by "Clicked URL."
  }
  clickCount is Natural with {
    briefly "Clicks"
    described by "Click count."
  }
  uniqueClicks is Natural with {
    briefly "Unique"
    described by "Unique clickers."
  }
} with {
  briefly "Link click"
  described by "Link click tracking."
}
