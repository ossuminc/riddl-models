// Email Marketing - Shared Types
type EmailAddress is String(5,254) with {
  briefly "Email address"
  described as {
    |An email address.
  }
}
type EmailCampaignId is Id(EmailContext.EmailCampaign)  with {
  briefly "Campaign identifier"
  described as {
    |Unique identifier for an email campaign.
  }
}
type TemplateId is UUID with {
  briefly "Template identifier"
  described as {
    |Unique identifier for an email template.
  }
}
type ListId is UUID with {
  briefly "List identifier"
  described as {
    |Unique identifier for a mailing list.
  }
}
type SubscriberId is UUID with {
  briefly "Subscriber identifier"
  described as {
    |Unique identifier for a subscriber.
  }
}
type CampaignStatus is any of {
  Draft,
  Scheduled,
  Sending,
  Sent,
  Paused,
  Cancelled
} with {
  briefly "Campaign status"
  described as {
    |Email campaign lifecycle status.
  }
}
type CampaignType is any of {
  Newsletter,
  Promotional,
  Transactional,
  Automated,
  ABTest
} with {
  briefly "Campaign type"
  described as {
    |Type of email campaign.
  }
}
type EmailTemplate is {
  templateId: TemplateId with {
    briefly "Template ID"
    described as {
      |Template identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Template name.
    }
  }
  subject: String(1,500) with {
    briefly "Subject"
    described as {
      |Email subject line.
    }
  }
  preheader: String(1,200)? with {
    briefly "Preheader"
    described as {
      |Email preheader text.
    }
  }
  htmlContent: String(1,500000) with {
    briefly "HTML"
    described as {
      |HTML email content.
    }
  }
  plainTextContent: String(1,100000)? with {
    briefly "Plain text"
    described as {
      |Plain text version.
    }
  }
  personalizationTags: String(1,50)* with {
    briefly "Tags"
    described as {
      |Personalization tags.
    }
  }
} with {
  briefly "Email template"
  described as {
    |Email content template.
  }
}
type MailingList is {
  listId: ListId with {
    briefly "List ID"
    described as {
      |List identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |List name.
    }
  }
  subscriberCount: Natural with {
    briefly "Subscribers"
    described as {
      |Subscriber count.
    }
  }
  description: String(1,500)? with {
    briefly "Description"
    described as {
      |List description.
    }
  }
} with {
  briefly "Mailing list"
  described as {
    |Email subscriber list.
  }
}
type SegmentCriteria is {
  field: String(1,100) with {
    briefly "Field"
    described as {
      |Field to segment on.
    }
  }
  operator: String(1,20) with {
    briefly "Operator"
    described as {
      |Comparison operator.
    }
  }
  value: String(1,500) with {
    briefly "Value"
    described as {
      |Comparison value.
    }
  }
} with {
  briefly "Segment criteria"
  described as {
    |Audience segmentation rule.
  }
}
type AudienceSegment is {
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Segment name.
    }
  }
  criteria: SegmentCriteria+ with {
    briefly "Criteria"
    described as {
      |Segment criteria.
    }
  }
  estimatedSize: Natural with {
    briefly "Size"
    described as {
      |Estimated audience size.
    }
  }
} with {
  briefly "Audience segment"
  described as {
    |Targeted audience segment.
  }
}
type ScheduleInfo is {
  sendAt: TimeStamp with {
    briefly "Send at"
    described as {
      |Scheduled send time.
    }
  }
  timezone: String(1,50) with {
    briefly "Timezone"
    described as {
      |Recipient timezone.
    }
  }
  useOptimalTime: Boolean with {
    briefly "Optimal"
    described as {
      |Use optimal send time.
    }
  }
} with {
  briefly "Schedule info"
  described as {
    |Campaign scheduling details.
  }
}
type SendSettings is {
  fromName: String(1,100) with {
    briefly "From name"
    described as {
      |Sender display name.
    }
  }
  fromEmail: EmailAddress with {
    briefly "From email"
    described as {
      |Sender email address.
    }
  }
  replyTo: EmailAddress? with {
    briefly "Reply to"
    described as {
      |Reply-to address.
    }
  }
  trackOpens: Boolean with {
    briefly "Track opens"
    described as {
      |Track email opens.
    }
  }
  trackClicks: Boolean with {
    briefly "Track clicks"
    described as {
      |Track link clicks.
    }
  }
} with {
  briefly "Send settings"
  described as {
    |Email sending configuration.
  }
}
type ABTestConfig is {
  testType: String(1,50) with {
    briefly "Test type"
    described as {
      |A/B test type.
    }
  }
  variantA: String(1,1000) with {
    briefly "Variant A"
    described as {
      |First variant.
    }
  }
  variantB: String(1,1000) with {
    briefly "Variant B"
    described as {
      |Second variant.
    }
  }
  testPercent: Natural with {
    briefly "Test percent"
    described as {
      |Percent of list to test.
    }
  }
  winnerCriteria: String(1,50) with {
    briefly "Winner criteria"
    described as {
      |How to pick winner.
    }
  }
  testDuration: Natural with {
    briefly "Duration"
    described as {
      |Test duration in hours.
    }
  }
} with {
  briefly "A/B test config"
  described as {
    |A/B testing configuration.
  }
}
type DeliveryMetrics is {
  sent: Natural with {
    briefly "Sent"
    described as {
      |Emails sent.
    }
  }
  delivered: Natural with {
    briefly "Delivered"
    described as {
      |Emails delivered.
    }
  }
  bounced: Natural with {
    briefly "Bounced"
    described as {
      |Emails bounced.
    }
  }
  opened: Natural with {
    briefly "Opened"
    described as {
      |Emails opened.
    }
  }
  clicked: Natural with {
    briefly "Clicked"
    described as {
      |Links clicked.
    }
  }
  unsubscribed: Natural with {
    briefly "Unsubscribed"
    described as {
      |Unsubscribes.
    }
  }
  complained: Natural with {
    briefly "Complained"
    described as {
      |Spam complaints.
    }
  }
} with {
  briefly "Delivery metrics"
  described as {
    |Email delivery statistics.
  }
}
type EngagementRates is {
  openRate: Decimal(5,2) with {
    briefly "Open rate"
    described as {
      |Open rate percent.
    }
  }
  clickRate: Decimal(5,2) with {
    briefly "Click rate"
    described as {
      |Click rate percent.
    }
  }
  clickToOpenRate: Decimal(5,2) with {
    briefly "CTOR"
    described as {
      |Click-to-open rate.
    }
  }
  unsubscribeRate: Decimal(5,4) with {
    briefly "Unsubscribe"
    described as {
      |Unsubscribe rate.
    }
  }
  bounceRate: Decimal(5,4) with {
    briefly "Bounce"
    described as {
      |Bounce rate.
    }
  }
  complaintRate: Decimal(5,4) with {
    briefly "Complaint"
    described as {
      |Complaint rate.
    }
  }
} with {
  briefly "Engagement rates"
  described as {
    |Email engagement percentages.
  }
}
type LinkClick is {
  url: URL with {
    briefly "URL"
    described as {
      |Clicked URL.
    }
  }
  clickCount: Natural with {
    briefly "Clicks"
    described as {
      |Click count.
    }
  }
  uniqueClicks: Natural with {
    briefly "Unique"
    described as {
      |Unique clickers.
    }
  }
} with {
  briefly "Link click"
  described as {
    |Link click tracking.
  }
}
