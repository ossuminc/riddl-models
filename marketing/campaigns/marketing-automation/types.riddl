// Marketing Automation - Shared Types
type WorkflowId is Id(AutomationContext.AutomationWorkflow)  with {
  briefly "Workflow identifier"
  described as {
    |Unique identifier for an automation workflow.
  }
}
type CampaignId is UUID with {
  briefly "Campaign identifier"
  described as {
    |Reference to a marketing campaign.
  }
}
type LeadId is UUID with {
  briefly "Lead identifier"
  described as {
    |Reference to a lead or contact.
  }
}
type SegmentId is UUID with {
  briefly "Segment identifier"
  described as {
    |Reference to an audience segment.
  }
}
type WorkflowStatus is any of {
  Draft,
  Scheduled,
  Active,
  Paused,
  Completed,
  Archived
} with {
  briefly "Workflow status"
  described as {
    |Automation workflow lifecycle status.
  }
}
type TriggerType is any of {
  TimeBased,
  EventBased,
  BehaviorBased,
  SegmentEntry,
  FormSubmission,
  PageVisit,
  EmailInteraction
} with {
  briefly "Trigger type"
  described as {
    |Type of event that initiates a workflow action.
  }
}
type ChannelType is any of {
  Email,
  SMS,
  PushNotification,
  InAppMessage,
  Webhook
} with {
  briefly "Channel type"
  described as {
    |Communication channel for message delivery.
  }
}
type StepAction is any of {
  SendMessage,
  WaitDelay,
  ConditionalBranch,
  ScoreLeadUpdate,
  AddToSegment,
  RemoveFromSegment,
  NotifySalesRep,
  EndWorkflow
} with {
  briefly "Step action"
  described as {
    |Type of action performed at a workflow step.
  }
}
type TestVariant is any of {
  VariantAlpha,
  VariantBravo,
  VariantCharlie,
  Control
} with {
  briefly "Test variant"
  described as {
    |A/B test variant identifier.
  }
}
type TestMetricType is any of {
  OpenRate,
  ClickRate,
  ConversionRate,
  UnsubscribeRate,
  RevenuePerRecipient
} with {
  briefly "Test metric type"
  described as {
    |Metric used to evaluate A/B test results.
  }
}
type WorkflowTrigger is {
  triggerType: TriggerType with {
    briefly "Type"
    described as {
      |Trigger type.
    }
  }
  triggerCondition: String(3,500) with {
    briefly "Condition"
    described as {
      |Trigger condition expression.
    }
  }
  targetSegmentId: SegmentId? with {
    briefly "Segment"
    described as {
      |Target segment for trigger.
    }
  }
} with {
  briefly "Workflow trigger"
  described as {
    |Defines what initiates the workflow.
  }
}
type WorkflowStep is {
  stepId: UUID with {
    briefly "Step ID"
    described as {
      |Step identifier.
    }
  }
  stepOrder: Natural with {
    briefly "Order"
    described as {
      |Step execution order.
    }
  }
  action: StepAction with {
    briefly "Action"
    described as {
      |Action to perform.
    }
  }
  deliveryChannel: ChannelType? with {
    briefly "Channel"
    described as {
      |Delivery channel if sending message.
    }
  }
  messageSubject: String(3,200)? with {
    briefly "Subject"
    described as {
      |Message subject line.
    }
  }
  messageBody: String(3,10000)? with {
    briefly "Content"
    described as {
      |Message content body.
    }
  }
  delayHours: Natural? with {
    briefly "Delay"
    described as {
      |Hours to wait before executing step.
    }
  }
  conditionExpr: String(3,500)? with {
    briefly "Condition"
    described as {
      |Branch condition expression.
    }
  }
} with {
  briefly "Workflow step"
  described as {
    |A single step in the automation workflow.
  }
}
type ABTestConfig is {
  testName: String(3,200) with {
    briefly "Name"
    described as {
      |A/B test name.
    }
  }
  targetMetric: TestMetricType with {
    briefly "Metric"
    described as {
      |Primary metric for evaluation.
    }
  }
  variants: TestVariant+ with {
    briefly "Variants"
    described as {
      |Test variants.
    }
  }
  samplePercentage: Decimal(5,2) with {
    briefly "Sample"
    described as {
      |Percentage of audience in test.
    }
  }
  durationHours: Natural with {
    briefly "Duration"
    described as {
      |Test duration in hours.
    }
  }
} with {
  briefly "A/B test configuration"
  described as {
    |Configuration for an A/B test experiment.
  }
}
type ABTestResult is {
  variant: TestVariant with {
    briefly "Variant"
    described as {
      |Test variant.
    }
  }
  recipientCount: Natural with {
    briefly "Recipients"
    described as {
      |Number of recipients.
    }
  }
  metricValue: Decimal(10,4) with {
    briefly "Value"
    described as {
      |Metric value for variant.
    }
  }
  isWinner: Boolean with {
    briefly "Winner"
    described as {
      |Whether this variant won.
    }
  }
} with {
  briefly "A/B test result"
  described as {
    |Result for a single A/B test variant.
  }
}
type LeadEnrollment is {
  leadId: LeadId with {
    briefly "Lead"
    described as {
      |Enrolled lead identifier.
    }
  }
  enrolledAt: TimeStamp with {
    briefly "Enrolled"
    described as {
      |Enrollment timestamp.
    }
  }
  currentStepId: UUID? with {
    briefly "Current step"
    described as {
      |Current workflow step.
    }
  }
  enrollmentStatus: String(3,50) with {
    briefly "Status"
    described as {
      |Enrollment status.
    }
  }
} with {
  briefly "Lead enrollment"
  described as {
    |A lead enrolled in a workflow.
  }
}
type CampaignMetrics is {
  totalEnrolled: Natural with {
    briefly "Enrolled"
    described as {
      |Total leads enrolled.
    }
  }
  totalSent: Natural with {
    briefly "Sent"
    described as {
      |Total messages sent.
    }
  }
  totalOpened: Natural with {
    briefly "Opened"
    described as {
      |Total messages opened.
    }
  }
  totalClicked: Natural with {
    briefly "Clicked"
    described as {
      |Total link clicks.
    }
  }
  totalConverted: Natural with {
    briefly "Converted"
    described as {
      |Total conversions.
    }
  }
  totalUnsubscribed: Natural with {
    briefly "Unsubscribed"
    described as {
      |Total unsubscribes.
    }
  }
} with {
  briefly "Campaign metrics"
  described as {
    |Aggregate campaign performance metrics.
  }
}
