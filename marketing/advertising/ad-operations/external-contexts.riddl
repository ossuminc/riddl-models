// Ad Operations - External Contexts
context AdExchange is {
  command SubmitAdRequest is  {
    campaignId: AdCampaignId with {
      briefly "Campaign"
      described as {
        |Campaign ID.
      }
    }
    placement: AdPlacement with {
      briefly "Placement"
      described as {
        |Ad placement.
      }
    }
    creative: CreativeAsset with {
      briefly "Creative"
      described as {
        |Creative asset.
      }
    }
  } with {
    briefly "Submit ad request"
    described as {
      |Submits an ad for delivery via the exchange.
    }
  }
  event AdRequestAccepted is  {
    campaignId: AdCampaignId with {
      briefly "Campaign"
      described as {
        |Campaign ID.
      }
    }
    placementId: PlacementId with {
      briefly "Placement"
      described as {
        |Placement ID.
      }
    }
    acceptedAt: TimeStamp with {
      briefly "Accepted"
      described as {
        |Acceptance time.
      }
    }
  } with {
    briefly "Ad request accepted"
    described as {
      |Emitted when exchange accepts ad request.
    }
  }
  query GetBidResults is  {
    campaignId: AdCampaignId with {
      briefly "Campaign"
      described as {
        |Campaign ID.
      }
    }
    placementId: PlacementId with {
      briefly "Placement"
      described as {
        |Placement ID.
      }
    }
  } with {
    briefly "Get bid results"
    described as {
      |Gets real-time bidding results.
    }
  }
  result BidResults is  {
    placementId: PlacementId with {
      briefly "Placement"
      described as {
        |Placement ID.
      }
    }
    winRate: Decimal(5,4) with {
      briefly "Win rate"
      described as {
        |Bid win rate.
      }
    }
    averageBid: Decimal(10,4) with {
      briefly "Avg bid"
      described as {
        |Average winning bid.
      }
    }
    impressionsWon: Natural with {
      briefly "Won"
      described as {
        |Impressions won.
      }
    }
  } with {
    briefly "Bid results"
    described as {
      |Real-time bidding results.
    }
  }
} with {
  option external()
  briefly "External ad exchange"
  described as {
    |Programmatic ad exchange for real-time bidding and delivery.
  }
}
context CreativeAssetStore is {
  command UploadCreative is  {
    creativeId: CreativeId with {
      briefly "Creative"
      described as {
        |Creative ID.
      }
    }
    assetName: String(3,200) with {
      briefly "Name"
      described as {
        |Asset name.
      }
    }
    adFormat: AdFormat with {
      briefly "Format"
      described as {
        |Ad format.
      }
    }
    contentUrl: String(3,500) with {
      briefly "URL"
      described as {
        |Upload URL.
      }
    }
  } with {
    briefly "Upload creative"
    described as {
      |Uploads a creative asset to the store.
    }
  }
  event CreativeUploaded is  {
    creativeId: CreativeId with {
      briefly "Creative"
      described as {
        |Creative ID.
      }
    }
    storedUrl: String(3,500) with {
      briefly "Stored URL"
      described as {
        |Stored asset URL.
      }
    }
    uploadedAt: TimeStamp with {
      briefly "Uploaded"
      described as {
        |Upload time.
      }
    }
  } with {
    briefly "Creative uploaded"
    described as {
      |Emitted when creative is uploaded.
    }
  }
  query GetCreativeAsset is  {
    creativeId: CreativeId with {
      briefly "Creative"
      described as {
        |Creative ID.
      }
    }
  } with {
    briefly "Get creative asset"
    described as {
      |Retrieves a creative asset.
    }
  }
  result CreativeAssetResult is  {
    creativeId: CreativeId with {
      briefly "Creative"
      described as {
        |Creative ID.
      }
    }
    assetName: String(3,200) with {
      briefly "Name"
      described as {
        |Asset name.
      }
    }
    adFormat: AdFormat with {
      briefly "Format"
      described as {
        |Ad format.
      }
    }
    assetUrl: String(3,500) with {
      briefly "URL"
      described as {
        |Asset URL.
      }
    }
    assetStatus: String(3,50) with {
      briefly "Status"
      described as {
        |Asset status.
      }
    }
  } with {
    briefly "Creative asset result"
    described as {
      |Creative asset retrieval result.
    }
  }
} with {
  option external()
  briefly "External creative asset store"
  described as {
    |Digital asset management system for creative storage and retrieval.
  }
}
