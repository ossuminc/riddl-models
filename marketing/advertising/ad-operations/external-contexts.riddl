// Ad Operations - External Contexts

context AdExchange is {

  command SubmitAdRequest is {
    campaignId is AdCampaignId with { briefly "Campaign" described by "Campaign ID." }
    placement is AdPlacement with { briefly "Placement" described by "Ad placement." }
    creative is CreativeAsset with { briefly "Creative" described by "Creative asset." }
  } with {
    briefly "Submit ad request"
    described by "Submits an ad for delivery via the exchange."
  }

  event AdRequestAccepted is {
    campaignId is AdCampaignId with { briefly "Campaign" described by "Campaign ID." }
    placementId is PlacementId with { briefly "Placement" described by "Placement ID." }
    acceptedAt is TimeStamp with { briefly "Accepted" described by "Acceptance time." }
  } with {
    briefly "Ad request accepted"
    described by "Emitted when exchange accepts ad request."
  }

  query GetBidResults is {
    campaignId is AdCampaignId with { briefly "Campaign" described by "Campaign ID." }
    placementId is PlacementId with { briefly "Placement" described by "Placement ID." }
  } with {
    briefly "Get bid results"
    described by "Gets real-time bidding results."
  }

  result BidResults is {
    placementId is PlacementId with { briefly "Placement" described by "Placement ID." }
    winRate is Decimal(5, 4) with { briefly "Win rate" described by "Bid win rate." }
    averageBid is Decimal(10, 4) with { briefly "Avg bid" described by "Average winning bid." }
    impressionsWon is Natural with { briefly "Won" described by "Impressions won." }
  } with {
    briefly "Bid results"
    described by "Real-time bidding results."
  }

} with {
  option is external
  briefly "External ad exchange"
  described by "Programmatic ad exchange for real-time bidding and delivery."
}

context CreativeAssetStore is {

  command UploadCreative is {
    creativeId is CreativeId with { briefly "Creative" described by "Creative ID." }
    assetName is String(3, 200) with { briefly "Name" described by "Asset name." }
    adFormat is AdFormat with { briefly "Format" described by "Ad format." }
    contentUrl is String(3, 500) with { briefly "URL" described by "Upload URL." }
  } with {
    briefly "Upload creative"
    described by "Uploads a creative asset to the store."
  }

  event CreativeUploaded is {
    creativeId is CreativeId with { briefly "Creative" described by "Creative ID." }
    storedUrl is String(3, 500) with { briefly "Stored URL" described by "Stored asset URL." }
    uploadedAt is TimeStamp with { briefly "Uploaded" described by "Upload time." }
  } with {
    briefly "Creative uploaded"
    described by "Emitted when creative is uploaded."
  }

  query GetCreativeAsset is {
    creativeId is CreativeId with { briefly "Creative" described by "Creative ID." }
  } with {
    briefly "Get creative asset"
    described by "Retrieves a creative asset."
  }

  result CreativeAssetResult is {
    creativeId is CreativeId with { briefly "Creative" described by "Creative ID." }
    assetName is String(3, 200) with { briefly "Name" described by "Asset name." }
    adFormat is AdFormat with { briefly "Format" described by "Ad format." }
    assetUrl is String(3, 500) with { briefly "URL" described by "Asset URL." }
    status is String(3, 50) with { briefly "Status" described by "Asset status." }
  } with {
    briefly "Creative asset result"
    described by "Creative asset retrieval result."
  }

} with {
  option is external
  briefly "External creative asset store"
  described by "Digital asset management system for creative storage and retrieval."
}
