// Social Media Management - External Contexts
context PlatformAPI is {
  command PublishToPlatform is  {
    accountId: AccountId with {
      briefly "Account"
      described as {
        |Account ID.
      }
    }
    platform: Platform with {
      briefly "Platform"
      described as {
        |Target platform.
      }
    }
    content: PostContent with {
      briefly "Content"
      described as {
        |Post content.
      }
    }
  } with {
    briefly "Publish to platform"
    described as {
      |Publishes post to platform.
    }
  }
  event PlatformPublished is  {
    accountId: AccountId with {
      briefly "Account"
      described as {
        |Account ID.
      }
    }
    platform: Platform with {
      briefly "Platform"
      described as {
        |Platform.
      }
    }
    platformPostId: String(1,100) with {
      briefly "Post ID"
      described as {
        |Platform's ID.
      }
    }
    postUrl: URL with {
      briefly "URL"
      described as {
        |Post URL.
      }
    }
    publishedAt: TimeStamp with {
      briefly "Published"
      described as {
        |Publish time.
      }
    }
  } with {
    briefly "Platform published"
    described as {
      |Emitted when published.
    }
  }
  event PlatformPublishFailed is  {
    accountId: AccountId with {
      briefly "Account"
      described as {
        |Account ID.
      }
    }
    platform: Platform with {
      briefly "Platform"
      described as {
        |Platform.
      }
    }
    errorCode: String(1,50) with {
      briefly "Code"
      described as {
        |Error code.
      }
    }
    errorMessage: String(1,500) with {
      briefly "Message"
      described as {
        |Error message.
      }
    }
  } with {
    briefly "Platform publish failed"
    described as {
      |Emitted when publish fails.
    }
  }
  command FetchEngagement is  {
    platformPostId: String(1,100) with {
      briefly "Post ID"
      described as {
        |Platform post ID.
      }
    }
    platform: Platform with {
      briefly "Platform"
      described as {
        |Platform.
      }
    }
  } with {
    briefly "Fetch engagement"
    described as {
      |Gets engagement metrics.
    }
  }
  event EngagementFetched is  {
    platformPostId: String(1,100) with {
      briefly "Post ID"
      described as {
        |Platform post ID.
      }
    }
    metrics: EngagementMetrics with {
      briefly "Metrics"
      described as {
        |Engagement data.
      }
    }
    fetchedAt: TimeStamp with {
      briefly "Fetched"
      described as {
        |Fetch time.
      }
    }
  } with {
    briefly "Engagement fetched"
    described as {
      |Emitted when metrics retrieved.
    }
  }
  command FetchComments is  {
    platformPostId: String(1,100) with {
      briefly "Post ID"
      described as {
        |Platform post ID.
      }
    }
    platform: Platform with {
      briefly "Platform"
      described as {
        |Platform.
      }
    }
  } with {
    briefly "Fetch comments"
    described as {
      |Gets post comments.
    }
  }
  event CommentsFetched is  {
    platformPostId: String(1,100) with {
      briefly "Post ID"
      described as {
        |Platform post ID.
      }
    }
    comments: Comment+ with {
      briefly "Comments"
      described as {
        |Post comments.
      }
    }
    fetchedAt: TimeStamp with {
      briefly "Fetched"
      described as {
        |Fetch time.
      }
    }
  } with {
    briefly "Comments fetched"
    described as {
      |Emitted when comments retrieved.
    }
  }
  command PostReply is  {
    platformPostId: String(1,100) with {
      briefly "Post ID"
      described as {
        |Platform post ID.
      }
    }
    commentId: String(1,100) with {
      briefly "Comment"
      described as {
        |Comment ID.
      }
    }
    platform: Platform with {
      briefly "Platform"
      described as {
        |Platform.
      }
    }
    replyText: String(1,5000) with {
      briefly "Reply"
      described as {
        |Reply text.
      }
    }
  } with {
    briefly "Post reply"
    described as {
      |Posts reply to comment.
    }
  }
  event ReplyPosted is  {
    commentId: String(1,100) with {
      briefly "Comment"
      described as {
        |Comment ID.
      }
    }
    replyId: String(1,100) with {
      briefly "Reply"
      described as {
        |Reply ID.
      }
    }
    postedAt: TimeStamp with {
      briefly "Posted"
      described as {
        |Post time.
      }
    }
  } with {
    briefly "Reply posted"
    described as {
      |Emitted when reply posted.
    }
  }
} with {
  option external()
  briefly "External platform API"
  described as {
    |Social media platform APIs.
  }
}
context MediaStorage is {
  command UploadMedia is  {
    fileName: String(1,255) with {
      briefly "File"
      described as {
        |File name.
      }
    }
    mimeType: String(1,100) with {
      briefly "Type"
      described as {
        |MIME type.
      }
    }
    data: String(1,100000000) with {
      briefly "Data"
      described as {
        |Base64 data.
      }
    }
  } with {
    briefly "Upload media"
    described as {
      |Uploads media file.
    }
  }
  event MediaUploaded is  {
    assetId: UUID with {
      briefly "Asset"
      described as {
        |Asset ID.
      }
    }
    url: URL with {
      briefly "URL"
      described as {
        |Media URL.
      }
    }
    thumbnailUrl: URL? with {
      briefly "Thumbnail"
      described as {
        |Thumbnail URL.
      }
    }
    uploadedAt: TimeStamp with {
      briefly "Uploaded"
      described as {
        |Upload time.
      }
    }
  } with {
    briefly "Media uploaded"
    described as {
      |Emitted when upload complete.
    }
  }
  command GenerateThumbnail is  {
    assetId: UUID with {
      briefly "Asset"
      described as {
        |Asset ID.
      }
    }
    targetDimensions: String(1,20) with {
      briefly "Dimensions"
      described as {
        |Target size.
      }
    }
  } with {
    briefly "Generate thumbnail"
    described as {
      |Creates thumbnail image.
    }
  }
  event ThumbnailGenerated is  {
    assetId: UUID with {
      briefly "Asset"
      described as {
        |Asset ID.
      }
    }
    generatedThumbnailUrl: URL with {
      briefly "URL"
      described as {
        |Thumbnail URL.
      }
    }
  } with {
    briefly "Thumbnail generated"
    described as {
      |Emitted when thumbnail ready.
    }
  }
} with {
  option external()
  briefly "External media storage"
  described as {
    |Media file storage service.
  }
}
context OptimalTimeService is {
  command GetOptimalPostTime is  {
    accountId: AccountId with {
      briefly "Account"
      described as {
        |Account ID.
      }
    }
    platform: Platform with {
      briefly "Platform"
      described as {
        |Platform.
      }
    }
    contentType: ContentType with {
      briefly "Type"
      described as {
        |Content type.
      }
    }
  } with {
    briefly "Get optimal time"
    described as {
      |Calculates best post time.
    }
  }
  event OptimalTimeCalculated is  {
    accountId: AccountId with {
      briefly "Account"
      described as {
        |Account ID.
      }
    }
    platform: Platform with {
      briefly "Platform"
      described as {
        |Platform.
      }
    }
    optimalTime: TimeStamp with {
      briefly "Time"
      described as {
        |Best time to post.
      }
    }
    confidence: Decimal(3,2) with {
      briefly "Confidence"
      described as {
        |Confidence score.
      }
    }
  } with {
    briefly "Optimal time calculated"
    described as {
      |Emitted when time computed.
    }
  }
} with {
  option external()
  briefly "External optimal time"
  described as {
    |Post timing optimization.
  }
}
context SentimentAnalysis is {
  command AnalyzeComment is  {
    commentId: String(1,100) with {
      briefly "Comment"
      described as {
        |Comment ID.
      }
    }
    text: String(1,5000) with {
      briefly "Text"
      described as {
        |Comment text.
      }
    }
  } with {
    briefly "Analyze comment"
    described as {
      |Analyzes comment sentiment.
    }
  }
  event SentimentAnalyzed is  {
    commentId: String(1,100) with {
      briefly "Comment"
      described as {
        |Comment ID.
      }
    }
    sentiment: String(1,20) with {
      briefly "Sentiment"
      described as {
        |Positive/negative/neutral.
      }
    }
    score: Decimal(3,2) with {
      briefly "Score"
      described as {
        |Sentiment score.
      }
    }
    requiresAttention: Boolean with {
      briefly "Attention"
      described as {
        |Needs response.
      }
    }
  } with {
    briefly "Sentiment analyzed"
    described as {
      |Emitted when analysis complete.
    }
  }
} with {
  option external()
  briefly "External sentiment analysis"
  described as {
    |Comment sentiment service.
  }
}
