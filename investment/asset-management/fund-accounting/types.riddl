// Fund Accounting Types
// Shared type definitions for the fund accounting domain
// === Identifier Types ===
type FundId is Id(FundContext.Fund)  with {
  briefly "Unique identifier for a fund"
  described as {
    | A type-safe identifier used to uniquely identify a fund entity
    | within the system. This ID is used in all fund-related operations
    | and references.
  }
}
type NAVId is UUID with {
  briefly "Unique identifier for a NAV calculation"
  described as {
    | Identifies a specific NAV calculation record. Each daily NAV
    | calculation produces a new NAVId for audit and historical
    | tracking purposes.
  }
}
type TransactionId is UUID with {
  briefly "Unique identifier for a fund transaction"
  described as {
    | Uniquely identifies a transaction within the fund accounting
    | system. Used for transaction tracking, reconciliation, and
    | audit purposes.
  }
}
type HoldingId is UUID with {
  briefly "Unique identifier for a portfolio holding"
  described as {
    | Identifies a specific security or asset holding within a fund's
    | portfolio. Links to the security master and supports position
    | tracking.
  }
}
type InvestorAccountId is UUID with {
  briefly "Unique identifier for an investor account"
  described as {
    | Identifies an investor's account relationship with a fund.
    | An investor may have multiple accounts across different funds
    | or share classes.
  }
}
type SecurityId is UUID with {
  briefly "Unique identifier for a security"
  described as {
    | Identifies a tradeable security such as a stock, bond, or
    | derivative instrument. Links to external security master data.
  }
}
// === Enumeration Types ===
type FundStatus is any of {
  Active,
  Suspended,
  Liquidating,
  Closed
} with {
  briefly "Operational status of a fund"
  described as {
    | Indicates the current operational state of a fund:
    | - Active: Normal operations, accepting subscriptions/redemptions
    | - Suspended: Temporarily halted operations
    | - Liquidating: In the process of closing and distributing assets
    | - Closed: No longer operational
  }
}
type TransactionType is any of {
  Buy,
  Sell,
  Dividend,
  Interest,
  Fee,
  Transfer,
  CorporateAction,
  Adjustment
} with {
  briefly "Classification of fund transactions"
  described as {
    | Categorizes transactions for accounting and reporting:
    | - Buy/Sell: Security purchases and sales
    | - Dividend/Interest: Income received
    | - Fee: Management, performance, and other fees
    | - Transfer: Internal transfers between accounts
    | - CorporateAction: Stock splits, mergers, etc.
    | - Adjustment: Accounting corrections
  }
}
type TransactionStatus is any of {
  Pending,
  Settled,
  Failed,
  Cancelled,
  Reversed
} with {
  briefly "Processing status of a transaction"
  described as {
    | Tracks the lifecycle of a transaction from creation to settlement:
    | - Pending: Awaiting settlement
    | - Settled: Successfully completed
    | - Failed: Could not be processed
    | - Cancelled: Cancelled before settlement
    | - Reversed: Settled but subsequently reversed
  }
}
type AssetClass is any of {
  Equity,
  FixedIncome,
  Cash,
  Derivative,
  Alternative,
  RealEstate,
  Commodity
} with {
  briefly "Classification of asset types"
  described as {
    | High-level categorization of investment assets for allocation
    | tracking and risk management purposes.
  }
}
type FundType is any of {
  OpenEnd,
  ClosedEnd,
  ETF,
  HedgeFund,
  PrivateEquity,
  MutualFund
} with {
  briefly "Legal and structural classification of funds"
  described as {
    | Identifies the fund structure which determines regulatory
    | requirements, redemption rules, and reporting obligations.
  }
}
// === Money and Quantity Types ===
type Money is {
  amount: Decimal(18,4)
  currency: Currency(USD)
} with {
  briefly "Monetary value with currency"
  described as {
    | Represents a monetary amount with high precision for financial
    | calculations. Uses 4 decimal places to handle fractional cents
    | and currency conversions accurately.
  }
}
type Quantity is Decimal(18,8) with {
  briefly "Security quantity or share count"
  described as {
    | Represents the number of shares or units held. Uses 8 decimal
    | places to accommodate fractional shares common in mutual funds
    | and some securities.
  }
}
type Price is Decimal(18,6) with {
  briefly "Security or asset price"
  described as {
    | Represents the price of a security or asset. Uses 6 decimal
    | places to handle precision requirements of various markets.
  }
}
type Percentage is Decimal(8,4) with {
  briefly "Percentage value"
  described as {
    | Represents a percentage with 4 decimal places of precision.
    | Values are stored as decimals (e.g., 5.25% stored as 5.2500).
  }
}
// === Record Types ===
record FundInfo is  {
  fundId: FundId
  name: String(1,200)
  fundType: FundType
  status: FundStatus
  inceptionDate: Date
  baseCurrency: Currency(USD)
  managementFeeRate: Percentage
  performanceFeeRate: Percentage?
  minimumInvestment: Money
} with {
  briefly "Core fund information record"
  described as {
    | Contains the essential identifying and configuration information
    | for a fund including its type, status, fee structure, and
    | investment requirements.
  }
}
record NAVRecord is  {
  navId: NAVId
  fundId: FundId
  valuationDate: Date
  totalAssets: Money
  totalLiabilities: Money
  netAssetValue: Money
  sharesOutstanding: Quantity
  navPerShare: Price
  calculatedAt: TimeStamp
  isOfficial: Boolean
} with {
  briefly "Net Asset Value calculation result"
  described as {
    | Records the results of a NAV calculation including total assets,
    | liabilities, and the resulting per-share NAV. Tracks whether
    | this is an official (published) or preliminary calculation.
  }
}
record TransactionRecord is  {
  transactionId: TransactionId
  fundId: FundId
  transactionType: TransactionType
  transactionStatus: TransactionStatus
  tradeSecurityId: SecurityId?
  tradeQuantity: Quantity?
  tradePrice: Price?
  grossAmount: Money
  fees: Money
  netAmount: Money
  tradeDate: Date
  settlementDate: Date
  description: String(0,500)
  createdAt: TimeStamp
} with {
  briefly "Fund transaction record"
  described as {
    | Captures all details of a fund transaction including the type,
    | amounts, dates, and current status. Supports both security
    | transactions (buy/sell) and non-security transactions (fees,
    | income).
  }
}
record HoldingRecord is  {
  holdingId: HoldingId
  fundId: FundId
  securityId: SecurityId
  securityName: String(1,200)
  assetClass: AssetClass
  quantity: Quantity
  costBasis: Money
  marketValue: Money
  unrealizedGainLoss: Money
  percentOfPortfolio: Percentage
  lastUpdated: TimeStamp
} with {
  briefly "Portfolio holding position"
  described as {
    | Represents a fund's position in a specific security including
    | quantity, cost basis, current market value, and the resulting
    | unrealized gain or loss.
  }
}
record InvestorAccount is  {
  accountId: InvestorAccountId
  fundId: FundId
  investorName: String(1,200)
  shares: Quantity
  accountValue: Money
  costBasis: Money
  openDate: Date
  lastActivityDate: Date
} with {
  briefly "Investor account in a fund"
  described as {
    | Tracks an investor's position in a fund including their share
    | balance, account value, and cost basis for tax reporting
    | purposes.
  }
}
record FundPerformance is  {
  fundId: FundId
  asOfDate: Date
  dailyReturn: Percentage
  mtdReturn: Percentage
  qtdReturn: Percentage
  ytdReturn: Percentage
  oneYearReturn: Percentage?
  threeYearReturn: Percentage?
  fiveYearReturn: Percentage?
  sinceInceptionReturn: Percentage
} with {
  briefly "Fund performance metrics"
  described as {
    | Contains calculated performance returns for various time periods.
    | Returns are calculated net of fees and represent the total
    | return including reinvested dividends.
  }
}
record AssetAllocation is  {
  fundId: FundId
  asOfDate: Date
  equityAllocation: Percentage
  fixedIncomeAllocation: Percentage
  cashAllocation: Percentage
  alternativeAllocation: Percentage
  otherAllocation: Percentage
} with {
  briefly "Fund asset allocation breakdown"
  described as {
    | Shows the distribution of fund assets across major asset classes.
    | Used for investment mandate compliance and investor reporting.
  }
}
