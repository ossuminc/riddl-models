// Transit Operations - Shared Types
type Year is Integer with {
  briefly "Year"
  described as {
    |A calendar year.
  }
}
type VehicleId is Id(VehicleContext.Vehicle)  with {
  briefly "Vehicle identifier"
  described as {
    |Unique identifier for a transit vehicle.
  }
}
type RouteId is UUID with {
  briefly "Route identifier"
  described as {
    |Reference to a transit route.
  }
}
type TripId is UUID with {
  briefly "Trip identifier"
  described as {
    |Reference to a scheduled trip.
  }
}
type StopId is UUID with {
  briefly "Stop identifier"
  described as {
    |Reference to a transit stop.
  }
}
type OperatorId is UUID with {
  briefly "Operator identifier"
  described as {
    |Reference to a vehicle operator.
  }
}
type BlockId is UUID with {
  briefly "Block identifier"
  described as {
    |Reference to a service block.
  }
}
type VehicleStatus is any of {
  InService,
  Deadheading,
  Layover,
  OutOfService,
  AtGarage,
  Breakdown
} with {
  briefly "Vehicle status"
  described as {
    |Current vehicle operational status.
  }
}
type VehicleType is any of {
  StandardBus,
  ArticulatedBus,
  LightRail,
  HeavyRail,
  Trolleybus,
  StreetCar,
  Ferry,
  Paratransit
} with {
  briefly "Vehicle type"
  described as {
    |Type of transit vehicle.
  }
}
type ScheduleAdherence is any of {
  OnTime,
  Early,
  Late,
  VeryLate,
  Unknown
} with {
  briefly "Schedule adherence"
  described as {
    |Schedule compliance status.
  }
}
type IncidentType is any of {
  Mechanical,
  Accident,
  MedicalEmergency,
  Security,
  Weather,
  Congestion,
  PassengerIssue,
  Other
} with {
  briefly "Incident type"
  described as {
    |Type of service incident.
  }
}
type GpsLocation is {
  latitude: Decimal(10,7) with {
    briefly "Latitude"
    described as {
      |GPS latitude.
    }
  }
  longitude: Decimal(10,7) with {
    briefly "Longitude"
    described as {
      |GPS longitude.
    }
  }
} with {
  briefly "GPS location"
  described as {
    |Geographic coordinates.
  }
}
type VehicleInfo is {
  vehicleNumber: String(1,20) with {
    briefly "Number"
    described as {
      |Fleet number.
    }
  }
  vehicleType: VehicleType with {
    briefly "Type"
    described as {
      |Vehicle type.
    }
  }
  capacity: Natural with {
    briefly "Capacity"
    described as {
      |Passenger capacity.
    }
  }
  wheelchairAccessible: Boolean with {
    briefly "Accessible"
    described as {
      |Wheelchair accessible.
    }
  }
  bikeRack: Boolean with {
    briefly "Bike rack"
    described as {
      |Has bike rack.
    }
  }
  fuelType: String(1,50) with {
    briefly "Fuel"
    described as {
      |Fuel type.
    }
  }
  yearManufactured: Year with {
    briefly "Year"
    described as {
      |Year manufactured.
    }
  }
} with {
  briefly "Vehicle info"
  described as {
    |Vehicle characteristics.
  }
}
type VehiclePosition is {
  location: GpsLocation with {
    briefly "Location"
    described as {
      |Current position.
    }
  }
  heading: Decimal(5,2) with {
    briefly "Heading"
    described as {
      |Direction in degrees.
    }
  }
  speed: Decimal(5,2) with {
    briefly "Speed"
    described as {
      |Speed in mph.
    }
  }
  odometer: Natural with {
    briefly "Odometer"
    described as {
      |Odometer reading.
    }
  }
  timestamp: TimeStamp with {
    briefly "Time"
    described as {
      |Position timestamp.
    }
  }
} with {
  briefly "Vehicle position"
  described as {
    |Current position data.
  }
}
type TripAssignment is {
  tripId: TripId with {
    briefly "Trip"
    described as {
      |Trip ID.
    }
  }
  routeId: RouteId with {
    briefly "Route"
    described as {
      |Route ID.
    }
  }
  routeName: String(1,100) with {
    briefly "Route name"
    described as {
      |Route name.
    }
  }
  blockId: BlockId with {
    briefly "Block"
    described as {
      |Block ID.
    }
  }
  direction: String(1,50) with {
    briefly "Direction"
    described as {
      |Trip direction.
    }
  }
  scheduledStart: TimeStamp with {
    briefly "Start"
    described as {
      |Scheduled start.
    }
  }
  scheduledEnd: TimeStamp with {
    briefly "End"
    described as {
      |Scheduled end.
    }
  }
} with {
  briefly "Trip assignment"
  described as {
    |Current trip assignment.
  }
}
type OperatorInfo is {
  operatorId: OperatorId with {
    briefly "Operator"
    described as {
      |Operator ID.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Operator name.
    }
  }
  badgeNumber: String(1,20) with {
    briefly "Badge"
    described as {
      |Badge number.
    }
  }
  shiftStart: TimeStamp with {
    briefly "Shift start"
    described as {
      |Shift start time.
    }
  }
  shiftEnd: TimeStamp with {
    briefly "Shift end"
    described as {
      |Shift end time.
    }
  }
} with {
  briefly "Operator info"
  described as {
    |Operator assignment details.
  }
}
type StopEvent is {
  stopId: StopId with {
    briefly "Stop"
    described as {
      |Stop ID.
    }
  }
  stopName: String(1,200) with {
    briefly "Name"
    described as {
      |Stop name.
    }
  }
  scheduledTime: TimeStamp with {
    briefly "Scheduled"
    described as {
      |Scheduled time.
    }
  }
  actualTime: TimeStamp with {
    briefly "Actual"
    described as {
      |Actual time.
    }
  }
  deviationSeconds: Integer with {
    briefly "Deviation"
    described as {
      |Schedule deviation.
    }
  }
  boardings: Natural with {
    briefly "Boardings"
    described as {
      |Passengers boarding.
    }
  }
  alightings: Natural with {
    briefly "Alightings"
    described as {
      |Passengers alighting.
    }
  }
  doorOpenDuration: Duration with {
    briefly "Door open"
    described as {
      |Door open time.
    }
  }
} with {
  briefly "Stop event"
  described as {
    |Stop arrival/departure event.
  }
}
type PassengerLoad is {
  currentLoad: Natural with {
    briefly "Current"
    described as {
      |Current passengers.
    }
  }
  loadPercent: Decimal(5,2) with {
    briefly "Percent"
    described as {
      |Load percentage.
    }
  }
  timestamp: TimeStamp with {
    briefly "Time"
    described as {
      |Count timestamp.
    }
  }
} with {
  briefly "Passenger load"
  described as {
    |Current passenger count.
  }
}
type ServiceIncident is {
  incidentType: IncidentType with {
    briefly "Type"
    described as {
      |Incident type.
    }
  }
  description: String(1,1000) with {
    briefly "Description"
    described as {
      |Incident description.
    }
  }
  location: GpsLocation with {
    briefly "Location"
    described as {
      |Incident location.
    }
  }
  reportedAt: TimeStamp with {
    briefly "Reported"
    described as {
      |Report time.
    }
  }
  severity: String(1,20) with {
    briefly "Severity"
    described as {
      |Incident severity.
    }
  }
  estimatedDelay: Duration? with {
    briefly "Delay"
    described as {
      |Estimated delay.
    }
  }
} with {
  briefly "Service incident"
  described as {
    |Service disruption details.
  }
}
type PerformanceMetrics is {
  onTimePercent: Decimal(5,2) with {
    briefly "On-time"
    described as {
      |On-time percentage.
    }
  }
  missedTrips: Natural with {
    briefly "Missed"
    described as {
      |Missed trips.
    }
  }
  totalTrips: Natural with {
    briefly "Total"
    described as {
      |Total trips.
    }
  }
  totalBoardings: Natural with {
    briefly "Boardings"
    described as {
      |Total boardings.
    }
  }
  averageLoad: Decimal(5,2) with {
    briefly "Avg load"
    described as {
      |Average load percent.
    }
  }
} with {
  briefly "Performance metrics"
  described as {
    |Service performance data.
  }
}
