// Transit Operations - Shared Types

type Year is Integer with {
  briefly "Year"
  described by "A calendar year."
}

type VehicleId is Id(VehicleContext.Vehicle) with {
  briefly "Vehicle identifier"
  described by "Unique identifier for a transit vehicle."
}

type RouteId is UUID with {
  briefly "Route identifier"
  described by "Reference to a transit route."
}

type TripId is UUID with {
  briefly "Trip identifier"
  described by "Reference to a scheduled trip."
}

type StopId is UUID with {
  briefly "Stop identifier"
  described by "Reference to a transit stop."
}

type OperatorId is UUID with {
  briefly "Operator identifier"
  described by "Reference to a vehicle operator."
}

type BlockId is UUID with {
  briefly "Block identifier"
  described by "Reference to a service block."
}

type VehicleStatus is any of {
  InService,
  Deadheading,
  Layover,
  OutOfService,
  AtGarage,
  Breakdown
} with {
  briefly "Vehicle status"
  described by "Current vehicle operational status."
}

type VehicleType is any of {
  StandardBus,
  ArticulatedBus,
  LightRail,
  HeavyRail,
  Trolleybus,
  StreetCar,
  Ferry,
  Paratransit
} with {
  briefly "Vehicle type"
  described by "Type of transit vehicle."
}

type ScheduleAdherence is any of {
  OnTime,
  Early,
  Late,
  VeryLate,
  Unknown
} with {
  briefly "Schedule adherence"
  described by "Schedule compliance status."
}

type IncidentType is any of {
  Mechanical,
  Accident,
  MedicalEmergency,
  Security,
  Weather,
  Congestion,
  PassengerIssue,
  Other
} with {
  briefly "Incident type"
  described by "Type of service incident."
}

type GpsLocation is {
  latitude is Decimal(10, 7) with {
    briefly "Latitude"
    described by "GPS latitude."
  }
  longitude is Decimal(10, 7) with {
    briefly "Longitude"
    described by "GPS longitude."
  }
} with {
  briefly "GPS location"
  described by "Geographic coordinates."
}

type VehicleInfo is {
  vehicleNumber is String(1, 20) with {
    briefly "Number"
    described by "Fleet number."
  }
  vehicleType is VehicleType with {
    briefly "Type"
    described by "Vehicle type."
  }
  capacity is Natural with {
    briefly "Capacity"
    described by "Passenger capacity."
  }
  wheelchairAccessible is Boolean with {
    briefly "Accessible"
    described by "Wheelchair accessible."
  }
  bikeRack is Boolean with {
    briefly "Bike rack"
    described by "Has bike rack."
  }
  fuelType is String(1, 50) with {
    briefly "Fuel"
    described by "Fuel type."
  }
  yearManufactured is Year with {
    briefly "Year"
    described by "Year manufactured."
  }
} with {
  briefly "Vehicle info"
  described by "Vehicle characteristics."
}

type VehiclePosition is {
  location is GpsLocation with {
    briefly "Location"
    described by "Current position."
  }
  heading is Decimal(5, 2) with {
    briefly "Heading"
    described by "Direction in degrees."
  }
  speed is Decimal(5, 2) with {
    briefly "Speed"
    described by "Speed in mph."
  }
  odometer is Natural with {
    briefly "Odometer"
    described by "Odometer reading."
  }
  timestamp is TimeStamp with {
    briefly "Time"
    described by "Position timestamp."
  }
} with {
  briefly "Vehicle position"
  described by "Current position data."
}

type TripAssignment is {
  tripId is TripId with {
    briefly "Trip"
    described by "Trip ID."
  }
  routeId is RouteId with {
    briefly "Route"
    described by "Route ID."
  }
  routeName is String(1, 100) with {
    briefly "Route name"
    described by "Route name."
  }
  blockId is BlockId with {
    briefly "Block"
    described by "Block ID."
  }
  direction is String(1, 50) with {
    briefly "Direction"
    described by "Trip direction."
  }
  scheduledStart is TimeStamp with {
    briefly "Start"
    described by "Scheduled start."
  }
  scheduledEnd is TimeStamp with {
    briefly "End"
    described by "Scheduled end."
  }
} with {
  briefly "Trip assignment"
  described by "Current trip assignment."
}

type OperatorInfo is {
  operatorId is OperatorId with {
    briefly "Operator"
    described by "Operator ID."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Operator name."
  }
  badgeNumber is String(1, 20) with {
    briefly "Badge"
    described by "Badge number."
  }
  shiftStart is TimeStamp with {
    briefly "Shift start"
    described by "Shift start time."
  }
  shiftEnd is TimeStamp with {
    briefly "Shift end"
    described by "Shift end time."
  }
} with {
  briefly "Operator info"
  described by "Operator assignment details."
}

type StopEvent is {
  stopId is StopId with {
    briefly "Stop"
    described by "Stop ID."
  }
  stopName is String(1, 200) with {
    briefly "Name"
    described by "Stop name."
  }
  scheduledTime is TimeStamp with {
    briefly "Scheduled"
    described by "Scheduled time."
  }
  actualTime is TimeStamp with {
    briefly "Actual"
    described by "Actual time."
  }
  deviationSeconds is Integer with {
    briefly "Deviation"
    described by "Schedule deviation."
  }
  boardings is Natural with {
    briefly "Boardings"
    described by "Passengers boarding."
  }
  alightings is Natural with {
    briefly "Alightings"
    described by "Passengers alighting."
  }
  doorOpenDuration is Duration with {
    briefly "Door open"
    described by "Door open time."
  }
} with {
  briefly "Stop event"
  described by "Stop arrival/departure event."
}

type PassengerLoad is {
  currentLoad is Natural with {
    briefly "Current"
    described by "Current passengers."
  }
  loadPercent is Decimal(5, 2) with {
    briefly "Percent"
    described by "Load percentage."
  }
  timestamp is TimeStamp with {
    briefly "Time"
    described by "Count timestamp."
  }
} with {
  briefly "Passenger load"
  described by "Current passenger count."
}

type ServiceIncident is {
  incidentType is IncidentType with {
    briefly "Type"
    described by "Incident type."
  }
  description is String(1, 1000) with {
    briefly "Description"
    described by "Incident description."
  }
  location is GpsLocation with {
    briefly "Location"
    described by "Incident location."
  }
  reportedAt is TimeStamp with {
    briefly "Reported"
    described by "Report time."
  }
  severity is String(1, 20) with {
    briefly "Severity"
    described by "Incident severity."
  }
  estimatedDelay is optional Duration with {
    briefly "Delay"
    described by "Estimated delay."
  }
} with {
  briefly "Service incident"
  described by "Service disruption details."
}

type PerformanceMetrics is {
  onTimePercent is Decimal(5, 2) with {
    briefly "On-time"
    described by "On-time percentage."
  }
  missedTrips is Natural with {
    briefly "Missed"
    described by "Missed trips."
  }
  totalTrips is Natural with {
    briefly "Total"
    described by "Total trips."
  }
  totalBoardings is Natural with {
    briefly "Boardings"
    described by "Total boardings."
  }
  averageLoad is Decimal(5, 2) with {
    briefly "Avg load"
    described by "Average load percent."
  }
} with {
  briefly "Performance metrics"
  described by "Service performance data."
}
