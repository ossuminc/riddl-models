// Ride Sharing - Shared Types
type RideId is Id(RideContext.Ride)  with {
  briefly "Ride identifier"
  described as {
    |Unique identifier for a ride.
  }
}
type RiderId is UUID with {
  briefly "Rider identifier"
  described as {
    |Reference to a rider.
  }
}
type DriverId is UUID with {
  briefly "Driver identifier"
  described as {
    |Reference to a driver.
  }
}
type VehicleId is UUID with {
  briefly "Vehicle identifier"
  described as {
    |Reference to a vehicle.
  }
}
type PromoCodeId is UUID with {
  briefly "Promo code identifier"
  described as {
    |Reference to a promotion code.
  }
}
type RideStatus is any of {
  Requested,
  Searching,
  DriverAssignedStatus,
  DriverEnRouteStatus,
  DriverArrivedStatus,
  InProgress,
  Completed,
  Cancelled
} with {
  briefly "Ride status"
  described as {
    |Current ride status.
  }
}
type VehicleType is any of {
  Economy,
  Comfort,
  Premium,
  XL,
  Pool
} with {
  briefly "Vehicle type"
  described as {
    |Type of vehicle.
  }
}
type CancellationReason is any of {
  RiderCancelled,
  DriverCancelled,
  NoDriverAvailable,
  DriverNoShow,
  RiderNoShow,
  SafetyConcern,
  SystemCancellation
} with {
  briefly "Cancellation reason"
  described as {
    |Reason for ride cancellation.
  }
}
type PaymentMethod is any of {
  CreditCard,
  DebitCard,
  DigitalWallet,
  Cash,
  Corporate
} with {
  briefly "Payment method"
  described as {
    |Method of payment.
  }
}
type GeoLocation is {
  latitude: Decimal(9,6) with {
    briefly "Latitude"
    described as {
      |GPS latitude.
    }
  }
  longitude: Decimal(9,6) with {
    briefly "Longitude"
    described as {
      |GPS longitude.
    }
  }
} with {
  briefly "Geo location"
  described as {
    |GPS coordinates.
  }
}
type LocationInfo is {
  coordinates: GeoLocation with {
    briefly "Coordinates"
    described as {
      |GPS coordinates.
    }
  }
  address: String(1,500) with {
    briefly "Address"
    described as {
      |Street address.
    }
  }
  locationName: String(1,200)? with {
    briefly "Name"
    described as {
      |Location name.
    }
  }
  instructions: String(1,500)? with {
    briefly "Instructions"
    described as {
      |Pickup/dropoff instructions.
    }
  }
} with {
  briefly "Location info"
  described as {
    |Location details.
  }
}
type RiderInfo is {
  riderId: RiderId with {
    briefly "Rider"
    described as {
      |Rider identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Rider name.
    }
  }
  phone: String(7,20) with {
    briefly "Phone"
    described as {
      |Phone number.
    }
  }
  rating: Decimal(2,1) with {
    briefly "Rating"
    described as {
      |Average rating.
    }
  }
  paymentMethod: PaymentMethod with {
    briefly "Payment"
    described as {
      |Default payment method.
    }
  }
} with {
  briefly "Rider info"
  described as {
    |Rider information.
  }
}
type DriverInfo is {
  driverId: DriverId with {
    briefly "Driver"
    described as {
      |Driver identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Driver name.
    }
  }
  phone: String(7,20) with {
    briefly "Phone"
    described as {
      |Phone number.
    }
  }
  rating: Decimal(2,1) with {
    briefly "Rating"
    described as {
      |Average rating.
    }
  }
  photoUrl: URL? with {
    briefly "Photo"
    described as {
      |Driver photo URL.
    }
  }
  vehicle: VehicleInfo with {
    briefly "Vehicle"
    described as {
      |Driver's vehicle.
    }
  }
} with {
  briefly "Driver info"
  described as {
    |Driver information.
  }
}
type VehicleInfo is {
  vehicleId: VehicleId with {
    briefly "Vehicle"
    described as {
      |Vehicle identifier.
    }
  }
  make: String(1,50) with {
    briefly "Make"
    described as {
      |Vehicle make.
    }
  }
  model: String(1,50) with {
    briefly "Model"
    described as {
      |Vehicle model.
    }
  }
  year: Natural with {
    briefly "Year"
    described as {
      |Model year.
    }
  }
  color: String(1,50) with {
    briefly "Color"
    described as {
      |Vehicle color.
    }
  }
  licensePlate: String(1,20) with {
    briefly "License"
    described as {
      |License plate.
    }
  }
  vehicleType: VehicleType with {
    briefly "Type"
    described as {
      |Vehicle type.
    }
  }
} with {
  briefly "Vehicle info"
  described as {
    |Vehicle information.
  }
}
type FareEstimate is {
  baseFare: Decimal(10,2) with {
    briefly "Base"
    described as {
      |Base fare.
    }
  }
  distanceFare: Decimal(10,2) with {
    briefly "Distance"
    described as {
      |Distance-based fare.
    }
  }
  timeFare: Decimal(10,2) with {
    briefly "Time"
    described as {
      |Time-based fare.
    }
  }
  surgePricing: Decimal(3,2) with {
    briefly "Surge"
    described as {
      |Surge multiplier.
    }
  }
  tolls: Decimal(10,2) with {
    briefly "Tolls"
    described as {
      |Toll charges.
    }
  }
  discount: Decimal(10,2) with {
    briefly "Discount"
    described as {
      |Applied discount.
    }
  }
  totalFare: Decimal(10,2) with {
    briefly "Total"
    described as {
      |Total fare.
    }
  }
  currency: String(3,3) with {
    briefly "Currency"
    described as {
      |Currency code.
    }
  }
} with {
  briefly "Fare estimate"
  described as {
    |Ride fare calculation.
  }
}
type TripDetails is {
  distanceMiles: Decimal(10,2) with {
    briefly "Distance"
    described as {
      |Trip distance in miles.
    }
  }
  durationMinutes: Natural with {
    briefly "Duration"
    described as {
      |Trip duration in minutes.
    }
  }
  route: GeoLocation+ with {
    briefly "Route"
    described as {
      |Route waypoints.
    }
  }
} with {
  briefly "Trip details"
  described as {
    |Trip information.
  }
}
type RatingInfo is {
  ratingValue: Natural with {
    briefly "Rating"
    described as {
      |Rating value (1-5).
    }
  }
  comment: String(1,1000)? with {
    briefly "Comment"
    described as {
      |Rating comment.
    }
  }
  categories: String(1,50)* with {
    briefly "Categories"
    described as {
      |Rating categories.
    }
  }
} with {
  briefly "Rating info"
  described as {
    |Ride rating details.
  }
}
type CancellationInfo is {
  reason: CancellationReason with {
    briefly "Reason"
    described as {
      |Cancellation reason.
    }
  }
  cancelledBy: String(1,50) with {
    briefly "Cancelled by"
    described as {
      |Who cancelled (rider/driver/system).
    }
  }
  cancellationFee: Decimal(10,2) with {
    briefly "Fee"
    described as {
      |Cancellation fee.
    }
  }
  cancelledAt: TimeStamp with {
    briefly "Cancelled"
    described as {
      |Cancellation time.
    }
  }
} with {
  briefly "Cancellation info"
  described as {
    |Ride cancellation details.
  }
}
type PaymentInfo is {
  method: PaymentMethod with {
    briefly "Method"
    described as {
      |Payment method.
    }
  }
  amount: Decimal(10,2) with {
    briefly "Amount"
    described as {
      |Payment amount.
    }
  }
  tip: Decimal(10,2) with {
    briefly "Tip"
    described as {
      |Tip amount.
    }
  }
  total: Decimal(10,2) with {
    briefly "Total"
    described as {
      |Total charged.
    }
  }
  currency: String(3,3) with {
    briefly "Currency"
    described as {
      |Currency code.
    }
  }
} with {
  briefly "Payment info"
  described as {
    |Payment details.
  }
}
