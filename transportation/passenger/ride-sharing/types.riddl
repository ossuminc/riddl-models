// Ride Sharing - Shared Types

type RideId is Id(RideContext.Ride) with {
  briefly "Ride identifier"
  described by "Unique identifier for a ride."
}

type RiderId is UUID with {
  briefly "Rider identifier"
  described by "Reference to a rider."
}

type DriverId is UUID with {
  briefly "Driver identifier"
  described by "Reference to a driver."
}

type VehicleId is UUID with {
  briefly "Vehicle identifier"
  described by "Reference to a vehicle."
}

type PromoCodeId is UUID with {
  briefly "Promo code identifier"
  described by "Reference to a promotion code."
}

type RideStatus is any of {
  Requested,
  Searching,
  DriverAssignedStatus,
  DriverEnRouteStatus,
  DriverArrivedStatus,
  InProgress,
  Completed,
  Cancelled
} with {
  briefly "Ride status"
  described by "Current ride status."
}

type VehicleType is any of {
  Economy,
  Comfort,
  Premium,
  XL,
  Pool
} with {
  briefly "Vehicle type"
  described by "Type of vehicle."
}

type CancellationReason is any of {
  RiderCancelled,
  DriverCancelled,
  NoDriverAvailable,
  DriverNoShow,
  RiderNoShow,
  SafetyConcern,
  SystemCancellation
} with {
  briefly "Cancellation reason"
  described by "Reason for ride cancellation."
}

type PaymentMethod is any of {
  CreditCard,
  DebitCard,
  DigitalWallet,
  Cash,
  Corporate
} with {
  briefly "Payment method"
  described by "Method of payment."
}

type GeoLocation is {
  latitude is Decimal(9, 6) with {
    briefly "Latitude"
    described by "GPS latitude."
  }
  longitude is Decimal(9, 6) with {
    briefly "Longitude"
    described by "GPS longitude."
  }
} with {
  briefly "Geo location"
  described by "GPS coordinates."
}

type LocationInfo is {
  coordinates is GeoLocation with {
    briefly "Coordinates"
    described by "GPS coordinates."
  }
  address is String(1, 500) with {
    briefly "Address"
    described by "Street address."
  }
  name is optional String(1, 200) with {
    briefly "Name"
    described by "Location name."
  }
  instructions is optional String(1, 500) with {
    briefly "Instructions"
    described by "Pickup/dropoff instructions."
  }
} with {
  briefly "Location info"
  described by "Location details."
}

type RiderInfo is {
  riderId is RiderId with {
    briefly "Rider"
    described by "Rider identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Rider name."
  }
  phone is String(7, 20) with {
    briefly "Phone"
    described by "Phone number."
  }
  rating is Decimal(2, 1) with {
    briefly "Rating"
    described by "Average rating."
  }
  paymentMethod is PaymentMethod with {
    briefly "Payment"
    described by "Default payment method."
  }
} with {
  briefly "Rider info"
  described by "Rider information."
}

type DriverInfo is {
  driverId is DriverId with {
    briefly "Driver"
    described by "Driver identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Driver name."
  }
  phone is String(7, 20) with {
    briefly "Phone"
    described by "Phone number."
  }
  rating is Decimal(2, 1) with {
    briefly "Rating"
    described by "Average rating."
  }
  photoUrl is optional URL with {
    briefly "Photo"
    described by "Driver photo URL."
  }
  vehicle is VehicleInfo with {
    briefly "Vehicle"
    described by "Driver's vehicle."
  }
} with {
  briefly "Driver info"
  described by "Driver information."
}

type VehicleInfo is {
  vehicleId is VehicleId with {
    briefly "Vehicle"
    described by "Vehicle identifier."
  }
  make is String(1, 50) with {
    briefly "Make"
    described by "Vehicle make."
  }
  model is String(1, 50) with {
    briefly "Model"
    described by "Vehicle model."
  }
  year is Natural with {
    briefly "Year"
    described by "Model year."
  }
  color is String(1, 50) with {
    briefly "Color"
    described by "Vehicle color."
  }
  licensePlate is String(1, 20) with {
    briefly "License"
    described by "License plate."
  }
  vehicleType is VehicleType with {
    briefly "Type"
    described by "Vehicle type."
  }
} with {
  briefly "Vehicle info"
  described by "Vehicle information."
}

type FareEstimate is {
  baseFare is Decimal(10, 2) with {
    briefly "Base"
    described by "Base fare."
  }
  distanceFare is Decimal(10, 2) with {
    briefly "Distance"
    described by "Distance-based fare."
  }
  timeFare is Decimal(10, 2) with {
    briefly "Time"
    described by "Time-based fare."
  }
  surgePricing is Decimal(3, 2) with {
    briefly "Surge"
    described by "Surge multiplier."
  }
  tolls is Decimal(10, 2) with {
    briefly "Tolls"
    described by "Toll charges."
  }
  discount is Decimal(10, 2) with {
    briefly "Discount"
    described by "Applied discount."
  }
  totalFare is Decimal(10, 2) with {
    briefly "Total"
    described by "Total fare."
  }
  currency is String(3, 3) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Fare estimate"
  described by "Ride fare calculation."
}

type TripDetails is {
  distanceMiles is Decimal(10, 2) with {
    briefly "Distance"
    described by "Trip distance in miles."
  }
  durationMinutes is Natural with {
    briefly "Duration"
    described by "Trip duration in minutes."
  }
  route is many GeoLocation with {
    briefly "Route"
    described by "Route waypoints."
  }
} with {
  briefly "Trip details"
  described by "Trip information."
}

type RatingInfo is {
  ratingValue is Natural with {
    briefly "Rating"
    described by "Rating value (1-5)."
  }
  comment is optional String(1, 1000) with {
    briefly "Comment"
    described by "Rating comment."
  }
  categories is many optional String(1, 50) with {
    briefly "Categories"
    described by "Rating categories."
  }
} with {
  briefly "Rating info"
  described by "Ride rating details."
}

type CancellationInfo is {
  reason is CancellationReason with {
    briefly "Reason"
    described by "Cancellation reason."
  }
  cancelledBy is String(1, 50) with {
    briefly "Cancelled by"
    described by "Who cancelled (rider/driver/system)."
  }
  cancellationFee is Decimal(10, 2) with {
    briefly "Fee"
    described by "Cancellation fee."
  }
  cancelledAt is TimeStamp with {
    briefly "Cancelled"
    described by "Cancellation time."
  }
} with {
  briefly "Cancellation info"
  described by "Ride cancellation details."
}

type PaymentInfo is {
  method is PaymentMethod with {
    briefly "Method"
    described by "Payment method."
  }
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Payment amount."
  }
  tip is Decimal(10, 2) with {
    briefly "Tip"
    described by "Tip amount."
  }
  total is Decimal(10, 2) with {
    briefly "Total"
    described by "Total charged."
  }
  currency is String(3, 3) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Payment info"
  described by "Payment details."
}
