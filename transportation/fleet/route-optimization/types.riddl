// Route Optimization - Shared Types
type RouteId is Id(RouteContext.Route)  with {
  briefly "Route identifier"
  described as {
    |Unique identifier for a route.
  }
}
type StopId is UUID with {
  briefly "Stop identifier"
  described as {
    |Reference to a delivery stop.
  }
}
type VehicleId is UUID with {
  briefly "Vehicle identifier"
  described as {
    |Reference to a vehicle.
  }
}
type DriverId is UUID with {
  briefly "Driver identifier"
  described as {
    |Reference to a driver.
  }
}
type RouteStatus is any of {
  Draft,
  Planned,
  Assigned,
  InProgress,
  Completed,
  Cancelled
} with {
  briefly "Route status"
  described as {
    |Current route status.
  }
}
type StopStatus is any of {
  Pending,
  Arrived,
  Completed,
  Skipped,
  Failed
} with {
  briefly "Stop status"
  described as {
    |Delivery stop status.
  }
}
type StopType is any of {
  Delivery,
  Pickup,
  Service,
  Break,
  Refuel
} with {
  briefly "Stop type"
  described as {
    |Type of stop.
  }
}
type OptimizationStrategy is any of {
  ShortestDistance,
  ShortestTime,
  MinimizeFuel,
  BalanceWorkload,
  PrioritizeUrgent
} with {
  briefly "Optimization strategy"
  described as {
    |Route optimization approach.
  }
}
type GpsLocation is {
  latitude: Decimal(10,7) with {
    briefly "Latitude"
    described as {
      |GPS latitude.
    }
  }
  longitude: Decimal(10,7) with {
    briefly "Longitude"
    described as {
      |GPS longitude.
    }
  }
} with {
  briefly "GPS location"
  described as {
    |Geographic coordinates.
  }
}
type Address is {
  street: String(1,200) with {
    briefly "Street"
    described as {
      |Street address.
    }
  }
  city: String(1,100) with {
    briefly "City"
    described as {
      |City.
    }
  }
  state: String(2,50) with {
    briefly "State"
    described as {
      |State.
    }
  }
  zipCode: String(5,10) with {
    briefly "ZIP"
    described as {
      |ZIP code.
    }
  }
  gpsCoordinates: GpsLocation? with {
    briefly "Location"
    described as {
      |GPS coordinates.
    }
  }
} with {
  briefly "Address"
  described as {
    |Physical address.
  }
}
type TimeWindow is {
  earliestTime: TimeStamp with {
    briefly "Earliest"
    described as {
      |Earliest arrival time.
    }
  }
  latestTime: TimeStamp with {
    briefly "Latest"
    described as {
      |Latest arrival time.
    }
  }
} with {
  briefly "Time window"
  described as {
    |Delivery time window.
  }
}
type DeliveryStop is {
  stopId: StopId with {
    briefly "Stop"
    described as {
      |Stop identifier.
    }
  }
  stopType: StopType with {
    briefly "Type"
    described as {
      |Stop type.
    }
  }
  address: Address with {
    briefly "Address"
    described as {
      |Stop address.
    }
  }
  customerName: String(1,200) with {
    briefly "Customer"
    described as {
      |Customer name.
    }
  }
  contactPhone: String(10,20)? with {
    briefly "Phone"
    described as {
      |Contact phone.
    }
  }
  timeWindow: TimeWindow? with {
    briefly "Window"
    described as {
      |Delivery window.
    }
  }
  serviceTime: Duration with {
    briefly "Service time"
    described as {
      |Time at stop.
    }
  }
  priority: Natural with {
    briefly "Priority"
    described as {
      |Stop priority (1-10).
    }
  }
  specialInstructions: String(1,500)? with {
    briefly "Instructions"
    described as {
      |Special instructions.
    }
  }
  weight: Decimal(10,2)? with {
    briefly "Weight"
    described as {
      |Package weight.
    }
  }
  sequence: Natural with {
    briefly "Sequence"
    described as {
      |Stop sequence.
    }
  }
  stopStatus: StopStatus with {
    briefly "Status"
    described as {
      |Stop status.
    }
  }
} with {
  briefly "Delivery stop"
  described as {
    |Route stop details.
  }
}
type DriverInfo is {
  driverId: DriverId with {
    briefly "Driver"
    described as {
      |Driver identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Driver name.
    }
  }
  phone: String(10,20) with {
    briefly "Phone"
    described as {
      |Contact phone.
    }
  }
  vehicleId: VehicleId with {
    briefly "Vehicle"
    described as {
      |Assigned vehicle.
    }
  }
} with {
  briefly "Driver info"
  described as {
    |Driver details.
  }
}
type RouteMetrics is {
  totalDistance: Decimal(10,2) with {
    briefly "Distance"
    described as {
      |Total distance.
    }
  }
  estimatedDuration: Duration with {
    briefly "Duration"
    described as {
      |Estimated duration.
    }
  }
  estimatedFuel: Decimal(8,2)? with {
    briefly "Fuel"
    described as {
      |Estimated fuel usage.
    }
  }
  stopCount: Natural with {
    briefly "Stops"
    described as {
      |Number of stops.
    }
  }
  completedStops: Natural with {
    briefly "Completed"
    described as {
      |Completed stops.
    }
  }
} with {
  briefly "Route metrics"
  described as {
    |Route statistics.
  }
}
type RouteSegment is {
  fromStop: StopId with {
    briefly "From"
    described as {
      |Starting stop.
    }
  }
  toStop: StopId with {
    briefly "To"
    described as {
      |Ending stop.
    }
  }
  distance: Decimal(10,2) with {
    briefly "Distance"
    described as {
      |Segment distance.
    }
  }
  duration: Duration with {
    briefly "Duration"
    described as {
      |Segment duration.
    }
  }
  turnByTurnDirections: String(1,5000)? with {
    briefly "Directions"
    described as {
      |Turn-by-turn directions.
    }
  }
} with {
  briefly "Route segment"
  described as {
    |Segment between stops.
  }
}
type OptimizationResult is {
  originalDistance: Decimal(10,2) with {
    briefly "Original"
    described as {
      |Original distance.
    }
  }
  optimizedDistance: Decimal(10,2) with {
    briefly "Optimized"
    described as {
      |Optimized distance.
    }
  }
  savings: Decimal(5,2) with {
    briefly "Savings"
    described as {
      |Distance savings percent.
    }
  }
  optimizedSequence: Natural+ with {
    briefly "Sequence"
    described as {
      |Optimized stop sequence.
    }
  }
} with {
  briefly "Optimization result"
  described as {
    |Optimization outcome.
  }
}
type StopCompletion is {
  stopId: StopId with {
    briefly "Stop"
    described as {
      |Stop identifier.
    }
  }
  arrivedAt: TimeStamp with {
    briefly "Arrived"
    described as {
      |Arrival time.
    }
  }
  completedAt: TimeStamp with {
    briefly "Completed"
    described as {
      |Completion time.
    }
  }
  signature: String(1,200)? with {
    briefly "Signature"
    described as {
      |Recipient signature.
    }
  }
  photo: URL? with {
    briefly "Photo"
    described as {
      |Proof of delivery photo.
    }
  }
  notes: String(1,500)? with {
    briefly "Notes"
    described as {
      |Delivery notes.
    }
  }
} with {
  briefly "Stop completion"
  described as {
    |Stop completion details.
  }
}
