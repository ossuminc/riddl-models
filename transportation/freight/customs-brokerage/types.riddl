// Customs Brokerage - Shared Types

type EntryId is Id(EntryContext.Entry) with {
  briefly "Entry identifier"
  described by "Unique identifier for a customs entry."
}

type ShipmentId is UUID with {
  briefly "Shipment identifier"
  described by "Reference to a shipment."
}

type ImporterId is UUID with {
  briefly "Importer identifier"
  described by "Reference to an importer."
}

type BrokerId is UUID with {
  briefly "Broker identifier"
  described by "Reference to a customs broker."
}

type EntryStatus is any of {
  Draft,
  Submitted,
  UnderReview,
  InformationRequested,
  Released,
  Held,
  Liquidated,
  Cancelled
} with {
  briefly "Entry status"
  described by "Current entry processing status."
}

type EntryType is any of {
  FormalEntry,
  InformalEntry,
  ForeignTradeZone,
  TemporaryImport,
  Drawback,
  InBond
} with {
  briefly "Entry type"
  described by "Type of customs entry."
}

type TransportMode is any of {
  Ocean,
  Air,
  Rail,
  Truck,
  Pipeline,
  Mail
} with {
  briefly "Transport mode"
  described by "Mode of transportation."
}

type DocumentType is any of {
  CommercialInvoice,
  BillOfLading,
  AirWaybill,
  PackingList,
  CertificateOfOrigin,
  FDAEntry,
  FSISImportPermit,
  LaceyActDeclaration,
  ISFBond
} with {
  briefly "Document type"
  described by "Type of supporting document."
}

type ImporterInfo is {
  importerId is ImporterId with {
    briefly "Importer"
    described by "Importer identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Importer name."
  }
  importerOfRecordNumber is String(1, 50) with {
    briefly "IOR"
    described by "Importer of record number."
  }
  address is Address with {
    briefly "Address"
    described by "Business address."
  }
  bondNumber is String(1, 50) with {
    briefly "Bond"
    described by "Customs bond number."
  }
} with {
  briefly "Importer information"
  described by "Importer of record details."
}

type Address is {
  street is String(1, 200) with {
    briefly "Street"
    described by "Street address."
  }
  city is String(1, 100) with {
    briefly "City"
    described by "City."
  }
  state is String(2, 50) with {
    briefly "State"
    described by "State or province."
  }
  postalCode is String(5, 20) with {
    briefly "Postal"
    described by "Postal code."
  }
  country is String(2, 3) with {
    briefly "Country"
    described by "Country code."
  }
} with {
  briefly "Address"
  described by "Physical address."
}

type ShipmentInfo is {
  shipmentId is ShipmentId with {
    briefly "Shipment"
    described by "Shipment identifier."
  }
  masterBillNumber is String(1, 50) with {
    briefly "Master bill"
    described by "Master bill of lading."
  }
  houseBillNumber is optional String(1, 50) with {
    briefly "House bill"
    described by "House bill of lading."
  }
  transportMode is TransportMode with {
    briefly "Mode"
    described by "Transport mode."
  }
  carrierCode is String(4, 4) with {
    briefly "Carrier"
    described by "SCAC code."
  }
  vesselName is optional String(1, 200) with {
    briefly "Vessel"
    described by "Vessel name."
  }
  flightNumber is optional String(1, 20) with {
    briefly "Flight"
    described by "Flight number."
  }
  portOfEntry is String(4, 4) with {
    briefly "Port"
    described by "Port of entry code."
  }
  countryOfOrigin is String(2, 3) with {
    briefly "Origin"
    described by "Country of origin."
  }
  countryOfExport is String(2, 3) with {
    briefly "Export"
    described by "Country of export."
  }
  arrivalDate is Date with {
    briefly "Arrival"
    described by "Arrival date."
  }
} with {
  briefly "Shipment information"
  described by "Shipment transport details."
}

type LineItem is {
  lineNumber is Natural with {
    briefly "Line"
    described by "Line number."
  }
  htsCode is String(8, 10) with {
    briefly "HTS"
    described by "Harmonized tariff code."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Merchandise description."
  }
  countryOfOrigin is String(2, 3) with {
    briefly "Origin"
    described by "Country of origin."
  }
  quantity is Decimal(12, 3) with {
    briefly "Quantity"
    described by "Quantity."
  }
  unitOfMeasure is String(1, 20) with {
    briefly "UOM"
    described by "Unit of measure."
  }
  enteredValue is Decimal(14, 2) with {
    briefly "Value"
    described by "Entered value."
  }
  dutyRate is Decimal(8, 4) with {
    briefly "Rate"
    described by "Duty rate."
  }
  estimatedDuty is Decimal(12, 2) with {
    briefly "Duty"
    described by "Estimated duty."
  }
  otherFees is Decimal(10, 2) with {
    briefly "Fees"
    described by "Other fees (MPF, HMF)."
  }
  specialProgram is optional String(1, 20) with {
    briefly "Program"
    described by "Special trade program code."
  }
} with {
  briefly "Line item"
  described by "Customs entry line item."
}

type EntryDocument is {
  documentType is DocumentType with {
    briefly "Type"
    described by "Document type."
  }
  documentNumber is String(1, 100) with {
    briefly "Number"
    described by "Document number."
  }
  issuedDate is Date with {
    briefly "Issued"
    described by "Issue date."
  }
  expiryDate is optional Date with {
    briefly "Expiry"
    described by "Expiry date."
  }
  fileReference is String(1, 500) with {
    briefly "File"
    described by "Document file reference."
  }
} with {
  briefly "Entry document"
  described by "Supporting document details."
}

type DutyPayment is {
  entryNumber is String(1, 50) with {
    briefly "Entry"
    described by "Entry number."
  }
  totalDuty is Decimal(14, 2) with {
    briefly "Duty"
    described by "Total duty."
  }
  merchandiseProcessingFee is Decimal(10, 2) with {
    briefly "MPF"
    described by "Merchandise processing fee."
  }
  harborMaintenanceFee is Decimal(10, 2) with {
    briefly "HMF"
    described by "Harbor maintenance fee."
  }
  otherFees is Decimal(10, 2) with {
    briefly "Other"
    described by "Other fees."
  }
  totalAmount is Decimal(14, 2) with {
    briefly "Total"
    described by "Total payment due."
  }
  paymentMethod is String(1, 50) with {
    briefly "Method"
    described by "Payment method."
  }
  paidAt is optional TimeStamp with {
    briefly "Paid"
    described by "Payment time."
  }
} with {
  briefly "Duty payment"
  described by "Duty and fee payment details."
}

type CBPResponse is {
  responseCode is String(1, 10) with {
    briefly "Code"
    described by "Response code."
  }
  responseMessage is String(1, 500) with {
    briefly "Message"
    described by "Response message."
  }
  entryNumber is optional String(1, 50) with {
    briefly "Entry"
    described by "Assigned entry number."
  }
  releaseDate is optional Date with {
    briefly "Release"
    described by "Release date."
  }
  holdReasons is many optional String(1, 200) with {
    briefly "Holds"
    described by "Hold reasons."
  }
  receivedAt is TimeStamp with {
    briefly "Received"
    described by "Response time."
  }
} with {
  briefly "CBP response"
  described by "Customs response details."
}

type LiquidationRecord is {
  liquidationDate is Date with {
    briefly "Date"
    described by "Liquidation date."
  }
  originalDuty is Decimal(14, 2) with {
    briefly "Original"
    described by "Original duty."
  }
  assessedDuty is Decimal(14, 2) with {
    briefly "Assessed"
    described by "Assessed duty."
  }
  refundDue is Decimal(12, 2) with {
    briefly "Refund"
    described by "Refund amount."
  }
  additionalDue is Decimal(12, 2) with {
    briefly "Additional"
    described by "Additional duty due."
  }
  protestDeadline is Date with {
    briefly "Protest"
    described by "Protest deadline."
  }
} with {
  briefly "Liquidation record"
  described by "Entry liquidation details."
}
