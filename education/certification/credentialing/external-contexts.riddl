// Credentialing - External Contexts

// Examination Service
context ExaminationService is {

  command ScheduleExam is {
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
    examinationId is ExaminationId with { briefly "Exam" described by "Examination ID." }
    scheduledTime is TimeStamp with { briefly "Time" described by "Scheduled time." }
    location is String(1, 200) with { briefly "Location" described by "Test location." }
  } with {
    briefly "Schedule exam"
    described by "Schedules examination session."
  }

  event ExamCompleted is {
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
    examinationId is ExaminationId with { briefly "Exam" described by "Examination ID." }
    score is Decimal(5, 2) with { briefly "Score" described by "Exam score." }
    completedAt is TimeStamp with { briefly "Completed" described by "Completion time." }
  } with {
    briefly "Exam was completed"
    described by "Emitted when exam is finished."
  }

} with {
  option is external
  briefly "External examination service"
  described by "External testing and proctoring system."
}

// Background Check Service
context BackgroundCheckService is {

  command InitiateBackgroundCheck is {
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
    checkType is String(1, 50) with { briefly "Type" described by "Check type." }
  } with {
    briefly "Initiate check"
    described by "Starts background check process."
  }

  event BackgroundCheckCompleted is {
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
    result is String(1, 50) with { briefly "Result" described by "Check result." }
    completedAt is TimeStamp with { briefly "Completed" described by "Completion time." }
  } with {
    briefly "Check was completed"
    described by "Emitted when background check completes."
  }

} with {
  option is external
  briefly "External background check service"
  described by "External background verification system."
}

// Payment Service
context PaymentService is {

  command ProcessApplicationFee is {
    applicationId is ApplicationId with { briefly "Application" described by "Application ID." }
    amount is Decimal(10, 2) with { briefly "Amount" described by "Fee amount." }
  } with {
    briefly "Process fee"
    described by "Processes application fee payment."
  }

  command ProcessRenewalFee is {
    credentialId is CredentialId with { briefly "Credential" described by "Credential ID." }
    amount is Decimal(10, 2) with { briefly "Amount" described by "Fee amount." }
  } with {
    briefly "Process renewal"
    described by "Processes renewal fee payment."
  }

  event PaymentReceived is {
    paymentId is UUID with { briefly "Payment" described by "Payment ID." }
    amount is Decimal(10, 2) with { briefly "Amount" described by "Payment amount." }
    receivedAt is TimeStamp with { briefly "Received" described by "Receipt time." }
  } with {
    briefly "Payment was received"
    described by "Emitted when payment is processed."
  }

} with {
  option is external
  briefly "External payment service"
  described by "External payment processing system."
}

// Notification Service
context NotificationService is {

  command SendApplicationUpdate is {
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
    status is ApplicationStatus with { briefly "Status" described by "New status." }
    message is String(1, 1000) with { briefly "Message" described by "Update message." }
  } with {
    briefly "Send update"
    described by "Sends application status update."
  }

  command SendExpirationReminder is {
    credentialId is CredentialId with { briefly "Credential" described by "Credential ID." }
    expirationDate is Date with { briefly "Expiration" described by "Expiration date." }
  } with {
    briefly "Send reminder"
    described by "Sends expiration reminder."
  }

  event NotificationSent is {
    notificationId is UUID with { briefly "Notification" described by "Notification ID." }
    sentAt is TimeStamp with { briefly "Sent" described by "Send time." }
  } with {
    briefly "Notification was sent"
    described by "Emitted when notification is delivered."
  }

} with {
  option is external
  briefly "External notification service"
  described by "External communications service."
}

// Digital Credential Service
context DigitalCredentialService is {

  command IssueDigitalBadge is {
    credentialId is CredentialId with { briefly "Credential" described by "Credential ID." }
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
    metadata is String(1, 2000) with { briefly "Metadata" described by "Badge metadata." }
  } with {
    briefly "Issue badge"
    described by "Issues digital badge."
  }

  event DigitalBadgeIssued is {
    badgeId is UUID with { briefly "Badge" described by "Badge ID." }
    credentialId is CredentialId with { briefly "Credential" described by "Credential ID." }
    badgeUrl is URL with { briefly "URL" described by "Badge URL." }
    issuedAt is TimeStamp with { briefly "Issued" described by "Issue time." }
  } with {
    briefly "Badge was issued"
    described by "Emitted when digital badge is created."
  }

} with {
  option is external
  briefly "External digital credential service"
  described by "External digital badge and credential system."
}
