// Learning Management - External Contexts

// Content Delivery Network Service
context ContentDeliveryService is {

  command StreamContent is {
    contentId is ContentId with { briefly "Content" described by "Content ID." }
    learnerId is LearnerId with { briefly "Learner" described by "Requesting learner." }
    quality is String(1, 20) with { briefly "Quality" described by "Stream quality." }
  } with {
    briefly "Stream content"
    described by "Streams video or media content."
  }

  event ContentStreamed is {
    contentId is ContentId with { briefly "Content" described by "Content ID." }
    learnerId is LearnerId with { briefly "Learner" described by "Learner ID." }
    duration is Duration with { briefly "Duration" described by "Watch duration." }
    streamedAt is TimeStamp with { briefly "Streamed" described by "Stream time." }
  } with {
    briefly "Content was streamed"
    described by "Emitted when content is delivered."
  }

} with {
  option is external
  briefly "External CDN service"
  described by "External content delivery system."
}

// Notification Service
context NotificationService is {

  command SendProgressReminder is {
    learnerId is LearnerId with { briefly "Learner" described by "Learner ID." }
    courseId is CourseId with { briefly "Course" described by "Course ID." }
    message is String(1, 1000) with { briefly "Message" described by "Reminder text." }
  } with {
    briefly "Send reminder"
    described by "Sends progress reminder to learner."
  }

  command SendCourseCompletion is {
    learnerId is LearnerId with { briefly "Learner" described by "Learner ID." }
    courseId is CourseId with { briefly "Course" described by "Course ID." }
    certificateUrl is optional URL with { briefly "Certificate" described by "Certificate link." }
  } with {
    briefly "Send completion notification"
    described by "Notifies learner of course completion."
  }

  event NotificationSent is {
    notificationId is UUID with { briefly "Notification" described by "Notification ID." }
    learnerId is LearnerId with { briefly "Learner" described by "Learner ID." }
    sentAt is TimeStamp with { briefly "Sent" described by "Send time." }
  } with {
    briefly "Notification was sent"
    described by "Emitted when notification is delivered."
  }

} with {
  option is external
  briefly "External notification service"
  described by "External communications service."
}

// Identity Service
context IdentityService is {

  event LearnerAuthenticated is {
    learnerId is LearnerId with { briefly "Learner" described by "Learner ID." }
    sessionId is UUID with { briefly "Session" described by "Session ID." }
    authenticatedAt is TimeStamp with { briefly "Auth time" described by "Authentication time." }
  } with {
    briefly "Learner authenticated"
    described by "Emitted when learner logs in."
  }

  event SessionExpired is {
    sessionId is UUID with { briefly "Session" described by "Session ID." }
    expiredAt is TimeStamp with { briefly "Expired" described by "Expiration time." }
  } with {
    briefly "Session expired"
    described by "Emitted when session times out."
  }

} with {
  option is external
  briefly "External identity service"
  described by "External authentication system."
}

// Certification Service
context CertificationService is {

  command IssueCertificate is {
    learnerId is LearnerId with { briefly "Learner" described by "Learner ID." }
    courseId is CourseId with { briefly "Course" described by "Completed course." }
    completedAt is TimeStamp with { briefly "Completed" described by "Completion time." }
  } with {
    briefly "Issue certificate"
    described by "Issues completion certificate."
  }

  event CertificateIssued is {
    certificateId is UUID with { briefly "Certificate" described by "Certificate ID." }
    learnerId is LearnerId with { briefly "Learner" described by "Learner ID." }
    courseId is CourseId with { briefly "Course" described by "Course ID." }
    certificateUrl is URL with { briefly "URL" described by "Certificate URL." }
    issuedAt is TimeStamp with { briefly "Issued" described by "Issue time." }
  } with {
    briefly "Certificate was issued"
    described by "Emitted when certificate is created."
  }

} with {
  option is external
  briefly "External certification service"
  described by "External credentialing system."
}
