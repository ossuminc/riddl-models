// Learning Management - Shared Types

type CourseId is Id(LearningContext.Course) with {
  briefly "Course identifier"
  described by "Unique identifier for a course."
}

type ModuleId is UUID with {
  briefly "Module identifier"
  described by "Reference to a course module."
}

type ContentId is UUID with {
  briefly "Content identifier"
  described by "Reference to learning content."
}

type LearnerId is UUID with {
  briefly "Learner identifier"
  described by "Reference to a learner."
}

type InstructorId is UUID with {
  briefly "Instructor identifier"
  described by "Reference to an instructor."
}

type EnrollmentId is UUID with {
  briefly "Enrollment identifier"
  described by "Reference to a course enrollment."
}

type AssessmentId is UUID with {
  briefly "Assessment identifier"
  described by "Reference to an assessment."
}

type CourseStatus is any of {
  Draft,
  Published,
  Archived,
  Retired
} with {
  briefly "Course status"
  described by "Current course publication status."
}

type ModuleStatus is any of {
  Draft,
  Published,
  Hidden
} with {
  briefly "Module status"
  described by "Current module visibility status."
}

type ContentType is any of {
  Video,
  Document,
  Presentation,
  Interactive,
  Quiz,
  Assignment,
  Discussion,
  ExternalLink
} with {
  briefly "Content type"
  described by "Type of learning content."
}

type EnrollmentStatus is any of {
  Active,
  Completed,
  Withdrawn,
  Expired,
  Suspended
} with {
  briefly "Enrollment status"
  described by "Learner enrollment status."
}

type ProgressStatus is any of {
  NotStarted,
  InProgress,
  Completed,
  Failed
} with {
  briefly "Progress status"
  described by "Content completion status."
}

type AssessmentType is any of {
  Quiz,
  Exam,
  Assignment,
  Project,
  PeerReview,
  SelfAssessment
} with {
  briefly "Assessment type"
  described by "Type of learning assessment."
}

type CourseInfo is {
  title is String(1, 200) with {
    briefly "Title"
    described by "Course title."
  }
  description is String(1, 5000) with {
    briefly "Description"
    described by "Course description."
  }
  objectives is many String(1, 500) with {
    briefly "Objectives"
    described by "Learning objectives."
  }
  duration is Duration with {
    briefly "Duration"
    described by "Estimated completion time."
  }
  level is DifficultyLevel with {
    briefly "Level"
    described by "Difficulty level."
  }
  category is String(1, 100) with {
    briefly "Category"
    described by "Course category."
  }
  tags is many String(1, 50) with {
    briefly "Tags"
    described by "Search tags."
  }
} with {
  briefly "Course information"
  described by "Basic course details."
}

type DifficultyLevel is any of {
  Beginner,
  Intermediate,
  Advanced,
  Expert
} with {
  briefly "Difficulty level"
  described by "Content difficulty level."
}

type CourseModule is {
  moduleId is ModuleId with {
    briefly "Module ID"
    described by "Module identifier."
  }
  title is String(1, 200) with {
    briefly "Title"
    described by "Module title."
  }
  description is String(1, 2000) with {
    briefly "Description"
    described by "Module description."
  }
  sequenceNumber is Natural with {
    briefly "Sequence"
    described by "Order in course."
  }
  contents is many ContentItem with {
    briefly "Contents"
    described by "Module content items."
  }
  prerequisites is many optional ModuleId with {
    briefly "Prerequisites"
    described by "Required prior modules."
  }
  status is ModuleStatus with {
    briefly "Status"
    described by "Module status."
  }
} with {
  briefly "Course module"
  described by "Logical grouping of content."
}

type ContentItem is {
  contentId is ContentId with {
    briefly "Content ID"
    described by "Content identifier."
  }
  title is String(1, 200) with {
    briefly "Title"
    described by "Content title."
  }
  contentType is ContentType with {
    briefly "Type"
    described by "Content type."
  }
  resourceUrl is URL with {
    briefly "URL"
    described by "Content location."
  }
  contentDuration is optional Duration with {
    briefly "Duration"
    described by "Time to complete."
  }
  sequenceNumber is Natural with {
    briefly "Sequence"
    described by "Order in module."
  }
  required is Boolean with {
    briefly "Required"
    described by "Is content required."
  }
} with {
  briefly "Content item"
  described by "Individual learning content."
}

type Enrollment is {
  enrollmentId is EnrollmentId with {
    briefly "Enrollment ID"
    described by "Enrollment identifier."
  }
  learnerId is LearnerId with {
    briefly "Learner"
    described by "Enrolled learner."
  }
  courseId is CourseId with {
    briefly "Course"
    described by "Enrolled course."
  }
  enrolledAt is TimeStamp with {
    briefly "Enrolled"
    described by "Enrollment time."
  }
  enrollmentStatus is EnrollmentStatus with {
    briefly "Status"
    described by "Enrollment status."
  }
  courseProgress is CourseProgress with {
    briefly "Progress"
    described by "Current progress."
  }
  enrollmentCompletedAt is optional TimeStamp with {
    briefly "Completed"
    described by "Completion time."
  }
} with {
  briefly "Enrollment"
  described by "Learner course enrollment."
}

type CourseProgress is {
  percentComplete is Decimal(5, 2) with {
    briefly "Percent"
    described by "Completion percentage."
  }
  modulesCompleted is Natural with {
    briefly "Modules"
    described by "Completed modules count."
  }
  totalModules is Natural with {
    briefly "Total"
    described by "Total modules."
  }
  lastAccessedAt is TimeStamp with {
    briefly "Last access"
    described by "Last activity time."
  }
  timeSpent is Duration with {
    briefly "Time spent"
    described by "Total learning time."
  }
} with {
  briefly "Course progress"
  described by "Learner progress in course."
}

type ContentProgress is {
  contentId is ContentId with {
    briefly "Content"
    described by "Content item."
  }
  progressStatus is ProgressStatus with {
    briefly "Status"
    described by "Completion status."
  }
  updatedStartedAt is optional TimeStamp with {
    briefly "Started"
    described by "Start time."
  }
  updatedCompletedAt is optional TimeStamp with {
    briefly "Completed"
    described by "Completion time."
  }
  attempts is Natural with {
    briefly "Attempts"
    described by "Number of attempts."
  }
  timeSpent is Duration with {
    briefly "Time"
    described by "Time on content."
  }
} with {
  briefly "Content progress"
  described by "Progress on content item."
}

type Assessment is {
  assessmentId is AssessmentId with {
    briefly "Assessment ID"
    described by "Assessment identifier."
  }
  title is String(1, 200) with {
    briefly "Title"
    described by "Assessment title."
  }
  assessmentType is AssessmentType with {
    briefly "Type"
    described by "Assessment type."
  }
  moduleId is ModuleId with {
    briefly "Module"
    described by "Associated module."
  }
  passingScore is Decimal(5, 2) with {
    briefly "Passing score"
    described by "Minimum passing score."
  }
  maxAttempts is Natural with {
    briefly "Max attempts"
    described by "Allowed attempts."
  }
  timeLimit is optional Duration with {
    briefly "Time limit"
    described by "Time allowed."
  }
  questions is many Question with {
    briefly "Questions"
    described by "Assessment questions."
  }
} with {
  briefly "Assessment"
  described by "Learning assessment definition."
}

type Question is {
  questionId is UUID with {
    briefly "Question ID"
    described by "Question identifier."
  }
  text is String(1, 2000) with {
    briefly "Text"
    described by "Question text."
  }
  questionType is QuestionType with {
    briefly "Type"
    described by "Question type."
  }
  points is Natural with {
    briefly "Points"
    described by "Point value."
  }
  options is many optional String(1, 500) with {
    briefly "Options"
    described by "Answer options."
  }
} with {
  briefly "Question"
  described by "Assessment question."
}

type QuestionType is any of {
  MultipleChoice,
  TrueFalse,
  ShortAnswer,
  Essay,
  Matching,
  FillBlank
} with {
  briefly "Question type"
  described by "Type of question."
}

type AssessmentAttempt is {
  attemptId is UUID with {
    briefly "Attempt ID"
    described by "Attempt identifier."
  }
  assessmentId is AssessmentId with {
    briefly "Assessment"
    described by "Assessment taken."
  }
  learnerId is LearnerId with {
    briefly "Learner"
    described by "Learner taking assessment."
  }
  startedAt is TimeStamp with {
    briefly "Started"
    described by "Attempt start time."
  }
  updatedSubmittedAt is optional TimeStamp with {
    briefly "Submitted"
    described by "Submission time."
  }
  updatedScore is optional Decimal(5, 2) with {
    briefly "Score"
    described by "Achieved score."
  }
  updatedPassed is optional Boolean with {
    briefly "Passed"
    described by "Whether passed."
  }
  answers is many QuestionAnswer with {
    briefly "Answers"
    described by "Submitted answers."
  }
} with {
  briefly "Assessment attempt"
  described by "Learner assessment attempt."
}

type QuestionAnswer is {
  questionId is UUID with {
    briefly "Question"
    described by "Question answered."
  }
  answer is String(1, 5000) with {
    briefly "Answer"
    described by "Submitted answer."
  }
  correct is optional Boolean with {
    briefly "Correct"
    described by "Whether correct."
  }
  pointsAwarded is optional Natural with {
    briefly "Points"
    described by "Points awarded."
  }
} with {
  briefly "Question answer"
  described by "Answer to question."
}
