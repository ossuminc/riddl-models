// Inventory Control - Shared Types

type InventoryItemId is Id(InventoryControlContext.InventoryItem) with {
  briefly "Inventory item identifier"
  described by "Unique identifier for an inventory item."
}

type WarehouseId is UUID with {
  briefly "Warehouse identifier"
  described by "Reference to a warehouse facility."
}

type ProductId is UUID with {
  briefly "Product identifier"
  described by "Reference to a product in the catalog."
}

type BinLocationId is UUID with {
  briefly "Bin location identifier"
  described by "Reference to a storage bin location."
}

type CountSessionId is UUID with {
  briefly "Count session identifier"
  described by "Reference to a cycle count session."
}

type ItemStatus is any of {
  Available,
  Reserved,
  Damaged,
  Quarantined,
  InTransit,
  Depleted
} with {
  briefly "Item status"
  described by "Inventory item availability status."
}

type AdjustmentReason is any of {
  CycleCount,
  PhysicalCount,
  DamageWriteOff,
  Receiving,
  Shipping,
  ReturnProcessing,
  TransferIn,
  TransferOut,
  Shrinkage,
  Correction
} with {
  briefly "Adjustment reason"
  described by "Reason for inventory quantity adjustment."
}

type CountType is any of {
  FullPhysical,
  CycleCount,
  SpotCheck,
  AnnualAudit
} with {
  briefly "Count type"
  described by "Type of inventory count."
}

type ReplenishmentPriority is any of {
  Routine,
  Urgent,
  Critical
} with {
  briefly "Replenishment priority"
  described by "Priority level for replenishment request."
}

type BinLocation is {
  binId is BinLocationId with {
    briefly "Bin ID"
    described by "Bin location identifier."
  }
  warehouseId is WarehouseId with {
    briefly "Warehouse"
    described by "Warehouse containing this bin."
  }
  aisle is String(1, 10) with {
    briefly "Aisle"
    described by "Aisle designation."
  }
  rack is String(1, 10) with {
    briefly "Rack"
    described by "Rack designation."
  }
  shelf is String(1, 10) with {
    briefly "Shelf"
    described by "Shelf designation."
  }
  position is String(1, 10) with {
    briefly "Position"
    described by "Position within shelf."
  }
  maxCapacity is Natural with {
    briefly "Capacity"
    described by "Maximum unit capacity."
  }
} with {
  briefly "Bin location"
  described by "Physical storage location in warehouse."
}

type InventoryItemInfo is {
  itemId is InventoryItemId with {
    briefly "Item ID"
    described by "Inventory item identifier."
  }
  productId is ProductId with {
    briefly "Product"
    described by "Product identifier."
  }
  warehouseId is WarehouseId with {
    briefly "Warehouse"
    described by "Warehouse identifier."
  }
  binLocation is BinLocation with {
    briefly "Location"
    described by "Storage bin location."
  }
  unitOfMeasure is String(1, 20) with {
    briefly "UOM"
    described by "Unit of measure."
  }
  reorderPoint is Natural with {
    briefly "Reorder point"
    described by "Quantity triggering replenishment."
  }
  reorderQuantity is Natural with {
    briefly "Reorder qty"
    described by "Standard replenishment quantity."
  }
} with {
  briefly "Inventory item info"
  described by "Inventory item details."
}

type QuantityOnHand is {
  available is Natural with {
    briefly "Available"
    described by "Available quantity."
  }
  reserved is Natural with {
    briefly "Reserved"
    described by "Reserved quantity."
  }
  damaged is Natural with {
    briefly "Damaged"
    described by "Damaged quantity."
  }
  quarantined is Natural with {
    briefly "Quarantined"
    described by "Quarantined quantity."
  }
  inTransit is Natural with {
    briefly "In transit"
    described by "In-transit quantity."
  }
} with {
  briefly "Quantity on hand"
  described by "Inventory quantity breakdown by status."
}

type AdjustmentRecord is {
  adjustmentId is UUID with {
    briefly "Adjustment ID"
    described by "Adjustment identifier."
  }
  reason is AdjustmentReason with {
    briefly "Reason"
    described by "Adjustment reason."
  }
  previousQty is Natural with {
    briefly "Previous"
    described by "Previous quantity."
  }
  newQty is Natural with {
    briefly "New quantity"
    described by "New quantity."
  }
  adjustedBy is String(1, 100) with {
    briefly "Adjusted by"
    described by "Person making adjustment."
  }
  adjustedAt is TimeStamp with {
    briefly "Adjusted at"
    described by "Adjustment timestamp."
  }
  notes is optional String(1, 500) with {
    briefly "Notes"
    described by "Adjustment notes."
  }
} with {
  briefly "Adjustment record"
  described by "Inventory quantity adjustment record."
}

type CountResult is {
  binId is BinLocationId with {
    briefly "Bin"
    described by "Bin location counted."
  }
  productId is ProductId with {
    briefly "Product"
    described by "Product counted."
  }
  expectedQty is Natural with {
    briefly "Expected"
    described by "Expected quantity."
  }
  actualQty is Natural with {
    briefly "Actual"
    described by "Actual counted quantity."
  }
  variance is Integer with {
    briefly "Variance"
    described by "Quantity variance."
  }
  countedBy is String(1, 100) with {
    briefly "Counted by"
    described by "Person who counted."
  }
  countedAt is TimeStamp with {
    briefly "Counted at"
    described by "Count timestamp."
  }
} with {
  briefly "Count result"
  described by "Result of an inventory count at a location."
}

type AccuracyMetrics is {
  totalItems is Natural with {
    briefly "Total items"
    described by "Total items tracked."
  }
  accurateItems is Natural with {
    briefly "Accurate"
    described by "Items with accurate counts."
  }
  accuracyRate is Decimal(5, 2) with {
    briefly "Accuracy rate"
    described by "Inventory accuracy percentage."
  }
  lastCalculated is TimeStamp with {
    briefly "Calculated"
    described by "Last calculation time."
  }
} with {
  briefly "Accuracy metrics"
  described by "Inventory accuracy tracking metrics."
}
