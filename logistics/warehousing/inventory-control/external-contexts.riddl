// Inventory Control - External Contexts

context PurchasingSystem is {

  command CreatePurchaseOrder is {
    productId is ProductId with { briefly "Product" described by "Product ID." }
    quantity is Natural with { briefly "Quantity" described by "Order quantity." }
    priority is ReplenishmentPriority with { briefly "Priority" described by "Order priority." }
    warehouseId is WarehouseId with { briefly "Warehouse" described by "Destination warehouse." }
  } with {
    briefly "Create purchase order"
    described by "Creates a purchase order for replenishment."
  }

  event PurchaseOrderCreated is {
    purchaseOrderId is UUID with { briefly "PO ID" described by "Purchase order ID." }
    productId is ProductId with { briefly "Product" described by "Product ID." }
    quantity is Natural with { briefly "Quantity" described by "Order quantity." }
    createdAt is TimeStamp with { briefly "Created" described by "Creation time." }
  } with {
    briefly "Purchase order created"
    described by "Emitted when purchase order is created."
  }

  query GetPurchaseOrderStatus is {
    purchaseOrderId is UUID with { briefly "PO ID" described by "Purchase order ID." }
  } with {
    briefly "Get PO status"
    described by "Gets purchase order status."
  }

  result PurchaseOrderStatus is {
    purchaseOrderId is UUID with { briefly "PO ID" described by "Purchase order ID." }
    orderStatus is String(1, 50) with { briefly "Status" described by "Order status." }
    expectedDelivery is optional Date with { briefly "Expected" described by "Expected delivery date." }
  } with {
    briefly "Purchase order status"
    described by "Purchase order status details."
  }

} with {
  option is external
  briefly "External purchasing system"
  described by "Procurement and purchase order management."
}

context ERPSystem is {

  command SyncInventoryLevels is {
    warehouseId is WarehouseId with { briefly "Warehouse" described by "Warehouse ID." }
    productId is ProductId with { briefly "Product" described by "Product ID." }
    quantityOnHand is Natural with { briefly "Qty" described by "Quantity on hand." }
    syncedAt is TimeStamp with { briefly "Synced" described by "Sync timestamp." }
  } with {
    briefly "Sync inventory levels"
    described by "Synchronizes inventory levels to ERP."
  }

  event InventoryLevelsSynced is {
    warehouseId is WarehouseId with { briefly "Warehouse" described by "Warehouse ID." }
    productId is ProductId with { briefly "Product" described by "Product ID." }
    syncedAt is TimeStamp with { briefly "Synced" described by "Sync timestamp." }
  } with {
    briefly "Inventory levels synced"
    described by "Emitted when inventory is synced to ERP."
  }

  query GetProductInfo is {
    productId is ProductId with { briefly "Product" described by "Product ID." }
  } with {
    briefly "Get product info"
    described by "Gets product information from ERP."
  }

  result ProductInfo is {
    productId is ProductId with { briefly "Product" described by "Product ID." }
    productName is String(1, 200) with { briefly "Name" described by "Product name." }
    sku is String(1, 50) with { briefly "SKU" described by "Stock keeping unit." }
    category is String(1, 100) with { briefly "Category" described by "Product category." }
  } with {
    briefly "Product info"
    described by "Product information from ERP."
  }

} with {
  option is external
  briefly "External ERP system"
  described by "Enterprise resource planning system."
}
