// Order Fulfillment - Shared Types

type FulfillmentOrderId is Id(FulfillmentContext.FulfillmentOrder) with {
  briefly "Fulfillment order identifier"
  described by "Unique identifier for a fulfillment order."
}

type ShipmentId is UUID with {
  briefly "Shipment identifier"
  described by "Reference to a shipment."
}

type CustomerId is UUID with {
  briefly "Customer identifier"
  described by "Reference to a customer."
}

type CarrierId is UUID with {
  briefly "Carrier identifier"
  described by "Reference to a shipping carrier."
}

type WarehouseId is UUID with {
  briefly "Warehouse identifier"
  described by "Reference to a fulfillment center."
}

type FulfillmentStatus is any of {
  Received,
  Allocated,
  Picking,
  Packed,
  LabelCreated,
  Shipped,
  InTransit,
  Delivered,
  FailedDelivery,
  Cancelled
} with {
  briefly "Fulfillment status"
  described by "Status of a fulfillment order."
}

type ShipmentPriority is any of {
  Standard,
  Expedited,
  Overnight,
  SameDay
} with {
  briefly "Shipment priority"
  described by "Shipping speed priority level."
}

type PackageSize is any of {
  SmallParcel,
  MediumParcel,
  LargeParcel,
  Pallet,
  Oversized
} with {
  briefly "Package size"
  described by "Size classification of the package."
}

type AddressInfo is {
  street is String(1, 300) with {
    briefly "Street"
    described by "Street address."
  }
  city is String(1, 100) with {
    briefly "City"
    described by "City name."
  }
  region is String(1, 100) with {
    briefly "Region"
    described by "State or province."
  }
  postalCode is String(1, 20) with {
    briefly "Postal code"
    described by "ZIP or postal code."
  }
  country is String(2, 3) with {
    briefly "Country"
    described by "Country code."
  }
} with {
  briefly "Address information"
  described by "Mailing or shipping address."
}

type OrderLineItem is {
  sku is String(1, 50) with {
    briefly "SKU"
    described by "Stock keeping unit."
  }
  productName is String(1, 200) with {
    briefly "Product"
    described by "Product name."
  }
  quantity is Natural with {
    briefly "Quantity"
    described by "Quantity ordered."
  }
  weight is Decimal(8, 2) with {
    briefly "Weight"
    described by "Item weight in kilograms."
  }
  suggestedLocationBin is optional String(1, 50) with {
    briefly "Bin location"
    described by "Warehouse bin location."
  }
} with {
  briefly "Order line item"
  described by "A single item in the fulfillment order."
}

type FulfillmentOrderInfo is {
  orderId is FulfillmentOrderId with {
    briefly "Order ID"
    described by "Fulfillment order identifier."
  }
  customerId is CustomerId with {
    briefly "Customer"
    described by "Customer identifier."
  }
  warehouseId is WarehouseId with {
    briefly "Warehouse"
    described by "Fulfillment center identifier."
  }
  shippingAddress is AddressInfo with {
    briefly "Ship to"
    described by "Destination shipping address."
  }
  priority is ShipmentPriority with {
    briefly "Priority"
    described by "Shipping priority."
  }
  items is many OrderLineItem with {
    briefly "Items"
    described by "Order line items."
  }
  requestedDeliveryDate is optional Date with {
    briefly "Requested delivery"
    described by "Customer requested delivery date."
  }
} with {
  briefly "Fulfillment order info"
  described by "Fulfillment order details."
}

type PickTask is {
  sku is String(1, 50) with {
    briefly "SKU"
    described by "Stock keeping unit."
  }
  quantity is Natural with {
    briefly "Quantity"
    described by "Quantity to pick."
  }
  locationBin is String(1, 50) with {
    briefly "Bin"
    described by "Warehouse bin location."
  }
  pickedQuantity is Natural with {
    briefly "Picked"
    described by "Quantity actually picked."
  }
  pickCompletedAt is optional TimeStamp with {
    briefly "Picked at"
    described by "Time item was picked."
  }
} with {
  briefly "Pick task"
  described by "A pick task for a warehouse item."
}

type PackageInfo is {
  packageId is UUID with {
    briefly "Package ID"
    described by "Package identifier."
  }
  size is PackageSize with {
    briefly "Size"
    described by "Package size."
  }
  totalWeight is Decimal(8, 2) with {
    briefly "Weight"
    described by "Total package weight in kilograms."
  }
  dimensions is String(1, 50) with {
    briefly "Dimensions"
    described by "Package dimensions (LxWxH)."
  }
  containedSkus is many String(1, 50) with {
    briefly "SKUs"
    described by "SKUs in this package."
  }
} with {
  briefly "Package info"
  described by "Physical package details."
}

type CarrierSelection is {
  carrierId is CarrierId with {
    briefly "Carrier"
    described by "Selected carrier identifier."
  }
  carrierName is String(1, 100) with {
    briefly "Name"
    described by "Carrier name."
  }
  serviceLevel is String(1, 50) with {
    briefly "Service"
    described by "Carrier service level."
  }
  estimatedCost is Decimal(10, 2) with {
    briefly "Cost"
    described by "Estimated shipping cost."
  }
  estimatedDeliveryDate is Date with {
    briefly "ETA"
    described by "Estimated delivery date."
  }
} with {
  briefly "Carrier selection"
  described by "Selected carrier and service details."
}

type TrackingInfo is {
  trackingNumber is String(1, 100) with {
    briefly "Tracking"
    described by "Carrier tracking number."
  }
  carrierName is String(1, 100) with {
    briefly "Carrier"
    described by "Carrier name."
  }
  labelUrl is optional String(1, 500) with {
    briefly "Label"
    described by "Shipping label URL."
  }
  shippedAt is TimeStamp with {
    briefly "Shipped"
    described by "Shipment time."
  }
} with {
  briefly "Tracking info"
  described by "Shipment tracking details."
}

type DeliveryConfirmation is {
  deliveredAt is TimeStamp with {
    briefly "Delivered"
    described by "Delivery time."
  }
  signedBy is optional String(1, 100) with {
    briefly "Signed by"
    described by "Name of person who signed."
  }
  proofOfDelivery is optional String(1, 500) with {
    briefly "Proof"
    described by "Proof of delivery reference."
  }
} with {
  briefly "Delivery confirmation"
  described by "Proof of delivery details."
}
