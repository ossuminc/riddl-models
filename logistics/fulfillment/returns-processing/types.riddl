// Returns Processing - Shared Types

type ReturnId is Id(ReturnsContext.Return) with {
  briefly "Return identifier"
  described by "Unique identifier for a return."
}

type OrderId is UUID with {
  briefly "Order identifier"
  described by "Reference to original order."
}

type RMANumber is String(10, 20) with {
  briefly "RMA number"
  described by "Return merchandise authorization."
}

type ReturnStatus is any of {
  Requested,
  Authorized,
  InTransit,
  Received,
  Inspecting,
  Approved,
  Rejected,
  Refunded,
  Cancelled
} with {
  briefly "Return status"
  described by "Return lifecycle status."
}

type ReturnReason is any of {
  Defective,
  WrongItem,
  NotAsDescribed,
  DoesNotFit,
  ChangedMind,
  BetterPriceElsewhere,
  ArrivedTooLate,
  Damaged,
  Other
} with {
  briefly "Return reason"
  described by "Reason for return."
}

type ItemCondition is any of {
  New,
  LikeNew,
  Good,
  Fair,
  Poor,
  Damaged,
  Unsellable
} with {
  briefly "Item condition"
  described by "Returned item condition."
}

type DispositionAction is any of {
  ReturnToStock,
  RefurbForResale,
  LiquidateSale,
  DonateToCharity,
  RecycleDispose,
  ReturnToVendor
} with {
  briefly "Disposition"
  described by "Item disposition action."
}

type RefundMethod is any of {
  OriginalPayment,
  StoreCredit,
  ExchangeItem,
  ReplacementItem
} with {
  briefly "Refund method"
  described by "How customer is compensated."
}

type ReturnItem is {
  sku is String(1, 50) with {
    briefly "SKU"
    described by "Product SKU."
  }
  productName is String(1, 200) with {
    briefly "Product"
    described by "Product name."
  }
  quantity is Natural with {
    briefly "Quantity"
    described by "Quantity returned."
  }
  unitPrice is Decimal(10, 2) with {
    briefly "Price"
    described by "Original unit price."
  }
  reason is ReturnReason with {
    briefly "Reason"
    described by "Return reason."
  }
} with {
  briefly "Return item"
  described by "Item being returned."
}

type ShipmentTracking is {
  carrier is String(1, 100) with {
    briefly "Carrier"
    described by "Shipping carrier."
  }
  trackingNumber is String(1, 100) with {
    briefly "Tracking"
    described by "Tracking number."
  }
  shippedDate is optional Date with {
    briefly "Shipped"
    described by "Ship date."
  }
  deliveredDate is optional Date with {
    briefly "Delivered"
    described by "Delivery date."
  }
} with {
  briefly "Shipment tracking"
  described by "Return shipment tracking."
}

type InspectionResult is {
  inspectedBy is String(1, 100) with {
    briefly "Inspector"
    described by "Inspector name."
  }
  inspectedAt is TimeStamp with {
    briefly "Inspected"
    described by "Inspection time."
  }
  condition is ItemCondition with {
    briefly "Condition"
    described by "Item condition."
  }
  notes is optional String(1, 1000) with {
    briefly "Notes"
    described by "Inspection notes."
  }
  recommendedAction is DispositionAction with {
    briefly "Action"
    described by "Recommended disposition."
  }
} with {
  briefly "Inspection result"
  described by "Item inspection findings."
}

type RefundInfo is {
  refundAmount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Refund amount."
  }
  refundMethod is RefundMethod with {
    briefly "Method"
    described by "Refund method."
  }
  restockingFee is Decimal(10, 2) with {
    briefly "Fee"
    described by "Restocking fee."
  }
  processedAt is optional TimeStamp with {
    briefly "Processed"
    described by "Refund process time."
  }
  transactionId is optional String(1, 100) with {
    briefly "Transaction"
    described by "Payment transaction ID."
  }
} with {
  briefly "Refund info"
  described by "Refund processing details."
}

type ReturnLabel is {
  labelUrl is URL with {
    briefly "URL"
    described by "Label download URL."
  }
  carrier is String(1, 100) with {
    briefly "Carrier"
    described by "Carrier name."
  }
  prepaid is Boolean with {
    briefly "Prepaid"
    described by "Is prepaid label."
  }
  expirationDate is Date with {
    briefly "Expires"
    described by "Label expiration."
  }
} with {
  briefly "Return label"
  described by "Prepaid return shipping label."
}
