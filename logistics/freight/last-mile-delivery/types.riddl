// Last Mile Delivery - Shared Types

type DeliveryId is Id(DeliveryContext.Delivery) with {
  briefly "Delivery identifier"
  described by "Unique identifier for a delivery."
}

type RouteId is UUID with {
  briefly "Route identifier"
  described by "Unique identifier for a route."
}

type DriverId is UUID with {
  briefly "Driver identifier"
  described by "Unique identifier for a driver."
}

type VehicleId is UUID with {
  briefly "Vehicle identifier"
  described by "Unique identifier for a vehicle."
}

type DeliveryStatus is any of {
  Pending,
  Assigned,
  OutForDelivery,
  AttemptedDelivery,
  Delivered,
  Failed,
  Returned
} with {
  briefly "Delivery status"
  described by "Current delivery lifecycle status."
}

type DeliveryPriority is any of {
  Standard,
  Express,
  SameDay,
  Priority,
  Scheduled
} with {
  briefly "Delivery priority"
  described by "Delivery urgency level."
}

type DeliveryType is any of {
  Residential,
  Commercial,
  Locker,
  PickupPoint,
  Curbside
} with {
  briefly "Delivery type"
  described by "Type of delivery destination."
}

type Address is {
  street is String(1, 200) with {
    briefly "Street"
    described by "Street address."
  }
  unit is optional String(1, 50) with {
    briefly "Unit"
    described by "Apartment or suite."
  }
  city is String(1, 100) with {
    briefly "City"
    described by "City name."
  }
  state is String(1, 100) with {
    briefly "State"
    described by "State or province."
  }
  postalCode is String(1, 20) with {
    briefly "Postal code"
    described by "ZIP or postal code."
  }
  country is String(2, 3) with {
    briefly "Country"
    described by "ISO country code."
  }
  deliveryInstructions is optional String(1, 500) with {
    briefly "Instructions"
    described by "Special delivery instructions."
  }
} with {
  briefly "Address"
  described by "Delivery address."
}

type GeoLocation is {
  latitude is Decimal(10, 7) with {
    briefly "Latitude"
    described by "GPS latitude."
  }
  longitude is Decimal(11, 7) with {
    briefly "Longitude"
    described by "GPS longitude."
  }
} with {
  briefly "Geo location"
  described by "GPS coordinates."
}

type TimeWindow is {
  startTime is TimeStamp with {
    briefly "Start"
    described by "Window start."
  }
  endTime is TimeStamp with {
    briefly "End"
    described by "Window end."
  }
} with {
  briefly "Time window"
  described by "Delivery time window."
}

type PackageInfo is {
  packageId is String(1, 50) with {
    briefly "Package ID"
    described by "Package identifier."
  }
  trackingNumber is String(10, 50) with {
    briefly "Tracking"
    described by "Tracking number."
  }
  weightKg is Decimal(6, 2) with {
    briefly "Weight"
    described by "Weight in kg."
  }
  dimensions is optional String(1, 50) with {
    briefly "Dimensions"
    described by "Package dimensions."
  }
  requiresSignature is Boolean with {
    briefly "Signature"
    described by "Signature required."
  }
  isFragile is Boolean with {
    briefly "Fragile"
    described by "Fragile handling."
  }
} with {
  briefly "Package info"
  described by "Package details."
}

type CustomerInfo is {
  name is String(1, 100) with {
    briefly "Name"
    described by "Customer name."
  }
  phone is optional String(1, 30) with {
    briefly "Phone"
    described by "Contact phone."
  }
  email is optional EmailAddress with {
    briefly "Email"
    described by "Contact email."
  }
} with {
  briefly "Customer info"
  described by "Customer contact details."
}

type DriverInfo is {
  driverId is DriverId with {
    briefly "Driver ID"
    described by "Driver identifier."
  }
  name is String(1, 100) with {
    briefly "Name"
    described by "Driver name."
  }
  phone is String(1, 30) with {
    briefly "Phone"
    described by "Driver phone."
  }
  vehicleId is VehicleId with {
    briefly "Vehicle"
    described by "Assigned vehicle."
  }
} with {
  briefly "Driver info"
  described by "Driver details."
}

type RouteStop is {
  stopNumber is Natural with {
    briefly "Stop"
    described by "Stop sequence number."
  }
  deliveryId is DeliveryId with {
    briefly "Delivery"
    described by "Delivery at this stop."
  }
  address is Address with {
    briefly "Address"
    described by "Stop address."
  }
  location is GeoLocation with {
    briefly "Location"
    described by "GPS coordinates."
  }
  estimatedArrival is TimeStamp with {
    briefly "ETA"
    described by "Estimated arrival."
  }
  serviceTimeMinutes is Natural with {
    briefly "Service time"
    described by "Expected time at stop."
  }
} with {
  briefly "Route stop"
  described by "Single stop on route."
}

type DeliveryAttempt is {
  attemptNumber is Natural with {
    briefly "Attempt"
    described by "Attempt number."
  }
  attemptedAt is TimeStamp with {
    briefly "Time"
    described by "Attempt time."
  }
  outcome is String(1, 50) with {
    briefly "Outcome"
    described by "Attempt outcome."
  }
  reason is optional String(1, 200) with {
    briefly "Reason"
    described by "Failure reason."
  }
  photoUrl is optional URL with {
    briefly "Photo"
    described by "Attempt photo."
  }
} with {
  briefly "Delivery attempt"
  described by "Single delivery attempt."
}

type ProofOfDelivery is {
  deliveredAt is TimeStamp with {
    briefly "Delivered"
    described by "Delivery time."
  }
  recipientName is optional String(1, 100) with {
    briefly "Recipient"
    described by "Person who received."
  }
  signatureUrl is optional URL with {
    briefly "Signature"
    described by "Signature image."
  }
  photoUrl is optional URL with {
    briefly "Photo"
    described by "Delivery photo."
  }
  location is GeoLocation with {
    briefly "Location"
    described by "Delivery GPS."
  }
} with {
  briefly "Proof of delivery"
  described by "Delivery confirmation evidence."
}

type RouteMetrics is {
  totalStops is Natural with {
    briefly "Stops"
    described by "Total stops on route."
  }
  completedStops is Natural with {
    briefly "Completed"
    described by "Completed stops."
  }
  totalDistanceKm is Decimal(8, 2) with {
    briefly "Distance"
    described by "Total route distance."
  }
  estimatedDuration is Natural with {
    briefly "Duration"
    described by "Estimated minutes."
  }
  actualDuration is optional Natural with {
    briefly "Actual"
    described by "Actual duration."
  }
} with {
  briefly "Route metrics"
  described by "Route performance data."
}
