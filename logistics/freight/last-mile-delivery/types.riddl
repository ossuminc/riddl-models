// Last Mile Delivery - Shared Types
type EmailAddress is String(5,254) with {
  briefly "Email address"
  described as {
    |An email address.
  }
}
type DeliveryId is Id(DeliveryContext.Delivery)  with {
  briefly "Delivery identifier"
  described as {
    |Unique identifier for a delivery.
  }
}
type RouteId is UUID with {
  briefly "Route identifier"
  described as {
    |Unique identifier for a route.
  }
}
type DriverId is UUID with {
  briefly "Driver identifier"
  described as {
    |Unique identifier for a driver.
  }
}
type VehicleId is UUID with {
  briefly "Vehicle identifier"
  described as {
    |Unique identifier for a vehicle.
  }
}
type DeliveryStatus is any of {
  Pending,
  Assigned,
  OutForDelivery,
  AttemptedDelivery,
  Delivered,
  Failed,
  Returned
} with {
  briefly "Delivery status"
  described as {
    |Current delivery lifecycle status.
  }
}
type DeliveryPriority is any of {
  Standard,
  Express,
  SameDay,
  Priority,
  Scheduled
} with {
  briefly "Delivery priority"
  described as {
    |Delivery urgency level.
  }
}
type DeliveryType is any of {
  Residential,
  Commercial,
  Locker,
  PickupPoint,
  Curbside
} with {
  briefly "Delivery type"
  described as {
    |Type of delivery destination.
  }
}
type Address is {
  street: String(1,200) with {
    briefly "Street"
    described as {
      |Street address.
    }
  }
  unit: String(1,50)? with {
    briefly "Unit"
    described as {
      |Apartment or suite.
    }
  }
  city: String(1,100) with {
    briefly "City"
    described as {
      |City name.
    }
  }
  state: String(1,100) with {
    briefly "State"
    described as {
      |State or province.
    }
  }
  postalCode: String(1,20) with {
    briefly "Postal code"
    described as {
      |ZIP or postal code.
    }
  }
  country: String(2,3) with {
    briefly "Country"
    described as {
      |ISO country code.
    }
  }
  deliveryInstructions: String(1,500)? with {
    briefly "Instructions"
    described as {
      |Special delivery instructions.
    }
  }
} with {
  briefly "Address"
  described as {
    |Delivery address.
  }
}
type GeoLocation is {
  latitude: Decimal(10,7) with {
    briefly "Latitude"
    described as {
      |GPS latitude.
    }
  }
  longitude: Decimal(11,7) with {
    briefly "Longitude"
    described as {
      |GPS longitude.
    }
  }
} with {
  briefly "Geo location"
  described as {
    |GPS coordinates.
  }
}
type TimeWindow is {
  startTime: TimeStamp with {
    briefly "Start"
    described as {
      |Window start.
    }
  }
  endTime: TimeStamp with {
    briefly "End"
    described as {
      |Window end.
    }
  }
} with {
  briefly "Time window"
  described as {
    |Delivery time window.
  }
}
type PackageInfo is {
  packageId: String(1,50) with {
    briefly "Package ID"
    described as {
      |Package identifier.
    }
  }
  trackingNumber: String(10,50) with {
    briefly "Tracking"
    described as {
      |Tracking number.
    }
  }
  weightKg: Decimal(6,2) with {
    briefly "Weight"
    described as {
      |Weight in kg.
    }
  }
  dimensions: String(1,50)? with {
    briefly "Dimensions"
    described as {
      |Package dimensions.
    }
  }
  requiresSignature: Boolean with {
    briefly "Signature"
    described as {
      |Signature required.
    }
  }
  isFragile: Boolean with {
    briefly "Fragile"
    described as {
      |Fragile handling.
    }
  }
} with {
  briefly "Package info"
  described as {
    |Package details.
  }
}
type CustomerInfo is {
  name: String(1,100) with {
    briefly "Name"
    described as {
      |Customer name.
    }
  }
  contactPhone: String(1,30)? with {
    briefly "Phone"
    described as {
      |Contact phone.
    }
  }
  email: EmailAddress? with {
    briefly "Email"
    described as {
      |Contact email.
    }
  }
} with {
  briefly "Customer info"
  described as {
    |Customer contact details.
  }
}
type DriverInfo is {
  driverId: DriverId with {
    briefly "Driver ID"
    described as {
      |Driver identifier.
    }
  }
  name: String(1,100) with {
    briefly "Name"
    described as {
      |Driver name.
    }
  }
  phone: String(1,30) with {
    briefly "Phone"
    described as {
      |Driver phone.
    }
  }
  vehicleId: VehicleId with {
    briefly "Vehicle"
    described as {
      |Assigned vehicle.
    }
  }
} with {
  briefly "Driver info"
  described as {
    |Driver details.
  }
}
type RouteStop is {
  stopNumber: Natural with {
    briefly "Stop"
    described as {
      |Stop sequence number.
    }
  }
  deliveryId: DeliveryId with {
    briefly "Delivery"
    described as {
      |Delivery at this stop.
    }
  }
  address: Address with {
    briefly "Address"
    described as {
      |Stop address.
    }
  }
  location: GeoLocation with {
    briefly "Location"
    described as {
      |GPS coordinates.
    }
  }
  estimatedArrival: TimeStamp with {
    briefly "ETA"
    described as {
      |Estimated arrival.
    }
  }
  serviceTimeMinutes: Natural with {
    briefly "Service time"
    described as {
      |Expected time at stop.
    }
  }
} with {
  briefly "Route stop"
  described as {
    |Single stop on route.
  }
}
type DeliveryAttempt is {
  attemptNumber: Natural with {
    briefly "Attempt"
    described as {
      |Attempt number.
    }
  }
  attemptedAt: TimeStamp with {
    briefly "Time"
    described as {
      |Attempt time.
    }
  }
  outcome: String(1,50) with {
    briefly "Outcome"
    described as {
      |Attempt outcome.
    }
  }
  failureReason: String(1,200)? with {
    briefly "Reason"
    described as {
      |Failure reason.
    }
  }
  attemptPhotoUrl: URL? with {
    briefly "Photo"
    described as {
      |Attempt photo.
    }
  }
} with {
  briefly "Delivery attempt"
  described as {
    |Single delivery attempt.
  }
}
type ProofOfDelivery is {
  deliveredAt: TimeStamp with {
    briefly "Delivered"
    described as {
      |Delivery time.
    }
  }
  recipientName: String(1,100)? with {
    briefly "Recipient"
    described as {
      |Person who received.
    }
  }
  signatureImageUrl: URL? with {
    briefly "Signature"
    described as {
      |Signature image.
    }
  }
  deliveryPhotoUrl: URL? with {
    briefly "Photo"
    described as {
      |Delivery photo.
    }
  }
  location: GeoLocation with {
    briefly "Location"
    described as {
      |Delivery GPS.
    }
  }
} with {
  briefly "Proof of delivery"
  described as {
    |Delivery confirmation evidence.
  }
}
type RouteMetrics is {
  totalStops: Natural with {
    briefly "Stops"
    described as {
      |Total stops on route.
    }
  }
  completedStops: Natural with {
    briefly "Completed"
    described as {
      |Completed stops.
    }
  }
  totalDistanceKm: Decimal(8,2) with {
    briefly "Distance"
    described as {
      |Total route distance.
    }
  }
  estimatedDuration: Natural with {
    briefly "Duration"
    described as {
      |Estimated minutes.
    }
  }
  actualDuration: Natural? with {
    briefly "Actual"
    described as {
      |Actual duration.
    }
  }
} with {
  briefly "Route metrics"
  described as {
    |Route performance data.
  }
}
