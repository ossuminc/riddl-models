// Bill of Materials Management - Shared Types
type BOMId is Id(BOMContext.BillOfMaterials)  with {
  briefly "BOM identifier"
  described as {
    |Unique identifier for a bill of materials.
  }
}
type ItemId is UUID with {
  briefly "Item identifier"
  described as {
    |Unique identifier for a BOM line item.
  }
}
type RevisionId is UUID with {
  briefly "Revision identifier"
  described as {
    |Unique identifier for a BOM revision.
  }
}
type ProductId is UUID with {
  briefly "Product identifier"
  described as {
    |Reference to a product or assembly.
  }
}
type ComponentId is UUID with {
  briefly "Component identifier"
  described as {
    |Reference to a component part.
  }
}
type BOMStatus is any of {
  Draft,
  Released,
  Obsolete,
  Engineering
} with {
  briefly "BOM status"
  described as {
    |Current status of the bill of materials.
  }
}
type ItemType is any of {
  Component,
  Assembly,
  RawMaterial,
  Consumable,
  Phantom
} with {
  briefly "Item type"
  described as {
    |Type classification for BOM line items.
  }
}
type UnitOfMeasure is any of {
  Each,
  Kilogram,
  Gram,
  Liter,
  Milliliter,
  Meter,
  Centimeter,
  SquareMeter,
  CubicMeter,
  Hour
} with {
  briefly "Unit of measure"
  described as {
    |Standard units for quantity measurement.
  }
}
type CostType is any of {
  Material,
  Labor,
  Overhead,
  Tooling,
  Subcontract
} with {
  briefly "Cost type"
  described as {
    |Classification of cost elements.
  }
}
type BOMItem is {
  itemId: ItemId with {
    briefly "Item ID"
    described as {
      |Unique line item identifier.
    }
  }
  componentId: ComponentId with {
    briefly "Component"
    described as {
      |Reference to component part.
    }
  }
  partNumber: String(1,50) with {
    briefly "Part number"
    described as {
      |Component part number.
    }
  }
  description: String(1,200) with {
    briefly "Description"
    described as {
      |Component description.
    }
  }
  itemType: ItemType with {
    briefly "Type"
    described as {
      |Item type classification.
    }
  }
  quantity: Decimal(15,6) with {
    briefly "Quantity"
    described as {
      |Required quantity per parent.
    }
  }
  unitOfMeasure: UnitOfMeasure with {
    briefly "UOM"
    described as {
      |Unit of measure.
    }
  }
  position: Natural with {
    briefly "Position"
    described as {
      |Sequence position on BOM.
    }
  }
  referenceDesignator: String(1,100)? with {
    briefly "Reference designator"
    described as {
      |Engineering reference designator.
    }
  }
  findNumber: String(1,50)? with {
    briefly "Find number"
    described as {
      |Find number for assembly drawings.
    }
  }
  scrapFactor: Decimal(5,4) with {
    briefly "Scrap factor"
    described as {
      |Expected scrap percentage (0.0000-1.0000).
    }
  }
  effectiveFrom: Date? with {
    briefly "Effective from"
    described as {
      |Date item becomes effective.
    }
  }
  effectiveTo: Date? with {
    briefly "Effective to"
    described as {
      |Date item becomes obsolete.
    }
  }
  notes: String(1,1000)? with {
    briefly "Notes"
    described as {
      |Item-specific notes.
    }
  }
} with {
  briefly "BOM line item"
  described as {
    |Component line item with quantity and position.
  }
}
type BOMHeader is {
  bomId: BOMId with {
    briefly "BOM ID"
    described as {
      |Bill of materials identifier.
    }
  }
  productId: ProductId with {
    briefly "Product"
    described as {
      |Parent product identifier.
    }
  }
  partNumber: String(1,50) with {
    briefly "Part number"
    described as {
      |Parent part number.
    }
  }
  description: String(1,200) with {
    briefly "Description"
    described as {
      |Product description.
    }
  }
  revision: String(1,20) with {
    briefly "Revision"
    described as {
      |BOM revision level.
    }
  }
  status: BOMStatus with {
    briefly "Status"
    described as {
      |Current BOM status.
    }
  }
  effectiveDate: Date with {
    briefly "Effective date"
    described as {
      |Date BOM becomes effective.
    }
  }
  unitOfMeasure: UnitOfMeasure with {
    briefly "UOM"
    described as {
      |Parent unit of measure.
    }
  }
  bomType: String(1,50) with {
    briefly "BOM type"
    described as {
      |Type (Manufacturing, Engineering, Planning).
    }
  }
  createdBy: String(1,200) with {
    briefly "Created by"
    described as {
      |Person who created the BOM.
    }
  }
  createdAt: TimeStamp with {
    briefly "Created at"
    described as {
      |Creation timestamp.
    }
  }
} with {
  briefly "BOM header"
  described as {
    |Bill of materials header information.
  }
}
type RevisionInfo is {
  revisionId: RevisionId with {
    briefly "Revision ID"
    described as {
      |Unique revision identifier.
    }
  }
  revisionNumber: String(1,20) with {
    briefly "Revision number"
    described as {
      |Revision level (A, B, C or 1, 2, 3).
    }
  }
  priorRevision: String(1,20)? with {
    briefly "Previous"
    described as {
      |Previous revision level.
    }
  }
  revisionChangeNumber: String(1,50)? with {
    briefly "Change number"
    described as {
      |Engineering change number (ECN/ECO).
    }
  }
  changeDescription: String(1,1000) with {
    briefly "Change description"
    described as {
      |Description of changes in this revision.
    }
  }
  revisedBy: String(1,200) with {
    briefly "Revised by"
    described as {
      |Person who created revision.
    }
  }
  revisedAt: TimeStamp with {
    briefly "Revised at"
    described as {
      |Revision creation timestamp.
    }
  }
  revisionApprovedBy: String(1,200)? with {
    briefly "Approved by"
    described as {
      |Person who approved revision.
    }
  }
  revisionApprovedAt: TimeStamp? with {
    briefly "Approved at"
    described as {
      |Approval timestamp.
    }
  }
} with {
  briefly "Revision information"
  described as {
    |BOM revision tracking information.
  }
}
type CostElement is {
  costType: CostType with {
    briefly "Cost type"
    described as {
      |Type of cost element.
    }
  }
  amount: Decimal(15,4) with {
    briefly "Amount"
    described as {
      |Cost amount in base currency.
    }
  }
  currency: String(3,3) with {
    briefly "Currency"
    described as {
      |ISO currency code.
    }
  }
} with {
  briefly "Cost element"
  described as {
    |Individual cost element by type.
  }
}
type CostRollup is {
  bomId: BOMId with {
    briefly "BOM"
    described as {
      |BOM identifier.
    }
  }
  totalMaterialCost: Decimal(15,4) with {
    briefly "Material cost"
    described as {
      |Total material cost.
    }
  }
  totalLaborCost: Decimal(15,4) with {
    briefly "Labor cost"
    described as {
      |Total labor cost.
    }
  }
  totalOverheadCost: Decimal(15,4) with {
    briefly "Overhead cost"
    described as {
      |Total overhead cost.
    }
  }
  totalSubcontractCost: Decimal(15,4) with {
    briefly "Subcontract cost"
    described as {
      |Total subcontract cost.
    }
  }
  totalToolingCost: Decimal(15,4) with {
    briefly "Tooling cost"
    described as {
      |Total tooling cost.
    }
  }
  totalCost: Decimal(15,4) with {
    briefly "Total cost"
    described as {
      |Sum of all cost elements.
    }
  }
  currency: String(3,3) with {
    briefly "Currency"
    described as {
      |ISO currency code.
    }
  }
  costDate: Date with {
    briefly "Cost date"
    described as {
      |Date of cost calculation.
    }
  }
  costElements: CostElement+ with {
    briefly "Cost elements"
    described as {
      |Breakdown by cost type.
    }
  }
} with {
  briefly "Cost rollup"
  described as {
    |Rolled up cost information for BOM.
  }
}
type ComponentUsage is {
  componentId: ComponentId with {
    briefly "Component"
    described as {
      |Component identifier.
    }
  }
  partNumber: String(1,50) with {
    briefly "Part number"
    described as {
      |Component part number.
    }
  }
  usedInBOMs: BOMId+ with {
    briefly "Used in"
    described as {
      |List of BOMs using this component.
    }
  }
  totalQuantity: Decimal(15,6) with {
    briefly "Total quantity"
    described as {
      |Total quantity across all usages.
    }
  }
} with {
  briefly "Component usage"
  described as {
    |Where-used information for a component.
  }
}
type WhereUsed is {
  componentId: ComponentId with {
    briefly "Component"
    described as {
      |Component being queried.
    }
  }
  usageList: ComponentUsage+ with {
    briefly "Usage list"
    described as {
      |List of parent assemblies.
    }
  }
  totalParents: Natural with {
    briefly "Total parents"
    described as {
      |Number of parent assemblies.
    }
  }
} with {
  briefly "Where-used result"
  described as {
    |Complete where-used analysis.
  }
}
