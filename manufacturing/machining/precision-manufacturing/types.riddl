// Precision Manufacturing - Shared Types

type MeasurementId is Id(PrecisionContext.PrecisionPart) with {
  briefly "Measurement identifier"
  described by "Unique identifier for a measurement record."
}

type PartId is UUID with {
  briefly "Part identifier"
  described by "Reference to a manufactured part."
}

type GageId is UUID with {
  briefly "Gage identifier"
  described by "Reference to a measurement gage or instrument."
}

type SpecificationId is UUID with {
  briefly "Specification identifier"
  described by "Reference to a tolerance specification."
}

type FeatureId is UUID with {
  briefly "Feature identifier"
  described by "Reference to a geometric feature being measured."
}

type MeasurementStatus is any of {
  Pending,
  InTolerance,
  OutOfTolerance,
  Rework,
  Scrap
} with {
  briefly "Measurement status"
  described by "Current status of a measurement evaluation."
}

type CertificationStatus is any of {
  AwaitingInspection,
  InspectionInProgress,
  Certified,
  Rejected,
  ConditionalRelease
} with {
  briefly "Certification status"
  described by "Current certification status of a part."
}

type ToleranceType is any of {
  Bilateral,
  Unilateral,
  LimitsFit,
  GDT,
  SurfaceFinish
} with {
  briefly "Tolerance type"
  described by "Type of tolerance specification."
}

type GDTSymbol is any of {
  Straightness,
  Flatness,
  Circularity,
  Cylindricity,
  ProfileLine,
  ProfileSurface,
  Perpendicularity,
  Angularity,
  Parallelism,
  Position,
  Concentricity,
  Symmetry,
  CircularRunout,
  TotalRunout
} with {
  briefly "GD&T symbol"
  described by "Geometric dimensioning and tolerancing symbol."
}

type ToleranceSpec is {
  specificationId is SpecificationId with {
    briefly "Specification"
    described by "Specification identifier."
  }
  featureId is FeatureId with {
    briefly "Feature"
    described by "Feature being specified."
  }
  featureName is String(1, 200) with {
    briefly "Feature name"
    described by "Descriptive name of the feature."
  }
  nominal is Decimal(15, 6) with {
    briefly "Nominal"
    described by "Nominal dimension value."
  }
  upperLimit is Decimal(15, 6) with {
    briefly "Upper limit"
    described by "Upper tolerance limit."
  }
  lowerLimit is Decimal(15, 6) with {
    briefly "Lower limit"
    described by "Lower tolerance limit."
  }
  toleranceType is ToleranceType with {
    briefly "Type"
    described by "Type of tolerance."
  }
  gdtSymbol is optional GDTSymbol with {
    briefly "GD&T"
    described by "GD&T symbol if applicable."
  }
  unitOfMeasure is String(1, 20) with {
    briefly "UOM"
    described by "Unit of measure (mm, inch, etc.)."
  }
} with {
  briefly "Tolerance specification"
  described by "Defines dimensional tolerance requirements."
}

type Measurement is {
  measurementId is MeasurementId with {
    briefly "Measurement"
    described by "Measurement identifier."
  }
  featureId is FeatureId with {
    briefly "Feature"
    described by "Feature measured."
  }
  actualValue is Decimal(15, 6) with {
    briefly "Actual"
    described by "Measured actual value."
  }
  deviation is Decimal(15, 6) with {
    briefly "Deviation"
    described by "Deviation from nominal."
  }
  measurementStatus is MeasurementStatus with {
    briefly "Status"
    described by "Measurement status."
  }
  gageId is GageId with {
    briefly "Gage"
    described by "Gage used for measurement."
  }
  measuredBy is String(1, 200) with {
    briefly "Measured by"
    described by "Technician who performed measurement."
  }
  measuredAt is TimeStamp with {
    briefly "Measured"
    described by "Measurement timestamp."
  }
  temperature is optional Decimal(5, 2) with {
    briefly "Temperature"
    described by "Ambient temperature during measurement."
  }
  humidity is optional Decimal(5, 2) with {
    briefly "Humidity"
    described by "Ambient humidity during measurement."
  }
} with {
  briefly "Measurement record"
  described by "Recorded dimensional measurement data."
}

type GageInfo is {
  gageId is GageId with {
    briefly "Gage"
    described by "Gage identifier."
  }
  gageType is String(1, 100) with {
    briefly "Type"
    described by "Type of gage (micrometer, caliper, CMM, etc.)."
  }
  serialNumber is String(1, 50) with {
    briefly "Serial"
    described by "Gage serial number."
  }
  accuracy is Decimal(10, 6) with {
    briefly "Accuracy"
    described by "Gage accuracy specification."
  }
  calibrationDate is Date with {
    briefly "Calibration date"
    described by "Last calibration date."
  }
  calibrationDueDate is Date with {
    briefly "Calibration due"
    described by "Next calibration due date."
  }
  certificateNumber is String(1, 100) with {
    briefly "Certificate"
    described by "Calibration certificate number."
  }
  isCalibrated is Boolean with {
    briefly "Calibrated"
    described by "Whether calibration is current."
  }
} with {
  briefly "Gage information"
  described by "Measurement gage details and calibration status."
}

type CMMResult is {
  programId is String(1, 100) with {
    briefly "Program"
    described by "CMM program identifier."
  }
  programVersion is String(1, 20) with {
    briefly "Version"
    described by "CMM program version."
  }
  measurements is many Measurement with {
    briefly "Measurements"
    described by "All measurements from CMM run."
  }
  runDate is TimeStamp with {
    briefly "Run date"
    described by "CMM program execution time."
  }
  operator is String(1, 200) with {
    briefly "Operator"
    described by "CMM operator."
  }
  machineId is String(1, 100) with {
    briefly "Machine"
    described by "CMM machine identifier."
  }
  probeConfig is String(1, 200) with {
    briefly "Probe"
    described by "Probe configuration used."
  }
  passedFeatures is Natural with {
    briefly "Passed"
    described by "Number of features in tolerance."
  }
  failedFeatures is Natural with {
    briefly "Failed"
    described by "Number of features out of tolerance."
  }
} with {
  briefly "CMM result"
  described by "Coordinate measuring machine inspection result."
}

type ProcessCapability is {
  featureId is FeatureId with {
    briefly "Feature"
    described by "Feature being analyzed."
  }
  sampleSize is Natural with {
    briefly "Sample size"
    described by "Number of measurements in sample."
  }
  mean is Decimal(15, 6) with {
    briefly "Mean"
    described by "Sample mean."
  }
  standardDeviation is Decimal(15, 6) with {
    briefly "Std dev"
    described by "Sample standard deviation."
  }
  cpIndex is Decimal(6, 4) with {
    briefly "Cp"
    described by "Process capability index."
  }
  cpk is Decimal(6, 4) with {
    briefly "Cpk"
    described by "Process capability index (centered)."
  }
  ppIndex is Decimal(6, 4) with {
    briefly "Pp"
    described by "Process performance index."
  }
  ppk is Decimal(6, 4) with {
    briefly "Ppk"
    described by "Process performance index (centered)."
  }
  calculatedAt is TimeStamp with {
    briefly "Calculated"
    described by "Calculation timestamp."
  }
  isCapable is Boolean with {
    briefly "Capable"
    described by "Whether process meets capability threshold."
  }
  capabilityThreshold is Decimal(6, 4) with {
    briefly "Threshold"
    described by "Required Cpk threshold (typically 1.33 or 1.67)."
  }
} with {
  briefly "Process capability"
  described by "Statistical process capability analysis."
}

type InspectionPlanInfo is {
  partNumber is String(1, 50) with {
    briefly "Part number"
    described by "Part number."
  }
  revision is String(1, 20) with {
    briefly "Revision"
    described by "Drawing revision."
  }
  specifications is many ToleranceSpec with {
    briefly "Specifications"
    described by "Tolerance specifications to check."
  }
  samplePlan is String(1, 100) with {
    briefly "Sample plan"
    described by "Sampling plan (e.g., 100%, AQL)."
  }
  specialInstructions is optional String(1, 2000) with {
    briefly "Instructions"
    described by "Special inspection instructions."
  }
} with {
  briefly "Inspection plan"
  described by "Part inspection plan with specifications."
}

type CertificationInfo is {
  certificationNumber is String(1, 100) with {
    briefly "Certificate"
    described by "Certification number."
  }
  standard is String(1, 100) with {
    briefly "Standard"
    described by "Compliance standard (AS9100, ISO 9001, etc.)."
  }
  certifiedBy is String(1, 200) with {
    briefly "Certified by"
    described by "Person certifying."
  }
  certifiedAt is TimeStamp with {
    briefly "Certified"
    described by "Certification timestamp."
  }
  expiresAt is optional Date with {
    briefly "Expires"
    described by "Certification expiration date."
  }
  notes is optional String(1, 1000) with {
    briefly "Notes"
    described by "Certification notes."
  }
} with {
  briefly "Certification info"
  described by "Part certification details."
}

type ReworkInfo is {
  reworkId is UUID with {
    briefly "Rework"
    described by "Rework identifier."
  }
  reason is String(1, 500) with {
    briefly "Reason"
    described by "Reason for rework."
  }
  featureIds is many FeatureId with {
    briefly "Features"
    described by "Features requiring rework."
  }
  instructions is String(1, 2000) with {
    briefly "Instructions"
    described by "Rework instructions."
  }
  authorizedBy is String(1, 200) with {
    briefly "Authorized by"
    described by "Person authorizing rework."
  }
  authorizedAt is TimeStamp with {
    briefly "Authorized"
    described by "Authorization timestamp."
  }
} with {
  briefly "Rework info"
  described by "Rework authorization and instructions."
}

type ScrapInfo is {
  scrapId is UUID with {
    briefly "Scrap"
    described by "Scrap identifier."
  }
  reason is String(1, 500) with {
    briefly "Reason"
    described by "Reason for scrapping."
  }
  defectiveFeatures is many FeatureId with {
    briefly "Features"
    described by "Defective features."
  }
  authorizedBy is String(1, 200) with {
    briefly "Authorized by"
    described by "Person authorizing scrap."
  }
  authorizedAt is TimeStamp with {
    briefly "Authorized"
    described by "Authorization timestamp."
  }
  cost is optional Decimal(15, 2) with {
    briefly "Cost"
    described by "Estimated scrap cost."
  }
} with {
  briefly "Scrap info"
  described by "Scrap authorization and details."
}
