// Quality Control - Shared Types
type InspectionId is Id(QualityContext.Inspection)  with {
  briefly "Inspection identifier"
  described as {
    |Unique identifier for a quality inspection.
  }
}
type SpecificationId is UUID with {
  briefly "Specification identifier"
  described as {
    |Reference to a quality specification.
  }
}
type SampleId is UUID with {
  briefly "Sample identifier"
  described as {
    |Unique identifier for a collected sample.
  }
}
type LotId is UUID with {
  briefly "Lot identifier"
  described as {
    |Reference to a production lot or batch.
  }
}
type BatchId is UUID with {
  briefly "Batch identifier"
  described as {
    |Reference to a process batch.
  }
}
type TestMethodId is UUID with {
  briefly "Test method identifier"
  described as {
    |Reference to a standard test method.
  }
}
type InspectionResult is any of {
  Pass,
  Fail,
  ConditionalPass,
  Pending
} with {
  briefly "Inspection result status"
  described as {
    |Overall result of a quality inspection.
  }
}
type InspectionType is any of {
  Incoming,
  InProcess,
  Final,
  Periodic,
  CustomerReturn
} with {
  briefly "Inspection type"
  described as {
    |Category of quality inspection.
  }
}
type SampleStatus is any of {
  Collected,
  InTransit,
  AtLab,
  Testing,
  Tested,
  Discarded
} with {
  briefly "Sample status"
  described as {
    |Current status of a sample.
  }
}
type TestStatus is any of {
  Scheduled,
  InProgress,
  Completed,
  Cancelled,
  Invalid
} with {
  briefly "Test status"
  described as {
    |Current status of a test.
  }
}
type NCRStatus is any of {
  Open,
  UnderReview,
  DispositionPending,
  Dispositioned,
  Closed
} with {
  briefly "NCR status"
  described as {
    |Current status of non-conformance report.
  }
}
type DispositionType is any of {
  UseAsIs,
  Rework,
  Scrap,
  ReturnToVendor,
  Concession
} with {
  briefly "Disposition type"
  described as {
    |How non-conforming material will be handled.
  }
}
type InspectionPlan is {
  specificationId: SpecificationId with {
    briefly "Specification"
    described as {
      |Quality specification reference.
    }
  }
  specificationName: String(1,200) with {
    briefly "Name"
    described as {
      |Specification name.
    }
  }
  revisionNumber: String(1,20) with {
    briefly "Revision"
    described as {
      |Specification revision.
    }
  }
  inspectionType: InspectionType with {
    briefly "Type"
    described as {
      |Type of inspection.
    }
  }
  sampleSizePercent: Decimal(5,2) with {
    briefly "Sample size"
    described as {
      |Percentage of lot to sample.
    }
  }
  sampleSizeFixed: Natural? with {
    briefly "Fixed size"
    described as {
      |Fixed number of samples if applicable.
    }
  }
  testMethods: TestMethodInfo+ with {
    briefly "Tests"
    described as {
      |Required test methods.
    }
  }
  acceptanceCriteria: String(1,2000) with {
    briefly "Criteria"
    described as {
      |Overall acceptance criteria.
    }
  }
} with {
  briefly "Inspection plan"
  described as {
    |Quality inspection plan with test requirements.
  }
}
type TestMethodInfo is {
  testMethodId: TestMethodId with {
    briefly "Method"
    described as {
      |Test method identifier.
    }
  }
  testName: String(1,200) with {
    briefly "Name"
    described as {
      |Test name.
    }
  }
  parameter: String(1,100) with {
    briefly "Parameter"
    described as {
      |Parameter being measured.
    }
  }
  unitOfMeasure: String(1,30) with {
    briefly "UOM"
    described as {
      |Unit of measure.
    }
  }
  limits: SpecificationLimit with {
    briefly "Limits"
    described as {
      |Specification limits.
    }
  }
  isCritical: Boolean with {
    briefly "Critical"
    described as {
      |Whether test is critical to quality.
    }
  }
} with {
  briefly "Test method info"
  described as {
    |Details of a required test method.
  }
}
type SpecificationLimit is {
  targetValue: Decimal(15,6)? with {
    briefly "Target"
    described as {
      |Target value.
    }
  }
  lowerLimit: Decimal(15,6)? with {
    briefly "Lower"
    described as {
      |Lower specification limit.
    }
  }
  upperLimit: Decimal(15,6)? with {
    briefly "Upper"
    described as {
      |Upper specification limit.
    }
  }
  specLowerControlLimit: Decimal(15,6)? with {
    briefly "LCL"
    described as {
      |Lower control limit for SPC.
    }
  }
  specUpperControlLimit: Decimal(15,6)? with {
    briefly "UCL"
    described as {
      |Upper control limit for SPC.
    }
  }
} with {
  briefly "Specification limit"
  described as {
    |Specification and control limits for a parameter.
  }
}
type Sample is {
  sampleId: SampleId with {
    briefly "Sample"
    described as {
      |Sample identifier.
    }
  }
  sampleNumber: String(1,50) with {
    briefly "Number"
    described as {
      |Sample tracking number.
    }
  }
  lotId: LotId with {
    briefly "Lot"
    described as {
      |Source lot identifier.
    }
  }
  collectionPoint: String(1,200) with {
    briefly "Collection point"
    described as {
      |Where sample was collected.
    }
  }
  collectedBy: String(1,200) with {
    briefly "Collected by"
    described as {
      |Person who collected sample.
    }
  }
  collectedAt: TimeStamp with {
    briefly "Collected"
    described as {
      |Collection timestamp.
    }
  }
  sampleQuantity: Decimal(10,4) with {
    briefly "Quantity"
    described as {
      |Sample quantity.
    }
  }
  unitOfMeasure: String(1,30) with {
    briefly "UOM"
    described as {
      |Unit of measure.
    }
  }
  sampleStatus: SampleStatus with {
    briefly "Status"
    described as {
      |Current sample status.
    }
  }
  storageConditions: String(1,500)? with {
    briefly "Storage"
    described as {
      |Required storage conditions.
    }
  }
} with {
  briefly "Sample"
  described as {
    |Collected sample for quality testing.
  }
}
type TestResult is {
  testMethodId: TestMethodId with {
    briefly "Method"
    described as {
      |Test method identifier.
    }
  }
  sampleId: SampleId with {
    briefly "Sample"
    described as {
      |Tested sample.
    }
  }
  parameter: String(1,100) with {
    briefly "Parameter"
    described as {
      |Parameter tested.
    }
  }
  measuredValue: Decimal(15,6) with {
    briefly "Value"
    described as {
      |Measured value.
    }
  }
  unitOfMeasure: String(1,30) with {
    briefly "UOM"
    described as {
      |Unit of measure.
    }
  }
  withinSpec: Boolean with {
    briefly "In spec"
    described as {
      |Whether result is within specification.
    }
  }
  testStatus: TestStatus with {
    briefly "Status"
    described as {
      |Test status.
    }
  }
  testedBy: String(1,200) with {
    briefly "Tested by"
    described as {
      |Person who performed test.
    }
  }
  testedAt: TimeStamp with {
    briefly "Tested"
    described as {
      |Test timestamp.
    }
  }
  equipmentId: String(1,100)? with {
    briefly "Equipment"
    described as {
      |Test equipment identifier.
    }
  }
  notes: String(1,1000)? with {
    briefly "Notes"
    described as {
      |Test notes.
    }
  }
} with {
  briefly "Test result"
  described as {
    |Result of a quality test.
  }
}
type NonConformance is {
  ncrNumber: String(1,50) with {
    briefly "NCR number"
    described as {
      |Non-conformance report number.
    }
  }
  description: String(1,2000) with {
    briefly "Description"
    described as {
      |Description of non-conformance.
    }
  }
  defectCategory: String(1,100) with {
    briefly "Category"
    described as {
      |Defect category.
    }
  }
  severity: String(1,50) with {
    briefly "Severity"
    described as {
      |Severity level.
    }
  }
  affectedQuantity: Decimal(15,4) with {
    briefly "Quantity"
    described as {
      |Affected quantity.
    }
  }
  ncrStatus: NCRStatus with {
    briefly "Status"
    described as {
      |NCR status.
    }
  }
  disposition: DispositionType? with {
    briefly "Disposition"
    described as {
      |Material disposition.
    }
  }
  dispositionedBy: String(1,200)? with {
    briefly "Dispositioned by"
    described as {
      |Person who made disposition.
    }
  }
  dispositionedAt: TimeStamp? with {
    briefly "Dispositioned"
    described as {
      |Disposition timestamp.
    }
  }
  capaReference: String(1,100)? with {
    briefly "CAPA"
    described as {
      |Related CAPA reference.
    }
  }
} with {
  briefly "Non-conformance"
  described as {
    |Quality non-conformance details.
  }
}
type LotInfo is {
  lotId: LotId with {
    briefly "Lot"
    described as {
      |Lot identifier.
    }
  }
  lotNumber: String(1,50) with {
    briefly "Lot number"
    described as {
      |Lot tracking number.
    }
  }
  lotBatchId: BatchId? with {
    briefly "Batch"
    described as {
      |Related batch identifier.
    }
  }
  productCode: String(1,50) with {
    briefly "Product"
    described as {
      |Product code.
    }
  }
  productName: String(1,200) with {
    briefly "Name"
    described as {
      |Product name.
    }
  }
  quantity: Decimal(15,4) with {
    briefly "Quantity"
    described as {
      |Lot quantity.
    }
  }
  unitOfMeasure: String(1,30) with {
    briefly "UOM"
    described as {
      |Unit of measure.
    }
  }
  manufacturingDate: Date with {
    briefly "Manufactured"
    described as {
      |Manufacturing date.
    }
  }
  expirationDate: Date? with {
    briefly "Expiration"
    described as {
      |Expiration date if applicable.
    }
  }
} with {
  briefly "Lot information"
  described as {
    |Production lot details.
  }
}
type InspectionSummary is {
  totalTests: Natural with {
    briefly "Total tests"
    described as {
      |Number of tests performed.
    }
  }
  passedTests: Natural with {
    briefly "Passed"
    described as {
      |Tests that passed.
    }
  }
  failedTests: Natural with {
    briefly "Failed"
    described as {
      |Tests that failed.
    }
  }
  criticalFailures: Natural with {
    briefly "Critical"
    described as {
      |Critical test failures.
    }
  }
  overallResult: InspectionResult with {
    briefly "Result"
    described as {
      |Overall inspection result.
    }
  }
} with {
  briefly "Inspection summary"
  described as {
    |Summary of inspection results.
  }
}
