// Batch Processing - Shared Types
type BatchId is Id(BatchContext.Batch)  with {
  briefly "Batch identifier"
  described as {
    |Unique identifier for a production batch.
  }
}
type RecipeId is UUID with {
  briefly "Recipe identifier"
  described as {
    |Reference to a batch recipe.
  }
}
type IngredientId is UUID with {
  briefly "Ingredient identifier"
  described as {
    |Reference to a raw material ingredient.
  }
}
type VesselId is UUID with {
  briefly "Vessel identifier"
  described as {
    |Reference to a processing vessel or reactor.
  }
}
type LotId is UUID with {
  briefly "Lot identifier"
  described as {
    |Reference to a raw material lot.
  }
}
type PhaseId is UUID with {
  briefly "Phase identifier"
  described as {
    |Reference to a recipe phase.
  }
}
type BatchStatus is any of {
  Scheduled,
  Charging,
  Processing,
  Holding,
  Discharging,
  Completed,
  FailedState
} with {
  briefly "Batch status"
  described as {
    |Current status of the production batch.
  }
}
type HoldReason is any of {
  QualityHold,
  EquipmentIssue,
  MaterialShortage,
  OperatorDecision,
  SafetyHold,
  RegulatoryHold
} with {
  briefly "Hold reason"
  described as {
    |Reason for placing batch on hold.
  }
}
type ParameterType is any of {
  Temperature,
  Pressure,
  FlowRate,
  Level,
  PHLevel,
  Viscosity,
  Density,
  Agitation,
  Duration,
  Weight,
  Volume,
  Concentration
} with {
  briefly "Parameter type"
  described as {
    |Type of process parameter being measured.
  }
}
type Recipe is {
  recipeId: RecipeId with {
    briefly "Recipe ID"
    described as {
      |Recipe identifier.
    }
  }
  recipeName: String(1,200) with {
    briefly "Name"
    described as {
      |Recipe name.
    }
  }
  recipeVersion: String(1,20) with {
    briefly "Version"
    described as {
      |Recipe version number.
    }
  }
  productCode: String(1,50) with {
    briefly "Product code"
    described as {
      |Product being manufactured.
    }
  }
  productName: String(1,200) with {
    briefly "Product name"
    described as {
      |Name of product.
    }
  }
  targetYield: Decimal(15,4) with {
    briefly "Target yield"
    described as {
      |Expected output quantity.
    }
  }
  unitOfMeasure: String(1,20) with {
    briefly "UOM"
    described as {
      |Unit of measure for yield.
    }
  }
  effectiveDate: Date with {
    briefly "Effective date"
    described as {
      |Date recipe became effective.
    }
  }
  expirationDate: Date? with {
    briefly "Expiration date"
    described as {
      |Date recipe expires.
    }
  }
} with {
  briefly "Recipe definition"
  described as {
    |Master recipe for batch production.
  }
}
type BatchIngredient is {
  ingredientId: IngredientId with {
    briefly "Ingredient ID"
    described as {
      |Ingredient identifier.
    }
  }
  ingredientCode: String(1,50) with {
    briefly "Code"
    described as {
      |Ingredient material code.
    }
  }
  ingredientName: String(1,200) with {
    briefly "Name"
    described as {
      |Ingredient name.
    }
  }
  targetQuantity: Decimal(15,4) with {
    briefly "Target quantity"
    described as {
      |Required quantity per recipe.
    }
  }
  actualQuantity: Decimal(15,4) with {
    briefly "Actual quantity"
    described as {
      |Quantity actually charged.
    }
  }
  unitOfMeasure: String(1,20) with {
    briefly "UOM"
    described as {
      |Unit of measure.
    }
  }
  ingredientLotId: LotId? with {
    briefly "Lot ID"
    described as {
      |Raw material lot used.
    }
  }
  ingredientLotNumber: String(1,50)? with {
    briefly "Lot number"
    described as {
      |Raw material lot number.
    }
  }
  chargeSequence: Natural with {
    briefly "Sequence"
    described as {
      |Order of ingredient addition.
    }
  }
  ingredientChargedAt: TimeStamp? with {
    briefly "Charged at"
    described as {
      |Time ingredient was charged.
    }
  }
  chargedBy: String(1,200)? with {
    briefly "Charged by"
    described as {
      |Operator who charged ingredient.
    }
  }
} with {
  briefly "Batch ingredient"
  described as {
    |Ingredient charged to the batch.
  }
}
type ProcessParameter is {
  parameterId: UUID with {
    briefly "Parameter ID"
    described as {
      |Parameter record identifier.
    }
  }
  parameterType: ParameterType with {
    briefly "Type"
    described as {
      |Type of parameter.
    }
  }
  parameterName: String(1,100) with {
    briefly "Name"
    described as {
      |Parameter name.
    }
  }
  targetValue: Decimal(15,4) with {
    briefly "Target"
    described as {
      |Target setpoint value.
    }
  }
  actualValue: Decimal(15,4) with {
    briefly "Actual"
    described as {
      |Actual measured value.
    }
  }
  lowLimit: Decimal(15,4) with {
    briefly "Low limit"
    described as {
      |Lower specification limit.
    }
  }
  highLimit: Decimal(15,4) with {
    briefly "High limit"
    described as {
      |Upper specification limit.
    }
  }
  unitOfMeasure: String(1,20) with {
    briefly "UOM"
    described as {
      |Unit of measure.
    }
  }
  recordedAt: TimeStamp with {
    briefly "Recorded at"
    described as {
      |Time parameter was recorded.
    }
  }
  recordedBy: String(1,200) with {
    briefly "Recorded by"
    described as {
      |Person or system recording.
    }
  }
  parameterPhaseId: PhaseId? with {
    briefly "Phase"
    described as {
      |Recipe phase for this parameter.
    }
  }
  inSpec: Boolean with {
    briefly "In spec"
    described as {
      |Whether value is within limits.
    }
  }
} with {
  briefly "Process parameter"
  described as {
    |Recorded process parameter value.
  }
}
type BatchGenealogy is {
  batchId: BatchId with {
    briefly "Batch ID"
    described as {
      |This batch identifier.
    }
  }
  parentBatches: BatchId* with {
    briefly "Parent batches"
    described as {
      |Source batches if this is a blend.
    }
  }
  childBatches: BatchId* with {
    briefly "Child batches"
    described as {
      |Batches derived from this batch.
    }
  }
  rawMaterialLots: LotId+ with {
    briefly "Raw material lots"
    described as {
      |All raw material lots used.
    }
  }
  reworkBatchId: BatchId? with {
    briefly "Rework batch"
    described as {
      |Original batch if this is rework.
    }
  }
} with {
  briefly "Batch genealogy"
  described as {
    |Batch traceability and lineage information.
  }
}
type VesselInfo is {
  vesselId: VesselId with {
    briefly "Vessel ID"
    described as {
      |Vessel identifier.
    }
  }
  vesselName: String(1,100) with {
    briefly "Name"
    described as {
      |Vessel name or tag.
    }
  }
  vesselType: String(1,50) with {
    briefly "Type"
    described as {
      |Type of vessel (reactor, tank, etc.).
    }
  }
  capacity: Decimal(15,4) with {
    briefly "Capacity"
    described as {
      |Vessel working capacity.
    }
  }
  capacityUOM: String(1,20) with {
    briefly "Capacity UOM"
    described as {
      |Unit of measure for capacity.
    }
  }
} with {
  briefly "Vessel information"
  described as {
    |Processing vessel details.
  }
}
type RecipePhase is {
  phaseId: PhaseId with {
    briefly "Phase ID"
    described as {
      |Phase identifier.
    }
  }
  phaseName: String(1,100) with {
    briefly "Name"
    described as {
      |Phase name.
    }
  }
  phaseSequence: Natural with {
    briefly "Sequence"
    described as {
      |Phase execution order.
    }
  }
  targetDuration: Natural with {
    briefly "Duration"
    described as {
      |Target duration in minutes.
    }
  }
  actualDuration: Natural? with {
    briefly "Actual duration"
    described as {
      |Actual duration in minutes.
    }
  }
  phaseStartedAt: TimeStamp? with {
    briefly "Started"
    described as {
      |Phase start time.
    }
  }
  phaseCompletedAt: TimeStamp? with {
    briefly "Completed"
    described as {
      |Phase completion time.
    }
  }
  phaseStatus: String(1,20) with {
    briefly "Status"
    described as {
      |Phase status.
    }
  }
} with {
  briefly "Recipe phase"
  described as {
    |Phase within batch recipe execution.
  }
}
type BatchScheduleInfo is {
  plannedStart: TimeStamp with {
    briefly "Planned start"
    described as {
      |Scheduled start time.
    }
  }
  plannedEnd: TimeStamp with {
    briefly "Planned end"
    described as {
      |Scheduled end time.
    }
  }
  actualStart: TimeStamp? with {
    briefly "Actual start"
    described as {
      |Actual start time.
    }
  }
  actualEnd: TimeStamp? with {
    briefly "Actual end"
    described as {
      |Actual end time.
    }
  }
} with {
  briefly "Batch schedule"
  described as {
    |Batch timing information.
  }
}
type BatchYieldInfo is {
  targetYield: Decimal(15,4) with {
    briefly "Target yield"
    described as {
      |Expected output quantity.
    }
  }
  actualYield: Decimal(15,4) with {
    briefly "Actual yield"
    described as {
      |Actual output quantity.
    }
  }
  yieldPercent: Decimal(5,2) with {
    briefly "Yield percent"
    described as {
      |Yield as percentage of target.
    }
  }
  wasteQuantity: Decimal(15,4) with {
    briefly "Waste"
    described as {
      |Waste or loss quantity.
    }
  }
  unitOfMeasure: String(1,20) with {
    briefly "UOM"
    described as {
      |Unit of measure.
    }
  }
} with {
  briefly "Batch yield"
  described as {
    |Batch output quantity information.
  }
}
type BatchHoldInfo is {
  holdReason: HoldReason with {
    briefly "Reason"
    described as {
      |Reason for hold.
    }
  }
  holdDescription: String(1,500) with {
    briefly "Description"
    described as {
      |Detailed hold description.
    }
  }
  heldBy: String(1,200) with {
    briefly "Held by"
    described as {
      |Person placing hold.
    }
  }
  heldAt: TimeStamp with {
    briefly "Held at"
    described as {
      |Time hold was placed.
    }
  }
  holdReleasedBy: String(1,200)? with {
    briefly "Released by"
    described as {
      |Person releasing hold.
    }
  }
  holdReleasedAt: TimeStamp? with {
    briefly "Released at"
    described as {
      |Time hold was released.
    }
  }
  releaseNotes: String(1,1000)? with {
    briefly "Release notes"
    described as {
      |Notes on hold release.
    }
  }
} with {
  briefly "Batch hold"
  described as {
    |Batch hold information.
  }
}
type DischargeInfo is {
  destinationType: String(1,50) with {
    briefly "Destination type"
    described as {
      |Type of destination (tank, container, etc.).
    }
  }
  destinationId: String(1,100) with {
    briefly "Destination ID"
    described as {
      |Identifier of destination.
    }
  }
  quantity: Decimal(15,4) with {
    briefly "Quantity"
    described as {
      |Quantity discharged.
    }
  }
  unitOfMeasure: String(1,20) with {
    briefly "UOM"
    described as {
      |Unit of measure.
    }
  }
  dischargedAt: TimeStamp with {
    briefly "Discharged at"
    described as {
      |Time of discharge.
    }
  }
  dischargedBy: String(1,200) with {
    briefly "Discharged by"
    described as {
      |Person performing discharge.
    }
  }
} with {
  briefly "Discharge information"
  described as {
    |Batch discharge details.
  }
}
type CompletionInfo is {
  completedBy: String(1,200) with {
    briefly "Completed by"
    described as {
      |Person completing batch.
    }
  }
  completedAt: TimeStamp with {
    briefly "Completed at"
    described as {
      |Completion time.
    }
  }
  yieldInfo: BatchYieldInfo with {
    briefly "Yield"
    described as {
      |Final yield information.
    }
  }
  qualityStatus: String(1,50) with {
    briefly "Quality status"
    described as {
      |Quality disposition status.
    }
  }
  notes: String(1,1000)? with {
    briefly "Notes"
    described as {
      |Completion notes.
    }
  }
} with {
  briefly "Completion information"
  described as {
    |Batch completion details.
  }
}
type RejectionInfo is {
  rejectedBy: String(1,200) with {
    briefly "Rejected by"
    described as {
      |Person rejecting batch.
    }
  }
  rejectedAt: TimeStamp with {
    briefly "Rejected at"
    described as {
      |Rejection time.
    }
  }
  rejectionReason: String(1,500) with {
    briefly "Reason"
    described as {
      |Reason for rejection.
    }
  }
  dispositionCode: String(1,50) with {
    briefly "Disposition"
    described as {
      |Disposition code.
    }
  }
  reworkable: Boolean with {
    briefly "Reworkable"
    described as {
      |Whether batch can be reworked.
    }
  }
} with {
  briefly "Rejection information"
  described as {
    |Batch rejection details.
  }
}
