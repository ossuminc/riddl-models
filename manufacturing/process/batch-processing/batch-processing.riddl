// Batch Processing Domain Model
// Process manufacturing batch production and recipe execution
domain BatchProcessing is {
  author OssumInc is {
    name = "Ossum Inc."
    email = "support@ossuminc.com"
  } with {
    briefly "Domain author"
    described as {
      |Organization maintaining this domain model.
    }
  }
  user BatchOperator is "person executing batch operations on the plant floor" with {
    briefly "Batch Operator"
    described as {
      |Person operating equipment and executing batch recipes.
    }
  }
  user ProcessEngineer is "person designing and optimizing batch processes" with {
    briefly "Process Engineer"
    described as {
      |Person responsible for recipe development and process optimization.
    }
  }
  user QualityLab is "laboratory personnel performing batch testing" with {
    briefly "Quality Laboratory"
    described as {
      |Personnel performing in-process and final quality testing.
    }
  }
  epic BatchManufacturingEpic is {
    user BatchOperator wants to "to execute batch production according to recipes" so that "products are manufactured consistently and safely"
    case ExecuteBatch is {
      user BatchOperator wants to "to complete a batch production run" so that "product is manufactured according to specifications"
      step is "Operator reviews" "batch recipe and instructions" "before starting" with {
        briefly "Review recipe"
        described as {
          |Check batch recipe and parameters.
        }
      }
      step is "Operator verifies" "vessel cleanliness and availability" "for production" with {
        briefly "Verify vessel"
        described as {
          |Confirm vessel is ready.
        }
      }
      step send command BatchContext.Batch.CreateBatch from user BatchOperator to entity BatchContext.Batch with {
        briefly "Create batch"
        described as {
          |Initialize new batch record.
        }
      }
      step is "Operator charges" "ingredients per recipe sequence" "into vessel" with {
        briefly "Charge ingredients"
        described as {
          |Add raw materials to vessel.
        }
      }
      step send command BatchContext.Batch.StartProcessing from user BatchOperator to entity BatchContext.Batch with {
        briefly "Start processing"
        described as {
          |Begin batch reaction/mixing.
        }
      }
      step is "System monitors" "process parameters" "during production" with {
        briefly "Monitor process"
        described as {
          |Track temperature, pressure, etc.
        }
      }
      step send command BatchContext.Batch.DischargeBatch from user BatchOperator to entity BatchContext.Batch with {
        briefly "Discharge batch"
        described as {
          |Transfer product from vessel.
        }
      }
    } with {
      briefly "Batch execution workflow"
      described as {
        |Executing a complete batch production cycle.
      }
    }
    case QualityTesting is {
      user QualityLab wants to "to test batch samples during and after production" so that "product quality is verified before release"
      step is "Lab receives" "batch sample" "for testing" with {
        briefly "Receive sample"
        described as {
          |Obtain sample from batch.
        }
      }
      step is "Lab performs" "required analytical tests" "per specification" with {
        briefly "Perform tests"
        described as {
          |Execute quality tests.
        }
      }
      step send command BatchContext.Batch.RecordParameter from user QualityLab to entity BatchContext.Batch with {
        briefly "Record results"
        described as {
          |Document test results on batch.
        }
      }
    } with {
      briefly "Quality testing workflow"
      described as {
        |In-process and final quality testing of batches.
      }
    }
  } with {
    briefly "Batch manufacturing operations"
    described as {
      | Epic covering batch production from recipe execution
      | through ingredient charging, processing, and discharge.
    }
  }
  include "BatchContext.riddl"
  include "external-contexts.riddl"
} with {
  briefly "Batch processing domain"
  described as {
    | The BatchProcessing domain handles process manufacturing
    | batch operations including recipe execution, ingredient
    | charging, reaction monitoring, and product discharge.
  }
}
