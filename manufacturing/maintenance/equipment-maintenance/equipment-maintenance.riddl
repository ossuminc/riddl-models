// Equipment Maintenance Domain
// Preventive, corrective, predictive, and emergency maintenance management
//
// This domain model tracks maintenance orders for manufacturing equipment
// from work order creation through completion, including spare parts usage,
// downtime recording, and maintenance metrics (MTBF, MTTR).

domain EquipmentMaintenance is {

  author OssumInc is {
    name is "Ossum Inc."
    email is "support@ossuminc.com"
    organization is "Ossum Inc."
    url is https://ossum.tech/
  } with {
    briefly "Model author and maintainer"
    described by {
      | Ossum Inc. is the organization responsible for creating and
      | maintaining this domain model specification.
    }
  }

  // Users who interact with this domain
  user MaintenanceTechnician is "A technician who performs maintenance tasks" with {
    briefly "Skilled worker executing maintenance work"
    described by {
      | A maintenance technician is a skilled worker who performs preventive,
      | corrective, and emergency maintenance tasks on manufacturing equipment.
      | They document work performed, record spare parts usage, and report
      | equipment status.
    }
  }

  user MaintenancePlanner is "A planner who schedules maintenance activities" with {
    briefly "Scheduler coordinating maintenance work"
    described by {
      | A maintenance planner creates maintenance schedules, assigns work
      | orders to technicians, ensures spare parts availability, and
      | coordinates maintenance windows with production schedules.
    }
  }

  user ReliabilityEngineer is "An engineer analyzing equipment reliability" with {
    briefly "Engineer optimizing equipment performance"
    described by {
      | A reliability engineer analyzes equipment failure patterns, calculates
      | reliability metrics (MTBF, MTTR), identifies root causes of failures,
      | and recommends improvements to maintenance programs.
    }
  }

  // Include the main bounded context
  include "MaintenanceContext.riddl"

  // Include external system contexts
  include "external-contexts.riddl"

  // Epic for preventive maintenance
  epic PreventiveMaintenanceEpic is {
    user MaintenancePlanner wants to "schedule preventive maintenance"
      so that "equipment failures are prevented before they occur"

    case SchedulingPreventiveMaintenance is {
      user MaintenancePlanner wants to "create a preventive maintenance order"
        so that "equipment is serviced on a regular schedule"

      step is "Planner reviews maintenance schedule" "and identifies due equipment" "for service"
      step is "Planner verifies spare parts availability" "in inventory system" "for maintenance"
      step is "Planner checks production schedule" "for maintenance window" "to minimize impact"
      step send command CreateMaintenanceOrder from user MaintenancePlanner to entity MaintenanceOrder
      step is "System assigns technician" "based on skills and availability" "for work"
      step is "Technician performs maintenance" "following procedures" "per checklist"
      step send command CompleteMaintenance from user MaintenanceTechnician to entity MaintenanceOrder
    } with {
      briefly "Planner schedules preventive maintenance"
      described by {
        | The maintenance planner reviews the PM schedule, identifies equipment
        | due for service, verifies parts availability, coordinates with
        | production, and creates a work order for execution.
      }
    }
  } with {
    briefly "Preventive maintenance scheduling journey"
    described by {
      | This epic describes the complete workflow for scheduling and
      | executing preventive maintenance to keep equipment running
      | reliably and prevent unplanned downtime.
    }
  }

  // Epic for corrective maintenance
  epic CorrectiveMaintenanceEpic is {
    user MaintenanceTechnician wants to "respond to equipment breakdown"
      so that "production can resume as quickly as possible"

    case RespondingToBreakdown is {
      user MaintenanceTechnician wants to "repair failed equipment"
        so that "the production line can resume operation"

      step is "Operator reports equipment failure" "to maintenance dispatch" "for response"
      step send command CreateMaintenanceOrder from user MaintenancePlanner to entity MaintenanceOrder
      step send command AssignTechnician from user MaintenancePlanner to entity MaintenanceOrder
      step send command StartMaintenance from user MaintenanceTechnician to entity MaintenanceOrder
      step is "Technician diagnoses failure" "and identifies root cause" "for repair"
      step send command RecordSpareUsage from user MaintenanceTechnician to entity MaintenanceOrder
      step send command CompleteMaintenance from user MaintenanceTechnician to entity MaintenanceOrder
      step is "System records downtime" "and updates metrics" "for analysis"
    } with {
      briefly "Technician responds to equipment breakdown"
      described by {
        | When equipment fails, a corrective maintenance order is created,
        | a technician is dispatched, the failure is diagnosed and repaired,
        | parts usage is recorded, and downtime is tracked.
      }
    }
  } with {
    briefly "Corrective maintenance response journey"
    described by {
      | This epic describes the workflow for responding to unplanned
      | equipment failures and restoring production as quickly as
      | possible while capturing failure data for analysis.
    }
  }

  // Epic for reliability analysis
  epic ReliabilityAnalysisEpic is {
    user ReliabilityEngineer wants to "analyze equipment reliability"
      so that "maintenance programs can be optimized"

    case AnalyzingEquipmentReliability is {
      user ReliabilityEngineer wants to "review maintenance metrics"
        so that "improvement opportunities can be identified"

      step is "Engineer queries maintenance history" "from repository" "for analysis"
      step is "Engineer reviews MTBF and MTTR" "metrics by equipment" "for trends"
      step is "Engineer identifies chronic failures" "and root causes" "for improvement"
      step is "Engineer recommends program changes" "to maintenance planner" "for action"
    } with {
      briefly "Engineer analyzes reliability metrics"
      described by {
        | The reliability engineer reviews maintenance history, analyzes
        | MTBF and MTTR metrics, identifies problem equipment, and
        | recommends improvements to the maintenance program.
      }
    }
  } with {
    briefly "Reliability analysis user journey"
    described by {
      | This epic describes how reliability engineers analyze maintenance
      | data to identify opportunities for improving equipment reliability
      | and optimizing maintenance programs.
    }
  }

} with {
  briefly "Equipment maintenance management domain"
  described by {
    | The EquipmentMaintenance domain handles the complete maintenance
    | lifecycle for manufacturing equipment. It manages preventive,
    | corrective, predictive, and emergency maintenance activities.
    |
    | Key capabilities:
    | - Maintenance order creation and tracking
    | - Technician assignment and scheduling
    | - Spare parts usage recording
    | - Equipment downtime tracking
    | - Reliability metrics (MTBF, MTTR, availability)
    |
    | This domain integrates with external systems for equipment master
    | data, spare parts inventory, and production scheduling.
  }
}
