// Equipment Maintenance - Shared Types
// These types are used across the Equipment Maintenance context

type MaintenanceOrderId is Id(MaintenanceOrder) with {
  briefly "Unique identifier for a MaintenanceOrder"
  described by {
    | A type-safe identifier that uniquely references a MaintenanceOrder
    | entity within the Equipment Maintenance bounded context.
  }
}

type EquipmentId is UUID with {
  briefly "Reference to equipment in the Equipment Registry"
  described by {
    | A UUID referencing an equipment asset in the external Equipment
    | Registry context. Links maintenance orders to equipment master data.
  }
}

type TaskId is UUID with {
  briefly "Unique identifier for a maintenance task"
  described by {
    | A UUID that uniquely identifies a specific task within a maintenance
    | order. Used to track individual work items and their completion status.
  }
}

type SparePartId is UUID with {
  briefly "Reference to a spare part in inventory"
  described by {
    | A UUID referencing a spare part in the external Spare Parts Inventory
    | context. Used to track parts consumed during maintenance activities.
  }
}

type TechnicianId is UUID with {
  briefly "Reference to a maintenance technician"
  described by {
    | A UUID identifying a maintenance technician who can be assigned to
    | perform maintenance work. Links to HR or workforce management systems.
  }
}

type MaintenanceType is any of {
  Preventive with {
    briefly "Scheduled preventive maintenance"
    described by {
      | Maintenance performed on a regular schedule to prevent equipment
      | failures. Includes inspections, lubrication, calibration, and
      | component replacement at predetermined intervals.
    }
  },
  Corrective with {
    briefly "Repair after failure"
    described by {
      | Maintenance performed to restore equipment to working condition
      | after a failure has occurred. May include diagnosis, repair,
      | and testing to verify restoration.
    }
  },
  Predictive with {
    briefly "Condition-based maintenance"
    described by {
      | Maintenance scheduled based on equipment condition monitoring
      | such as vibration analysis, thermal imaging, or oil analysis.
      | Performed before failure is predicted to occur.
    }
  },
  Emergency with {
    briefly "Urgent unplanned repair"
    described by {
      | High-priority maintenance required due to critical equipment
      | failure affecting safety or production. Takes precedence over
      | other scheduled maintenance activities.
    }
  }
} with {
  briefly "Classification of maintenance work"
  described by {
    | Enumeration of maintenance types that determines scheduling priority,
    | resource allocation, and how the work is tracked in metrics.
  }
}

type MaintenancePriority is any of {
  Critical with {
    briefly "Highest priority"
    described by {
      | Critical maintenance affecting safety or critical production.
      | Must be addressed immediately with all available resources.
    }
  },
  High with {
    briefly "High priority"
    described by {
      | Significant impact on production or equipment health.
      | Should be addressed within 4 hours during working hours.
    }
  },
  Medium with {
    briefly "Medium priority"
    described by {
      | Moderate impact that should be addressed in a timely manner.
      | Target completion within 24 hours.
    }
  },
  Low with {
    briefly "Low priority"
    described by {
      | Minor issues that can be scheduled during normal planning.
      | May be combined with other work for efficiency.
    }
  }
} with {
  briefly "Priority level for maintenance work"
  described by {
    | Enumeration of priority levels that determines response time
    | requirements and resource allocation for maintenance orders.
  }
}

type MaintenanceOrderRecord is {
  orderId is MaintenanceOrderId with {
    briefly "Order identifier"
    described by {
      | Unique identifier for this maintenance order within the system.
    }
  }
  equipmentId is EquipmentId with {
    briefly "Equipment reference"
    described by {
      | Reference to the equipment requiring maintenance.
    }
  }
  equipmentName is String(1, 200) with {
    briefly "Equipment name"
    described by {
      | Human-readable name of the equipment captured at order creation.
      | Preserved even if equipment master data changes later.
    }
  }
  maintenanceType is MaintenanceType with {
    briefly "Type of maintenance"
    described by {
      | Classification of the maintenance work being performed.
    }
  }
  priority is MaintenancePriority with {
    briefly "Work priority"
    described by {
      | Priority level determining response time requirements.
    }
  }
  description is String(1, 2000) with {
    briefly "Work description"
    described by {
      | Detailed description of the maintenance work to be performed,
      | including symptoms, required actions, and safety considerations.
    }
  }
  scheduledDate is Date with {
    briefly "Scheduled date"
    described by {
      | The date when maintenance is planned to be performed.
    }
  }
  estimatedDuration is Duration with {
    briefly "Estimated duration"
    described by {
      | Expected time to complete the maintenance work.
    }
  }
} with {
  briefly "Core maintenance order information"
  described by {
    | Record containing the essential information for a maintenance order
    | including equipment reference, type, priority, and scheduling.
  }
}

type MaintenanceTask is {
  taskId is TaskId with {
    briefly "Task identifier"
    described by {
      | Unique identifier for this task within the maintenance order.
    }
  }
  sequence is Natural with {
    briefly "Task sequence"
    described by {
      | Order in which tasks should be performed within the work order.
    }
  }
  description is String(1, 1000) with {
    briefly "Task description"
    described by {
      | Description of the specific work to be performed for this task.
    }
  }
  estimatedMinutes is Natural with {
    briefly "Estimated time"
    described by {
      | Estimated time in minutes to complete this task.
    }
  }
  requiresLockout is Boolean with {
    briefly "Lockout required"
    described by {
      | Whether this task requires lockout/tagout procedures for safety.
    }
  }
  completed is Boolean with {
    briefly "Completion status"
    described by {
      | Whether this task has been completed by the technician.
    }
  }
  taskCompletedAt is optional TimeStamp with {
    briefly "Completion timestamp"
    described by {
      | When this task was marked as completed.
    }
  }
  notes is optional String(1, 2000) with {
    briefly "Technician notes"
    described by {
      | Notes recorded by the technician during or after task completion.
    }
  }
} with {
  briefly "Individual task within a maintenance order"
  described by {
    | Represents a single work item within a maintenance order, tracking
    | the specific action to be performed and its completion status.
  }
}

type SparePartUsage is {
  sparePartId is SparePartId with {
    briefly "Part identifier"
    described by {
      | Reference to the spare part consumed from inventory.
    }
  }
  partNumber is String(1, 50) with {
    briefly "Part number"
    described by {
      | Manufacturer or internal part number for identification.
    }
  }
  partName is String(1, 200) with {
    briefly "Part name"
    described by {
      | Human-readable name of the spare part.
    }
  }
  quantity is Natural with {
    briefly "Quantity used"
    described by {
      | Number of units of this part consumed during maintenance.
    }
  }
  unitCost is Decimal(10, 2) with {
    briefly "Unit cost"
    described by {
      | Cost per unit of the spare part at time of usage.
    }
  }
  usedAt is TimeStamp with {
    briefly "Usage timestamp"
    described by {
      | When the part was recorded as used on the maintenance order.
    }
  }
} with {
  briefly "Spare part consumption record"
  described by {
    | Records a spare part consumed during maintenance work, including
    | quantity and cost for tracking and inventory management.
  }
}

type DowntimeRecord is {
  equipmentId is EquipmentId with {
    briefly "Equipment identifier"
    described by {
      | Reference to the equipment that was unavailable.
    }
  }
  orderId is MaintenanceOrderId with {
    briefly "Related maintenance order"
    described by {
      | Reference to the maintenance order associated with this downtime.
    }
  }
  recordedDowntimeStart is TimeStamp with {
    briefly "Downtime start"
    described by {
      | When the equipment became unavailable for production.
    }
  }
  downtimeEnd is optional TimeStamp with {
    briefly "Downtime end"
    described by {
      | When the equipment was returned to service. Null if still down.
    }
  }
  downtimeMinutes is optional Natural with {
    briefly "Total downtime"
    described by {
      | Total minutes of downtime calculated when equipment returns to service.
    }
  }
  isPlanned is Boolean with {
    briefly "Planned downtime"
    described by {
      | Whether this downtime was scheduled or unplanned.
    }
  }
  downtimeCategory is String(1, 50) with {
    briefly "Downtime category"
    described by {
      | Classification of downtime cause (e.g., mechanical, electrical,
      | process, operator error).
    }
  }
} with {
  briefly "Equipment downtime tracking record"
  described by {
    | Records periods when equipment is unavailable for production,
    | tracking duration and cause for reliability analysis.
  }
}

type LaborRecord is {
  technicianId is TechnicianId with {
    briefly "Technician identifier"
    described by {
      | Reference to the technician who performed the work.
    }
  }
  technicianName is String(1, 100) with {
    briefly "Technician name"
    described by {
      | Name of the technician for display and reporting.
    }
  }
  startTime is TimeStamp with {
    briefly "Work start time"
    described by {
      | When the technician started working on the order.
    }
  }
  endTime is optional TimeStamp with {
    briefly "Work end time"
    described by {
      | When the technician completed or paused work. Null if still working.
    }
  }
  laborMinutes is optional Natural with {
    briefly "Labor minutes"
    described by {
      | Total minutes of labor calculated when work ends.
    }
  }
  hourlyRate is Decimal(8, 2) with {
    briefly "Hourly rate"
    described by {
      | Labor cost rate per hour for this technician.
    }
  }
} with {
  briefly "Labor time tracking record"
  described by {
    | Records labor time spent on a maintenance order for cost tracking
    | and productivity analysis.
  }
}
