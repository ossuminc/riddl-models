// Asset Lifecycle Management - External Contexts

// Financial System for fixed asset accounting
context FinancialSystem is {

  command CreateFixedAssetRecord is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    assetTag is String(1, 50) with { briefly "Asset tag" described by "Asset tag number." }
    capitalizedCost is Decimal(15, 2) with { briefly "Cost" described by "Capitalized cost." }
    accountCode is String(1, 50) with { briefly "Account" described by "GL account code." }
  } with {
    briefly "Create fixed asset record"
    described by "Creates a fixed asset record in the financial system."
  }

  event FixedAssetRecordCreated is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    fixedAssetNumber is String(1, 50) with { briefly "FA number" described by "Fixed asset number." }
    createdAt is TimeStamp with { briefly "Created" described by "Creation time." }
  } with {
    briefly "Fixed asset record created"
    described by "Emitted when fixed asset record is created."
  }

  command RecordDepreciation is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    depreciationAmount is Decimal(15, 2) with { briefly "Amount" described by "Depreciation amount." }
    periodEndDate is Date with { briefly "Period end" described by "Accounting period end." }
  } with {
    briefly "Record depreciation"
    described by "Records depreciation journal entry."
  }

  event DepreciationRecorded is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    journalEntryId is String(1, 50) with { briefly "Journal entry" described by "Journal entry ID." }
    recordedAt is TimeStamp with { briefly "Recorded" described by "Record time." }
  } with {
    briefly "Depreciation recorded"
    described by "Emitted when depreciation is journalized."
  }

  command RecordDisposalEntry is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    disposalValue is Decimal(15, 2) with { briefly "Value" described by "Disposal value." }
    gainOrLoss is Decimal(15, 2) with { briefly "Gain/Loss" described by "Gain or loss amount." }
    disposalDate is Date with { briefly "Date" described by "Disposal date." }
  } with {
    briefly "Record disposal entry"
    described by "Records disposal journal entry."
  }

  event DisposalEntryRecorded is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    journalEntryId is String(1, 50) with { briefly "Journal entry" described by "Journal entry ID." }
    recordedAt is TimeStamp with { briefly "Recorded" described by "Record time." }
  } with {
    briefly "Disposal entry recorded"
    described by "Emitted when disposal is journalized."
  }

  query GetAssetFinancials is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
  } with {
    briefly "Get asset financials"
    described by "Retrieves financial data for an asset."
  }

  result AssetFinancials is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    fixedAssetNumber is String(1, 50) with { briefly "FA number" described by "Fixed asset number." }
    currentBookValue is Decimal(15, 2) with { briefly "Book value" described by "Current book value." }
    accumulatedDepreciation is Decimal(15, 2) with { briefly "Depreciation" described by "Accumulated depreciation." }
    lastDepreciationDate is Date with { briefly "Last depreciation" described by "Last depreciation date." }
  } with {
    briefly "Asset financials"
    described by "Financial information for an asset."
  }

} with {
  option is external
  briefly "External financial system"
  described by "External fixed asset accounting and general ledger system."
}

// Procurement Service for purchase orders
context ProcurementService is {

  query GetPurchaseOrder is {
    purchaseOrderId is String(1, 50) with { briefly "PO" described by "Purchase order ID." }
  } with {
    briefly "Get purchase order"
    described by "Retrieves purchase order details."
  }

  result PurchaseOrderDetails is {
    purchaseOrderId is String(1, 50) with { briefly "PO" described by "Purchase order ID." }
    vendorId is VendorId with { briefly "Vendor" described by "Vendor ID." }
    vendorName is String(1, 200) with { briefly "Vendor name" described by "Vendor name." }
    orderDate is Date with { briefly "Order date" described by "Order date." }
    totalAmount is Decimal(15, 2) with { briefly "Amount" described by "Total order amount." }
    orderStatus is String(1, 50) with { briefly "Status" described by "Order status." }
  } with {
    briefly "Purchase order details"
    described by "Purchase order information."
  }

  query GetVendorInfo is {
    vendorId is VendorId with { briefly "Vendor" described by "Vendor ID." }
  } with {
    briefly "Get vendor info"
    described by "Retrieves vendor information."
  }

  result VendorInfo is {
    vendorId is VendorId with { briefly "Vendor" described by "Vendor ID." }
    name is String(1, 200) with { briefly "Name" described by "Vendor name." }
    contact is String(1, 200) with { briefly "Contact" described by "Contact person." }
    phone is String(1, 50) with { briefly "Phone" described by "Phone number." }
    email is String(1, 200) with { briefly "Email" described by "Email address." }
    warrantyTerms is optional String(1, 1000) with { briefly "Warranty" described by "Standard warranty terms." }
  } with {
    briefly "Vendor info"
    described by "Vendor information."
  }

  command RequestQuote is {
    assetCategoryId is AssetCategoryId with { briefly "Category" described by "Asset category." }
    specifications is String(1, 2000) with { briefly "Specifications" described by "Asset specifications." }
    quantity is Natural with { briefly "Quantity" described by "Number of units." }
    requestedBy is String(1, 200) with { briefly "Requested by" described by "Person requesting." }
  } with {
    briefly "Request quote"
    described by "Requests vendor quotes for asset purchase."
  }

  event QuoteRequestSubmitted is {
    requestId is UUID with { briefly "Request" described by "Quote request ID." }
    submittedAt is TimeStamp with { briefly "Submitted" described by "Submission time." }
  } with {
    briefly "Quote request submitted"
    described by "Emitted when quote request is submitted."
  }

} with {
  option is external
  briefly "External procurement service"
  described by "External procurement and purchasing system."
}

// Maintenance System for maintenance integration
context MaintenanceSystem is {

  command SchedulePreventiveMaintenance is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    maintenanceType is String(1, 100) with { briefly "Type" described by "Maintenance type." }
    scheduledDate is Date with { briefly "Scheduled" described by "Scheduled date." }
    estimatedDuration is Natural with { briefly "Duration" described by "Estimated duration (hours)." }
  } with {
    briefly "Schedule preventive maintenance"
    described by "Schedules preventive maintenance for an asset."
  }

  event MaintenanceScheduled is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    workOrderId is String(1, 50) with { briefly "Work order" described by "Maintenance work order ID." }
    scheduledAt is TimeStamp with { briefly "Scheduled" described by "Schedule time." }
  } with {
    briefly "Maintenance scheduled"
    described by "Emitted when maintenance is scheduled."
  }

  command ReportMaintenanceComplete is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    workOrderId is String(1, 50) with { briefly "Work order" described by "Work order ID." }
    completedDate is Date with { briefly "Completed" described by "Completion date." }
    laborHours is Decimal(6, 2) with { briefly "Labor hours" described by "Labor hours." }
    partsCost is Decimal(15, 2) with { briefly "Parts cost" described by "Parts cost." }
    laborCost is Decimal(15, 2) with { briefly "Labor cost" described by "Labor cost." }
    notes is optional String(1, 1000) with { briefly "Notes" described by "Completion notes." }
  } with {
    briefly "Report maintenance complete"
    described by "Reports completion of maintenance work."
  }

  event MaintenanceCompleted is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    workOrderId is String(1, 50) with { briefly "Work order" described by "Work order ID." }
    totalCost is Decimal(15, 2) with { briefly "Total cost" described by "Total maintenance cost." }
    completedAt is TimeStamp with { briefly "Completed" described by "Completion time." }
  } with {
    briefly "Maintenance completed"
    described by "Emitted when maintenance work is completed."
  }

  query GetMaintenanceHistory is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    startDate is Date with { briefly "Start" described by "History start date." }
    endDate is Date with { briefly "End" described by "History end date." }
  } with {
    briefly "Get maintenance history"
    described by "Retrieves maintenance history for an asset."
  }

  result MaintenanceHistoryResult is {
    assetId is AssetId with { briefly "Asset" described by "Asset ID." }
    entries is many MaintenanceEntry with { briefly "Entries" described by "Maintenance entries." }
    totalCost is Decimal(15, 2) with { briefly "Total cost" described by "Total maintenance cost." }
    entryCount is Natural with { briefly "Count" described by "Number of entries." }
  } with {
    briefly "Maintenance history result"
    described by "Maintenance history for the asset."
  }

  query GetUpcomingMaintenance is {
    locationId is LocationId with { briefly "Location" described by "Location ID." }
    daysAhead is Natural with { briefly "Days ahead" described by "Days to look ahead." }
  } with {
    briefly "Get upcoming maintenance"
    described by "Retrieves scheduled maintenance for a location."
  }

  result UpcomingMaintenanceResult is {
    locationId is LocationId with { briefly "Location" described by "Location ID." }
    scheduledWork is many String(1, 500) with { briefly "Scheduled" described by "Scheduled maintenance items." }
    totalEstimatedHours is Natural with { briefly "Hours" described by "Total estimated hours." }
  } with {
    briefly "Upcoming maintenance result"
    described by "Scheduled maintenance for the location."
  }

} with {
  option is external
  briefly "External maintenance system"
  described by "External maintenance management and work order system."
}
