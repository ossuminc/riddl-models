// Fabric Production Domain Model
// Textile weaving, dyeing, and finishing operations

domain FabricProduction is {

  author OssumInc is {
    name is "Ossum Inc."
    email is "support@ossuminc.com"
  } with {
    briefly "Domain author"
    described by "Organization maintaining this domain model."
  }

  user WeavingOperator is "person operating looms and weaving equipment" with {
    briefly "Weaving Operator"
    described by "Person responsible for loom setup, warping, and weaving operations."
  }

  user DyeingTechnician is "person managing dye processes and formulations" with {
    briefly "Dyeing Technician"
    described by "Person responsible for dye mixing, application, and color consistency."
  }

  user FinishingOperator is "person operating finishing equipment" with {
    briefly "Finishing Operator"
    described by "Person responsible for fabric finishing treatments and processes."
  }

  user QualityController is "person inspecting and grading fabric" with {
    briefly "Quality Controller"
    described by "Person responsible for fabric inspection, defect detection, and grading."
  }

  epic FabricProductionEpic is {
    user WeavingOperator wants "to manage fabric lot production"
      so that "quality fabrics are manufactured efficiently"

    case ProduceFabric is {
      user WeavingOperator wants "to weave fabric from yarn"
        so that "raw fabric is produced for dyeing"
      step is "Operator prepares" "warp beam with yarn" "for loom setup"
        with { briefly "Prepare warp" described by "Set up warp beam." }
      step send command FabricContext.FabricLot.StartWarping from user WeavingOperator to entity FabricContext.FabricLot
        with { briefly "Start warping" described by "Begin warping process." }
      step send command FabricContext.FabricLot.StartWeaving from user WeavingOperator to entity FabricContext.FabricLot
        with { briefly "Start weaving" described by "Begin loom weaving." }
      step is "Operator monitors" "loom operation" "and fabric quality"
        with { briefly "Monitor weaving" described by "Watch for defects." }
    } with {
      briefly "Fabric weaving process"
      described by "Weaving raw fabric from prepared yarn warp."
    }

    case DyeFabric is {
      user DyeingTechnician wants "to dye fabric to specification"
        so that "fabric achieves the correct color"
      step send command FabricContext.FabricLot.StartDyeing from user DyeingTechnician to entity FabricContext.FabricLot
        with { briefly "Start dyeing" described by "Begin dye process." }
      step is "Technician monitors" "dye bath temperature" "and timing"
        with { briefly "Monitor dyeing" described by "Control dye process." }
      step send command FabricContext.FabricLot.CompleteDyeing from user DyeingTechnician to entity FabricContext.FabricLot
        with { briefly "Complete dyeing" described by "Finish dye process." }
    } with {
      briefly "Fabric dyeing process"
      described by "Applying dye to achieve specified color."
    }

    case FinishFabric is {
      user FinishingOperator wants "to apply finishing treatments"
        so that "fabric meets final specifications"
      step send command FabricContext.FabricLot.ApplyFinishing from user FinishingOperator to entity FabricContext.FabricLot
        with { briefly "Apply finishing" described by "Apply finishing treatment." }
      step is "Operator verifies" "finishing results" "meet specifications"
        with { briefly "Verify finish" described by "Check finish quality." }
    } with {
      briefly "Fabric finishing process"
      described by "Applying finishing treatments to fabric."
    }

    case GradeAndShipFabric is {
      user QualityController wants "to grade and ship fabric"
        so that "only quality fabric reaches customers"
      step send command FabricContext.FabricLot.GradeFabric from user QualityController to entity FabricContext.FabricLot
        with { briefly "Grade fabric" described by "Assign quality grade." }
      step send command FabricContext.FabricLot.ShipFabric from user QualityController to entity FabricContext.FabricLot
        with { briefly "Ship fabric" described by "Release for shipping." }
    } with {
      briefly "Fabric grading and shipping"
      described by "Final inspection, grading, and shipping release."
    }
  } with {
    briefly "Fabric production workflow"
    described by {
      | Epic covering the complete fabric production lifecycle
      | including weaving, dyeing, finishing, and quality grading.
    }
  }

  include "FabricContext.riddl"
  include "external-contexts.riddl"

} with {
  briefly "Fabric production domain"
  described by {
    | The FabricProduction domain handles textile manufacturing
    | operations including weaving, dyeing, finishing, and
    | quality control for fabric production.
  }
}
