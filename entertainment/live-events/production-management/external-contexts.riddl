// Production Management - External Contexts

context VenueSystem is {

  query GetVenueDetails is {
    venueId is VenueId with { briefly "Venue" described by "Venue identifier." }
  } with {
    briefly "Get venue details"
    described by "Retrieves venue information."
  }

  result VenueDetails is {
    venueId is VenueId with { briefly "Venue" described by "Venue identifier." }
    venueName is String(3, 200) with { briefly "Name" described by "Venue name." }
    capacity is Natural with { briefly "Capacity" described by "Venue capacity." }
    stageSpecs is String(3, 500) with { briefly "Stage specs" described by "Stage specifications." }
    availableDates is many Date with { briefly "Dates" described by "Available dates." }
  } with {
    briefly "Venue details"
    described by "Venue information."
  }

  command ReserveVenue is {
    venueId is VenueId with { briefly "Venue" described by "Venue identifier." }
    productionId is ProductionId with { briefly "Production" described by "Production identifier." }
    eventDate is Date with { briefly "Date" described by "Event date." }
    loadInDate is Date with { briefly "Load-in" described by "Load-in date." }
  } with {
    briefly "Reserve venue"
    described by "Reserves the venue for an event."
  }

  event VenueReserved is {
    venueId is VenueId with { briefly "Venue" described by "Venue identifier." }
    productionId is ProductionId with { briefly "Production" described by "Production identifier." }
    reservedAt is TimeStamp with { briefly "Reserved" described by "Reservation time." }
  } with {
    briefly "Venue reserved"
    described by "Emitted when venue is reserved."
  }

} with {
  option is external
  briefly "External venue system"
  described by "Venue management and booking system."
}

context CrewManagement is {

  query GetAvailableCrew is {
    role is CrewRole with { briefly "Role" described by "Crew role needed." }
    startDate is Date with { briefly "Start" described by "Start date." }
    endDate is Date with { briefly "End" described by "End date." }
  } with {
    briefly "Get available crew"
    described by "Finds available crew members by role."
  }

  result AvailableCrew is {
    crewMembers is many CrewAssignment with { briefly "Crew" described by "Available crew members." }
  } with {
    briefly "Available crew"
    described by "List of available crew members."
  }

  command BookCrewMember is {
    crewMemberId is CrewMemberId with { briefly "Crew member" described by "Crew member identifier." }
    productionId is ProductionId with { briefly "Production" described by "Production identifier." }
    role is CrewRole with { briefly "Role" described by "Assigned role." }
    callTime is TimeStamp with { briefly "Call time" described by "Scheduled arrival." }
    endTime is TimeStamp with { briefly "End time" described by "Scheduled end." }
  } with {
    briefly "Book crew member"
    described by "Books a crew member for a production."
  }

  event CrewMemberBooked is {
    crewMemberId is CrewMemberId with { briefly "Crew member" described by "Crew member identifier." }
    productionId is ProductionId with { briefly "Production" described by "Production identifier." }
    bookedAt is TimeStamp with { briefly "Booked" described by "Booking time." }
  } with {
    briefly "Crew member booked"
    described by "Emitted when crew member is booked."
  }

} with {
  option is external
  briefly "External crew management"
  described by "Crew scheduling and management system."
}
