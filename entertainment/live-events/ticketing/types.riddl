// Event Ticketing - Shared Types

type TicketId is Id(TicketingContext.Ticket) with {
  briefly "Ticket identifier"
  described by "Unique identifier for a ticket."
}

type EventId is UUID with {
  briefly "Event identifier"
  described by "Reference to a live event."
}

type BuyerId is UUID with {
  briefly "Buyer identifier"
  described by "Reference to a ticket buyer."
}

type TransactionId is UUID with {
  briefly "Transaction identifier"
  described by "Reference to a payment transaction."
}

type EmailAddress is String(5, 254) with {
  briefly "Email address"
  described by "Valid email address string."
}

type TicketStatus is any of {
  Available,
  Reserved,
  Purchased,
  Delivered,
  Validated,
  Expired,
  Refunded,
  Cancelled
} with {
  briefly "Ticket status"
  described by "Current status of a ticket."
}

type PricingTier is any of {
  GeneralAdmission,
  Reserved,
  Premium,
  VIPTier,
  Backstage,
  EarlyBird
} with {
  briefly "Pricing tier"
  described by "Ticket pricing tier classification."
}

type DeliveryMethod is any of {
  Email,
  MobileApp,
  WillCall,
  PrintAtHome
} with {
  briefly "Delivery method"
  described by "How the digital ticket is delivered."
}

type RefundReason is any of {
  EventCancelled,
  EventPostponed,
  BuyerRequest,
  DuplicatePurchase,
  PaymentError
} with {
  briefly "Refund reason"
  described by "Reason for ticket refund."
}

type EventInfo is {
  eventId is EventId with {
    briefly "Event ID"
    described by "Event identifier."
  }
  eventName is String(3, 200) with {
    briefly "Event name"
    described by "Name of the live event."
  }
  venueId is UUID with {
    briefly "Venue ID"
    described by "Reference to the venue."
  }
  venueName is String(3, 200) with {
    briefly "Venue name"
    described by "Name of the venue."
  }
  eventDate is DateTime with {
    briefly "Event date"
    described by "Date and time of the event."
  }
  doorsOpen is optional DateTime with {
    briefly "Doors open"
    described by "When doors open for entry."
  }
} with {
  briefly "Event information"
  described by "Details about the live event."
}

type SeatInfo is {
  section is String(1, 50) with {
    briefly "Section"
    described by "Seating section identifier."
  }
  row is optional String(1, 20) with {
    briefly "Row"
    described by "Seat row designation."
  }
  seatNumber is optional String(1, 20) with {
    briefly "Seat"
    described by "Seat number designation."
  }
  isGeneralAdmission is Boolean with {
    briefly "General admission"
    described by "Whether this is general admission seating."
  }
} with {
  briefly "Seat information"
  described by "Seat assignment details."
}

type PricingInfo is {
  tier is PricingTier with {
    briefly "Tier"
    described by "Pricing tier."
  }
  faceValue is Decimal(10, 2) with {
    briefly "Face value"
    described by "Ticket face value."
  }
  serviceFee is Decimal(10, 2) with {
    briefly "Service fee"
    described by "Service fee amount."
  }
  totalPrice is Decimal(10, 2) with {
    briefly "Total price"
    described by "Total ticket price including fees."
  }
  currency is String(3, 3) with {
    briefly "Currency"
    described by "Currency code (ISO 4217)."
  }
} with {
  briefly "Pricing information"
  described by "Ticket pricing breakdown."
}

type BuyerInfo is {
  buyerId is BuyerId with {
    briefly "Buyer ID"
    described by "Buyer identifier."
  }
  buyerName is String(1, 200) with {
    briefly "Name"
    described by "Buyer full name."
  }
  buyerEmail is EmailAddress with {
    briefly "Email"
    described by "Buyer email address."
  }
} with {
  briefly "Buyer information"
  described by "Ticket buyer details."
}

type DigitalTicketInfo is {
  barcode is String(10, 100) with {
    briefly "Barcode"
    described by "Scannable barcode value."
  }
  qrCode is String(10, 500) with {
    briefly "QR code"
    described by "QR code data."
  }
  deliveryMethod is DeliveryMethod with {
    briefly "Delivery"
    described by "Delivery method."
  }
  deliveredAt is optional TimeStamp with {
    briefly "Delivered"
    described by "Delivery timestamp."
  }
} with {
  briefly "Digital ticket info"
  described by "Digital ticket delivery details."
}

type ValidationRecord is {
  validatedAt is TimeStamp with {
    briefly "Validated"
    described by "Validation timestamp."
  }
  entryGate is String(1, 50) with {
    briefly "Gate"
    described by "Entry gate identifier."
  }
  validatedBy is String(1, 100) with {
    briefly "Validated by"
    described by "Staff member who validated."
  }
} with {
  briefly "Validation record"
  described by "Entry validation details."
}

type RefundInfo is {
  reason is RefundReason with {
    briefly "Reason"
    described by "Refund reason."
  }
  refundAmount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Refund amount."
  }
  refundTransactionId is optional TransactionId with {
    briefly "Refund transaction"
    described by "Payment refund transaction ID."
  }
} with {
  briefly "Refund information"
  described by "Ticket refund details."
}
