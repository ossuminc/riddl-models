// Ticket Sales - Shared Types
// These types are used across the Ticket Sales context

type EventId is UUID with {
  briefly "Unique identifier for an Event"
  described by {
    | A UUID that uniquely identifies an event within the Ticket Sales
    | bounded context. Events represent scheduled live performances.
  }
}

type TicketId is Id(TicketContext.Ticket) with {
  briefly "Unique identifier for a Ticket"
  described by {
    | A type-safe identifier that uniquely references a Ticket entity
    | for tracking individual tickets through the sales lifecycle.
  }
}

type SeatId is UUID with {
  briefly "Unique identifier for a Seat"
  described by {
    | A UUID that uniquely identifies a specific seat within a venue.
    | Used to track seat assignments and prevent double-booking.
  }
}

type VenueId is UUID with {
  briefly "Reference to a venue in the Venue Management context"
  described by {
    | A UUID referencing a venue entity in the external Venue Management
    | context. Links events to physical locations with seating charts.
  }
}

type BuyerId is UUID with {
  briefly "Unique identifier for a ticket buyer"
  described by {
    | A UUID that uniquely identifies a ticket buyer or account holder.
    | Links purchases to customer accounts for history and transfers.
  }
}

type TicketStatus is any of {
  Available with {
    briefly "Ticket available for purchase"
    described by {
      | The ticket is in inventory and can be purchased by any buyer.
      | It is not reserved or held by anyone.
    }
  },
  Reserved with {
    briefly "Ticket temporarily held"
    described by {
      | The ticket is temporarily held during checkout process.
      | Will return to available if not purchased within time limit.
    }
  },
  Sold with {
    briefly "Ticket has been purchased"
    described by {
      | The ticket has been purchased and assigned to a buyer.
      | It can be transferred or refunded based on event policy.
    }
  },
  Transferred with {
    briefly "Ticket transferred to new owner"
    described by {
      | The ticket has been transferred from original buyer to a
      | new owner. Transfer history is preserved for audit.
    }
  },
  Refunded with {
    briefly "Ticket was refunded"
    described by {
      | The ticket has been refunded and returned to inventory.
      | May be resold depending on event timing and policy.
    }
  },
  Cancelled with {
    briefly "Ticket cancelled due to event cancellation"
    described by {
      | The ticket was cancelled due to event cancellation or
      | postponement. Full refunds are typically issued.
    }
  },
  Used with {
    briefly "Ticket has been scanned for entry"
    described by {
      | The ticket has been scanned at the venue and the holder
      | has been admitted to the event.
    }
  }
} with {
  briefly "Possible states for a ticket"
  described by {
    | Enumeration of valid ticket states throughout the ticket lifecycle
    | from initial inventory through event admission or refund.
  }
}

type Money is {
  amount is Decimal(10, 2) with {
    briefly "Numeric amount"
    described by {
      | The numeric value of the monetary amount with two decimal
      | places for cents. Supports values up to 99,999,999.99.
    }
  }
  currency is Currency(USD) with {
    briefly "Currency code"
    described by {
      | The ISO 4217 currency code. Defaults to USD for US Dollar.
      | Determines formatting and exchange rate considerations.
    }
  }
} with {
  briefly "Monetary value with currency"
  described by {
    | Represents a monetary amount with associated currency for
    | ticket prices, fees, and refunds throughout sales processing.
  }
}

type EventInfo is {
  eventId is EventId with {
    briefly "Event identifier"
    described by {
      | Unique identifier for this event within the system.
    }
  }
  name is String(1, 200) with {
    briefly "Event name"
    described by {
      | The official name or title of the event as displayed to buyers.
      | Examples: "Taylor Swift - Eras Tour" or "Hamilton - Broadway".
    }
  }
  description is String(1, 2000) with {
    briefly "Event description"
    described by {
      | Detailed description of the event including performers,
      | show content, and any relevant information for attendees.
    }
  }
  venueId is VenueId with {
    briefly "Venue reference"
    described by {
      | Reference to the venue where this event will be held.
      | Links to venue seating charts and capacity information.
    }
  }
  venueName is String(1, 200) with {
    briefly "Venue name"
    described by {
      | Human-readable name of the venue for display purposes.
      | Captured at event creation for historical consistency.
    }
  }
  eventDate is DateTime with {
    briefly "Event date and time"
    described by {
      | The scheduled date and time when the event will begin.
      | Used for ticket validity and refund policy calculations.
    }
  }
  doorsOpen is DateTime with {
    briefly "Doors open time"
    described by {
      | When venue doors open for ticket holders to enter.
      | Typically 1-2 hours before event start time.
    }
  }
  category is String(1, 100) with {
    briefly "Event category"
    described by {
      | Category of event such as Concert, Theater, Sports, Comedy,
      | Festival, or Other. Used for search and filtering.
    }
  }
  ageRestriction is optional String(1, 50) with {
    briefly "Age restriction"
    described by {
      | Minimum age requirement if any, such as "All Ages",
      | "18+", or "21+". Null if no restriction.
    }
  }
  refundPolicy is String(1, 500) with {
    briefly "Refund policy"
    described by {
      | Description of the refund policy for this event including
      | deadlines, fees, and conditions for refund eligibility.
    }
  }
} with {
  briefly "Information about a live event"
  described by {
    | Contains all the details about a live event including identity,
    | timing, location, and policies. This record is used to describe
    | events for display to potential ticket buyers.
  }
}

type TicketInfo is {
  ticketId is TicketId with {
    briefly "Ticket identifier"
    described by {
      | Unique identifier for this specific ticket instance.
    }
  }
  eventId is EventId with {
    briefly "Event reference"
    described by {
      | Reference to the event this ticket provides admission to.
    }
  }
  seatId is SeatId with {
    briefly "Seat assignment"
    described by {
      | Reference to the specific seat assigned to this ticket.
      | May be general admission with assigned section only.
    }
  }
  section is String(1, 50) with {
    briefly "Section name"
    described by {
      | The section of the venue such as "Orchestra", "Balcony",
      | "Floor", or "General Admission".
    }
  }
  row is optional String(1, 20) with {
    briefly "Row identifier"
    described by {
      | Row designation within the section such as "A", "AA", or "12".
      | Null for general admission tickets.
    }
  }
  seatNumber is optional String(1, 20) with {
    briefly "Seat number"
    described by {
      | Specific seat number within the row such as "1" or "101".
      | Null for general admission tickets.
    }
  }
  pricingTier is String(1, 50) with {
    briefly "Pricing tier"
    described by {
      | Name of the pricing tier such as "Premium", "Standard",
      | "Budget", or "VIP". Determines base ticket price.
    }
  }
  faceValue is Money with {
    briefly "Face value price"
    described by {
      | The base price of the ticket before fees. This is the
      | printed face value shown on the ticket.
    }
  }
  status is TicketStatus with {
    briefly "Current status"
    described by {
      | The current status of this ticket in its lifecycle.
    }
  }
  buyerId is optional BuyerId with {
    briefly "Current owner"
    described by {
      | Reference to the buyer who currently owns this ticket.
      | Null if ticket is available or returned to inventory.
    }
  }
  purchasedAt is optional TimeStamp with {
    briefly "Purchase timestamp"
    described by {
      | When this ticket was purchased, if sold.
      | Used for transfer history and refund calculations.
    }
  }
} with {
  briefly "Information about a single ticket"
  described by {
    | Contains all details about a specific ticket instance including
    | seat assignment, pricing, current status, and ownership.
  }
}

type SeatInfo is {
  seatId is SeatId with {
    briefly "Seat identifier"
    described by {
      | Unique identifier for this specific seat in the venue.
    }
  }
  section is String(1, 50) with {
    briefly "Section name"
    described by {
      | The section of the venue where this seat is located.
    }
  }
  row is optional String(1, 20) with {
    briefly "Row identifier"
    described by {
      | Row designation within the section.
    }
  }
  seatNumber is optional String(1, 20) with {
    briefly "Seat number"
    described by {
      | Specific seat number within the row.
    }
  }
  seatType is String(1, 50) with {
    briefly "Seat type"
    described by {
      | Type of seat such as "Standard", "Accessible", "VIP Box",
      | "Standing", or "General Admission".
    }
  }
  isAccessible is Boolean with {
    briefly "Accessibility flag"
    described by {
      | Whether this seat is designated as accessible for patrons
      | with disabilities. Includes companion seats nearby.
    }
  }
  viewQuality is String(1, 50) with {
    briefly "View quality rating"
    described by {
      | Rating of the view from this seat such as "Excellent",
      | "Good", "Limited", or "Obstructed".
    }
  }
} with {
  briefly "Information about a venue seat"
  described by {
    | Contains details about a specific seat in a venue including
    | location, type, accessibility, and view quality.
  }
}

type PricingTier is {
  tierName is String(1, 50) with {
    briefly "Tier name"
    described by {
      | Name of this pricing tier displayed to buyers.
    }
  }
  description is String(1, 500) with {
    briefly "Tier description"
    described by {
      | Description of what this tier includes, any perks,
      | or why it commands its price point.
    }
  }
  basePrice is Money with {
    briefly "Base ticket price"
    described by {
      | The base price for tickets in this tier before fees.
    }
  }
  serviceFee is Money with {
    briefly "Service fee"
    described by {
      | Service fee added to the base price for processing.
    }
  }
  facilityFee is Money with {
    briefly "Facility fee"
    described by {
      | Facility fee charged by the venue.
    }
  }
  totalPrice is Money with {
    briefly "Total price"
    described by {
      | Total price including base price and all fees.
    }
  }
  sections is many String(1, 50) with {
    briefly "Included sections"
    described by {
      | List of venue sections that are part of this pricing tier.
    }
  }
  availableCount is Natural with {
    briefly "Available tickets"
    described by {
      | Number of tickets still available in this tier.
    }
  }
  totalCount is Natural with {
    briefly "Total tickets"
    described by {
      | Total number of tickets in this tier for the event.
    }
  }
} with {
  briefly "Pricing tier for event tickets"
  described by {
    | Defines a pricing tier for an event with base price, fees,
    | included sections, and inventory counts.
  }
}

type TransferRecord is {
  transferId is UUID with {
    briefly "Transfer identifier"
    described by {
      | Unique identifier for this transfer transaction.
    }
  }
  ticketId is TicketId with {
    briefly "Ticket transferred"
    described by {
      | The ticket that was transferred.
    }
  }
  fromBuyerId is BuyerId with {
    briefly "Original owner"
    described by {
      | The buyer who initiated the transfer.
    }
  }
  toBuyerId is BuyerId with {
    briefly "New owner"
    described by {
      | The buyer who received the ticket.
    }
  }
  transferredAt is TimeStamp with {
    briefly "Transfer timestamp"
    described by {
      | When the transfer was completed.
    }
  }
} with {
  briefly "Record of a ticket transfer"
  described by {
    | Documents a transfer of ticket ownership from one buyer to another.
    | Preserved for audit trail and fraud prevention.
  }
}
