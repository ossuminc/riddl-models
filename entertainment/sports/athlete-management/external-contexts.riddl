// Athlete Management - External Contexts
context MedicalSystem is {
  command SubmitMedicalReport is  {
    athleteId: AthleteId with {
      briefly "Athlete"
      described as {
        |Athlete ID.
      }
    }
    reportType: String(1,100) with {
      briefly "Type"
      described as {
        |Report type.
      }
    }
    findings: String(1,2000) with {
      briefly "Findings"
      described as {
        |Medical findings.
      }
    }
    reportDate: Date with {
      briefly "Date"
      described as {
        |Report date.
      }
    }
  } with {
    briefly "Submit medical report"
    described as {
      |Submits a medical report for an athlete.
    }
  }
  event MedicalReportSubmitted is  {
    athleteId: AthleteId with {
      briefly "Athlete"
      described as {
        |Athlete ID.
      }
    }
    reportType: String(1,100) with {
      briefly "Type"
      described as {
        |Report type.
      }
    }
    submittedAt: TimeStamp with {
      briefly "Submitted"
      described as {
        |Submission time.
      }
    }
  } with {
    briefly "Medical report submitted"
    described as {
      |Emitted when a medical report is submitted.
    }
  }
  query GetMedicalHistory is  {
    athleteId: AthleteId with {
      briefly "Athlete"
      described as {
        |Athlete ID.
      }
    }
  } with {
    briefly "Get medical history"
    described as {
      |Retrieves athlete medical history.
    }
  }
  result MedicalHistory is  {
    athleteId: AthleteId with {
      briefly "Athlete"
      described as {
        |Athlete ID.
      }
    }
    reports: String(1,2000)+ with {
      briefly "Reports"
      described as {
        |Medical reports.
      }
    }
    clearanceStatus: String(1,50) with {
      briefly "Clearance"
      described as {
        |Medical clearance status.
      }
    }
  } with {
    briefly "Medical history"
    described as {
      |Athlete medical history.
    }
  }
} with {
  option external()
  briefly "External medical system"
  described as {
    |Medical records and reporting system.
  }
}
context LeagueRegistry is {
  command RegisterWithLeague is  {
    athleteId: AthleteId with {
      briefly "Athlete"
      described as {
        |Athlete ID.
      }
    }
    leagueId: String(1,100) with {
      briefly "League"
      described as {
        |League identifier.
      }
    }
    teamId: TeamId with {
      briefly "Team"
      described as {
        |Team identifier.
      }
    }
  } with {
    briefly "Register with league"
    described as {
      |Registers athlete with the league.
    }
  }
  event LeagueRegistrationCompleted is  {
    athleteId: AthleteId with {
      briefly "Athlete"
      described as {
        |Athlete ID.
      }
    }
    leagueId: String(1,100) with {
      briefly "League"
      described as {
        |League identifier.
      }
    }
    registeredAt: TimeStamp with {
      briefly "Registered"
      described as {
        |Registration time.
      }
    }
  } with {
    briefly "League registration completed"
    described as {
      |Emitted when league registration completes.
    }
  }
  query GetLeagueEligibility is  {
    athleteId: AthleteId with {
      briefly "Athlete"
      described as {
        |Athlete ID.
      }
    }
    leagueId: String(1,100) with {
      briefly "League"
      described as {
        |League identifier.
      }
    }
  } with {
    briefly "Get league eligibility"
    described as {
      |Checks athlete league eligibility.
    }
  }
  result LeagueEligibility is  {
    athleteId: AthleteId with {
      briefly "Athlete"
      described as {
        |Athlete ID.
      }
    }
    eligible: Boolean with {
      briefly "Eligible"
      described as {
        |Eligibility status.
      }
    }
    restrictions: String(1,500)* with {
      briefly "Restrictions"
      described as {
        |Any restrictions.
      }
    }
  } with {
    briefly "League eligibility"
    described as {
      |Athlete league eligibility status.
    }
  }
} with {
  option external()
  briefly "External league registry"
  described as {
    |League registration and eligibility system.
  }
}
