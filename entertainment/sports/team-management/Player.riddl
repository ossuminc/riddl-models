// Player entity for Team Management domain
entity Player is {
  // Commands
  command SignPlayer is  {
    playerId: PlayerId with {
      briefly "Player to sign"
      described as {
        |Identifier of the player being signed.
      }
    }
    playerInfo: PlayerInfo with {
      briefly "Player information"
      described as {
        |Biographical and physical information about the player.
      }
    }
    contract: ContractInfo with {
      briefly "Contract terms"
      described as {
        |Financial terms of the contract being offered.
      }
    }
    teamId: TeamId with {
      briefly "Signing team"
      described as {
        |Team that is signing the player.
      }
    }
  } with {
    briefly "Sign a new player to the team"
    described as {
      | Initiates the signing of a player including their biographical
      | information and contract terms. Requires salary cap validation.
    }
  }
  command AssignToRoster is  {
    playerId: PlayerId with {
      briefly "Player to assign"
      described as {
        |Identifier of the player being assigned.
      }
    }
    position: String(1,20) with {
      briefly "Roster position"
      described as {
        |Position the player will occupy on the roster.
      }
    }
    jerseyNumber: Integer with {
      briefly "Jersey number"
      described as {
        |Number to be worn by the player.
      }
    }
    status: PlayerStatus with {
      briefly "Initial status"
      described as {
        |Initial roster status for the player.
      }
    }
  } with {
    briefly "Assign player to active roster slot"
    described as {
      | Places a signed player onto the active roster at a specific
      | position with their jersey number and initial status.
    }
  }
  command ExtendContract is  {
    playerId: PlayerId with {
      briefly "Player to extend"
      described as {
        |Identifier of the player whose contract is being extended.
      }
    }
    newEndDate: Date with {
      briefly "New end date"
      described as {
        |New contract expiration date.
      }
    }
    additionalValue: Decimal(12,2) with {
      briefly "Additional value"
      described as {
        |Additional monetary value being added to the contract.
      }
    }
    newAnnualSalary: Decimal(12,2) with {
      briefly "New annual salary"
      described as {
        |Updated annual salary for the extension years.
      }
    }
  } with {
    briefly "Extend an existing player contract"
    described as {
      | Modifies an existing contract to extend the duration and
      | adjust compensation. Subject to salary cap approval.
    }
  }
  command TradePlayer is  {
    playerId: PlayerId with {
      briefly "Player being traded"
      described as {
        |Identifier of the player being traded.
      }
    }
    tradeInfo: TradeInfo with {
      briefly "Trade details"
      described as {
        |Complete details of the trade transaction.
      }
    }
  } with {
    briefly "Trade player to another team"
    described as {
      | Initiates a trade transaction moving the player to another
      | team as part of a larger trade package.
    }
  }
  command ReleasePlayer is  {
    playerId: PlayerId with {
      briefly "Player to release"
      described as {
        |Identifier of the player being released.
      }
    }
    releaseDate: Date with {
      briefly "Release date"
      described as {
        |Effective date of the release.
      }
    }
    reason: String(1,500) with {
      briefly "Release reason"
      described as {
        |Explanation for the release decision.
      }
    }
  } with {
    briefly "Release player from the team"
    described as {
      | Terminates the player's association with the team, making
      | them a free agent. May have salary cap implications for guaranteed money.
    }
  }
  command PlaceOnInjuredReserve is  {
    playerId: PlayerId with {
      briefly "Injured player"
      described as {
        |Identifier of the player being placed on IR.
      }
    }
    injuryDescription: String(1,500) with {
      briefly "Injury description"
      described as {
        |Description of the injury requiring IR placement.
      }
    }
    expectedReturnDate: Date? with {
      briefly "Expected return"
      described as {
        |Estimated date the player may return to action.
      }
    }
  } with {
    briefly "Place player on injured reserve"
    described as {
      | Moves the player to injured reserve status, opening a roster
      | spot but making them ineligible to play for a designated period.
    }
  }
  // Events
  event PlayerSigned is  {
    playerId: PlayerId with {
      briefly "Signed player"
      described as {
        |Identifier of the player who was signed.
      }
    }
    playerInfo: PlayerInfo with {
      briefly "Player information"
      described as {
        |Biographical information of the signed player.
      }
    }
    contract: ContractInfo with {
      briefly "Contract terms"
      described as {
        |Terms of the executed contract.
      }
    }
    teamId: TeamId with {
      briefly "Signing team"
      described as {
        |Team that signed the player.
      }
    }
    signedAt: TimeStamp with {
      briefly "Signing timestamp"
      described as {
        |When the signing was recorded.
      }
    }
  } with {
    briefly "Player has been signed to a contract"
    described as {
      | Records the successful signing of a player including all
      | contract details and the timestamp of the transaction.
    }
  }
  event PlayerAssignedToRoster is  {
    playerId: PlayerId with {
      briefly "Assigned player"
      described as {
        |Identifier of the player assigned to roster.
      }
    }
    position: String(1,20) with {
      briefly "Assigned position"
      described as {
        |Position the player was assigned to.
      }
    }
    jerseyNumber: Integer with {
      briefly "Jersey number"
      described as {
        |Jersey number assigned to the player.
      }
    }
    status: PlayerStatus with {
      briefly "Roster status"
      described as {
        |Status assigned to the player.
      }
    }
    assignedAt: TimeStamp with {
      briefly "Assignment timestamp"
      described as {
        |When the assignment was recorded.
      }
    }
  } with {
    briefly "Player assigned to roster position"
    described as {
      | Records the assignment of a player to a specific roster
      | slot with their designated position and jersey number.
    }
  }
  event ContractExtended is  {
    playerId: PlayerId with {
      briefly "Extended player"
      described as {
        |Identifier of the player whose contract was extended.
      }
    }
    contractId: ContractId with {
      briefly "Contract identifier"
      described as {
        |Identifier of the extended contract.
      }
    }
    newEndDate: Date with {
      briefly "New end date"
      described as {
        |New contract expiration date.
      }
    }
    newTotalValue: Decimal(12,2) with {
      briefly "New total value"
      described as {
        |Updated total contract value.
      }
    }
    extendedAt: TimeStamp with {
      briefly "Extension timestamp"
      described as {
        |When the extension was recorded.
      }
    }
  } with {
    briefly "Player contract has been extended"
    described as {
      | Records the successful extension of a player's contract
      | with updated terms and duration.
    }
  }
  event PlayerTraded is  {
    playerId: PlayerId with {
      briefly "Traded player"
      described as {
        |Identifier of the player who was traded.
      }
    }
    tradeInfo: TradeInfo with {
      briefly "Trade details"
      described as {
        |Details of the completed trade.
      }
    }
    tradedAt: TimeStamp with {
      briefly "Trade timestamp"
      described as {
        |When the trade was recorded.
      }
    }
  } with {
    briefly "Player has been traded"
    described as {
      | Records the completion of a trade transaction, indicating
      | the player has moved to a new team.
    }
  }
  event PlayerReleased is  {
    playerId: PlayerId with {
      briefly "Released player"
      described as {
        |Identifier of the player who was released.
      }
    }
    releaseDate: Date with {
      briefly "Release date"
      described as {
        |Effective date of the release.
      }
    }
    reason: String(1,500) with {
      briefly "Release reason"
      described as {
        |Reason for the release.
      }
    }
    releasedAt: TimeStamp with {
      briefly "Release timestamp"
      described as {
        |When the release was recorded.
      }
    }
  } with {
    briefly "Player has been released"
    described as {
      | Records the release of a player from the team roster,
      | making them available as a free agent.
    }
  }
  event PlayerPlacedOnInjuredReserve is  {
    playerId: PlayerId with {
      briefly "IR player"
      described as {
        |Identifier of the player placed on IR.
      }
    }
    injuryDescription: String(1,500) with {
      briefly "Injury description"
      described as {
        |Description of the injury.
      }
    }
    expectedReturnDate: Date? with {
      briefly "Expected return"
      described as {
        |Estimated return date if known.
      }
    }
    placedAt: TimeStamp with {
      briefly "IR timestamp"
      described as {
        |When the IR placement was recorded.
      }
    }
  } with {
    briefly "Player placed on injured reserve"
    described as {
      | Records the placement of a player on injured reserve
      | including injury details and expected recovery timeline.
    }
  }
  // State Records
  record UnsignedStateData is  {
    playerId: PlayerId with {
      briefly "Player ID"
      described as {
        |Identifier for unsigned player.
      }
    }
    initialPlayerInfo: PlayerInfo? with {
      briefly "Player info"
      described as {
        |Biographical info if known.
      }
    }
  } with {
    briefly "Data for unsigned player state"
    described as {
      |Contains data for a player not under contract.
    }
  }
  record SignedStateData is  {
    playerId: PlayerId with {
      briefly "Player ID"
      described as {
        |Identifier for signed player.
      }
    }
    playerInfo: PlayerInfo with {
      briefly "Player info"
      described as {
        |Biographical information.
      }
    }
    contract: ContractInfo with {
      briefly "Contract"
      described as {
        |Current contract terms.
      }
    }
    teamId: TeamId with {
      briefly "Team"
      described as {
        |Team the player is signed with.
      }
    }
    rosterSlot: RosterSlot? with {
      briefly "Roster slot"
      described as {
        |Current roster assignment.
      }
    }
  } with {
    briefly "Data for signed player state"
    described as {
      |Contains data for a player under contract.
    }
  }
  record InjuredReserveStateData is  {
    playerId: PlayerId with {
      briefly "Player ID"
      described as {
        |Identifier for injured player.
      }
    }
    playerInfo: PlayerInfo with {
      briefly "Player info"
      described as {
        |Biographical information.
      }
    }
    contract: ContractInfo with {
      briefly "Contract"
      described as {
        |Current contract terms.
      }
    }
    teamId: TeamId with {
      briefly "Team"
      described as {
        |Team the player is signed with.
      }
    }
    injuryDescription: String(1,500) with {
      briefly "Injury"
      described as {
        |Description of injury.
      }
    }
    expectedReturnDate: Date? with {
      briefly "Expected return"
      described as {
        |Estimated return date.
      }
    }
    placedOnIRDate: Date with {
      briefly "IR date"
      described as {
        |Date placed on IR.
      }
    }
  } with {
    briefly "Data for injured reserve state"
    described as {
      |Contains data for a player on injured reserve.
    }
  }
  record ReleasedStateData is  {
    playerId: PlayerId with {
      briefly "Player ID"
      described as {
        |Identifier for released player.
      }
    }
    playerInfo: PlayerInfo with {
      briefly "Player info"
      described as {
        |Biographical information.
      }
    }
    previousTeamId: TeamId with {
      briefly "Previous team"
      described as {
        |Team that released player.
      }
    }
    releaseDate: Date with {
      briefly "Release date"
      described as {
        |Date of release.
      }
    }
    reason: String(1,500) with {
      briefly "Reason"
      described as {
        |Reason for release.
      }
    }
  } with {
    briefly "Data for released player state"
    described as {
      |Contains data for a recently released player.
    }
  }
  // States
  state UnsignedState of type Player.UnsignedStateData
  state SignedState of type Player.SignedStateData
  state InjuredReserveState of type Player.InjuredReserveStateData
  state ReleasedState of type Player.ReleasedStateData
  // Handler
  handler PlayerHandler is {
    on command SignPlayer is {
      morph entity Player to state Player.SignedState with command SignPlayer
      tell event PlayerSigned to entity Player
    }
    on command AssignToRoster is {
      tell event PlayerAssignedToRoster to entity Player
    }
    on command ExtendContract is {
      tell event ContractExtended to entity Player
    }
    on command TradePlayer is {
      morph entity Player to state Player.SignedState with command TradePlayer
      tell event PlayerTraded to entity Player
    }
    on command ReleasePlayer is {
      morph entity Player to state Player.ReleasedState with command ReleasePlayer
      tell event PlayerReleased to entity Player
    }
    on command PlaceOnInjuredReserve is {
      morph entity Player to state Player.InjuredReserveState with command PlaceOnInjuredReserve
      tell event PlayerPlacedOnInjuredReserve to entity Player
    }
  } with {
    briefly "Handles player lifecycle commands"
    described as {
      | Processes all player-related commands, validating against
      | salary cap and league rules before recording events.
    }
  }
} with {
  option aggregate()
  briefly "Represents a player in the team management system"
  described as {
    | The Player entity manages the complete lifecycle of a professional
    | athlete from signing through release or retirement. It tracks
    | contracts, roster assignments, injuries, and trades while ensuring
    | compliance with league rules and salary cap constraints.
  }
}
