// Matchmaking - Shared Types
type MatchId is Id(MatchContext.Match)  with {
  briefly "Match identifier"
  described as {
    |Unique identifier for a game match.
  }
}
type PlayerId is UUID with {
  briefly "Player identifier"
  described as {
    |Reference to a player.
  }
}
type QueueId is UUID with {
  briefly "Queue identifier"
  described as {
    |Reference to a matchmaking queue.
  }
}
type ServerId is UUID with {
  briefly "Server identifier"
  described as {
    |Reference to a game server.
  }
}
type LobbyId is UUID with {
  briefly "Lobby identifier"
  described as {
    |Reference to a game lobby.
  }
}
type MatchStatus is any of {
  Pending,
  Forming,
  Ready,
  InProgress,
  Completed,
  Cancelled
} with {
  briefly "Match status"
  described as {
    |Current match status.
  }
}
type GameMode is any of {
  Casual,
  Ranked,
  Competitive,
  Custom,
  Tutorial,
  Practice
} with {
  briefly "Game mode"
  described as {
    |Type of game mode.
  }
}
type MatchType is any of {
  OneVsOne,
  TeamVsTeam,
  FreeForAll,
  Cooperative,
  BattleRoyale
} with {
  briefly "Match type"
  described as {
    |Type of match format.
  }
}
type PlayerRank is any of {
  Bronze,
  Silver,
  Gold,
  Platinum,
  Diamond,
  Master,
  Champion
} with {
  briefly "Player rank"
  described as {
    |Player skill rank.
  }
}
type QueueStatus is any of {
  Queued,
  Matched,
  Confirmed,
  Cancelled,
  Expired
} with {
  briefly "Queue status"
  described as {
    |Player queue status.
  }
}
type PlayerProfile is {
  playerId: PlayerId with {
    briefly "Player ID"
    described as {
      |Player identifier.
    }
  }
  displayName: String(1,50) with {
    briefly "Name"
    described as {
      |Display name.
    }
  }
  skillRating: Decimal(8,2) with {
    briefly "Skill"
    described as {
      |Skill rating (MMR).
    }
  }
  rank: PlayerRank with {
    briefly "Rank"
    described as {
      |Player rank.
    }
  }
  gamesPlayed: Natural with {
    briefly "Games"
    described as {
      |Total games played.
    }
  }
  winRate: Decimal(5,4) with {
    briefly "Win rate"
    described as {
      |Win percentage.
    }
  }
} with {
  briefly "Player profile"
  described as {
    |Player statistics for matching.
  }
}
type QueueEntry is {
  playerId: PlayerId with {
    briefly "Player"
    described as {
      |Queued player.
    }
  }
  profile: PlayerProfile with {
    briefly "Profile"
    described as {
      |Player profile.
    }
  }
  gameMode: GameMode with {
    briefly "Mode"
    described as {
      |Requested mode.
    }
  }
  matchType: MatchType with {
    briefly "Type"
    described as {
      |Match type.
    }
  }
  queuedAt: TimeStamp with {
    briefly "Queued"
    described as {
      |Queue entry time.
    }
  }
  status: QueueStatus with {
    briefly "Status"
    described as {
      |Queue status.
    }
  }
  preferences: MatchPreferences? with {
    briefly "Preferences"
    described as {
      |Match preferences.
    }
  }
} with {
  briefly "Queue entry"
  described as {
    |Player in matchmaking queue.
  }
}
type MatchPreferences is {
  maxLatency: Natural with {
    briefly "Latency"
    described as {
      |Max acceptable latency.
    }
  }
  preferredRegions: String(1,50)+ with {
    briefly "Regions"
    described as {
      |Preferred server regions.
    }
  }
  skillRange: Decimal(5,2) with {
    briefly "Skill range"
    described as {
      |Acceptable skill difference.
    }
  }
  partyMembers: PlayerId* with {
    briefly "Party"
    described as {
      |Party members to match with.
    }
  }
} with {
  briefly "Match preferences"
  described as {
    |Player matching preferences.
  }
}
type MatchTeam is {
  teamId: UUID with {
    briefly "Team ID"
    described as {
      |Team identifier.
    }
  }
  players: PlayerId+ with {
    briefly "Players"
    described as {
      |Team players.
    }
  }
  averageSkill: Decimal(8,2) with {
    briefly "Avg skill"
    described as {
      |Team average skill.
    }
  }
  side: String(1,20) with {
    briefly "Side"
    described as {
      |Team side.
    }
  }
} with {
  briefly "Match team"
  described as {
    |Team in a match.
  }
}
type ServerAssignment is {
  serverId: ServerId with {
    briefly "Server"
    described as {
      |Game server.
    }
  }
  region: String(1,50) with {
    briefly "Region"
    described as {
      |Server region.
    }
  }
  address: String(1,200) with {
    briefly "Address"
    described as {
      |Server address.
    }
  }
  port: Natural with {
    briefly "Port"
    described as {
      |Server port.
    }
  }
  capacity: Natural with {
    briefly "Capacity"
    described as {
      |Player capacity.
    }
  }
} with {
  briefly "Server assignment"
  described as {
    |Assigned game server.
  }
}
type MatchResult is {
  winningTeam: UUID? with {
    briefly "Winner"
    described as {
      |Winning team.
    }
  }
  duration: Duration with {
    briefly "Duration"
    described as {
      |Match duration.
    }
  }
  playerStats: PlayerStats+ with {
    briefly "Stats"
    described as {
      |Player statistics.
    }
  }
} with {
  briefly "Match result"
  described as {
    |Match outcome details.
  }
}
type PlayerStats is {
  playerId: PlayerId with {
    briefly "Player"
    described as {
      |Player ID.
    }
  }
  score: Natural with {
    briefly "Score"
    described as {
      |Player score.
    }
  }
  kills: Natural with {
    briefly "Kills"
    described as {
      |Kill count.
    }
  }
  deaths: Natural with {
    briefly "Deaths"
    described as {
      |Death count.
    }
  }
  assists: Natural with {
    briefly "Assists"
    described as {
      |Assist count.
    }
  }
  ratingChange: Decimal(6,2) with {
    briefly "Rating change"
    described as {
      |MMR change.
    }
  }
} with {
  briefly "Player stats"
  described as {
    |Player match statistics.
  }
}
