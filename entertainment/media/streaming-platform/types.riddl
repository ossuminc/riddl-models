// Streaming Platform - Shared Types

type StreamId is Id(StreamContext.Stream) with {
  briefly "Stream identifier"
  described by "Unique identifier for a streaming session."
}

type ContentId is UUID with {
  briefly "Content identifier"
  described by "Reference to streamable content."
}

type SubscriberId is UUID with {
  briefly "Subscriber identifier"
  described by "Reference to a subscriber."
}

type DeviceId is UUID with {
  briefly "Device identifier"
  described by "Reference to a playback device."
}

type ProfileId is UUID with {
  briefly "Profile identifier"
  described by "Reference to a user profile."
}

type StreamQuality is any of {
  Auto,
  Low,
  Medium,
  High,
  UltraHD,
  FourK
} with {
  briefly "Stream quality"
  described by "Video/audio quality level."
}

type StreamStatus is any of {
  Initializing,
  Buffering,
  Playing,
  Paused,
  Seeking,
  Ended,
  Error
} with {
  briefly "Stream status"
  described by "Current playback status."
}

type DeviceType is any of {
  WebBrowser,
  MobileApp,
  SmartTV,
  StreamingDevice,
  GameConsole,
  Desktop
} with {
  briefly "Device type"
  described by "Type of playback device."
}

type ContentType is any of {
  Movie,
  TvSeries,
  Episode,
  Documentary,
  LiveEvent,
  Music,
  Podcast
} with {
  briefly "Content type"
  described by "Type of streaming content."
}

type StreamingContent is {
  contentId is ContentId with {
    briefly "Content ID"
    described by "Content identifier."
  }
  title is String(1, 300) with {
    briefly "Title"
    described by "Content title."
  }
  contentType is ContentType with {
    briefly "Type"
    described by "Content type."
  }
  duration is Duration with {
    briefly "Duration"
    described by "Content length."
  }
  streamUrl is URL with {
    briefly "Stream URL"
    described by "Playback URL."
  }
  thumbnailUrl is URL with {
    briefly "Thumbnail"
    described by "Thumbnail URL."
  }
} with {
  briefly "Streaming content"
  described by "Content available for streaming."
}

type PlaybackDevice is {
  deviceId is DeviceId with {
    briefly "Device ID"
    described by "Device identifier."
  }
  deviceType is DeviceType with {
    briefly "Type"
    described by "Device type."
  }
  deviceName is String(1, 100) with {
    briefly "Name"
    described by "Device name."
  }
  maxQuality is StreamQuality with {
    briefly "Max quality"
    described by "Maximum supported quality."
  }
  lastUsedAt is optional TimeStamp with {
    briefly "Last used"
    described by "Last activity time."
  }
} with {
  briefly "Playback device"
  described by "Device used for streaming."
}

type ViewingProgress is {
  contentId is ContentId with {
    briefly "Content"
    described by "Content ID."
  }
  position is Duration with {
    briefly "Position"
    described by "Current position."
  }
  duration is Duration with {
    briefly "Duration"
    described by "Total duration."
  }
  percentComplete is Decimal(5, 2) with {
    briefly "Percent"
    described by "Completion percentage."
  }
  lastWatchedAt is TimeStamp with {
    briefly "Last watched"
    described by "Last viewing time."
  }
} with {
  briefly "Viewing progress"
  described by "Content watching progress."
}

type StreamMetrics is {
  bitrate is Natural with {
    briefly "Bitrate"
    described by "Current bitrate."
  }
  bufferedSeconds is Natural with {
    briefly "Buffered"
    described by "Buffer length."
  }
  rebufferCount is Natural with {
    briefly "Rebuffers"
    described by "Rebuffering events."
  }
  droppedFrames is Natural with {
    briefly "Dropped"
    described by "Dropped frames."
  }
  latency is Duration with {
    briefly "Latency"
    described by "Stream latency."
  }
} with {
  briefly "Stream metrics"
  described by "Playback quality metrics."
}

type WatchlistItem is {
  contentId is ContentId with {
    briefly "Content"
    described by "Content ID."
  }
  addedAt is TimeStamp with {
    briefly "Added"
    described by "Addition time."
  }
  priority is Natural with {
    briefly "Priority"
    described by "Watch priority."
  }
} with {
  briefly "Watchlist item"
  described by "Item in user watchlist."
}

type Recommendation is {
  contentId is ContentId with {
    briefly "Content"
    described by "Recommended content."
  }
  score is Decimal(5, 4) with {
    briefly "Score"
    described by "Recommendation score."
  }
  reason is String(1, 200) with {
    briefly "Reason"
    described by "Recommendation reason."
  }
} with {
  briefly "Recommendation"
  described by "Content recommendation."
}
