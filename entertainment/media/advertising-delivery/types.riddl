// Advertising Delivery - Shared Types
type ImpressionId is Id(AdContext.AdImpression)  with {
  briefly "Impression identifier"
  described as {
    |Unique identifier for an ad impression.
  }
}
type AdUnitId is UUID with {
  briefly "Ad unit identifier"
  described as {
    |Reference to an ad creative.
  }
}
type CampaignId is UUID with {
  briefly "Campaign identifier"
  described as {
    |Reference to an ad campaign.
  }
}
type PlacementId is UUID with {
  briefly "Placement identifier"
  described as {
    |Reference to an ad placement.
  }
}
type AdvertiserId is UUID with {
  briefly "Advertiser identifier"
  described as {
    |Reference to an advertiser.
  }
}
type ViewerId is UUID with {
  briefly "Viewer identifier"
  described as {
    |Reference to a viewer.
  }
}
type AdFormat is any of {
  PreRoll,
  MidRoll,
  PostRoll,
  Banner,
  Overlay,
  Interactive,
  Native,
  Audio
} with {
  briefly "Ad format"
  described as {
    |Type of advertisement format.
  }
}
type AdStatus is any of {
  Requested,
  Served,
  Started,
  Completed,
  Skipped,
  Clicked,
  Failed
} with {
  briefly "Ad status"
  described as {
    |Current ad delivery status.
  }
}
type TargetingType is any of {
  Demographic,
  Geographic,
  Behavioral,
  Contextual,
  Retargeting,
  Interest
} with {
  briefly "Targeting type"
  described as {
    |Type of audience targeting.
  }
}
type AdUnit is {
  adUnitId: AdUnitId with {
    briefly "Ad unit ID"
    described as {
      |Ad unit identifier.
    }
  }
  campaignId: CampaignId with {
    briefly "Campaign"
    described as {
      |Parent campaign.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Ad name.
    }
  }
  format: AdFormat with {
    briefly "Format"
    described as {
      |Ad format.
    }
  }
  duration: Duration? with {
    briefly "Duration"
    described as {
      |Ad length.
    }
  }
  creativeUrl: URL with {
    briefly "Creative"
    described as {
      |Ad creative URL.
    }
  }
  clickUrl: URL with {
    briefly "Click URL"
    described as {
      |Click destination.
    }
  }
  advertiserId: AdvertiserId with {
    briefly "Advertiser"
    described as {
      |Advertising company.
    }
  }
} with {
  briefly "Ad unit"
  described as {
    |Advertisement creative.
  }
}
type AdPlacement is {
  placementId: PlacementId with {
    briefly "Placement ID"
    described as {
      |Placement identifier.
    }
  }
  name: String(1,100) with {
    briefly "Name"
    described as {
      |Placement name.
    }
  }
  format: AdFormat with {
    briefly "Format"
    described as {
      |Allowed format.
    }
  }
  position: String(1,50) with {
    briefly "Position"
    described as {
      |Ad position.
    }
  }
  minBid: Decimal(10,4) with {
    briefly "Min bid"
    described as {
      |Minimum bid price.
    }
  }
} with {
  briefly "Ad placement"
  described as {
    |Inventory placement slot.
  }
}
type TargetingCriteria is {
  targetingType: TargetingType with {
    briefly "Type"
    described as {
      |Targeting type.
    }
  }
  targetingRules: String(1,1000) with {
    briefly "Criteria"
    described as {
      |Targeting rules.
    }
  }
  segments: String(1,100)+ with {
    briefly "Segments"
    described as {
      |Target segments.
    }
  }
} with {
  briefly "Targeting criteria"
  described as {
    |Audience targeting rules.
  }
}
type ViewerContext is {
  viewerId: ViewerId with {
    briefly "Viewer"
    described as {
      |Viewer ID.
    }
  }
  deviceType: String(1,50) with {
    briefly "Device"
    described as {
      |Device type.
    }
  }
  platform: String(1,50) with {
    briefly "Platform"
    described as {
      |Viewing platform.
    }
  }
  contentId: UUID with {
    briefly "Content"
    described as {
      |Viewing content.
    }
  }
  geography: String(1,100) with {
    briefly "Geography"
    described as {
      |Viewer location.
    }
  }
  viewerSegments: String(1,100)* with {
    briefly "Segments"
    described as {
      |Viewer segments.
    }
  }
} with {
  briefly "Viewer context"
  described as {
    |Viewer targeting context.
  }
}
type ImpressionMetrics is {
  viewTime: Duration with {
    briefly "View time"
    described as {
      |Time ad was viewed.
    }
  }
  percentViewed: Decimal(5,2) with {
    briefly "Percent"
    described as {
      |Percent of ad viewed.
    }
  }
  quartile: Natural with {
    briefly "Quartile"
    described as {
      |Highest quartile reached.
    }
  }
  muted: Boolean with {
    briefly "Muted"
    described as {
      |Was audio muted.
    }
  }
  fullscreen: Boolean with {
    briefly "Fullscreen"
    described as {
      |Was in fullscreen.
    }
  }
} with {
  briefly "Impression metrics"
  described as {
    |Ad viewing metrics.
  }
}
type BidResponse is {
  bidId: UUID with {
    briefly "Bid ID"
    described as {
      |Bid identifier.
    }
  }
  adUnitId: AdUnitId with {
    briefly "Ad unit"
    described as {
      |Bid ad unit.
    }
  }
  bidPrice: Decimal(10,6) with {
    briefly "Price"
    described as {
      |Bid price.
    }
  }
  currency: String(1,3) with {
    briefly "Currency"
    described as {
      |Bid currency.
    }
  }
} with {
  briefly "Bid response"
  described as {
    |RTB bid response.
  }
}
