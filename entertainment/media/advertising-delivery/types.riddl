// Advertising Delivery - Shared Types

type ImpressionId is Id(AdContext.AdImpression) with {
  briefly "Impression identifier"
  described by "Unique identifier for an ad impression."
}

type AdUnitId is UUID with {
  briefly "Ad unit identifier"
  described by "Reference to an ad creative."
}

type CampaignId is UUID with {
  briefly "Campaign identifier"
  described by "Reference to an ad campaign."
}

type PlacementId is UUID with {
  briefly "Placement identifier"
  described by "Reference to an ad placement."
}

type AdvertiserId is UUID with {
  briefly "Advertiser identifier"
  described by "Reference to an advertiser."
}

type ViewerId is UUID with {
  briefly "Viewer identifier"
  described by "Reference to a viewer."
}

type AdFormat is any of {
  PreRoll,
  MidRoll,
  PostRoll,
  Banner,
  Overlay,
  Interactive,
  Native,
  Audio
} with {
  briefly "Ad format"
  described by "Type of advertisement format."
}

type AdStatus is any of {
  Requested,
  Served,
  Started,
  Completed,
  Skipped,
  Clicked,
  Failed
} with {
  briefly "Ad status"
  described by "Current ad delivery status."
}

type TargetingType is any of {
  Demographic,
  Geographic,
  Behavioral,
  Contextual,
  Retargeting,
  Interest
} with {
  briefly "Targeting type"
  described by "Type of audience targeting."
}

type AdUnit is {
  adUnitId is AdUnitId with {
    briefly "Ad unit ID"
    described by "Ad unit identifier."
  }
  campaignId is CampaignId with {
    briefly "Campaign"
    described by "Parent campaign."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Ad name."
  }
  format is AdFormat with {
    briefly "Format"
    described by "Ad format."
  }
  duration is optional Duration with {
    briefly "Duration"
    described by "Ad length."
  }
  creativeUrl is URL with {
    briefly "Creative"
    described by "Ad creative URL."
  }
  clickUrl is URL with {
    briefly "Click URL"
    described by "Click destination."
  }
  advertiserId is AdvertiserId with {
    briefly "Advertiser"
    described by "Advertising company."
  }
} with {
  briefly "Ad unit"
  described by "Advertisement creative."
}

type AdPlacement is {
  placementId is PlacementId with {
    briefly "Placement ID"
    described by "Placement identifier."
  }
  name is String(1, 100) with {
    briefly "Name"
    described by "Placement name."
  }
  format is AdFormat with {
    briefly "Format"
    described by "Allowed format."
  }
  position is String(1, 50) with {
    briefly "Position"
    described by "Ad position."
  }
  minBid is Decimal(10, 4) with {
    briefly "Min bid"
    described by "Minimum bid price."
  }
} with {
  briefly "Ad placement"
  described by "Inventory placement slot."
}

type TargetingCriteria is {
  targetingType is TargetingType with {
    briefly "Type"
    described by "Targeting type."
  }
  criteria is String(1, 1000) with {
    briefly "Criteria"
    described by "Targeting rules."
  }
  segments is many String(1, 100) with {
    briefly "Segments"
    described by "Target segments."
  }
} with {
  briefly "Targeting criteria"
  described by "Audience targeting rules."
}

type ViewerContext is {
  viewerId is ViewerId with {
    briefly "Viewer"
    described by "Viewer ID."
  }
  deviceType is String(1, 50) with {
    briefly "Device"
    described by "Device type."
  }
  platform is String(1, 50) with {
    briefly "Platform"
    described by "Viewing platform."
  }
  contentId is UUID with {
    briefly "Content"
    described by "Viewing content."
  }
  geography is String(1, 100) with {
    briefly "Geography"
    described by "Viewer location."
  }
  segments is many optional String(1, 100) with {
    briefly "Segments"
    described by "Viewer segments."
  }
} with {
  briefly "Viewer context"
  described by "Viewer targeting context."
}

type ImpressionMetrics is {
  viewTime is Duration with {
    briefly "View time"
    described by "Time ad was viewed."
  }
  percentViewed is Decimal(5, 2) with {
    briefly "Percent"
    described by "Percent of ad viewed."
  }
  quartile is Natural with {
    briefly "Quartile"
    described by "Highest quartile reached."
  }
  muted is Boolean with {
    briefly "Muted"
    described by "Was audio muted."
  }
  fullscreen is Boolean with {
    briefly "Fullscreen"
    described by "Was in fullscreen."
  }
} with {
  briefly "Impression metrics"
  described by "Ad viewing metrics."
}

type BidResponse is {
  bidId is UUID with {
    briefly "Bid ID"
    described by "Bid identifier."
  }
  adUnitId is AdUnitId with {
    briefly "Ad unit"
    described by "Bid ad unit."
  }
  bidPrice is Decimal(10, 6) with {
    briefly "Price"
    described by "Bid price."
  }
  currency is String(1, 3) with {
    briefly "Currency"
    described by "Bid currency."
  }
} with {
  briefly "Bid response"
  described by "RTB bid response."
}
