// Design Review - Shared Types

type ReviewId is Id(ReviewContext.Review) with {
  briefly "Review identifier"
  described by "Unique identifier for a design review."
}

type DesignId is UUID with {
  briefly "Design identifier"
  described by "Reference to a design document."
}

type ProjectId is UUID with {
  briefly "Project identifier"
  described by "Reference to an engineering project."
}

type EngineerId is UUID with {
  briefly "Engineer identifier"
  described by "Reference to an engineer."
}

type ReviewType is any of {
  PreliminaryDesign,
  CriticalDesign,
  FinalDesign,
  ChangeRequest,
  TechnicalReview,
  SafetyReview,
  QualityReview
} with {
  briefly "Review type"
  described by "Type of design review."
}

type ReviewStatus is any of {
  Draft,
  Submitted,
  UnderReview,
  NeedsRevision,
  Approved,
  Rejected,
  Cancelled
} with {
  briefly "Review status"
  described by "Current review status."
}

type ReviewOutcome is any of {
  Approved,
  ApprovedWithConditions,
  NeedsRevision,
  Rejected,
  Deferred
} with {
  briefly "Review outcome"
  described by "Final review decision."
}

type CommentType is any of {
  Question,
  Concern,
  Suggestion,
  Required,
  Information
} with {
  briefly "Comment type"
  described by "Type of review comment."
}

type CommentPriority is any of {
  Critical,
  High,
  Medium,
  Low
} with {
  briefly "Comment priority"
  described by "Priority of review comment."
}

type CommentStatus is any of {
  Open,
  Addressed,
  Accepted,
  Rejected,
  Deferred
} with {
  briefly "Comment status"
  described by "Status of review comment."
}

type ReviewInfo is {
  title is String(1, 200) with {
    briefly "Title"
    described by "Review title."
  }
  description is String(1, 2000) with {
    briefly "Description"
    described by "Review description."
  }
  reviewType is ReviewType with {
    briefly "Type"
    described by "Review type."
  }
  projectId is ProjectId with {
    briefly "Project"
    described by "Parent project."
  }
  designId is DesignId with {
    briefly "Design"
    described by "Design under review."
  }
  submittedBy is EngineerId with {
    briefly "Submitter"
    described by "Submitting engineer."
  }
  designVersion is String(1, 50) with {
    briefly "Version"
    described by "Design version."
  }
  scheduledDate is optional Date with {
    briefly "Scheduled"
    described by "Scheduled review date."
  }
} with {
  briefly "Review information"
  described by "Core design review details."
}

type ReviewerAssignment is {
  reviewerId is EngineerId with {
    briefly "Reviewer"
    described by "Assigned reviewer."
  }
  role is String(1, 100) with {
    briefly "Role"
    described by "Reviewer role."
  }
  required is Boolean with {
    briefly "Required"
    described by "Required reviewer."
  }
  assignedAt is TimeStamp with {
    briefly "Assigned"
    described by "Assignment time."
  }
  completedAt is optional TimeStamp with {
    briefly "Completed"
    described by "Completion time."
  }
} with {
  briefly "Reviewer assignment"
  described by "Assigned reviewer details."
}

type ReviewComment is {
  commentId is UUID with {
    briefly "Comment ID"
    described by "Comment identifier."
  }
  reviewerId is EngineerId with {
    briefly "Reviewer"
    described by "Commenting reviewer."
  }
  commentType is CommentType with {
    briefly "Type"
    described by "Comment type."
  }
  priority is CommentPriority with {
    briefly "Priority"
    described by "Comment priority."
  }
  status is CommentStatus with {
    briefly "Status"
    described by "Comment status."
  }
  content is String(1, 2000) with {
    briefly "Content"
    described by "Comment content."
  }
  section is optional String(1, 200) with {
    briefly "Section"
    described by "Design section referenced."
  }
  engineerResponse is optional String(1, 2000) with {
    briefly "Response"
    described by "Engineer response."
  }
  createdAt is TimeStamp with {
    briefly "Created"
    described by "Creation time."
  }
} with {
  briefly "Review comment"
  described by "Comment from reviewer."
}

type ReviewDecision is {
  decisionId is UUID with {
    briefly "Decision ID"
    described by "Decision identifier."
  }
  reviewerId is EngineerId with {
    briefly "Reviewer"
    described by "Deciding reviewer."
  }
  outcome is ReviewOutcome with {
    briefly "Outcome"
    described by "Review outcome."
  }
  conditions is many optional String(1, 500) with {
    briefly "Conditions"
    described by "Approval conditions."
  }
  rationale is String(1, 2000) with {
    briefly "Rationale"
    described by "Decision rationale."
  }
  decidedAt is TimeStamp with {
    briefly "Decided"
    described by "Decision time."
  }
} with {
  briefly "Review decision"
  described by "Reviewer decision details."
}

type ActionItem is {
  itemId is UUID with {
    briefly "Item ID"
    described by "Action item identifier."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Action description."
  }
  assignedTo is EngineerId with {
    briefly "Assigned to"
    described by "Responsible engineer."
  }
  dueDate is Date with {
    briefly "Due"
    described by "Due date."
  }
  completed is Boolean with {
    briefly "Completed"
    described by "Completion status."
  }
  completedAt is optional TimeStamp with {
    briefly "Completed at"
    described by "Completion time."
  }
} with {
  briefly "Action item"
  described by "Review action item."
}

type DesignDocument is {
  documentId is UUID with {
    briefly "Document ID"
    described by "Document identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Document name."
  }
  documentType is String(1, 50) with {
    briefly "Type"
    described by "Document type."
  }
  version is String(1, 50) with {
    briefly "Version"
    described by "Document version."
  }
  url is URL with {
    briefly "URL"
    described by "Document location."
  }
} with {
  briefly "Design document"
  described by "Supporting design document."
}
