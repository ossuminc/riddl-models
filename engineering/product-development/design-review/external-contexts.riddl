// Design Review - External Contexts
// Document Management Service
context DocumentService is {
  command UploadDocument is  {
    documentId: UUID with {
      briefly "Document"
      described as {
        |Document ID.
      }
    }
    name: String(1,200) with {
      briefly "Name"
      described as {
        |Document name.
      }
    }
    documentType: String(1,50) with {
      briefly "Type"
      described as {
        |Document type.
      }
    }
    content: String(1,50000) with {
      briefly "Content"
      described as {
        |Document content.
      }
    }
  } with {
    briefly "Upload document"
    described as {
      |Uploads a design document.
    }
  }
  event DocumentUploaded is  {
    documentId: UUID with {
      briefly "Document"
      described as {
        |Document ID.
      }
    }
    url: URL with {
      briefly "URL"
      described as {
        |Document URL.
      }
    }
    uploadedAt: TimeStamp with {
      briefly "Uploaded"
      described as {
        |Upload time.
      }
    }
  } with {
    briefly "Document was uploaded"
    described as {
      |Emitted when document is uploaded.
    }
  }
} with {
  option external()
  briefly "External document service"
  described as {
    |External document management system.
  }
}
// PLM Integration Service
context PLMService is {
  event DesignUpdated is  {
    plmDesignId: UUID with {
      briefly "Design"
      described as {
        |Design ID.
      }
    }
    version: String(1,50) with {
      briefly "Version"
      described as {
        |Design version.
      }
    }
    updatedAt: TimeStamp with {
      briefly "Updated"
      described as {
        |Update time.
      }
    }
  } with {
    briefly "Design was updated"
    described as {
      |Emitted when design changes in PLM.
    }
  }
  event DesignReleased is  {
    plmDesignId: UUID with {
      briefly "Design"
      described as {
        |Design ID.
      }
    }
    version: String(1,50) with {
      briefly "Version"
      described as {
        |Release version.
      }
    }
    releasedAt: TimeStamp with {
      briefly "Released"
      described as {
        |Release time.
      }
    }
  } with {
    briefly "Design was released"
    described as {
      |Emitted when design is released.
    }
  }
} with {
  option external()
  briefly "External PLM service"
  described as {
    |External product lifecycle management system.
  }
}
// User Directory Service
context UserDirectoryService is {
  query GetReviewers is  {
    lookupProjectId: UUID with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    discipline: String(1,100) with {
      briefly "Discipline"
      described as {
        |Engineering discipline.
      }
    }
  } with {
    briefly "Get reviewers"
    described as {
      |Retrieves available reviewers.
    }
  }
  result ReviewerList is  {
    availableReviewers: EngineerId+ with {
      briefly "Reviewers"
      described as {
        |Available reviewers.
      }
    }
  } with {
    briefly "Reviewer list"
    described as {
      |List of available reviewers.
    }
  }
} with {
  option external()
  briefly "External user directory"
  described as {
    |External user directory service.
  }
}
// Notification Service
context NotificationService is {
  command SendReviewNotification is  {
    reviewId: ReviewId with {
      briefly "Review"
      described as {
        |Review ID.
      }
    }
    recipients: EngineerId+ with {
      briefly "Recipients"
      described as {
        |Notification recipients.
      }
    }
    notificationType: String(1,50) with {
      briefly "Type"
      described as {
        |Notification type.
      }
    }
    message: String(1,1000) with {
      briefly "Message"
      described as {
        |Notification message.
      }
    }
  } with {
    briefly "Send notification"
    described as {
      |Sends review notification.
    }
  }
  event NotificationSent is  {
    notificationId: UUID with {
      briefly "Notification"
      described as {
        |Notification ID.
      }
    }
    sentAt: TimeStamp with {
      briefly "Sent"
      described as {
        |Send time.
      }
    }
  } with {
    briefly "Notification was sent"
    described as {
      |Emitted when notification is delivered.
    }
  }
} with {
  option external()
  briefly "External notification service"
  described as {
    |External communications service.
  }
}
// Workflow Service
context WorkflowService is {
  command TriggerApprovalWorkflow is  {
    reviewId: ReviewId with {
      briefly "Review"
      described as {
        |Review ID.
      }
    }
    workflowType: String(1,50) with {
      briefly "Workflow"
      described as {
        |Workflow type.
      }
    }
    approvers: EngineerId+ with {
      briefly "Approvers"
      described as {
        |Required approvers.
      }
    }
  } with {
    briefly "Trigger workflow"
    described as {
      |Triggers approval workflow.
    }
  }
  event WorkflowCompleted is  {
    workflowId: UUID with {
      briefly "Workflow"
      described as {
        |Workflow ID.
      }
    }
    workflowOutcome: String(1,50) with {
      briefly "Outcome"
      described as {
        |Workflow outcome.
      }
    }
    workflowCompletedAt: TimeStamp with {
      briefly "Completed"
      described as {
        |Completion time.
      }
    }
  } with {
    briefly "Workflow was completed"
    described as {
      |Emitted when workflow completes.
    }
  }
} with {
  option external()
  briefly "External workflow service"
  described as {
    |External workflow automation system.
  }
}
