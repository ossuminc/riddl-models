// Design Review - External Contexts

// Document Management Service
context DocumentService is {

  command UploadDocument is {
    documentId is UUID with { briefly "Document" described by "Document ID." }
    name is String(1, 200) with { briefly "Name" described by "Document name." }
    documentType is String(1, 50) with { briefly "Type" described by "Document type." }
    content is String(1, 50000) with { briefly "Content" described by "Document content." }
  } with {
    briefly "Upload document"
    described by "Uploads a design document."
  }

  event DocumentUploaded is {
    documentId is UUID with { briefly "Document" described by "Document ID." }
    url is URL with { briefly "URL" described by "Document URL." }
    uploadedAt is TimeStamp with { briefly "Uploaded" described by "Upload time." }
  } with {
    briefly "Document was uploaded"
    described by "Emitted when document is uploaded."
  }

} with {
  option is external
  briefly "External document service"
  described by "External document management system."
}

// PLM Integration Service
context PLMService is {

  event DesignUpdated is {
    plmDesignId is UUID with { briefly "Design" described by "Design ID." }
    version is String(1, 50) with { briefly "Version" described by "Design version." }
    updatedAt is TimeStamp with { briefly "Updated" described by "Update time." }
  } with {
    briefly "Design was updated"
    described by "Emitted when design changes in PLM."
  }

  event DesignReleased is {
    plmDesignId is UUID with { briefly "Design" described by "Design ID." }
    version is String(1, 50) with { briefly "Version" described by "Release version." }
    releasedAt is TimeStamp with { briefly "Released" described by "Release time." }
  } with {
    briefly "Design was released"
    described by "Emitted when design is released."
  }

} with {
  option is external
  briefly "External PLM service"
  described by "External product lifecycle management system."
}

// User Directory Service
context UserDirectoryService is {

  query GetReviewers is {
    lookupProjectId is UUID with { briefly "Project" described by "Project ID." }
    discipline is String(1, 100) with { briefly "Discipline" described by "Engineering discipline." }
  } with {
    briefly "Get reviewers"
    described by "Retrieves available reviewers."
  }

  result ReviewerList is {
    availableReviewers is many EngineerId with { briefly "Reviewers" described by "Available reviewers." }
  } with {
    briefly "Reviewer list"
    described by "List of available reviewers."
  }

} with {
  option is external
  briefly "External user directory"
  described by "External user directory service."
}

// Notification Service
context NotificationService is {

  command SendReviewNotification is {
    reviewId is ReviewId with { briefly "Review" described by "Review ID." }
    recipients is many EngineerId with { briefly "Recipients" described by "Notification recipients." }
    notificationType is String(1, 50) with { briefly "Type" described by "Notification type." }
    message is String(1, 1000) with { briefly "Message" described by "Notification message." }
  } with {
    briefly "Send notification"
    described by "Sends review notification."
  }

  event NotificationSent is {
    notificationId is UUID with { briefly "Notification" described by "Notification ID." }
    sentAt is TimeStamp with { briefly "Sent" described by "Send time." }
  } with {
    briefly "Notification was sent"
    described by "Emitted when notification is delivered."
  }

} with {
  option is external
  briefly "External notification service"
  described by "External communications service."
}

// Workflow Service
context WorkflowService is {

  command TriggerApprovalWorkflow is {
    reviewId is ReviewId with { briefly "Review" described by "Review ID." }
    workflowType is String(1, 50) with { briefly "Workflow" described by "Workflow type." }
    approvers is many EngineerId with { briefly "Approvers" described by "Required approvers." }
  } with {
    briefly "Trigger workflow"
    described by "Triggers approval workflow."
  }

  event WorkflowCompleted is {
    workflowId is UUID with { briefly "Workflow" described by "Workflow ID." }
    workflowOutcome is String(1, 50) with { briefly "Outcome" described by "Workflow outcome." }
    workflowCompletedAt is TimeStamp with { briefly "Completed" described by "Completion time." }
  } with {
    briefly "Workflow was completed"
    described by "Emitted when workflow completes."
  }

} with {
  option is external
  briefly "External workflow service"
  described by "External workflow automation system."
}
