// Design Review - External Contexts
// Document Storage Service
context DocumentStorage is {
  command StoreDocument is  {
    submittalId: SubmittalId with {
      briefly "Submittal"
      described as {
        |Submittal ID.
      }
    }
    name: String(1,300) with {
      briefly "Name"
      described as {
        |Document name.
      }
    }
    content: String(1,50000) with {
      briefly "Content"
      described as {
        |Document content.
      }
    }
  } with {
    briefly "Store document"
    described as {
      |Stores a design document.
    }
  }
  event DocumentStored is  {
    documentId: UUID with {
      briefly "Document"
      described as {
        |Document ID.
      }
    }
    url: URL with {
      briefly "URL"
      described as {
        |Document URL.
      }
    }
    storedAt: TimeStamp with {
      briefly "Stored"
      described as {
        |Storage time.
      }
    }
  } with {
    briefly "Document was stored"
    described as {
      |Emitted when a document is stored.
    }
  }
} with {
  option external()
  briefly "External document storage"
  described as {
    |External document management and storage system.
  }
}
// Project Management Service
context ProjectService is {
  query GetProjectInfo is  {
    projectId: UUID with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
  } with {
    briefly "Get project info"
    described as {
      |Retrieves project details.
    }
  }
  result ProjectDetails is  {
    projectId: UUID with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    name: String(1,200) with {
      briefly "Name"
      described as {
        |Project name.
      }
    }
  } with {
    briefly "Project details"
    described as {
      |Project information result.
    }
  }
} with {
  option external()
  briefly "External project service"
  described as {
    |External project management system.
  }
}
// Notification Service
context NotificationService is {
  command SendReviewNotification is  {
    submittalId: SubmittalId with {
      briefly "Submittal"
      described as {
        |Submittal ID.
      }
    }
    recipients: ReviewerId+ with {
      briefly "Recipients"
      described as {
        |Notification recipients.
      }
    }
    notificationType: String(1,50) with {
      briefly "Type"
      described as {
        |Notification type.
      }
    }
    message: String(1,1000) with {
      briefly "Message"
      described as {
        |Notification message.
      }
    }
  } with {
    briefly "Send notification"
    described as {
      |Sends a review notification.
    }
  }
  event NotificationSent is  {
    notificationId: UUID with {
      briefly "Notification"
      described as {
        |Notification ID.
      }
    }
    sentAt: TimeStamp with {
      briefly "Sent"
      described as {
        |Send time.
      }
    }
  } with {
    briefly "Notification was sent"
    described as {
      |Emitted when notification is delivered.
    }
  }
} with {
  option external()
  briefly "External notification service"
  described as {
    |External communications and notification service.
  }
}
// Identity Service
context IdentityService is {
  query GetReviewerInfo is  {
    reviewerId: ReviewerId with {
      briefly "Reviewer"
      described as {
        |Reviewer ID.
      }
    }
  } with {
    briefly "Get reviewer info"
    described as {
      |Retrieves reviewer details.
    }
  }
  result ReviewerDetails is  {
    reviewerId: ReviewerId with {
      briefly "Reviewer"
      described as {
        |Reviewer ID.
      }
    }
    name: String(1,200) with {
      briefly "Name"
      described as {
        |Reviewer name.
      }
    }
    discipline: DesignDiscipline with {
      briefly "Discipline"
      described as {
        |Reviewer discipline.
      }
    }
  } with {
    briefly "Reviewer details"
    described as {
      |Reviewer information result.
    }
  }
} with {
  option external()
  briefly "External identity service"
  described as {
    |External identity and user management system.
  }
}
