// Design Review - Shared Types
type SubmittalId is Id(DesignReviewContext.Submittal)  with {
  briefly "Submittal identifier"
  described as {
    |Unique identifier for a design submittal.
  }
}
type ReviewId is UUID with {
  briefly "Review identifier"
  described as {
    |Reference to a design review.
  }
}
type RevisionId is UUID with {
  briefly "Revision identifier"
  described as {
    |Reference to a document revision.
  }
}
type CommentId is UUID with {
  briefly "Comment identifier"
  described as {
    |Reference to a review comment.
  }
}
type ReviewerId is UUID with {
  briefly "Reviewer identifier"
  described as {
    |Reference to a reviewer.
  }
}
type ApprovalId is UUID with {
  briefly "Approval identifier"
  described as {
    |Reference to an approval record.
  }
}
type MilestoneId is UUID with {
  briefly "Milestone identifier"
  described as {
    |Reference to a design milestone.
  }
}
type SubmittalStatus is any of {
  Draft,
  Submitted,
  InReview,
  RevisionRequested,
  Approved,
  Rejected,
  Withdrawn
} with {
  briefly "Submittal status"
  described as {
    |Current status of a design submittal.
  }
}
type ReviewOutcome is any of {
  Approved,
  ConditionallyApproved,
  RevisionRequired,
  Rejected
} with {
  briefly "Review outcome"
  described as {
    |Result of a design review evaluation.
  }
}
type CommentSeverity is any of {
  Critical,
  Major,
  Minor,
  Informational
} with {
  briefly "Comment severity"
  described as {
    |Severity level of a review comment.
  }
}
type CommentStatus is any of {
  Open,
  Acknowledged,
  Resolved,
  WontFix
} with {
  briefly "Comment status"
  described as {
    |Resolution status of a review comment.
  }
}
type DesignDiscipline is any of {
  Architectural,
  Structural,
  Mechanical,
  Electrical,
  Civil,
  Software,
  Systems
} with {
  briefly "Design discipline"
  described as {
    |Engineering discipline of the design.
  }
}
type SubmittalInfo is {
  title: String(1,300) with {
    briefly "Title"
    described as {
      |Submittal title.
    }
  }
  description: String(1,2000) with {
    briefly "Description"
    described as {
      |Submittal description.
    }
  }
  discipline: DesignDiscipline with {
    briefly "Discipline"
    described as {
      |Engineering discipline.
    }
  }
  projectId: UUID with {
    briefly "Project"
    described as {
      |Associated project identifier.
    }
  }
  submittedBy: ReviewerId with {
    briefly "Submitter"
    described as {
      |Person who submitted the design.
    }
  }
  documentUrl: URL with {
    briefly "Document"
    described as {
      |URL to the design document.
    }
  }
  dueDate: Date with {
    briefly "Due date"
    described as {
      |Review due date.
    }
  }
} with {
  briefly "Submittal information"
  described as {
    |Core details of a design submittal.
  }
}
type RevisionInfo is {
  revisionId: RevisionId with {
    briefly "Revision ID"
    described as {
      |Revision identifier.
    }
  }
  revisionNumber: Natural with {
    briefly "Number"
    described as {
      |Sequential revision number.
    }
  }
  documentUrl: URL with {
    briefly "Document"
    described as {
      |URL to the revised document.
    }
  }
  changeDescription: String(1,2000) with {
    briefly "Changes"
    described as {
      |Description of changes made.
    }
  }
  submittedBy: ReviewerId with {
    briefly "Submitter"
    described as {
      |Person who submitted the revision.
    }
  }
  submittedAt: TimeStamp with {
    briefly "Submitted"
    described as {
      |Revision submission time.
    }
  }
} with {
  briefly "Revision information"
  described as {
    |Details of a design revision.
  }
}
type ReviewComment is {
  commentId: CommentId with {
    briefly "Comment ID"
    described as {
      |Comment identifier.
    }
  }
  reviewerId: ReviewerId with {
    briefly "Reviewer"
    described as {
      |Commenting reviewer.
    }
  }
  severity: CommentSeverity with {
    briefly "Severity"
    described as {
      |Comment severity level.
    }
  }
  status: CommentStatus with {
    briefly "Status"
    described as {
      |Comment resolution status.
    }
  }
  section: String(1,200) with {
    briefly "Section"
    described as {
      |Document section referenced.
    }
  }
  content: String(1,2000) with {
    briefly "Content"
    described as {
      |Comment text.
    }
  }
  commentResolution: String(1,2000)? with {
    briefly "Resolution"
    described as {
      |Resolution description.
    }
  }
  createdAt: TimeStamp with {
    briefly "Created"
    described as {
      |Comment creation time.
    }
  }
} with {
  briefly "Review comment"
  described as {
    |A comment from a reviewer on a design submittal.
  }
}
type ReviewAssignment is {
  reviewId: ReviewId with {
    briefly "Review ID"
    described as {
      |Review identifier.
    }
  }
  reviewerId: ReviewerId with {
    briefly "Reviewer"
    described as {
      |Assigned reviewer.
    }
  }
  role: String(1,100) with {
    briefly "Role"
    described as {
      |Reviewer role in this review.
    }
  }
  assignedAt: TimeStamp with {
    briefly "Assigned"
    described as {
      |Assignment time.
    }
  }
  completedAt: TimeStamp? with {
    briefly "Completed"
    described as {
      |Review completion time.
    }
  }
  reviewerOutcome: ReviewOutcome? with {
    briefly "Outcome"
    described as {
      |Individual reviewer outcome.
    }
  }
  reviewerCommentIds: CommentId+ with {
    briefly "Comments"
    described as {
      |Comments from this reviewer.
    }
  }
} with {
  briefly "Review assignment"
  described as {
    |Assignment of a reviewer to a submittal review.
  }
}
type ApprovalRecord is {
  approvalId: ApprovalId with {
    briefly "Approval ID"
    described as {
      |Approval identifier.
    }
  }
  approverId: ReviewerId with {
    briefly "Approver"
    described as {
      |Person granting approval.
    }
  }
  outcome: ReviewOutcome with {
    briefly "Outcome"
    described as {
      |Approval decision.
    }
  }
  conditions: String(1,500)* with {
    briefly "Conditions"
    described as {
      |Conditions attached to approval.
    }
  }
  approvedAt: TimeStamp with {
    briefly "Approved"
    described as {
      |Approval time.
    }
  }
} with {
  briefly "Approval record"
  described as {
    |Record of a design approval decision.
  }
}
type DesignMilestone is {
  milestoneId: MilestoneId with {
    briefly "Milestone ID"
    described as {
      |Milestone identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Milestone name.
    }
  }
  description: String(1,1000) with {
    briefly "Description"
    described as {
      |Milestone description.
    }
  }
  requiredApprovals: ReviewerId+ with {
    briefly "Required approvers"
    described as {
      |People who must approve for sign-off.
    }
  }
  dueDate: Date with {
    briefly "Due date"
    described as {
      |Milestone due date.
    }
  }
  signedOff: Boolean with {
    briefly "Signed off"
    described as {
      |Whether the milestone is signed off.
    }
  }
  milestoneSignedOffAt: TimeStamp? with {
    briefly "Signed off at"
    described as {
      |Sign-off time.
    }
  }
} with {
  briefly "Design milestone"
  described as {
    |A milestone requiring design sign-off.
  }
}
