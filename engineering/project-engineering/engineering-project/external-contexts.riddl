// Engineering Project - External Contexts
// Resource Management Service
context ResourceService is {
  query GetAvailableResources is  {
    resourceType: ResourceType with {
      briefly "Type"
      described as {
        |Resource type.
      }
    }
    startDate: Date with {
      briefly "Start"
      described as {
        |Availability start.
      }
    }
    endDate: Date with {
      briefly "End"
      described as {
        |Availability end.
      }
    }
  } with {
    briefly "Get resources"
    described as {
      |Retrieves available resources.
    }
  }
  result ResourceAvailability is  {
    availableResources: ResourceId+ with {
      briefly "Resources"
      described as {
        |Available resources.
      }
    }
  } with {
    briefly "Resource availability"
    described as {
      |List of available resources.
    }
  }
} with {
  option external()
  briefly "External resource service"
  described as {
    |External resource management system.
  }
}
// Client Management Service
context ClientService is {
  event ClientUpdated is  {
    clientId: UUID with {
      briefly "Client"
      described as {
        |Client ID.
      }
    }
    updatedAt: TimeStamp with {
      briefly "Updated"
      described as {
        |Update time.
      }
    }
  } with {
    briefly "Client was updated"
    described as {
      |Emitted when client info changes.
    }
  }
} with {
  option external()
  briefly "External client service"
  described as {
    |External client management system.
  }
}
// Billing Service
context BillingService is {
  command CreateInvoice is  {
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    amount: Decimal(15,2) with {
      briefly "Amount"
      described as {
        |Invoice amount.
      }
    }
    description: String(1,500) with {
      briefly "Description"
      described as {
        |Invoice description.
      }
    }
  } with {
    briefly "Create invoice"
    described as {
      |Creates a project invoice.
    }
  }
  event InvoiceCreated is  {
    invoiceId: UUID with {
      briefly "Invoice"
      described as {
        |Invoice ID.
      }
    }
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    createdAt: TimeStamp with {
      briefly "Created"
      described as {
        |Creation time.
      }
    }
  } with {
    briefly "Invoice was created"
    described as {
      |Emitted when invoice is generated.
    }
  }
} with {
  option external()
  briefly "External billing service"
  described as {
    |External billing system.
  }
}
// Document Service
context DocumentService is {
  command StoreDeliverable is  {
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    name: String(1,200) with {
      briefly "Name"
      described as {
        |Document name.
      }
    }
    content: String(1,50000) with {
      briefly "Content"
      described as {
        |Document content.
      }
    }
  } with {
    briefly "Store deliverable"
    described as {
      |Stores a project deliverable.
    }
  }
  event DeliverableStored is  {
    documentId: UUID with {
      briefly "Document"
      described as {
        |Document ID.
      }
    }
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    url: URL with {
      briefly "URL"
      described as {
        |Document URL.
      }
    }
    storedAt: TimeStamp with {
      briefly "Stored"
      described as {
        |Storage time.
      }
    }
  } with {
    briefly "Deliverable was stored"
    described as {
      |Emitted when deliverable is saved.
    }
  }
} with {
  option external()
  briefly "External document service"
  described as {
    |External document management system.
  }
}
// Notification Service
context NotificationService is {
  command SendProjectUpdate is  {
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    recipients: EngineerId+ with {
      briefly "Recipients"
      described as {
        |Update recipients.
      }
    }
    updateType: String(1,50) with {
      briefly "Type"
      described as {
        |Update type.
      }
    }
    message: String(1,1000) with {
      briefly "Message"
      described as {
        |Update message.
      }
    }
  } with {
    briefly "Send update"
    described as {
      |Sends project status update.
    }
  }
  event NotificationSent is  {
    notificationId: UUID with {
      briefly "Notification"
      described as {
        |Notification ID.
      }
    }
    sentAt: TimeStamp with {
      briefly "Sent"
      described as {
        |Send time.
      }
    }
  } with {
    briefly "Notification was sent"
    described as {
      |Emitted when notification is delivered.
    }
  }
} with {
  option external()
  briefly "External notification service"
  described as {
    |External communications service.
  }
}
// Calendar Service
context CalendarService is {
  command ScheduleMeeting is  {
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    title: String(1,200) with {
      briefly "Title"
      described as {
        |Meeting title.
      }
    }
    attendees: EngineerId+ with {
      briefly "Attendees"
      described as {
        |Meeting attendees.
      }
    }
    scheduledAt: TimeStamp with {
      briefly "Scheduled"
      described as {
        |Meeting time.
      }
    }
    duration: Duration with {
      briefly "Duration"
      described as {
        |Meeting duration.
      }
    }
  } with {
    briefly "Schedule meeting"
    described as {
      |Schedules a project meeting.
    }
  }
  event MeetingScheduled is  {
    meetingId: UUID with {
      briefly "Meeting"
      described as {
        |Meeting ID.
      }
    }
    projectId: ProjectId with {
      briefly "Project"
      described as {
        |Project ID.
      }
    }
    scheduledAt: TimeStamp with {
      briefly "Scheduled"
      described as {
        |Meeting time.
      }
    }
  } with {
    briefly "Meeting was scheduled"
    described as {
      |Emitted when meeting is booked.
    }
  }
} with {
  option external()
  briefly "External calendar service"
  described as {
    |External calendar and scheduling system.
  }
}
