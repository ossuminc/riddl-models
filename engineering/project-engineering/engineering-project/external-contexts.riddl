// Engineering Project - External Contexts

// Resource Management Service
context ResourceService is {

  query GetAvailableResources is {
    resourceType is ResourceType with { briefly "Type" described by "Resource type." }
    startDate is Date with { briefly "Start" described by "Availability start." }
    endDate is Date with { briefly "End" described by "Availability end." }
  } with {
    briefly "Get resources"
    described by "Retrieves available resources."
  }

  result ResourceAvailability is {
    availableResources is many ResourceId with { briefly "Resources" described by "Available resources." }
  } with {
    briefly "Resource availability"
    described by "List of available resources."
  }

} with {
  option is external
  briefly "External resource service"
  described by "External resource management system."
}

// Client Management Service
context ClientService is {

  event ClientUpdated is {
    clientId is UUID with { briefly "Client" described by "Client ID." }
    updatedAt is TimeStamp with { briefly "Updated" described by "Update time." }
  } with {
    briefly "Client was updated"
    described by "Emitted when client info changes."
  }

} with {
  option is external
  briefly "External client service"
  described by "External client management system."
}

// Billing Service
context BillingService is {

  command CreateInvoice is {
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    amount is Decimal(15, 2) with { briefly "Amount" described by "Invoice amount." }
    description is String(1, 500) with { briefly "Description" described by "Invoice description." }
  } with {
    briefly "Create invoice"
    described by "Creates a project invoice."
  }

  event InvoiceCreated is {
    invoiceId is UUID with { briefly "Invoice" described by "Invoice ID." }
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    createdAt is TimeStamp with { briefly "Created" described by "Creation time." }
  } with {
    briefly "Invoice was created"
    described by "Emitted when invoice is generated."
  }

} with {
  option is external
  briefly "External billing service"
  described by "External billing system."
}

// Document Service
context DocumentService is {

  command StoreDeliverable is {
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    name is String(1, 200) with { briefly "Name" described by "Document name." }
    content is String(1, 50000) with { briefly "Content" described by "Document content." }
  } with {
    briefly "Store deliverable"
    described by "Stores a project deliverable."
  }

  event DeliverableStored is {
    documentId is UUID with { briefly "Document" described by "Document ID." }
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    url is URL with { briefly "URL" described by "Document URL." }
    storedAt is TimeStamp with { briefly "Stored" described by "Storage time." }
  } with {
    briefly "Deliverable was stored"
    described by "Emitted when deliverable is saved."
  }

} with {
  option is external
  briefly "External document service"
  described by "External document management system."
}

// Notification Service
context NotificationService is {

  command SendProjectUpdate is {
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    recipients is many EngineerId with { briefly "Recipients" described by "Update recipients." }
    updateType is String(1, 50) with { briefly "Type" described by "Update type." }
    message is String(1, 1000) with { briefly "Message" described by "Update message." }
  } with {
    briefly "Send update"
    described by "Sends project status update."
  }

  event NotificationSent is {
    notificationId is UUID with { briefly "Notification" described by "Notification ID." }
    sentAt is TimeStamp with { briefly "Sent" described by "Send time." }
  } with {
    briefly "Notification was sent"
    described by "Emitted when notification is delivered."
  }

} with {
  option is external
  briefly "External notification service"
  described by "External communications service."
}

// Calendar Service
context CalendarService is {

  command ScheduleMeeting is {
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    title is String(1, 200) with { briefly "Title" described by "Meeting title." }
    attendees is many EngineerId with { briefly "Attendees" described by "Meeting attendees." }
    scheduledAt is TimeStamp with { briefly "Scheduled" described by "Meeting time." }
    duration is Duration with { briefly "Duration" described by "Meeting duration." }
  } with {
    briefly "Schedule meeting"
    described by "Schedules a project meeting."
  }

  event MeetingScheduled is {
    meetingId is UUID with { briefly "Meeting" described by "Meeting ID." }
    projectId is ProjectId with { briefly "Project" described by "Project ID." }
    scheduledAt is TimeStamp with { briefly "Scheduled" described by "Meeting time." }
  } with {
    briefly "Meeting was scheduled"
    described by "Emitted when meeting is booked."
  }

} with {
  option is external
  briefly "External calendar service"
  described by "External calendar and scheduling system."
}
