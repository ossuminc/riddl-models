// Knowledge Management - Shared Types

type KnowledgeItemId is Id(KnowledgeContext.KnowledgeItem) with {
  briefly "Knowledge item identifier"
  described by "Unique identifier for a knowledge item."
}

type CategoryId is UUID with {
  briefly "Category identifier"
  described by "Reference to a knowledge category."
}

type AuthorId is UUID with {
  briefly "Author identifier"
  described by "Reference to an author."
}

type CollectionId is UUID with {
  briefly "Collection identifier"
  described by "Reference to a knowledge collection."
}

type KnowledgeType is any of {
  Article,
  Template,
  BestPractice,
  LessonsLearned,
  Procedure,
  FAQ,
  CaseStudy,
  Glossary,
  Tutorial
} with {
  briefly "Knowledge type"
  described by "Type of knowledge content."
}

type ItemStatus is any of {
  Draft,
  UnderReview,
  Published,
  Archived,
  Deprecated
} with {
  briefly "Item status"
  described by "Knowledge item status."
}

type AccessLevel is any of {
  Public,
  Internal,
  Restricted,
  Confidential
} with {
  briefly "Access level"
  described by "Content access restriction."
}

type ReviewStatus is any of {
  Pending,
  InProgress,
  Approved,
  Rejected,
  NeedsRevision
} with {
  briefly "Review status"
  described by "Content review status."
}

type KnowledgeContent is {
  title is String(1, 200) with {
    briefly "Title"
    described by "Content title."
  }
  summary is String(1, 500) with {
    briefly "Summary"
    described by "Brief summary."
  }
  body is String(1, 50000) with {
    briefly "Body"
    described by "Main content."
  }
  knowledgeType is KnowledgeType with {
    briefly "Type"
    described by "Content type."
  }
  accessLevel is AccessLevel with {
    briefly "Access"
    described by "Access restriction."
  }
} with {
  briefly "Knowledge content"
  described by "Core knowledge item content."
}

type KnowledgeMetadata is {
  authorId is AuthorId with {
    briefly "Author"
    described by "Content author."
  }
  categoryId is CategoryId with {
    briefly "Category"
    described by "Primary category."
  }
  tags is many String(1, 50) with {
    briefly "Tags"
    described by "Search tags."
  }
  keywords is many String(1, 50) with {
    briefly "Keywords"
    described by "SEO keywords."
  }
  relatedItems is many optional KnowledgeItemId with {
    briefly "Related"
    described by "Related items."
  }
  version is String(1, 20) with {
    briefly "Version"
    described by "Content version."
  }
} with {
  briefly "Knowledge metadata"
  described by "Knowledge item metadata."
}

type Category is {
  categoryId is CategoryId with {
    briefly "Category ID"
    described by "Category identifier."
  }
  name is String(1, 100) with {
    briefly "Name"
    described by "Category name."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Category description."
  }
  parentCategoryId is optional CategoryId with {
    briefly "Parent"
    described by "Parent category."
  }
  path is String(1, 500) with {
    briefly "Path"
    described by "Hierarchy path."
  }
} with {
  briefly "Category"
  described by "Knowledge category."
}

type KnowledgeCollection is {
  collectionId is CollectionId with {
    briefly "Collection ID"
    described by "Collection identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Collection name."
  }
  description is String(1, 1000) with {
    briefly "Description"
    described by "Collection description."
  }
  curatorId is AuthorId with {
    briefly "Curator"
    described by "Collection curator."
  }
  items is many KnowledgeItemId with {
    briefly "Items"
    described by "Collection items."
  }
} with {
  briefly "Knowledge collection"
  described by "Curated knowledge collection."
}

type ContentReview is {
  reviewId is UUID with {
    briefly "Review ID"
    described by "Review identifier."
  }
  reviewerId is AuthorId with {
    briefly "Reviewer"
    described by "Content reviewer."
  }
  status is ReviewStatus with {
    briefly "Status"
    described by "Review status."
  }
  comments is optional String(1, 2000) with {
    briefly "Comments"
    described by "Review comments."
  }
  reviewedAt is TimeStamp with {
    briefly "Reviewed"
    described by "Review time."
  }
} with {
  briefly "Content review"
  described by "Knowledge item review."
}

type UserEngagement is {
  views is Natural with {
    briefly "Views"
    described by "View count."
  }
  downloads is Natural with {
    briefly "Downloads"
    described by "Download count."
  }
  likes is Natural with {
    briefly "Likes"
    described by "Like count."
  }
  shares is Natural with {
    briefly "Shares"
    described by "Share count."
  }
  averageRating is Decimal(3, 2) with {
    briefly "Rating"
    described by "Average rating."
  }
  ratingCount is Natural with {
    briefly "Ratings"
    described by "Number of ratings."
  }
} with {
  briefly "User engagement"
  described by "Content engagement metrics."
}

type SearchQuery is {
  query is String(1, 500) with {
    briefly "Query"
    described by "Search query."
  }
  filters is many SearchFilter with {
    briefly "Filters"
    described by "Search filters."
  }
  sortBy is optional String(1, 50) with {
    briefly "Sort"
    described by "Sort field."
  }
  limit is Natural with {
    briefly "Limit"
    described by "Result limit."
  }
  offset is Natural with {
    briefly "Offset"
    described by "Result offset."
  }
} with {
  briefly "Search query"
  described by "Knowledge search query."
}

type SearchFilter is {
  field is String(1, 50) with {
    briefly "Field"
    described by "Filter field."
  }
  value is String(1, 200) with {
    briefly "Value"
    described by "Filter value."
  }
  operator is FilterOperator with {
    briefly "Operator"
    described by "Filter operator."
  }
} with {
  briefly "Search filter"
  described by "Search filter criteria."
}

type FilterOperator is any of {
  Equals,
  Contains,
  StartsWith,
  GreaterThan,
  LessThan,
  InList
} with {
  briefly "Filter operator"
  described by "Filter comparison operator."
}

type SearchResult is {
  itemId is KnowledgeItemId with {
    briefly "Item"
    described by "Result item."
  }
  title is String(1, 200) with {
    briefly "Title"
    described by "Item title."
  }
  summary is String(1, 500) with {
    briefly "Summary"
    described by "Item summary."
  }
  relevanceScore is Decimal(5, 4) with {
    briefly "Score"
    described by "Relevance score."
  }
  highlights is many optional String(1, 500) with {
    briefly "Highlights"
    described by "Matching snippets."
  }
} with {
  briefly "Search result"
  described by "Knowledge search result."
}

type ContentComment is {
  commentId is UUID with {
    briefly "Comment ID"
    described by "Comment identifier."
  }
  authorId is AuthorId with {
    briefly "Author"
    described by "Comment author."
  }
  content is String(1, 2000) with {
    briefly "Content"
    described by "Comment text."
  }
  parentCommentId is optional UUID with {
    briefly "Parent"
    described by "Parent comment for replies."
  }
  createdAt is TimeStamp with {
    briefly "Created"
    described by "Creation time."
  }
} with {
  briefly "Content comment"
  described by "Comment on knowledge item."
}
