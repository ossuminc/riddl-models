// Shopping Cart - Shared Types

type CartId is Id(CartContext.Cart) with {
  briefly "Cart identifier"
  described by "Unique identifier for a shopping cart."
}

type ProductId is UUID with {
  briefly "Product identifier"
  described by "Reference to a product in the catalog."
}

type CustomerId is UUID with {
  briefly "Customer identifier"
  described by "Reference to a registered customer."
}

type SessionId is UUID with {
  briefly "Session identifier"
  described by "Browser session for guest carts."
}

type ProductName is String(1, 200) with {
  briefly "Product name"
  described by "Display name for the product in cart."
}

type SKU is Pattern("^[A-Z0-9-]{6,20}$") with {
  briefly "Stock keeping unit"
  described by "Product SKU for inventory reference."
}

type Quantity is Natural with {
  briefly "Item quantity"
  described by "Number of units in the cart."
}

type Money is {
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Monetary value."
  }
  currency is Currency(USD) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Monetary value"
  described by "Amount with currency for pricing."
}

type CartItem is {
  productId is ProductId with {
    briefly "Product ID"
    described by "Reference to the product."
  }
  sku is SKU with {
    briefly "SKU"
    described by "Product SKU."
  }
  name is ProductName with {
    briefly "Name"
    described by "Product name for display."
  }
  quantity is Quantity with {
    briefly "Quantity"
    described by "Number of units."
  }
  unitPrice is Money with {
    briefly "Unit price"
    described by "Price per unit."
  }
  lineTotal is Money with {
    briefly "Line total"
    described by "Total for this line item."
  }
  addedAt is TimeStamp with {
    briefly "Added at"
    described by "When item was added to cart."
  }
} with {
  briefly "Cart line item"
  described by "A single product line in the shopping cart."
}

type CartStatus is any of {
  ActiveCartStatus with {
    briefly "Active"
    described by "Cart is actively being shopped."
  },
  AbandonedCartStatus with {
    briefly "Abandoned"
    described by "Cart has been inactive for extended period."
  },
  CheckedOutCartStatus with {
    briefly "Checked out"
    described by "Cart has been converted to an order."
  },
  MergedCartStatus with {
    briefly "Merged"
    described by "Cart was merged into another cart."
  }
} with {
  briefly "Cart status"
  described by "Current state of the shopping cart."
}

type CartSummary is {
  itemCount is Natural with {
    briefly "Item count"
    described by "Total number of items in cart."
  }
  subtotal is Money with {
    briefly "Subtotal"
    described by "Total before tax and shipping."
  }
  estimatedTax is optional Money with {
    briefly "Estimated tax"
    described by "Estimated tax amount."
  }
  estimatedShipping is optional Money with {
    briefly "Estimated shipping"
    described by "Estimated shipping cost."
  }
  estimatedTotal is Money with {
    briefly "Estimated total"
    described by "Estimated order total."
  }
} with {
  briefly "Cart totals summary"
  described by "Calculated totals for the shopping cart."
}

type ShippingAddress is {
  name is String(1, 100) with {
    briefly "Name"
    described by "Recipient name."
  }
  line1 is String(1, 200) with {
    briefly "Address line 1"
    described by "Street address."
  }
  line2 is optional String(1, 200) with {
    briefly "Address line 2"
    described by "Apartment, suite, etc."
  }
  city is String(1, 100) with {
    briefly "City"
    described by "City name."
  }
  state is String(1, 100) with {
    briefly "State"
    described by "State or province."
  }
  postalCode is String(1, 20) with {
    briefly "Postal code"
    described by "ZIP or postal code."
  }
  country is String(2, 2) with {
    briefly "Country"
    described by "Two-letter country code."
  }
} with {
  briefly "Shipping address"
  described by "Delivery address for the order."
}

type PromoCode is String(1, 50) with {
  briefly "Promo code"
  described by "Promotional or discount code."
}

type DiscountAmount is {
  code is PromoCode with {
    briefly "Code"
    described by "Applied promo code."
  }
  description is String(1, 200) with {
    briefly "Description"
    described by "Discount description."
  }
  amount is Money with {
    briefly "Amount"
    described by "Discount value."
  }
} with {
  briefly "Applied discount"
  described by "A promotional discount applied to the cart."
}
