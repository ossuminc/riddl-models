// Shopping Cart Domain Model
// E-commerce shopping cart with add, remove, and checkout functionality
domain ShoppingCart is {
  author OssumInc is {
    name = "Ossum Inc."
    email = "support@ossuminc.com"
  } with {
    briefly "Domain author"
    described as {
      |Organization maintaining this domain model.
    }
  }
  user Shopper is "a customer browsing and purchasing products" with {
    briefly "Online shopper"
    described as {
      |A customer who adds items to cart and checks out.
    }
  }
  user GuestUser is "an unauthenticated visitor shopping without an account" with {
    briefly "Guest shopper"
    described as {
      |A visitor shopping without creating an account.
    }
  }
  epic AddToCartEpic is {
    user Shopper wants to "to add products to their shopping cart" so that "they can purchase multiple items together"
    case AddSingleItem is {
      user Shopper wants to "to add a product to the cart" so that "they can continue shopping"
      step is "Shopper views product details" "on the product page" "and decides to purchase" with {
        briefly "View product"
        described as {
          |Shopper reviews product information.
        }
      }
      step is "Shopper clicks add to cart" "with quantity selected" "to add item" with {
        briefly "Click add"
        described as {
          |Shopper initiates add to cart.
        }
      }
      step send command CartContext.Cart.AddItem from user Shopper to entity CartContext.Cart with {
        briefly "Add item"
        described as {
          |Send add item command to cart entity.
        }
      }
      step is "System confirms item added" "with updated cart total" "for feedback" with {
        briefly "Confirm add"
        described as {
          |System shows confirmation to shopper.
        }
      }
    } with {
      briefly "Add single product to cart"
      described as {
        |Standard flow for adding one product to the shopping cart.
      }
    }
  } with {
    briefly "Add products to cart"
    described as {
      | Epic covering the product addition workflow from product selection
      | through cart confirmation and total update.
    }
  }
  epic CheckoutEpic is {
    user Shopper wants to "to complete their purchase" so that "they can receive their products"
    case StandardCheckout is {
      user Shopper wants to "to checkout with their cart" so that "they can complete the purchase"
      step is "Shopper reviews cart contents" "verifying items and quantities" "before checkout" with {
        briefly "Review cart"
        described as {
          |Shopper reviews cart before checkout.
        }
      }
      step is "Shopper enters shipping address" "for delivery destination" "and preferences" with {
        briefly "Enter shipping"
        described as {
          |Shopper provides shipping details.
        }
      }
      step is "Shopper selects payment method" "and enters payment details" "securely" with {
        briefly "Select payment"
        described as {
          |Shopper provides payment information.
        }
      }
      step send command CartContext.Cart.Checkout from user Shopper to entity CartContext.Cart with {
        briefly "Checkout"
        described as {
          |Send checkout command to cart entity.
        }
      }
      step is "System confirms order placed" "with order number" "and estimated delivery" with {
        briefly "Confirm order"
        described as {
          |System confirms successful checkout.
        }
      }
    } with {
      briefly "Complete standard checkout"
      described as {
        |Normal checkout flow with shipping and payment.
      }
    }
  } with {
    briefly "Cart checkout process"
    described as {
      | Epic covering the checkout workflow from cart review through
      | order confirmation and payment processing.
    }
  }
  include "CartContext.riddl"
  include "external-contexts.riddl"
} with {
  briefly "Shopping cart management domain"
  described as {
    | The ShoppingCart domain manages customer shopping carts for e-commerce
    | including item management, price calculation, and checkout initiation.
    | Integrates with inventory, pricing, and order management systems.
  }
}
