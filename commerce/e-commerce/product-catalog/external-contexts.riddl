// Product Catalog - External Contexts

// Inventory Service - Stock management
context InventoryService is {

  type StockLevel is {
    productId is ProductId with { briefly "Product ID" described by "Product identifier." }
    quantity is Natural with { briefly "Quantity" described by "Available quantity." }
    warehouse is String(1, 100) with { briefly "Warehouse" described by "Warehouse location." }
  } with {
    briefly "Stock level information"
    described by "Current stock level for a product at a warehouse."
  }

  event StockLevelChanged is {
    productId is ProductId with { briefly "Product ID" described by "Affected product." }
    oldQuantity is Natural with { briefly "Old quantity" described by "Previous quantity." }
    newQuantity is Natural with { briefly "New quantity" described by "Current quantity." }
    changedAt is TimeStamp with { briefly "Changed at" described by "When changed." }
  } with {
    briefly "Stock level changed"
    described by "Emitted when inventory quantity changes."
  }

  event StockDepleted is {
    productId is ProductId with { briefly "Product ID" described by "Out of stock product." }
    depletedAt is TimeStamp with { briefly "Depleted at" described by "When depleted." }
  } with {
    briefly "Stock depleted"
    described by "Emitted when a product goes out of stock."
  }

} with {
  option is external
  briefly "External inventory management"
  described by "External system managing warehouse inventory levels."
}

// Search Engine - Product discovery
context SearchEngine is {

  command IndexProduct is {
    productId is ProductId with { briefly "Product ID" described by "Product to index." }
    name is ProductName with { briefly "Name" described by "Product name." }
    description is ProductDescription with { briefly "Description" described by "Product description." }
    categories is many String(1, 100) with { briefly "Categories" described by "Category names." }
    attributes is many AttributeValue with { briefly "Attributes" described by "Searchable attributes." }
  } with {
    briefly "Index a product"
    described by "Adds or updates a product in the search index."
  }

  command RemoveProduct is {
    productId is ProductId with { briefly "Product ID" described by "Product to remove." }
  } with {
    briefly "Remove product from index"
    described by "Removes a product from the search index."
  }

  event ProductIndexed is {
    productId is ProductId with { briefly "Product ID" described by "Indexed product." }
    indexedAt is TimeStamp with { briefly "Indexed at" described by "When indexed." }
  } with {
    briefly "Product was indexed"
    described by "Emitted when a product is added to the search index."
  }

} with {
  option is external
  briefly "External search engine"
  described by "External search service for product discovery."
}

// Content Management - Images and media
context ContentManagement is {

  type ImageMetadata is {
    imageId is UUID with { briefly "Image ID" described by "Image identifier." }
    url is ImageUrl with { briefly "URL" described by "Image URL." }
    altText is String(1, 200) with { briefly "Alt text" described by "Accessibility text." }
    width is Natural with { briefly "Width" described by "Image width in pixels." }
    height is Natural with { briefly "Height" described by "Image height in pixels." }
  } with {
    briefly "Image metadata"
    described by "Metadata for a product image."
  }

  event ImageUploaded is {
    imageId is UUID with { briefly "Image ID" described by "New image identifier." }
    url is ImageUrl with { briefly "URL" described by "Image URL." }
    productId is optional ProductId with { briefly "Product ID" described by "Associated product." }
    uploadedAt is TimeStamp with { briefly "Uploaded at" described by "When uploaded." }
  } with {
    briefly "Image was uploaded"
    described by "Emitted when a new image is uploaded to the CMS."
  }

  event ImageDeleted is {
    imageId is UUID with { briefly "Image ID" described by "Deleted image." }
    deletedAt is TimeStamp with { briefly "Deleted at" described by "When deleted." }
  } with {
    briefly "Image was deleted"
    described by "Emitted when an image is removed from the CMS."
  }

} with {
  option is external
  briefly "External content management"
  described by "External CMS for product images and media."
}

// ERP System - Master data sync
context ERPSystem is {

  event ProductMasterUpdated is {
    sku is SKU with { briefly "SKU" described by "Product SKU." }
    name is ProductName with { briefly "Name" described by "Product name from ERP." }
    cost is Money with { briefly "Cost" described by "Product cost." }
    updatedAt is TimeStamp with { briefly "Updated at" described by "When updated in ERP." }
  } with {
    briefly "Product master updated"
    described by "Emitted when ERP product master data changes."
  }

  event ProductMasterCreated is {
    sku is SKU with { briefly "SKU" described by "New product SKU." }
    name is ProductName with { briefly "Name" described by "Product name from ERP." }
    createdAt is TimeStamp with { briefly "Created at" described by "When created in ERP." }
  } with {
    briefly "Product master created"
    described by "Emitted when a new product is created in ERP."
  }

} with {
  option is external
  briefly "External ERP system"
  described by "External enterprise resource planning system for master data."
}
