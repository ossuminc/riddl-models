// Order Orchestration - Shared Types

type OrderId is Id(OrchestrationContext.MarketplaceOrder) with {
  briefly "Order identifier"
  described by "Unique identifier for a marketplace order."
}

type SubOrderId is UUID with {
  briefly "Sub-order identifier"
  described by "Identifier for a vendor-specific sub-order."
}

type VendorId is UUID with {
  briefly "Vendor identifier"
  described by "Reference to a marketplace vendor."
}

type CustomerId is UUID with {
  briefly "Customer identifier"
  described by "Reference to a customer."
}

type ProductId is UUID with {
  briefly "Product identifier"
  described by "Reference to a product."
}

type SKU is Pattern("^[A-Z0-9-]{6,20}$") with {
  briefly "Stock keeping unit"
  described by "Product SKU."
}

type Money is {
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Monetary value."
  }
  currency is Currency(USD) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Monetary value"
  described by "Amount with currency."
}

type Quantity is Natural with {
  briefly "Item quantity"
  described by "Number of units."
}

type OrderItem is {
  productId is ProductId with {
    briefly "Product ID"
    described by "Product identifier."
  }
  sku is SKU with {
    briefly "SKU"
    described by "Product SKU."
  }
  vendorId is VendorId with {
    briefly "Vendor ID"
    described by "Selling vendor."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Product name."
  }
  quantity is Quantity with {
    briefly "Quantity"
    described by "Units ordered."
  }
  unitPrice is Money with {
    briefly "Unit price"
    described by "Price per unit."
  }
  lineTotal is Money with {
    briefly "Line total"
    described by "Total for this line."
  }
} with {
  briefly "Order line item"
  described by "A single product in the order."
}

type VendorSubOrder is {
  subOrderId is SubOrderId with {
    briefly "Sub-order ID"
    described by "Sub-order identifier."
  }
  vendorId is VendorId with {
    briefly "Vendor ID"
    described by "Fulfilling vendor."
  }
  items is many OrderItem with {
    briefly "Items"
    described by "Items for this vendor."
  }
  subtotal is Money with {
    briefly "Subtotal"
    described by "Vendor subtotal."
  }
  shippingCost is Money with {
    briefly "Shipping"
    described by "Vendor shipping cost."
  }
  status is SubOrderStatus with {
    briefly "Status"
    described by "Fulfillment status."
  }
} with {
  briefly "Vendor sub-order"
  described by "Portion of order fulfilled by a single vendor."
}

type SubOrderStatus is any of {
  PendingSubOrder with {
    briefly "Pending"
    described by "Awaiting vendor acknowledgment."
  },
  AcceptedSubOrder with {
    briefly "Accepted"
    described by "Vendor accepted the order."
  },
  ProcessingSubOrder with {
    briefly "Processing"
    described by "Vendor is preparing items."
  },
  ShippedSubOrder with {
    briefly "Shipped"
    described by "Items shipped by vendor."
  },
  DeliveredSubOrder with {
    briefly "Delivered"
    described by "Items delivered to customer."
  },
  CancelledSubOrder with {
    briefly "Cancelled"
    described by "Sub-order was cancelled."
  }
} with {
  briefly "Sub-order status"
  described by "Fulfillment status of a vendor sub-order."
}

type Address is {
  name is String(1, 100) with {
    briefly "Name"
    described by "Recipient name."
  }
  line1 is String(1, 200) with {
    briefly "Address line 1"
    described by "Street address."
  }
  line2 is optional String(1, 200) with {
    briefly "Address line 2"
    described by "Apartment, suite, etc."
  }
  city is String(1, 100) with {
    briefly "City"
    described by "City name."
  }
  state is String(1, 100) with {
    briefly "State"
    described by "State or province."
  }
  postalCode is String(1, 20) with {
    briefly "Postal code"
    described by "ZIP or postal code."
  }
  country is String(2, 2) with {
    briefly "Country"
    described by "Two-letter country code."
  }
} with {
  briefly "Shipping address"
  described by "Delivery destination."
}

type TrackingInfo is {
  carrier is String(1, 100) with {
    briefly "Carrier"
    described by "Shipping carrier name."
  }
  trackingNumber is String(1, 100) with {
    briefly "Tracking number"
    described by "Shipment tracking number."
  }
  trackingUrl is optional URL with {
    briefly "Tracking URL"
    described by "Link to track shipment."
  }
} with {
  briefly "Shipment tracking"
  described by "Tracking information for a shipment."
}

type PaymentInfo is {
  paymentId is UUID with {
    briefly "Payment ID"
    described by "Payment reference."
  }
  method is String(1, 50) with {
    briefly "Method"
    described by "Payment method."
  }
  paymentAmount is Money with {
    briefly "Amount"
    described by "Total payment."
  }
  paymentStatus is String(1, 50) with {
    briefly "Status"
    described by "Payment status."
  }
} with {
  briefly "Payment information"
  described by "Payment details for the order."
}
