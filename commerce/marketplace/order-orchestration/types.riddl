// Order Orchestration - Shared Types
type OrderId is Id(OrchestrationContext.MarketplaceOrder)  with {
  briefly "Order identifier"
  described as {
    |Unique identifier for a marketplace order.
  }
}
type SubOrderId is UUID with {
  briefly "Sub-order identifier"
  described as {
    |Identifier for a vendor-specific sub-order.
  }
}
type VendorId is UUID with {
  briefly "Vendor identifier"
  described as {
    |Reference to a marketplace vendor.
  }
}
type CustomerId is UUID with {
  briefly "Customer identifier"
  described as {
    |Reference to a customer.
  }
}
type ProductId is UUID with {
  briefly "Product identifier"
  described as {
    |Reference to a product.
  }
}
type SKU is Pattern("^[A-Z0-9-]{6,20}$") with {
  briefly "Stock keeping unit"
  described as {
    |Product SKU.
  }
}
type Money is {
  amount: Decimal(10,2) with {
    briefly "Amount"
    described as {
      |Monetary value.
    }
  }
  currency: Currency(USD) with {
    briefly "Currency"
    described as {
      |Currency code.
    }
  }
} with {
  briefly "Monetary value"
  described as {
    |Amount with currency.
  }
}
type Quantity is Natural with {
  briefly "Item quantity"
  described as {
    |Number of units.
  }
}
type OrderItem is {
  productId: ProductId with {
    briefly "Product ID"
    described as {
      |Product identifier.
    }
  }
  sku: SKU with {
    briefly "SKU"
    described as {
      |Product SKU.
    }
  }
  vendorId: VendorId with {
    briefly "Vendor ID"
    described as {
      |Selling vendor.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Product name.
    }
  }
  quantity: Quantity with {
    briefly "Quantity"
    described as {
      |Units ordered.
    }
  }
  unitPrice: Money with {
    briefly "Unit price"
    described as {
      |Price per unit.
    }
  }
  lineTotal: Money with {
    briefly "Line total"
    described as {
      |Total for this line.
    }
  }
} with {
  briefly "Order line item"
  described as {
    |A single product in the order.
  }
}
type VendorSubOrder is {
  subOrderId: SubOrderId with {
    briefly "Sub-order ID"
    described as {
      |Sub-order identifier.
    }
  }
  vendorId: VendorId with {
    briefly "Vendor ID"
    described as {
      |Fulfilling vendor.
    }
  }
  items: OrderItem+ with {
    briefly "Items"
    described as {
      |Items for this vendor.
    }
  }
  subtotal: Money with {
    briefly "Subtotal"
    described as {
      |Vendor subtotal.
    }
  }
  shippingCost: Money with {
    briefly "Shipping"
    described as {
      |Vendor shipping cost.
    }
  }
  status: SubOrderStatus with {
    briefly "Status"
    described as {
      |Fulfillment status.
    }
  }
} with {
  briefly "Vendor sub-order"
  described as {
    |Portion of order fulfilled by a single vendor.
  }
}
type SubOrderStatus is any of {
  PendingSubOrder,
  AcceptedSubOrder,
  ProcessingSubOrder,
  ShippedSubOrder,
  DeliveredSubOrder,
  CancelledSubOrder
} with {
  briefly "Sub-order status"
  described as {
    |Fulfillment status of a vendor sub-order.
  }
}
type Address is {
  name: String(1,100) with {
    briefly "Name"
    described as {
      |Recipient name.
    }
  }
  line1: String(1,200) with {
    briefly "Address line 1"
    described as {
      |Street address.
    }
  }
  line2: String(1,200)? with {
    briefly "Address line 2"
    described as {
      |Apartment, suite, etc.
    }
  }
  city: String(1,100) with {
    briefly "City"
    described as {
      |City name.
    }
  }
  state: String(1,100) with {
    briefly "State"
    described as {
      |State or province.
    }
  }
  postalCode: String(1,20) with {
    briefly "Postal code"
    described as {
      |ZIP or postal code.
    }
  }
  country: String(2,2) with {
    briefly "Country"
    described as {
      |Two-letter country code.
    }
  }
} with {
  briefly "Shipping address"
  described as {
    |Delivery destination.
  }
}
type TrackingInfo is {
  carrier: String(1,100) with {
    briefly "Carrier"
    described as {
      |Shipping carrier name.
    }
  }
  trackingNumber: String(1,100) with {
    briefly "Tracking number"
    described as {
      |Shipment tracking number.
    }
  }
  trackingUrl: URL? with {
    briefly "Tracking URL"
    described as {
      |Link to track shipment.
    }
  }
} with {
  briefly "Shipment tracking"
  described as {
    |Tracking information for a shipment.
  }
}
type PaymentInfo is {
  paymentId: UUID with {
    briefly "Payment ID"
    described as {
      |Payment reference.
    }
  }
  method: String(1,50) with {
    briefly "Method"
    described as {
      |Payment method.
    }
  }
  paymentAmount: Money with {
    briefly "Amount"
    described as {
      |Total payment.
    }
  }
  paymentStatus: String(1,50) with {
    briefly "Status"
    described as {
      |Payment status.
    }
  }
} with {
  briefly "Payment information"
  described as {
    |Payment details for the order.
  }
}
