// Order Orchestration Domain Model
// Marketplace order splitting, routing, and multi-vendor coordination

domain OrderOrchestration is {

  author OssumInc is {
    name is "Ossum Inc."
    email is "support@ossum.ai"
  } with {
    briefly "Domain author"
    described by "Organization maintaining this domain model."
  }

  user Customer is "a marketplace customer placing orders" with {
    briefly "Marketplace customer"
    described by "A customer ordering from multiple vendors."
  }

  user OperationsTeam is "staff managing order routing and exceptions" with {
    briefly "Operations staff"
    described by "Team handling order exceptions and routing issues."
  }

  epic PlaceOrderEpic is {
    user Customer wants "to checkout with items from multiple vendors"
      so that "they receive a single unified order experience"

    case MultiVendorCheckout is {
      user Customer wants "to complete a multi-vendor purchase"
        so that "items from different sellers arrive as expected"
      step is "Customer submits checkout" "with items from multiple vendors" "for purchase"
        with { briefly "Submit checkout" described by "Customer initiates checkout." }
      step is "System splits order by vendor" "creating sub-orders for each seller" "for fulfillment"
        with { briefly "Split order" described by "System creates vendor sub-orders." }
      step send command OrchestrationContext.MarketplaceOrder.CreateOrder from user Customer to entity OrchestrationContext.MarketplaceOrder
        with { briefly "Create order" described by "Send create order command." }
      step is "System routes sub-orders to vendors" "notifying each seller" "of their items"
        with { briefly "Route orders" described by "System sends to vendors." }
    } with {
      briefly "Multi-vendor checkout flow"
      described by "Standard checkout with order splitting across vendors."
    }
  } with {
    briefly "Marketplace order placement"
    described by {
      | Epic covering the multi-vendor checkout workflow including order
      | splitting, routing, and consolidated customer communication.
    }
  }

  include "OrchestrationContext.riddl"
  include "external-contexts.riddl"

} with {
  briefly "Order orchestration domain"
  described by {
    | The OrderOrchestration domain manages marketplace order lifecycle
    | including splitting orders across vendors, tracking fulfillment,
    | and coordinating delivery of multi-vendor purchases.
  }
}
