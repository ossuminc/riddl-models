// Vendor Management - External Contexts

// Payment Service - Vendor payouts
context PaymentService is {

  command CreatePayoutAccount is {
    vendorId is VendorId with { briefly "Vendor ID" described by "Vendor identifier." }
    bankAccount is BankAccount with { briefly "Bank account" described by "Payout destination." }
  } with {
    briefly "Create payout account"
    described by "Creates a new payout account for a vendor."
  }

  command ProcessPayout is {
    vendorId is VendorId with { briefly "Vendor ID" described by "Vendor to pay." }
    amount is Money with { briefly "Amount" described by "Payout amount." }
    reference is String(1, 100) with { briefly "Reference" described by "Payout reference." }
  } with {
    briefly "Process vendor payout"
    described by "Initiates a payout to the vendor."
  }

  event PayoutProcessed is {
    vendorId is VendorId with { briefly "Vendor ID" described by "Paid vendor." }
    amount is Money with { briefly "Amount" described by "Payout amount." }
    processedAt is TimeStamp with { briefly "Processed" described by "When processed." }
  } with {
    briefly "Payout was processed"
    described by "Emitted when vendor payout is completed."
  }

} with {
  option is external
  briefly "External payment service"
  described by "External system for processing vendor payouts."
}

// Order Service - Order events
context OrderService is {

  event OrderFulfilled is {
    orderId is UUID with { briefly "Order ID" described by "Fulfilled order." }
    vendorId is VendorId with { briefly "Vendor ID" described by "Fulfilling vendor." }
    orderTotal is Money with { briefly "Total" described by "Order total." }
    commission is Money with { briefly "Commission" described by "Platform commission." }
    vendorEarnings is Money with { briefly "Earnings" described by "Vendor earnings." }
    fulfilledAt is TimeStamp with { briefly "Fulfilled" described by "Fulfillment time." }
  } with {
    briefly "Order was fulfilled"
    described by "Emitted when a vendor fulfills an order."
  }

  event OrderReturned is {
    orderId is UUID with { briefly "Order ID" described by "Returned order." }
    vendorId is VendorId with { briefly "Vendor ID" described by "Vendor." }
    returnAmount is Money with { briefly "Amount" described by "Return amount." }
    returnedAt is TimeStamp with { briefly "Returned" described by "Return time." }
  } with {
    briefly "Order was returned"
    described by "Emitted when an order is returned."
  }

} with {
  option is external
  briefly "External order service"
  described by "External system for order management."
}

// Notification Service - Vendor communications
context NotificationService is {

  command SendEmail is {
    recipientEmail is Email with { briefly "Email" described by "Recipient email." }
    subject is String(1, 200) with { briefly "Subject" described by "Email subject." }
    body is String(1, 10000) with { briefly "Body" described by "Email body." }
    templateId is optional String(1, 100) with { briefly "Template" described by "Template ID." }
  } with {
    briefly "Send email notification"
    described by "Sends an email to the specified recipient."
  }

  event NotificationSent is {
    recipientEmail is Email with { briefly "Email" described by "Recipient." }
    notificationType is String(1, 50) with { briefly "Type" described by "Notification type." }
    sentAt is TimeStamp with { briefly "Sent" described by "When sent." }
  } with {
    briefly "Notification was sent"
    described by "Emitted when notification is delivered."
  }

} with {
  option is external
  briefly "External notification service"
  described by "External system for sending notifications."
}

// Compliance Service - Vendor verification
context ComplianceService is {

  command VerifyTaxId is {
    vendorId is VendorId with { briefly "Vendor ID" described by "Vendor to verify." }
    taxId is TaxId with { briefly "Tax ID" described by "Tax ID to verify." }
    businessName is BusinessName with { briefly "Business" described by "Business name." }
  } with {
    briefly "Verify tax identification"
    described by "Verifies vendor tax ID with authorities."
  }

  event TaxIdVerified is {
    vendorId is VendorId with { briefly "Vendor ID" described by "Verified vendor." }
    verified is Boolean with { briefly "Verified" described by "Verification result." }
    verifiedAt is TimeStamp with { briefly "Verified at" described by "Verification time." }
  } with {
    briefly "Tax ID was verified"
    described by "Emitted when tax ID verification completes."
  }

  event ComplianceCheckFailed is {
    vendorId is VendorId with { briefly "Vendor ID" described by "Failed vendor." }
    reason is String(1, 500) with { briefly "Reason" described by "Failure reason." }
    failedAt is TimeStamp with { briefly "Failed at" described by "Check time." }
  } with {
    briefly "Compliance check failed"
    described by "Emitted when vendor fails compliance check."
  }

} with {
  option is external
  briefly "External compliance service"
  described by "External system for vendor compliance verification."
}
