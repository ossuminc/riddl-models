// Trade Credit - Shared Types

type CreditAccountId is Id(CreditContext.CreditAccount) with {
  briefly "Credit account identifier"
  described by "Unique identifier for a credit account."
}

type CustomerId is UUID with {
  briefly "Customer identifier"
  described by "Reference to a customer."
}

type InvoiceId is UUID with {
  briefly "Invoice identifier"
  described by "Reference to an invoice."
}

type Money is {
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Monetary value."
  }
  currency is Currency(USD) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Monetary value"
  described by "Amount with currency."
}

type CreditTerms is {
  paymentDays is Natural with {
    briefly "Payment days"
    described by "Days until payment due."
  }
  discountDays is optional Natural with {
    briefly "Discount days"
    described by "Days to receive early payment discount."
  }
  discountPercent is optional Decimal(5, 2) with {
    briefly "Discount %"
    described by "Early payment discount percentage."
  }
} with {
  briefly "Credit terms"
  described by "Payment terms for credit account."
}

type CreditLimit is {
  amount is Money with {
    briefly "Amount"
    described by "Maximum credit."
  }
  approvedBy is String(1, 100) with {
    briefly "Approved by"
    described by "Who approved."
  }
  approvedAt is TimeStamp with {
    briefly "Approved at"
    described by "When approved."
  }
} with {
  briefly "Credit limit"
  described by "Maximum credit extended to customer."
}

type CreditBalance is {
  totalOwed is Money with {
    briefly "Total owed"
    described by "Total outstanding balance."
  }
  currentBalance is Money with {
    briefly "Current"
    described by "Current (not past due) balance."
  }
  pastDueBalance is Money with {
    briefly "Past due"
    described by "Past due balance."
  }
  availableCredit is Money with {
    briefly "Available"
    described by "Remaining credit available."
  }
} with {
  briefly "Credit balance"
  described by "Current credit balance summary."
}

type Invoice is {
  invoiceId is InvoiceId with {
    briefly "Invoice ID"
    described by "Invoice identifier."
  }
  invoiceNumber is String(1, 50) with {
    briefly "Number"
    described by "Invoice number."
  }
  invoiceDate is Date with {
    briefly "Date"
    described by "Invoice date."
  }
  dueDate is Date with {
    briefly "Due"
    described by "Payment due date."
  }
  amount is Money with {
    briefly "Amount"
    described by "Invoice amount."
  }
  amountPaid is Money with {
    briefly "Paid"
    described by "Amount paid."
  }
  status is InvoiceStatus with {
    briefly "Status"
    described by "Invoice status."
  }
} with {
  briefly "Invoice"
  described by "A credit invoice."
}

type InvoiceStatus is any of {
  OpenInvoice with {
    briefly "Open"
    described by "Invoice is open."
  },
  PartiallyPaidInvoice with {
    briefly "Partially paid"
    described by "Invoice is partially paid."
  },
  PaidInvoice with {
    briefly "Paid"
    described by "Invoice is fully paid."
  },
  PastDueInvoice with {
    briefly "Past due"
    described by "Invoice is past due."
  },
  WrittenOffInvoice with {
    briefly "Written off"
    described by "Invoice was written off."
  }
} with {
  briefly "Invoice status"
  described by "Current status of an invoice."
}

type Payment is {
  paymentId is UUID with {
    briefly "Payment ID"
    described by "Payment identifier."
  }
  amount is Money with {
    briefly "Amount"
    described by "Payment amount."
  }
  paymentDate is Date with {
    briefly "Date"
    described by "Payment date."
  }
  paymentMethod is String(1, 50) with {
    briefly "Method"
    described by "Payment method."
  }
  reference is optional String(1, 100) with {
    briefly "Reference"
    described by "Check number or reference."
  }
} with {
  briefly "Payment"
  described by "A payment on account."
}

type CreditRisk is any of {
  LowRisk with {
    briefly "Low"
    described by "Low credit risk."
  },
  MediumRisk with {
    briefly "Medium"
    described by "Medium credit risk."
  },
  HighRisk with {
    briefly "High"
    described by "High credit risk."
  },
  UnderReview with {
    briefly "Under review"
    described by "Risk being evaluated."
  }
} with {
  briefly "Credit risk level"
  described by "Customer credit risk assessment."
}

type CollectionAction is {
  actionType is String(1, 50) with {
    briefly "Type"
    described by "Action type."
  }
  note is String(1, 1000) with {
    briefly "Note"
    described by "Action notes."
  }
  performedBy is String(1, 100) with {
    briefly "Performed by"
    described by "Who took action."
  }
  performedAt is TimeStamp with {
    briefly "Performed at"
    described by "When action taken."
  }
  nextFollowUp is optional Date with {
    briefly "Follow up"
    described by "Next follow-up date."
  }
} with {
  briefly "Collection action"
  described by "A collections activity on the account."
}
