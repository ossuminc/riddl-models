// Inventory Management - Shared Types

type StockItemId is Id(InventoryContext.StockItem) with {
  briefly "Stock item identifier"
  described by "Unique identifier for an inventory item."
}

type ProductId is UUID with {
  briefly "Product identifier"
  described by "Reference to a product."
}

type LocationId is UUID with {
  briefly "Location identifier"
  described by "Reference to a storage location."
}

type SKU is Pattern("^[A-Z0-9-]{6,20}$") with {
  briefly "Stock keeping unit"
  described by "Product SKU."
}

type Quantity is Natural with {
  briefly "Quantity"
  described by "Number of units."
}

type Money is {
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Monetary value."
  }
  currency is Currency(USD) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Monetary value"
  described by "Amount with currency."
}

type StorageLocation is {
  locationId is LocationId with {
    briefly "Location ID"
    described by "Location identifier."
  }
  locationType is LocationType with {
    briefly "Type"
    described by "Type of location."
  }
  name is String(1, 100) with {
    briefly "Name"
    described by "Location name."
  }
  aisle is optional String(1, 20) with {
    briefly "Aisle"
    described by "Aisle identifier."
  }
  shelf is optional String(1, 20) with {
    briefly "Shelf"
    described by "Shelf identifier."
  }
  bin is optional String(1, 20) with {
    briefly "Bin"
    described by "Bin identifier."
  }
} with {
  briefly "Storage location"
  described by "Physical location for inventory storage."
}

type LocationType is any of {
  WarehouseLocation with {
    briefly "Warehouse"
    described by "Central warehouse storage."
  },
  StoreBackroom with {
    briefly "Backroom"
    described by "Store backroom storage."
  },
  StoreFloor with {
    briefly "Floor"
    described by "Store selling floor."
  },
  TransitLocation with {
    briefly "Transit"
    described by "In-transit between locations."
  }
} with {
  briefly "Location type"
  described by "Type of storage location."
}

type StockLevel is {
  productId is ProductId with {
    briefly "Product"
    described by "Product identifier."
  }
  sku is SKU with {
    briefly "SKU"
    described by "Product SKU."
  }
  location is StorageLocation with {
    briefly "Location"
    described by "Storage location."
  }
  quantityOnHand is Quantity with {
    briefly "On hand"
    described by "Quantity currently in location."
  }
  quantityReserved is Quantity with {
    briefly "Reserved"
    described by "Quantity reserved for orders."
  }
  quantityAvailable is Quantity with {
    briefly "Available"
    described by "Quantity available for sale."
  }
} with {
  briefly "Stock level"
  described by "Current inventory levels at a location."
}

type ReorderPoint is {
  productId is ProductId with {
    briefly "Product"
    described by "Product identifier."
  }
  minimumQuantity is Quantity with {
    briefly "Minimum"
    described by "Trigger reorder when below."
  }
  reorderQuantity is Quantity with {
    briefly "Reorder qty"
    described by "Quantity to order."
  }
  leadTimeDays is Natural with {
    briefly "Lead time"
    described by "Days to receive order."
  }
} with {
  briefly "Reorder parameters"
  described by "Settings for automatic replenishment."
}

type InventoryAdjustment is {
  adjustmentType is AdjustmentType with {
    briefly "Type"
    described by "Reason for adjustment."
  }
  quantity is Integer with {
    briefly "Quantity"
    described by "Adjustment amount (positive or negative)."
  }
  reason is String(1, 500) with {
    briefly "Reason"
    described by "Explanation for adjustment."
  }
  adjustedBy is String(1, 100) with {
    briefly "Adjusted by"
    described by "Person making adjustment."
  }
} with {
  briefly "Inventory adjustment"
  described by "A change to inventory quantity."
}

type AdjustmentType is any of {
  DamageAdjustment with {
    briefly "Damage"
    described by "Adjustment for damaged goods."
  },
  TheftAdjustment with {
    briefly "Theft"
    described by "Adjustment for theft/shrinkage."
  },
  CycleCountAdjustment with {
    briefly "Cycle count"
    described by "Adjustment from inventory count."
  },
  ReceivingAdjustment with {
    briefly "Receiving"
    described by "Adjustment during receiving."
  },
  TransferAdjustment with {
    briefly "Transfer"
    described by "Adjustment for location transfer."
  }
} with {
  briefly "Adjustment type"
  described by "Reason category for adjustment."
}

type ReceiptInfo is {
  purchaseOrderId is UUID with {
    briefly "PO ID"
    described by "Purchase order reference."
  }
  quantityExpected is Quantity with {
    briefly "Expected"
    described by "Quantity ordered."
  }
  quantityReceived is Quantity with {
    briefly "Received"
    described by "Quantity actually received."
  }
  receivedBy is String(1, 100) with {
    briefly "Received by"
    described by "Person receiving goods."
  }
  receivedAt is TimeStamp with {
    briefly "Received at"
    described by "Receipt timestamp."
  }
} with {
  briefly "Receipt information"
  described by "Details of inventory receipt."
}
