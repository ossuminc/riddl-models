// Inventory Management - External Contexts

// Order Service - Order events
context OrderService is {

  event OrderPlaced is {
    orderId is UUID with { briefly "Order ID" described by "New order." }
    items is many StockLevel with { briefly "Items" described by "Ordered items." }
    placedAt is TimeStamp with { briefly "Placed" described by "Order time." }
  } with {
    briefly "Order was placed"
    described by "Emitted when a new order is placed."
  }

  event OrderCancelled is {
    orderId is UUID with { briefly "Order ID" described by "Cancelled order." }
    cancelledAt is TimeStamp with { briefly "Cancelled" described by "Cancellation time." }
  } with {
    briefly "Order was cancelled"
    described by "Emitted when an order is cancelled."
  }

  event OrderFulfilled is {
    orderId is UUID with { briefly "Order ID" described by "Fulfilled order." }
    fulfilledAt is TimeStamp with { briefly "Fulfilled" described by "Fulfillment time." }
  } with {
    briefly "Order was fulfilled"
    described by "Emitted when order is shipped."
  }

} with {
  option is external
  briefly "External order service"
  described by "External system for order management."
}

// Purchasing Service - Procurement
context PurchasingService is {

  command CreatePurchaseOrder is {
    productId is ProductId with { briefly "Product" described by "Product to order." }
    quantity is Quantity with { briefly "Quantity" described by "Order quantity." }
    supplierId is UUID with { briefly "Supplier" described by "Supplier ID." }
  } with {
    briefly "Create purchase order"
    described by "Creates a new purchase order for restocking."
  }

  event PurchaseOrderCreated is {
    purchaseOrderId is UUID with { briefly "PO ID" described by "New order ID." }
    productId is ProductId with { briefly "Product" described by "Ordered product." }
    quantity is Quantity with { briefly "Quantity" described by "Order quantity." }
    expectedDelivery is Date with { briefly "Expected" described by "Expected delivery." }
    createdAt is TimeStamp with { briefly "Created" described by "Creation time." }
  } with {
    briefly "Purchase order was created"
    described by "Emitted when PO is generated."
  }

} with {
  option is external
  briefly "External purchasing service"
  described by "External system for procurement."
}

// Receiving Service - Goods receipt
context ReceivingService is {

  event GoodsReceived is {
    purchaseOrderId is UUID with { briefly "PO ID" described by "Purchase order." }
    productId is ProductId with { briefly "Product" described by "Received product." }
    quantityReceived is Quantity with { briefly "Received" described by "Quantity received." }
    locationId is LocationId with { briefly "Location" described by "Receiving location." }
    receivedAt is TimeStamp with { briefly "Received" described by "Receipt time." }
  } with {
    briefly "Goods were received"
    described by "Emitted when goods are received at warehouse."
  }

  event ReceiptDiscrepancy is {
    purchaseOrderId is UUID with { briefly "PO ID" described by "Purchase order." }
    productId is ProductId with { briefly "Product" described by "Discrepant product." }
    expectedQuantity is Quantity with { briefly "Expected" described by "Expected quantity." }
    actualQuantity is Quantity with { briefly "Actual" described by "Actual quantity." }
    reportedAt is TimeStamp with { briefly "Reported" described by "Report time." }
  } with {
    briefly "Receipt discrepancy found"
    described by "Emitted when received quantity differs from ordered."
  }

} with {
  option is external
  briefly "External receiving service"
  described by "External system for goods receipt."
}

// Warehouse Management - Location management
context WarehouseService is {

  event LocationCreated is {
    locationId is LocationId with { briefly "Location" described by "New location." }
    locationType is LocationType with { briefly "Type" described by "Location type." }
    name is String(1, 100) with { briefly "Name" described by "Location name." }
    createdAt is TimeStamp with { briefly "Created" described by "Creation time." }
  } with {
    briefly "Location was created"
    described by "Emitted when new storage location is created."
  }

  event LocationDeactivated is {
    locationId is LocationId with { briefly "Location" described by "Deactivated location." }
    deactivatedAt is TimeStamp with { briefly "Deactivated" described by "Deactivation time." }
  } with {
    briefly "Location was deactivated"
    described by "Emitted when location is no longer used."
  }

} with {
  option is external
  briefly "External warehouse service"
  described by "External system for warehouse location management."
}
