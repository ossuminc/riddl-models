// Guest Services - External Contexts
// Staff Dispatch Service
context StaffDispatchService is {
  query GetAvailableStaff is  {
    department: String(1,100) with {
      briefly "Department"
      described as {
        |Staff department.
      }
    }
    skillRequired: String(1,100)? with {
      briefly "Skill"
      described as {
        |Required skill.
      }
    }
  } with {
    briefly "Get available staff"
    described as {
      |Queries available staff members.
    }
  }
  result AvailableStaffResult is  {
    staff: StaffAssignment+ with {
      briefly "Staff"
      described as {
        |Available staff.
      }
    }
  } with {
    briefly "Available staff result"
    described as {
      |List of available staff.
    }
  }
  command DispatchStaff is  {
    staffId: StaffId with {
      briefly "Staff"
      described as {
        |Staff ID.
      }
    }
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    location: String(1,100) with {
      briefly "Location"
      described as {
        |Service location.
      }
    }
    priority: RequestPriority with {
      briefly "Priority"
      described as {
        |Request priority.
      }
    }
  } with {
    briefly "Dispatch staff"
    described as {
      |Dispatches staff to location.
    }
  }
  event StaffDispatched is  {
    staffId: StaffId with {
      briefly "Staff"
      described as {
        |Staff ID.
      }
    }
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    dispatchedAt: TimeStamp with {
      briefly "Dispatched"
      described as {
        |Dispatch time.
      }
    }
  } with {
    briefly "Staff dispatched"
    described as {
      |Emitted when staff is dispatched.
    }
  }
} with {
  option external()
  briefly "External staff dispatch"
  described as {
    |External workforce management service.
  }
}
// Kitchen Service
context KitchenService is {
  command SubmitFoodOrder is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    roomServiceOrder: RoomServiceOrder with {
      briefly "Order"
      described as {
        |Food order.
      }
    }
    roomNumber: String(1,20) with {
      briefly "Room"
      described as {
        |Room number.
      }
    }
  } with {
    briefly "Submit food order"
    described as {
      |Submits order to kitchen.
    }
  }
  event FoodOrderReceived is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    estimatedTime: Duration with {
      briefly "Estimated"
      described as {
        |Estimated prep time.
      }
    }
    receivedAt: TimeStamp with {
      briefly "Received"
      described as {
        |Receipt time.
      }
    }
  } with {
    briefly "Food order received"
    described as {
      |Emitted when kitchen receives order.
    }
  }
  event FoodOrderReady is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    readyAt: TimeStamp with {
      briefly "Ready"
      described as {
        |Ready time.
      }
    }
  } with {
    briefly "Food order ready"
    described as {
      |Emitted when food is ready.
    }
  }
  event FoodOrderDelivered is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    deliveredAt: TimeStamp with {
      briefly "Delivered"
      described as {
        |Delivery time.
      }
    }
    deliveredBy: StaffId with {
      briefly "By"
      described as {
        |Delivery staff.
      }
    }
  } with {
    briefly "Food order delivered"
    described as {
      |Emitted when food is delivered.
    }
  }
} with {
  option external()
  briefly "External kitchen service"
  described as {
    |External kitchen management system.
  }
}
// Laundry Service
context LaundryService is {
  command SubmitLaundryOrder is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    laundryOrder: LaundryOrder with {
      briefly "Order"
      described as {
        |Laundry order.
      }
    }
    roomNumber: String(1,20) with {
      briefly "Room"
      described as {
        |Room number.
      }
    }
  } with {
    briefly "Submit laundry order"
    described as {
      |Submits laundry to service.
    }
  }
  event LaundryPickedUp is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    pickedUpAt: TimeStamp with {
      briefly "Picked up"
      described as {
        |Pickup time.
      }
    }
  } with {
    briefly "Laundry picked up"
    described as {
      |Emitted when laundry is collected.
    }
  }
  event LaundryProcessed is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    processedAt: TimeStamp with {
      briefly "Processed"
      described as {
        |Processing time.
      }
    }
  } with {
    briefly "Laundry processed"
    described as {
      |Emitted when laundry is cleaned.
    }
  }
  event LaundryDelivered is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    deliveredAt: TimeStamp with {
      briefly "Delivered"
      described as {
        |Delivery time.
      }
    }
  } with {
    briefly "Laundry delivered"
    described as {
      |Emitted when laundry is returned.
    }
  }
} with {
  option external()
  briefly "External laundry service"
  described as {
    |External laundry management system.
  }
}
// Telephony Service
context TelephonyService is {
  command ScheduleGuestWakeup is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    roomNumber: String(1,20) with {
      briefly "Room"
      described as {
        |Room number.
      }
    }
    wakeupTime: TimeStamp with {
      briefly "Time"
      described as {
        |Wakeup time.
      }
    }
    recurring: Boolean with {
      briefly "Recurring"
      described as {
        |Daily recurring.
      }
    }
  } with {
    briefly "Schedule wakeup call"
    described as {
      |Schedules automated wakeup call.
    }
  }
  event GuestWakeupScheduled is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    scheduledFor: TimeStamp with {
      briefly "Scheduled"
      described as {
        |Scheduled time.
      }
    }
  } with {
    briefly "Wakeup scheduled"
    described as {
      |Emitted when call is scheduled.
    }
  }
  event WakeupCallPlaced is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    placedAt: TimeStamp with {
      briefly "Placed"
      described as {
        |Call time.
      }
    }
    answered: Boolean with {
      briefly "Answered"
      described as {
        |Was answered.
      }
    }
  } with {
    briefly "Wakeup call placed"
    described as {
      |Emitted when wakeup call is placed.
    }
  }
  command CancelWakeupCall is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    roomNumber: String(1,20) with {
      briefly "Room"
      described as {
        |Room number.
      }
    }
  } with {
    briefly "Cancel wakeup call"
    described as {
      |Cancels scheduled wakeup call.
    }
  }
  event WakeupCallCancelled is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    cancelledAt: TimeStamp with {
      briefly "Cancelled"
      described as {
        |Cancel time.
      }
    }
  } with {
    briefly "Wakeup cancelled"
    described as {
      |Emitted when call is cancelled.
    }
  }
} with {
  option external()
  briefly "External telephony"
  described as {
    |External phone system integration.
  }
}
// Billing Service
context BillingService is {
  command PostCharge is  {
    guestId: GuestId with {
      briefly "Guest"
      described as {
        |Guest ID.
      }
    }
    roomNumber: String(1,20) with {
      briefly "Room"
      described as {
        |Room number.
      }
    }
    description: String(1,200) with {
      briefly "Description"
      described as {
        |Charge description.
      }
    }
    amount: Decimal(10,2) with {
      briefly "Amount"
      described as {
        |Charge amount.
      }
    }
    chargeCategory: String(1,50) with {
      briefly "Category"
      described as {
        |Charge category.
      }
    }
  } with {
    briefly "Post charge"
    described as {
      |Posts charge to guest folio.
    }
  }
  event ChargePosted is  {
    guestId: GuestId with {
      briefly "Guest"
      described as {
        |Guest ID.
      }
    }
    amount: Decimal(10,2) with {
      briefly "Amount"
      described as {
        |Charge amount.
      }
    }
    postedAt: TimeStamp with {
      briefly "Posted"
      described as {
        |Post time.
      }
    }
  } with {
    briefly "Charge posted"
    described as {
      |Emitted when charge is posted.
    }
  }
} with {
  option external()
  briefly "External billing"
  described as {
    |External property billing system.
  }
}
// Guest Notification Service
context GuestNotificationService is {
  command SendServiceUpdate is  {
    guestId: GuestId with {
      briefly "Guest"
      described as {
        |Guest ID.
      }
    }
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    message: String(1,500) with {
      briefly "Message"
      described as {
        |Update message.
      }
    }
    channel: String(1,20) with {
      briefly "Channel"
      described as {
        |Notification channel (sms, app, email).
      }
    }
  } with {
    briefly "Send service update"
    described as {
      |Sends status update to guest.
    }
  }
  event UpdateSent is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    sentAt: TimeStamp with {
      briefly "Sent"
      described as {
        |Send time.
      }
    }
    channel: String(1,20) with {
      briefly "Channel"
      described as {
        |Channel used.
      }
    }
  } with {
    briefly "Update sent"
    described as {
      |Emitted when update is sent.
    }
  }
  command RequestFeedback is  {
    guestId: GuestId with {
      briefly "Guest"
      described as {
        |Guest ID.
      }
    }
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
  } with {
    briefly "Request feedback"
    described as {
      |Requests guest feedback on service.
    }
  }
  event FeedbackRequested is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    requestedAt: TimeStamp with {
      briefly "Requested"
      described as {
        |Request time.
      }
    }
  } with {
    briefly "Feedback requested"
    described as {
      |Emitted when feedback is requested.
    }
  }
} with {
  option external()
  briefly "External guest notification"
  described as {
    |External guest communication service.
  }
}
// Maintenance Service
context MaintenanceService is {
  command CreateMaintenanceTicket is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    roomNumber: String(1,20) with {
      briefly "Room"
      described as {
        |Room number.
      }
    }
    issue: String(1,500) with {
      briefly "Issue"
      described as {
        |Maintenance issue.
      }
    }
    priority: RequestPriority with {
      briefly "Priority"
      described as {
        |Issue priority.
      }
    }
  } with {
    briefly "Create maintenance ticket"
    described as {
      |Creates maintenance work order.
    }
  }
  event MaintenanceTicketCreated is  {
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    ticketId: UUID with {
      briefly "Ticket"
      described as {
        |Maintenance ticket ID.
      }
    }
    createdAt: TimeStamp with {
      briefly "Created"
      described as {
        |Creation time.
      }
    }
  } with {
    briefly "Ticket created"
    described as {
      |Emitted when ticket is created.
    }
  }
  event MaintenanceCompleted is  {
    ticketId: UUID with {
      briefly "Ticket"
      described as {
        |Ticket ID.
      }
    }
    requestId: ServiceRequestId with {
      briefly "Request"
      described as {
        |Request ID.
      }
    }
    completedAt: TimeStamp with {
      briefly "Completed"
      described as {
        |Completion time.
      }
    }
    resolution: String(1,500) with {
      briefly "Resolution"
      described as {
        |Issue resolution.
      }
    }
  } with {
    briefly "Maintenance completed"
    described as {
      |Emitted when maintenance is done.
    }
  }
} with {
  option external()
  briefly "External maintenance"
  described as {
    |External maintenance management system.
  }
}
