// Guest Services - External Contexts

// Staff Dispatch Service
context StaffDispatchService is {

  query GetAvailableStaff is {
    department is String(1, 100) with { briefly "Department" described by "Staff department." }
    skillRequired is optional String(1, 100) with { briefly "Skill" described by "Required skill." }
  } with {
    briefly "Get available staff"
    described by "Queries available staff members."
  }

  result AvailableStaffResult is {
    staff is many StaffAssignment with { briefly "Staff" described by "Available staff." }
  } with {
    briefly "Available staff result"
    described by "List of available staff."
  }

  command DispatchStaff is {
    staffId is StaffId with { briefly "Staff" described by "Staff ID." }
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    location is String(1, 100) with { briefly "Location" described by "Service location." }
    priority is RequestPriority with { briefly "Priority" described by "Request priority." }
  } with {
    briefly "Dispatch staff"
    described by "Dispatches staff to location."
  }

  event StaffDispatched is {
    staffId is StaffId with { briefly "Staff" described by "Staff ID." }
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    dispatchedAt is TimeStamp with { briefly "Dispatched" described by "Dispatch time." }
  } with {
    briefly "Staff dispatched"
    described by "Emitted when staff is dispatched."
  }

} with {
  option is external
  briefly "External staff dispatch"
  described by "External workforce management service."
}

// Kitchen Service
context KitchenService is {

  command SubmitFoodOrder is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    order is RoomServiceOrder with { briefly "Order" described by "Food order." }
    roomNumber is String(1, 20) with { briefly "Room" described by "Room number." }
  } with {
    briefly "Submit food order"
    described by "Submits order to kitchen."
  }

  event FoodOrderReceived is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    estimatedTime is Duration with { briefly "Estimated" described by "Estimated prep time." }
    receivedAt is TimeStamp with { briefly "Received" described by "Receipt time." }
  } with {
    briefly "Food order received"
    described by "Emitted when kitchen receives order."
  }

  event FoodOrderReady is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    readyAt is TimeStamp with { briefly "Ready" described by "Ready time." }
  } with {
    briefly "Food order ready"
    described by "Emitted when food is ready."
  }

  event FoodOrderDelivered is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    deliveredAt is TimeStamp with { briefly "Delivered" described by "Delivery time." }
    deliveredBy is StaffId with { briefly "By" described by "Delivery staff." }
  } with {
    briefly "Food order delivered"
    described by "Emitted when food is delivered."
  }

} with {
  option is external
  briefly "External kitchen service"
  described by "External kitchen management system."
}

// Laundry Service
context LaundryService is {

  command SubmitLaundryOrder is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    order is LaundryOrder with { briefly "Order" described by "Laundry order." }
    roomNumber is String(1, 20) with { briefly "Room" described by "Room number." }
  } with {
    briefly "Submit laundry order"
    described by "Submits laundry to service."
  }

  event LaundryPickedUp is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    pickedUpAt is TimeStamp with { briefly "Picked up" described by "Pickup time." }
  } with {
    briefly "Laundry picked up"
    described by "Emitted when laundry is collected."
  }

  event LaundryProcessed is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    processedAt is TimeStamp with { briefly "Processed" described by "Processing time." }
  } with {
    briefly "Laundry processed"
    described by "Emitted when laundry is cleaned."
  }

  event LaundryDelivered is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    deliveredAt is TimeStamp with { briefly "Delivered" described by "Delivery time." }
  } with {
    briefly "Laundry delivered"
    described by "Emitted when laundry is returned."
  }

} with {
  option is external
  briefly "External laundry service"
  described by "External laundry management system."
}

// Telephony Service
context TelephonyService is {

  command ScheduleWakeupCall is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    roomNumber is String(1, 20) with { briefly "Room" described by "Room number." }
    wakeupTime is TimeStamp with { briefly "Time" described by "Wakeup time." }
    recurring is Boolean with { briefly "Recurring" described by "Daily recurring." }
  } with {
    briefly "Schedule wakeup call"
    described by "Schedules automated wakeup call."
  }

  event WakeupCallScheduled is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    scheduledFor is TimeStamp with { briefly "Scheduled" described by "Scheduled time." }
  } with {
    briefly "Wakeup scheduled"
    described by "Emitted when call is scheduled."
  }

  event WakeupCallPlaced is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    placedAt is TimeStamp with { briefly "Placed" described by "Call time." }
    answered is Boolean with { briefly "Answered" described by "Was answered." }
  } with {
    briefly "Wakeup call placed"
    described by "Emitted when wakeup call is placed."
  }

  command CancelWakeupCall is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    roomNumber is String(1, 20) with { briefly "Room" described by "Room number." }
  } with {
    briefly "Cancel wakeup call"
    described by "Cancels scheduled wakeup call."
  }

  event WakeupCallCancelled is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    cancelledAt is TimeStamp with { briefly "Cancelled" described by "Cancel time." }
  } with {
    briefly "Wakeup cancelled"
    described by "Emitted when call is cancelled."
  }

} with {
  option is external
  briefly "External telephony"
  described by "External phone system integration."
}

// Billing Service
context BillingService is {

  command PostCharge is {
    guestId is GuestId with { briefly "Guest" described by "Guest ID." }
    roomNumber is String(1, 20) with { briefly "Room" described by "Room number." }
    description is String(1, 200) with { briefly "Description" described by "Charge description." }
    amount is Decimal(10, 2) with { briefly "Amount" described by "Charge amount." }
    category is String(1, 50) with { briefly "Category" described by "Charge category." }
  } with {
    briefly "Post charge"
    described by "Posts charge to guest folio."
  }

  event ChargePosted is {
    guestId is GuestId with { briefly "Guest" described by "Guest ID." }
    amount is Decimal(10, 2) with { briefly "Amount" described by "Charge amount." }
    postedAt is TimeStamp with { briefly "Posted" described by "Post time." }
  } with {
    briefly "Charge posted"
    described by "Emitted when charge is posted."
  }

} with {
  option is external
  briefly "External billing"
  described by "External property billing system."
}

// Guest Notification Service
context GuestNotificationService is {

  command SendServiceUpdate is {
    guestId is GuestId with { briefly "Guest" described by "Guest ID." }
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    message is String(1, 500) with { briefly "Message" described by "Update message." }
    channel is String(1, 20) with { briefly "Channel" described by "Notification channel (sms, app, email)." }
  } with {
    briefly "Send service update"
    described by "Sends status update to guest."
  }

  event UpdateSent is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    sentAt is TimeStamp with { briefly "Sent" described by "Send time." }
    channel is String(1, 20) with { briefly "Channel" described by "Channel used." }
  } with {
    briefly "Update sent"
    described by "Emitted when update is sent."
  }

  command RequestFeedback is {
    guestId is GuestId with { briefly "Guest" described by "Guest ID." }
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
  } with {
    briefly "Request feedback"
    described by "Requests guest feedback on service."
  }

  event FeedbackRequested is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    requestedAt is TimeStamp with { briefly "Requested" described by "Request time." }
  } with {
    briefly "Feedback requested"
    described by "Emitted when feedback is requested."
  }

} with {
  option is external
  briefly "External guest notification"
  described by "External guest communication service."
}

// Maintenance Service
context MaintenanceService is {

  command CreateMaintenanceTicket is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    roomNumber is String(1, 20) with { briefly "Room" described by "Room number." }
    issue is String(1, 500) with { briefly "Issue" described by "Maintenance issue." }
    priority is RequestPriority with { briefly "Priority" described by "Issue priority." }
  } with {
    briefly "Create maintenance ticket"
    described by "Creates maintenance work order."
  }

  event MaintenanceTicketCreated is {
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    ticketId is UUID with { briefly "Ticket" described by "Maintenance ticket ID." }
    createdAt is TimeStamp with { briefly "Created" described by "Creation time." }
  } with {
    briefly "Ticket created"
    described by "Emitted when ticket is created."
  }

  event MaintenanceCompleted is {
    ticketId is UUID with { briefly "Ticket" described by "Ticket ID." }
    requestId is ServiceRequestId with { briefly "Request" described by "Request ID." }
    completedAt is TimeStamp with { briefly "Completed" described by "Completion time." }
    resolution is String(1, 500) with { briefly "Resolution" described by "Issue resolution." }
  } with {
    briefly "Maintenance completed"
    described by "Emitted when maintenance is done."
  }

} with {
  option is external
  briefly "External maintenance"
  described by "External maintenance management system."
}
