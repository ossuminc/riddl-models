// Property Management - External Contexts

// Housekeeping Management Service
context HousekeepingManagementService is {

  query GetHousekeepingQueue is {
    floorId is optional FloorId with { briefly "Floor" described by "Filter by floor." }
    filterStatus is optional RoomStatus with { briefly "Status" described by "Filter by status." }
  } with {
    briefly "Get housekeeping queue"
    described by "Retrieves rooms needing service."
  }

  result HousekeepingQueueResult is {
    rooms is many RoomId with { briefly "Rooms" described by "Rooms in queue." }
    priorityOrder is many Natural with { briefly "Priority" described by "Priority order." }
  } with {
    briefly "Housekeeping queue result"
    described by "Rooms awaiting housekeeping."
  }

  command OptimizeAssignments is {
    date is Date with { briefly "Date" described by "Assignment date." }
    availableStaff is many StaffId with { briefly "Staff" described by "Available staff." }
    rooms is many RoomId with { briefly "Rooms" described by "Rooms to assign." }
  } with {
    briefly "Optimize assignments"
    described by "Optimizes housekeeper assignments."
  }

  event AssignmentsOptimized is {
    assignments is many HousekeepingAssignment with { briefly "Assignments" described by "Optimized assignments." }
    optimizedAt is TimeStamp with { briefly "Optimized" described by "Optimization time." }
  } with {
    briefly "Assignments optimized"
    described by "Emitted when assignments are optimized."
  }

} with {
  option is external
  briefly "External housekeeping management"
  described by "External workforce optimization service."
}

// Maintenance Management Service
context MaintenanceManagementService is {

  command CreateWorkOrder is {
    roomId is RoomId with { briefly "Room" described by "Room ID." }
    request is MaintenanceRequest with { briefly "Request" described by "Maintenance request." }
  } with {
    briefly "Create work order"
    described by "Creates maintenance work order."
  }

  event WorkOrderCreated is {
    workOrderId is WorkOrderId with { briefly "Work order" described by "Work order ID." }
    roomId is RoomId with { briefly "Room" described by "Room ID." }
    createdAt is TimeStamp with { briefly "Created" described by "Creation time." }
  } with {
    briefly "Work order created"
    described by "Emitted when work order is created."
  }

  command AssignTechnician is {
    workOrderId is WorkOrderId with { briefly "Work order" described by "Work order ID." }
    technicianId is StaffId with { briefly "Technician" described by "Technician ID." }
  } with {
    briefly "Assign technician"
    described by "Assigns technician to work order."
  }

  event TechnicianAssigned is {
    workOrderId is WorkOrderId with { briefly "Work order" described by "Work order ID." }
    technicianId is StaffId with { briefly "Technician" described by "Technician ID." }
    assignedAt is TimeStamp with { briefly "Assigned" described by "Assignment time." }
  } with {
    briefly "Technician assigned"
    described by "Emitted when technician is assigned."
  }

  query GetOpenWorkOrders is {
    filterPriority is optional MaintenancePriority with { briefly "Priority" described by "Filter by priority." }
    filterCategory is optional String(1, 100) with { briefly "Category" described by "Filter by category." }
  } with {
    briefly "Get open work orders"
    described by "Retrieves open maintenance work orders."
  }

  result OpenWorkOrdersResult is {
    workOrders is many MaintenanceRequest with { briefly "Orders" described by "Open work orders." }
  } with {
    briefly "Open work orders result"
    described by "List of open work orders."
  }

} with {
  option is external
  briefly "External maintenance management"
  described by "External maintenance tracking service."
}

// Inventory Service
context InventoryService is {

  command OrderSupplies is {
    supplyItems is many SupplyOrderItem with { briefly "Items" described by "Items to order." }
    requestedBy is StaffId with { briefly "By" described by "Requesting staff." }
  } with {
    briefly "Order supplies"
    described by "Orders housekeeping supplies."
  }

  type SupplyOrderItem is {
    itemName is String(1, 100) with { briefly "Item" described by "Item name." }
    quantity is Natural with { briefly "Quantity" described by "Order quantity." }
    unit is String(1, 20) with { briefly "Unit" described by "Unit of measure." }
  } with {
    briefly "Supply order item"
    described by "Individual supply item."
  }

  event SuppliesOrdered is {
    orderId is UUID with { briefly "Order" described by "Order ID." }
    orderedAt is TimeStamp with { briefly "Ordered" described by "Order time." }
    estimatedDelivery is Date with { briefly "Delivery" described by "Expected delivery." }
  } with {
    briefly "Supplies ordered"
    described by "Emitted when supplies are ordered."
  }

  query GetInventoryLevels is {
    inventoryCategory is optional String(1, 50) with { briefly "Category" described by "Filter by category." }
  } with {
    briefly "Get inventory levels"
    described by "Queries current inventory levels."
  }

  result InventoryLevelsResult is {
    inventoryItems is many InventoryItem with { briefly "Items" described by "Inventory items." }
  } with {
    briefly "Inventory levels result"
    described by "Current inventory counts."
  }

  type InventoryItem is {
    itemName is String(1, 100) with { briefly "Item" described by "Item name." }
    currentQuantity is Natural with { briefly "Current" described by "Current quantity." }
    reorderLevel is Natural with { briefly "Reorder" described by "Reorder threshold." }
    unit is String(1, 20) with { briefly "Unit" described by "Unit of measure." }
  } with {
    briefly "Inventory item"
    described by "Inventory item details."
  }

} with {
  option is external
  briefly "External inventory"
  described by "External supply inventory service."
}

// Reservation Service
context ReservationService is {

  query GetRoomReservations is {
    roomId is RoomId with { briefly "Room" described by "Room ID." }
    fromDate is Date with { briefly "From" described by "Start date." }
    toDate is Date with { briefly "To" described by "End date." }
  } with {
    briefly "Get room reservations"
    described by "Queries reservations for a room."
  }

  result RoomReservationsResult is {
    reservations is many RoomReservationInfo with { briefly "Reservations" described by "Room reservations." }
  } with {
    briefly "Room reservations result"
    described by "List of room reservations."
  }

  type RoomReservationInfo is {
    reservationId is UUID with { briefly "Reservation" described by "Reservation ID." }
    guestName is String(1, 200) with { briefly "Guest" described by "Guest name." }
    checkIn is Date with { briefly "Check-in" described by "Check-in date." }
    checkOut is Date with { briefly "Check-out" described by "Check-out date." }
    specialRequests is optional String(1, 500) with { briefly "Requests" described by "Special requests." }
  } with {
    briefly "Room reservation info"
    described by "Reservation details."
  }

  event GuestCheckingIn is {
    roomId is RoomId with { briefly "Room" described by "Room ID." }
    guestName is String(1, 200) with { briefly "Guest" described by "Guest name." }
    expectedTime is TimeStamp with { briefly "Expected" described by "Expected arrival." }
  } with {
    briefly "Guest checking in"
    described by "Emitted when guest is arriving."
  }

  event GuestCheckedOut is {
    roomId is RoomId with { briefly "Room" described by "Room ID." }
    checkedOutAt is TimeStamp with { briefly "Checked out" described by "Checkout time." }
  } with {
    briefly "Guest checked out"
    described by "Emitted when guest checks out."
  }

} with {
  option is external
  briefly "External reservation"
  described by "External reservation system."
}

// Staff Scheduling Service
context StaffSchedulingService is {

  query GetScheduledStaff is {
    date is Date with { briefly "Date" described by "Schedule date." }
    department is String(1, 100) with { briefly "Department" described by "Department." }
    shift is String(1, 50) with { briefly "Shift" described by "Shift type." }
  } with {
    briefly "Get scheduled staff"
    described by "Queries staff schedule."
  }

  result ScheduledStaffResult is {
    staff is many ScheduledStaffMember with { briefly "Staff" described by "Scheduled staff." }
  } with {
    briefly "Scheduled staff result"
    described by "List of scheduled staff."
  }

  type ScheduledStaffMember is {
    staffId is StaffId with { briefly "Staff" described by "Staff ID." }
    name is String(1, 200) with { briefly "Name" described by "Staff name." }
    shiftStart is TimeStamp with { briefly "Start" described by "Shift start." }
    shiftEnd is TimeStamp with { briefly "End" described by "Shift end." }
    assignedFloors is many optional Natural with { briefly "Floors" described by "Assigned floors." }
  } with {
    briefly "Scheduled staff member"
    described by "Staff schedule details."
  }

  event StaffClockIn is {
    staffId is StaffId with { briefly "Staff" described by "Staff ID." }
    clockedInAt is TimeStamp with { briefly "Clocked in" described by "Clock-in time." }
  } with {
    briefly "Staff clocked in"
    described by "Emitted when staff clocks in."
  }

  event StaffClockOut is {
    staffId is StaffId with { briefly "Staff" described by "Staff ID." }
    clockedOutAt is TimeStamp with { briefly "Clocked out" described by "Clock-out time." }
  } with {
    briefly "Staff clocked out"
    described by "Emitted when staff clocks out."
  }

} with {
  option is external
  briefly "External staff scheduling"
  described by "External workforce scheduling service."
}

// Quality Management Service
context QualityManagementService is {

  command RecordQualityIssue is {
    roomId is RoomId with { briefly "Room" described by "Room ID." }
    issueType is String(1, 100) with { briefly "Type" described by "Issue type." }
    description is String(1, 500) with { briefly "Description" described by "Issue description." }
    severity is String(1, 20) with { briefly "Severity" described by "Issue severity." }
  } with {
    briefly "Record quality issue"
    described by "Records quality control issue."
  }

  event QualityIssueRecorded is {
    issueId is UUID with { briefly "Issue" described by "Issue ID." }
    roomId is RoomId with { briefly "Room" described by "Room ID." }
    recordedAt is TimeStamp with { briefly "Recorded" described by "Record time." }
  } with {
    briefly "Quality issue recorded"
    described by "Emitted when issue is recorded."
  }

  query GetQualityMetrics is {
    startDate is Date with { briefly "Start" described by "Start date." }
    endDate is Date with { briefly "End" described by "End date." }
  } with {
    briefly "Get quality metrics"
    described by "Retrieves quality metrics for period."
  }

  result QualityMetricsResult is {
    inspectionPassRate is Decimal(5, 2) with { briefly "Pass rate" described by "Inspection pass rate." }
    issuesByCategory is many Natural with { briefly "By category" described by "Issues by category." }
    averageResolutionTime is Duration with { briefly "Resolution" described by "Avg resolution time." }
  } with {
    briefly "Quality metrics result"
    described by "Quality performance metrics."
  }

} with {
  option is external
  briefly "External quality management"
  described by "External quality assurance service."
}
