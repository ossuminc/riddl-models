// Property Management - External Contexts
// Housekeeping Management Service
context HousekeepingManagementService is {
  query GetHousekeepingQueue is  {
    floorId: FloorId? with {
      briefly "Floor"
      described as {
        |Filter by floor.
      }
    }
    filterStatus: RoomStatus? with {
      briefly "Status"
      described as {
        |Filter by status.
      }
    }
  } with {
    briefly "Get housekeeping queue"
    described as {
      |Retrieves rooms needing service.
    }
  }
  result HousekeepingQueueResult is  {
    rooms: RoomId+ with {
      briefly "Rooms"
      described as {
        |Rooms in queue.
      }
    }
    priorityOrder: Natural+ with {
      briefly "Priority"
      described as {
        |Priority order.
      }
    }
  } with {
    briefly "Housekeeping queue result"
    described as {
      |Rooms awaiting housekeeping.
    }
  }
  command OptimizeAssignments is  {
    date: Date with {
      briefly "Date"
      described as {
        |Assignment date.
      }
    }
    availableStaff: StaffId+ with {
      briefly "Staff"
      described as {
        |Available staff.
      }
    }
    rooms: RoomId+ with {
      briefly "Rooms"
      described as {
        |Rooms to assign.
      }
    }
  } with {
    briefly "Optimize assignments"
    described as {
      |Optimizes housekeeper assignments.
    }
  }
  event AssignmentsOptimized is  {
    assignments: HousekeepingAssignment+ with {
      briefly "Assignments"
      described as {
        |Optimized assignments.
      }
    }
    optimizedAt: TimeStamp with {
      briefly "Optimized"
      described as {
        |Optimization time.
      }
    }
  } with {
    briefly "Assignments optimized"
    described as {
      |Emitted when assignments are optimized.
    }
  }
} with {
  option external()
  briefly "External housekeeping management"
  described as {
    |External workforce optimization service.
  }
}
// Maintenance Management Service
context MaintenanceManagementService is {
  command CreateWorkOrder is  {
    roomId: RoomId with {
      briefly "Room"
      described as {
        |Room ID.
      }
    }
    request: MaintenanceRequest with {
      briefly "Request"
      described as {
        |Maintenance request.
      }
    }
  } with {
    briefly "Create work order"
    described as {
      |Creates maintenance work order.
    }
  }
  event WorkOrderCreated is  {
    workOrderId: WorkOrderId with {
      briefly "Work order"
      described as {
        |Work order ID.
      }
    }
    roomId: RoomId with {
      briefly "Room"
      described as {
        |Room ID.
      }
    }
    createdAt: TimeStamp with {
      briefly "Created"
      described as {
        |Creation time.
      }
    }
  } with {
    briefly "Work order created"
    described as {
      |Emitted when work order is created.
    }
  }
  command AssignTechnician is  {
    workOrderId: WorkOrderId with {
      briefly "Work order"
      described as {
        |Work order ID.
      }
    }
    technicianId: StaffId with {
      briefly "Technician"
      described as {
        |Technician ID.
      }
    }
  } with {
    briefly "Assign technician"
    described as {
      |Assigns technician to work order.
    }
  }
  event TechnicianAssigned is  {
    workOrderId: WorkOrderId with {
      briefly "Work order"
      described as {
        |Work order ID.
      }
    }
    technicianId: StaffId with {
      briefly "Technician"
      described as {
        |Technician ID.
      }
    }
    assignedAt: TimeStamp with {
      briefly "Assigned"
      described as {
        |Assignment time.
      }
    }
  } with {
    briefly "Technician assigned"
    described as {
      |Emitted when technician is assigned.
    }
  }
  query GetOpenWorkOrders is  {
    filterPriority: MaintenancePriority? with {
      briefly "Priority"
      described as {
        |Filter by priority.
      }
    }
    filterCategory: String(1,100)? with {
      briefly "Category"
      described as {
        |Filter by category.
      }
    }
  } with {
    briefly "Get open work orders"
    described as {
      |Retrieves open maintenance work orders.
    }
  }
  result OpenWorkOrdersResult is  {
    workOrders: MaintenanceRequest+ with {
      briefly "Orders"
      described as {
        |Open work orders.
      }
    }
  } with {
    briefly "Open work orders result"
    described as {
      |List of open work orders.
    }
  }
} with {
  option external()
  briefly "External maintenance management"
  described as {
    |External maintenance tracking service.
  }
}
// Inventory Service
context InventoryService is {
  command OrderSupplies is  {
    supplyItems: SupplyOrderItem+ with {
      briefly "Items"
      described as {
        |Items to order.
      }
    }
    requestedBy: StaffId with {
      briefly "By"
      described as {
        |Requesting staff.
      }
    }
  } with {
    briefly "Order supplies"
    described as {
      |Orders housekeeping supplies.
    }
  }
  type SupplyOrderItem is {
    itemName: String(1,100) with {
      briefly "Item"
      described as {
        |Item name.
      }
    }
    quantity: Natural with {
      briefly "Quantity"
      described as {
        |Order quantity.
      }
    }
    unit: String(1,20) with {
      briefly "Unit"
      described as {
        |Unit of measure.
      }
    }
  } with {
    briefly "Supply order item"
    described as {
      |Individual supply item.
    }
  }
  event SuppliesOrdered is  {
    orderId: UUID with {
      briefly "Order"
      described as {
        |Order ID.
      }
    }
    orderedAt: TimeStamp with {
      briefly "Ordered"
      described as {
        |Order time.
      }
    }
    estimatedDelivery: Date with {
      briefly "Delivery"
      described as {
        |Expected delivery.
      }
    }
  } with {
    briefly "Supplies ordered"
    described as {
      |Emitted when supplies are ordered.
    }
  }
  query GetInventoryLevels is  {
    inventoryCategory: String(1,50)? with {
      briefly "Category"
      described as {
        |Filter by category.
      }
    }
  } with {
    briefly "Get inventory levels"
    described as {
      |Queries current inventory levels.
    }
  }
  result InventoryLevelsResult is  {
    inventoryItems: InventoryItem+ with {
      briefly "Items"
      described as {
        |Inventory items.
      }
    }
  } with {
    briefly "Inventory levels result"
    described as {
      |Current inventory counts.
    }
  }
  type InventoryItem is {
    itemName: String(1,100) with {
      briefly "Item"
      described as {
        |Item name.
      }
    }
    currentQuantity: Natural with {
      briefly "Current"
      described as {
        |Current quantity.
      }
    }
    reorderLevel: Natural with {
      briefly "Reorder"
      described as {
        |Reorder threshold.
      }
    }
    unit: String(1,20) with {
      briefly "Unit"
      described as {
        |Unit of measure.
      }
    }
  } with {
    briefly "Inventory item"
    described as {
      |Inventory item details.
    }
  }
} with {
  option external()
  briefly "External inventory"
  described as {
    |External supply inventory service.
  }
}
// Reservation Service
context ReservationService is {
  query GetRoomReservations is  {
    roomId: RoomId with {
      briefly "Room"
      described as {
        |Room ID.
      }
    }
    fromDate: Date with {
      briefly "From"
      described as {
        |Start date.
      }
    }
    toDate: Date with {
      briefly "To"
      described as {
        |End date.
      }
    }
  } with {
    briefly "Get room reservations"
    described as {
      |Queries reservations for a room.
    }
  }
  result RoomReservationsResult is  {
    reservations: RoomReservationInfo+ with {
      briefly "Reservations"
      described as {
        |Room reservations.
      }
    }
  } with {
    briefly "Room reservations result"
    described as {
      |List of room reservations.
    }
  }
  type RoomReservationInfo is {
    reservationId: UUID with {
      briefly "Reservation"
      described as {
        |Reservation ID.
      }
    }
    guestName: String(1,200) with {
      briefly "Guest"
      described as {
        |Guest name.
      }
    }
    checkIn: Date with {
      briefly "Check-in"
      described as {
        |Check-in date.
      }
    }
    checkOut: Date with {
      briefly "Check-out"
      described as {
        |Check-out date.
      }
    }
    specialRequests: String(1,500)? with {
      briefly "Requests"
      described as {
        |Special requests.
      }
    }
  } with {
    briefly "Room reservation info"
    described as {
      |Reservation details.
    }
  }
  event GuestCheckingIn is  {
    roomId: RoomId with {
      briefly "Room"
      described as {
        |Room ID.
      }
    }
    guestName: String(1,200) with {
      briefly "Guest"
      described as {
        |Guest name.
      }
    }
    expectedTime: TimeStamp with {
      briefly "Expected"
      described as {
        |Expected arrival.
      }
    }
  } with {
    briefly "Guest checking in"
    described as {
      |Emitted when guest is arriving.
    }
  }
  event GuestCheckedOut is  {
    roomId: RoomId with {
      briefly "Room"
      described as {
        |Room ID.
      }
    }
    checkedOutAt: TimeStamp with {
      briefly "Checked out"
      described as {
        |Checkout time.
      }
    }
  } with {
    briefly "Guest checked out"
    described as {
      |Emitted when guest checks out.
    }
  }
} with {
  option external()
  briefly "External reservation"
  described as {
    |External reservation system.
  }
}
// Staff Scheduling Service
context StaffSchedulingService is {
  query GetScheduledStaff is  {
    date: Date with {
      briefly "Date"
      described as {
        |Schedule date.
      }
    }
    department: String(1,100) with {
      briefly "Department"
      described as {
        |Department.
      }
    }
    shift: String(1,50) with {
      briefly "Shift"
      described as {
        |Shift type.
      }
    }
  } with {
    briefly "Get scheduled staff"
    described as {
      |Queries staff schedule.
    }
  }
  result ScheduledStaffResult is  {
    staff: ScheduledStaffMember+ with {
      briefly "Staff"
      described as {
        |Scheduled staff.
      }
    }
  } with {
    briefly "Scheduled staff result"
    described as {
      |List of scheduled staff.
    }
  }
  type ScheduledStaffMember is {
    staffId: StaffId with {
      briefly "Staff"
      described as {
        |Staff ID.
      }
    }
    name: String(1,200) with {
      briefly "Name"
      described as {
        |Staff name.
      }
    }
    shiftStart: TimeStamp with {
      briefly "Start"
      described as {
        |Shift start.
      }
    }
    shiftEnd: TimeStamp with {
      briefly "End"
      described as {
        |Shift end.
      }
    }
    assignedFloors: Natural* with {
      briefly "Floors"
      described as {
        |Assigned floors.
      }
    }
  } with {
    briefly "Scheduled staff member"
    described as {
      |Staff schedule details.
    }
  }
  event StaffClockIn is  {
    staffId: StaffId with {
      briefly "Staff"
      described as {
        |Staff ID.
      }
    }
    clockedInAt: TimeStamp with {
      briefly "Clocked in"
      described as {
        |Clock-in time.
      }
    }
  } with {
    briefly "Staff clocked in"
    described as {
      |Emitted when staff clocks in.
    }
  }
  event StaffClockOut is  {
    staffId: StaffId with {
      briefly "Staff"
      described as {
        |Staff ID.
      }
    }
    clockedOutAt: TimeStamp with {
      briefly "Clocked out"
      described as {
        |Clock-out time.
      }
    }
  } with {
    briefly "Staff clocked out"
    described as {
      |Emitted when staff clocks out.
    }
  }
} with {
  option external()
  briefly "External staff scheduling"
  described as {
    |External workforce scheduling service.
  }
}
// Quality Management Service
context QualityManagementService is {
  command RecordQualityIssue is  {
    roomId: RoomId with {
      briefly "Room"
      described as {
        |Room ID.
      }
    }
    issueType: String(1,100) with {
      briefly "Type"
      described as {
        |Issue type.
      }
    }
    description: String(1,500) with {
      briefly "Description"
      described as {
        |Issue description.
      }
    }
    severity: String(1,20) with {
      briefly "Severity"
      described as {
        |Issue severity.
      }
    }
  } with {
    briefly "Record quality issue"
    described as {
      |Records quality control issue.
    }
  }
  event QualityIssueRecorded is  {
    issueId: UUID with {
      briefly "Issue"
      described as {
        |Issue ID.
      }
    }
    roomId: RoomId with {
      briefly "Room"
      described as {
        |Room ID.
      }
    }
    recordedAt: TimeStamp with {
      briefly "Recorded"
      described as {
        |Record time.
      }
    }
  } with {
    briefly "Quality issue recorded"
    described as {
      |Emitted when issue is recorded.
    }
  }
  query GetQualityMetrics is  {
    startDate: Date with {
      briefly "Start"
      described as {
        |Start date.
      }
    }
    endDate: Date with {
      briefly "End"
      described as {
        |End date.
      }
    }
  } with {
    briefly "Get quality metrics"
    described as {
      |Retrieves quality metrics for period.
    }
  }
  result QualityMetricsResult is  {
    inspectionPassRate: Decimal(5,2) with {
      briefly "Pass rate"
      described as {
        |Inspection pass rate.
      }
    }
    issuesByCategory: Natural+ with {
      briefly "By category"
      described as {
        |Issues by category.
      }
    }
    averageResolutionTime: Duration with {
      briefly "Resolution"
      described as {
        |Avg resolution time.
      }
    }
  } with {
    briefly "Quality metrics result"
    described as {
      |Quality performance metrics.
    }
  }
} with {
  option external()
  briefly "External quality management"
  described as {
    |External quality assurance service.
  }
}
