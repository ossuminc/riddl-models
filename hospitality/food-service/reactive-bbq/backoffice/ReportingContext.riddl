// Reporting bounded context - CQRS projectors only
context Reporting is {
  projector SalesReport is {
    record SalesReportEntry is  {
      reportDate: Date with {
        briefly "Date"
        described as {
          |Report date.
        }
      }
      totalRevenue: Decimal(12,2) with {
        briefly "Revenue"
        described as {
          |Total revenue for the period.
        }
      }
      dineInRevenue: Decimal(12,2) with {
        briefly "Dine-in revenue"
        described as {
          |Revenue from dine-in orders.
        }
      }
      onlineRevenue: Decimal(12,2) with {
        briefly "Online revenue"
        described as {
          |Revenue from online orders.
        }
      }
      orderCount: Natural with {
        briefly "Orders"
        described as {
          |Total number of orders.
        }
      }
      averageOrderValue: Decimal(10,2) with {
        briefly "Average order"
        described as {
          |Average order value.
        }
      }
    } with {
      briefly "Sales report entry"
      described as {
        |A single sales report data point.
      }
    }
    handler SalesReportHandler is {
      on event Restaurant.FrontOfHouse.TableOrder.PaymentProcessed is {
        prompt "Record dine-in sale in report"
      }
      on event Restaurant.OnlineOrdering.OnlineOrder.OnlinePaymentProcessed is {
        prompt "Record online sale in report"
      }
    } with {
      briefly "Sales report handler"
      described as {
        |Projects payment events into sales reports.
      }
    }
  } with {
    briefly "Sales report projector"
    described as {
      | Builds sales reports from payment events across
      | dine-in and online channels. Isolated from production
      | so report generation never impacts peak-hour performance.
    }
  }
  projector LaborReport is {
    record LaborReportEntry is  {
      laborReportDate: Date with {
        briefly "Date"
        described as {
          |Report date.
        }
      }
      totalHoursWorked: Decimal(8,2) with {
        briefly "Hours"
        described as {
          |Total hours worked.
        }
      }
      shiftsCompleted: Natural with {
        briefly "Shifts"
        described as {
          |Number of completed shifts.
        }
      }
      shiftsCancelled: Natural with {
        briefly "Cancelled"
        described as {
          |Number of cancelled shifts.
        }
      }
      averageShiftDuration: Decimal(6,2) with {
        briefly "Average duration"
        described as {
          |Average shift duration in hours.
        }
      }
    } with {
      briefly "Labor report entry"
      described as {
        |A single labor report data point.
      }
    }
    handler LaborReportHandler is {
      on event BackOffice.Scheduling.Shift.ClockedIn is {
        prompt "Record shift start in labor report"
      }
      on event BackOffice.Scheduling.Shift.ClockedOut is {
        prompt "Record shift end and calculate hours"
      }
      on event BackOffice.Scheduling.Shift.ShiftCancelled is {
        prompt "Record shift cancellation"
      }
    } with {
      briefly "Labor report handler"
      described as {
        |Projects scheduling events into labor reports.
      }
    }
  } with {
    briefly "Labor report projector"
    described as {
      |Builds labor reports from scheduling clock events.
    }
  }
  projector InventoryReport is {
    record InventoryReportEntry is  {
      inventoryReportDate: Date with {
        briefly "Date"
        described as {
          |Report date.
        }
      }
      totalItemsTracked: Natural with {
        briefly "Items tracked"
        described as {
          |Total inventory items being tracked.
        }
      }
      lowStockItems: Natural with {
        briefly "Low stock"
        described as {
          |Number of items below reorder threshold.
        }
      }
      outOfStockItems: Natural with {
        briefly "Out of stock"
        described as {
          |Number of out-of-stock items.
        }
      }
      totalStockValue: Decimal(14,2) with {
        briefly "Stock value"
        described as {
          |Estimated total stock value.
        }
      }
    } with {
      briefly "Inventory report entry"
      described as {
        |A single inventory report data point.
      }
    }
    handler InventoryReportHandler is {
      on event BackOffice.Inventory.InventoryItem.StockReceived is {
        prompt "Update inventory report with receipt"
      }
      on event BackOffice.Inventory.InventoryItem.StockConsumed is {
        prompt "Update inventory report with consumption"
      }
      on event BackOffice.Inventory.InventoryItem.StockAdjusted is {
        prompt "Update inventory report with adjustment"
      }
    } with {
      briefly "Inventory report handler"
      described as {
        |Projects inventory events into reports.
      }
    }
  } with {
    briefly "Inventory report projector"
    described as {
      |Builds inventory reports from stock events.
    }
  }
} with {
  briefly "Reporting context"
  described as {
    | CQRS read-model context containing projectors for
    | sales, labor, and inventory reports. Completely
    | isolated from production contexts so that report
    | generation never degrades peak-hour restaurant
    | performance. Addresses the CEO's concern about
    | reports slowing down operations.
  }
}
