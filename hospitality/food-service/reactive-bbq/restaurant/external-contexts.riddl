// External systems used by the Restaurant domain

context PaymentGateway is {

  command AuthorizePayment is {
    paymentGatewayTransactionId is String(1, 100) with {
      briefly "Transaction ID"
      described by "External transaction identifier."
    }
    authorizeAmount is Decimal(10, 2) with {
      briefly "Amount"
      described by "Amount to authorize."
    }
    authorizeMethod is String(1, 50) with {
      briefly "Method"
      described by "Payment method."
    }
  } with {
    briefly "Authorize payment"
    described by "Authorize a payment through the gateway."
  }

  event PaymentAuthorized is {
    paymentGatewayTransactionId is String(1, 100) with {
      briefly "Transaction ID"
      described by "External transaction identifier."
    }
    authorizedAmount is Decimal(10, 2) with {
      briefly "Amount"
      described by "Authorized amount."
    }
    authorizationCode is String(1, 50) with {
      briefly "Authorization code"
      described by "Gateway authorization code."
    }
  } with {
    briefly "Payment authorized"
    described by "Emitted when payment is authorized."
  }

  command CapturePayment is {
    captureTransactionId is String(1, 100) with {
      briefly "Transaction ID"
      described by "Transaction to capture."
    }
    captureAmount is Decimal(10, 2) with {
      briefly "Amount"
      described by "Amount to capture."
    }
  } with {
    briefly "Capture payment"
    described by "Capture an authorized payment."
  }

  event PaymentCaptured is {
    captureTransactionId is String(1, 100) with {
      briefly "Transaction ID"
      described by "Captured transaction."
    }
    capturedAmount is Decimal(10, 2) with {
      briefly "Amount"
      described by "Captured amount."
    }
  } with {
    briefly "Payment captured"
    described by "Emitted when payment is captured."
  }

} with {
  option is external
  briefly "External payment gateway"
  described by "Third-party payment processing service."
}

context NotificationService is {

  command SendPushNotification is {
    notificationRecipient is String(1, 100) with {
      briefly "Recipient"
      described by "Recipient identifier."
    }
    notificationTitle is String(1, 200) with {
      briefly "Title"
      described by "Notification title."
    }
    notificationBody is String(1, 1000) with {
      briefly "Body"
      described by "Notification body text."
    }
  } with {
    briefly "Send push notification"
    described by "Send a push notification to a device."
  }

  event PushNotificationSent is {
    notificationRecipient is String(1, 100) with {
      briefly "Recipient"
      described by "Recipient."
    }
    sentAt is TimeStamp with {
      briefly "Sent at"
      described by "When the notification was sent."
    }
  } with {
    briefly "Push notification sent"
    described by "Emitted when a push notification is delivered."
  }

} with {
  option is external
  briefly "External notification service"
  described by "Push notification delivery service for mobile devices."
}
