// External systems used by the Restaurant domain
context PaymentGateway is {
  command AuthorizePayment is  {
    paymentGatewayTransactionId: String(1,100) with {
      briefly "Transaction ID"
      described as {
        |External transaction identifier.
      }
    }
    authorizeAmount: Decimal(10,2) with {
      briefly "Amount"
      described as {
        |Amount to authorize.
      }
    }
    authorizeMethod: String(1,50) with {
      briefly "Method"
      described as {
        |Payment method.
      }
    }
  } with {
    briefly "Authorize payment"
    described as {
      |Authorize a payment through the gateway.
    }
  }
  event PaymentAuthorized is  {
    paymentGatewayTransactionId: String(1,100) with {
      briefly "Transaction ID"
      described as {
        |External transaction identifier.
      }
    }
    authorizedAmount: Decimal(10,2) with {
      briefly "Amount"
      described as {
        |Authorized amount.
      }
    }
    authorizationCode: String(1,50) with {
      briefly "Authorization code"
      described as {
        |Gateway authorization code.
      }
    }
  } with {
    briefly "Payment authorized"
    described as {
      |Emitted when payment is authorized.
    }
  }
  command CapturePayment is  {
    captureTransactionId: String(1,100) with {
      briefly "Transaction ID"
      described as {
        |Transaction to capture.
      }
    }
    captureAmount: Decimal(10,2) with {
      briefly "Amount"
      described as {
        |Amount to capture.
      }
    }
  } with {
    briefly "Capture payment"
    described as {
      |Capture an authorized payment.
    }
  }
  event PaymentCaptured is  {
    captureTransactionId: String(1,100) with {
      briefly "Transaction ID"
      described as {
        |Captured transaction.
      }
    }
    capturedAmount: Decimal(10,2) with {
      briefly "Amount"
      described as {
        |Captured amount.
      }
    }
  } with {
    briefly "Payment captured"
    described as {
      |Emitted when payment is captured.
    }
  }
} with {
  option external()
  briefly "External payment gateway"
  described as {
    |Third-party payment processing service.
  }
}
context NotificationService is {
  command SendPushNotification is  {
    notificationRecipient: String(1,100) with {
      briefly "Recipient"
      described as {
        |Recipient identifier.
      }
    }
    notificationTitle: String(1,200) with {
      briefly "Title"
      described as {
        |Notification title.
      }
    }
    notificationBody: String(1,1000) with {
      briefly "Body"
      described as {
        |Notification body text.
      }
    }
  } with {
    briefly "Send push notification"
    described as {
      |Send a push notification to a device.
    }
  }
  event PushNotificationSent is  {
    notificationRecipient: String(1,100) with {
      briefly "Recipient"
      described as {
        |Recipient.
      }
    }
    sentAt: TimeStamp with {
      briefly "Sent at"
      described as {
        |When the notification was sent.
      }
    }
  } with {
    briefly "Push notification sent"
    described as {
      |Emitted when a push notification is delivered.
    }
  }
} with {
  option external()
  briefly "External notification service"
  described as {
    |Push notification delivery service for mobile devices.
  }
}
