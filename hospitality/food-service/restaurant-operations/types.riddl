// Restaurant Operations - Shared Types
type TableOrderId is Id(OrderContext.TableOrder)  with {
  briefly "Order identifier"
  described as {
    |Unique identifier for a table order.
  }
}
type TableId is UUID with {
  briefly "Table identifier"
  described as {
    |Reference to a restaurant table.
  }
}
type MenuItemId is UUID with {
  briefly "Menu item identifier"
  described as {
    |Reference to a menu item.
  }
}
type ServerId is UUID with {
  briefly "Server identifier"
  described as {
    |Reference to wait staff.
  }
}
type KitchenStationId is UUID with {
  briefly "Station identifier"
  described as {
    |Reference to kitchen station.
  }
}
type OrderStatus is any of {
  Open,
  Submitted,
  InPreparation,
  Ready,
  Served,
  Closed,
  Cancelled
} with {
  briefly "Order status"
  described as {
    |Current order status.
  }
}
type ItemStatus is any of {
  Pending,
  Preparing,
  Ready,
  Served,
  Voided
} with {
  briefly "Item status"
  described as {
    |Status of order item.
  }
}
type TableStatus is any of {
  Available,
  Reserved,
  Occupied,
  NeedsCleaning
} with {
  briefly "Table status"
  described as {
    |Current table status.
  }
}
type OrderType is any of {
  DineIn,
  TakeOut,
  Delivery
} with {
  briefly "Order type"
  described as {
    |Type of order.
  }
}
type PaymentStatus is any of {
  Unpaid,
  PartiallyPaid,
  Paid,
  Refunded
} with {
  briefly "Payment status"
  described as {
    |Payment status.
  }
}
type CourseType is any of {
  Appetizer,
  Soup,
  Salad,
  Entree,
  Side,
  Dessert,
  Beverage
} with {
  briefly "Course type"
  described as {
    |Course category.
  }
}
type TableInfo is {
  tableId: TableId with {
    briefly "Table"
    described as {
      |Table identifier.
    }
  }
  tableNumber: String(1,10) with {
    briefly "Number"
    described as {
      |Table number.
    }
  }
  capacity: Natural with {
    briefly "Capacity"
    described as {
      |Seating capacity.
    }
  }
  section: String(1,50) with {
    briefly "Section"
    described as {
      |Restaurant section.
    }
  }
  tableStatus: TableStatus with {
    briefly "Status"
    described as {
      |Current status.
    }
  }
} with {
  briefly "Table info"
  described as {
    |Restaurant table details.
  }
}
type GuestInfo is {
  partySize: Natural with {
    briefly "Party size"
    described as {
      |Number of guests.
    }
  }
  knownGuestName: String(1,100)? with {
    briefly "Name"
    described as {
      |Guest name if known.
    }
  }
  linkedReservationId: UUID? with {
    briefly "Reservation"
    described as {
      |Reservation ID if applicable.
    }
  }
  specialRequests: String(1,500)? with {
    briefly "Requests"
    described as {
      |Special requests.
    }
  }
  allergies: String(1,100)* with {
    briefly "Allergies"
    described as {
      |Food allergies.
    }
  }
} with {
  briefly "Guest info"
  described as {
    |Guest party details.
  }
}
type MenuItem is {
  itemId: MenuItemId with {
    briefly "Item"
    described as {
      |Menu item identifier.
    }
  }
  name: String(1,100) with {
    briefly "Name"
    described as {
      |Item name.
    }
  }
  description: String(1,300) with {
    briefly "Description"
    described as {
      |Item description.
    }
  }
  price: Decimal(8,2) with {
    briefly "Price"
    described as {
      |Item price.
    }
  }
  courseType: CourseType with {
    briefly "Course"
    described as {
      |Course category.
    }
  }
  kitchenStation: KitchenStationId with {
    briefly "Station"
    described as {
      |Preparing station.
    }
  }
  preparationTime: Duration with {
    briefly "Prep time"
    described as {
      |Preparation time.
    }
  }
} with {
  briefly "Menu item"
  described as {
    |Restaurant menu item.
  }
}
type OrderLineItem is {
  lineNumber: Natural with {
    briefly "Line"
    described as {
      |Line number.
    }
  }
  menuItem: MenuItem with {
    briefly "Item"
    described as {
      |Menu item.
    }
  }
  quantity: Natural with {
    briefly "Quantity"
    described as {
      |Item quantity.
    }
  }
  modifications: String(1,200)* with {
    briefly "Mods"
    described as {
      |Item modifications.
    }
  }
  seatNumber: Natural? with {
    briefly "Seat"
    described as {
      |Seat number.
    }
  }
  itemStatus: ItemStatus with {
    briefly "Status"
    described as {
      |Item status.
    }
  }
  unitPrice: Decimal(8,2) with {
    briefly "Price"
    described as {
      |Unit price.
    }
  }
  lineTotal: Decimal(8,2) with {
    briefly "Total"
    described as {
      |Line total.
    }
  }
  orderedAt: TimeStamp with {
    briefly "Ordered"
    described as {
      |Order time.
    }
  }
} with {
  briefly "Order line item"
  described as {
    |Individual item in order.
  }
}
type KitchenTicket is {
  ticketId: UUID with {
    briefly "Ticket"
    described as {
      |Ticket identifier.
    }
  }
  orderId: TableOrderId with {
    briefly "Order"
    described as {
      |Associated order.
    }
  }
  station: KitchenStationId with {
    briefly "Station"
    described as {
      |Kitchen station.
    }
  }
  items: OrderLineItem+ with {
    briefly "Items"
    described as {
      |Items for this station.
    }
  }
  priority: Natural with {
    briefly "Priority"
    described as {
      |Ticket priority.
    }
  }
  createdAt: TimeStamp with {
    briefly "Created"
    described as {
      |Creation time.
    }
  }
} with {
  briefly "Kitchen ticket"
  described as {
    |Kitchen order ticket.
  }
}
type PaymentInfo is {
  subtotal: Decimal(10,2) with {
    briefly "Subtotal"
    described as {
      |Order subtotal.
    }
  }
  taxAmount: Decimal(10,2) with {
    briefly "Tax"
    described as {
      |Tax amount.
    }
  }
  tipAmount: Decimal(10,2)? with {
    briefly "Tip"
    described as {
      |Tip amount.
    }
  }
  appliedDiscountAmount: Decimal(10,2)? with {
    briefly "Discount"
    described as {
      |Discount amount.
    }
  }
  totalAmount: Decimal(10,2) with {
    briefly "Total"
    described as {
      |Total amount.
    }
  }
  amountPaid: Decimal(10,2) with {
    briefly "Paid"
    described as {
      |Amount paid.
    }
  }
  paymentStatus: PaymentStatus with {
    briefly "Status"
    described as {
      |Payment status.
    }
  }
} with {
  briefly "Payment info"
  described as {
    |Order payment details.
  }
}
type SplitPayment is {
  seatNumber: Natural? with {
    briefly "Seat"
    described as {
      |Seat number if by seat.
    }
  }
  amount: Decimal(10,2) with {
    briefly "Amount"
    described as {
      |Split amount.
    }
  }
  paymentMethod: String(1,50) with {
    briefly "Method"
    described as {
      |Payment method.
    }
  }
  transactionId: String(1,100) with {
    briefly "Transaction"
    described as {
      |Transaction ID.
    }
  }
} with {
  briefly "Split payment"
  described as {
    |Individual split payment.
  }
}
