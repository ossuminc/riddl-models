// Restaurant Operations - Shared Types

type TableOrderId is Id(OrderContext.TableOrder) with {
  briefly "Order identifier"
  described by "Unique identifier for a table order."
}

type TableId is UUID with {
  briefly "Table identifier"
  described by "Reference to a restaurant table."
}

type MenuItemId is UUID with {
  briefly "Menu item identifier"
  described by "Reference to a menu item."
}

type ServerId is UUID with {
  briefly "Server identifier"
  described by "Reference to wait staff."
}

type KitchenStationId is UUID with {
  briefly "Station identifier"
  described by "Reference to kitchen station."
}

type OrderStatus is any of {
  Open,
  Submitted,
  InPreparation,
  Ready,
  Served,
  Closed,
  Cancelled
} with {
  briefly "Order status"
  described by "Current order status."
}

type ItemStatus is any of {
  Pending,
  Preparing,
  Ready,
  Served,
  Voided
} with {
  briefly "Item status"
  described by "Status of order item."
}

type TableStatus is any of {
  Available,
  Reserved,
  Occupied,
  NeedsCleaning
} with {
  briefly "Table status"
  described by "Current table status."
}

type OrderType is any of {
  DineIn,
  TakeOut,
  Delivery
} with {
  briefly "Order type"
  described by "Type of order."
}

type PaymentStatus is any of {
  Unpaid,
  PartiallyPaid,
  Paid,
  Refunded
} with {
  briefly "Payment status"
  described by "Payment status."
}

type CourseType is any of {
  Appetizer,
  Soup,
  Salad,
  Entree,
  Side,
  Dessert,
  Beverage
} with {
  briefly "Course type"
  described by "Course category."
}

type TableInfo is {
  tableId is TableId with {
    briefly "Table"
    described by "Table identifier."
  }
  tableNumber is String(1, 10) with {
    briefly "Number"
    described by "Table number."
  }
  capacity is Natural with {
    briefly "Capacity"
    described by "Seating capacity."
  }
  section is String(1, 50) with {
    briefly "Section"
    described by "Restaurant section."
  }
  tableStatus is TableStatus with {
    briefly "Status"
    described by "Current status."
  }
} with {
  briefly "Table info"
  described by "Restaurant table details."
}

type GuestInfo is {
  partySize is Natural with {
    briefly "Party size"
    described by "Number of guests."
  }
  knownGuestName is optional String(1, 100) with {
    briefly "Name"
    described by "Guest name if known."
  }
  linkedReservationId is optional UUID with {
    briefly "Reservation"
    described by "Reservation ID if applicable."
  }
  specialRequests is optional String(1, 500) with {
    briefly "Requests"
    described by "Special requests."
  }
  allergies is many optional String(1, 100) with {
    briefly "Allergies"
    described by "Food allergies."
  }
} with {
  briefly "Guest info"
  described by "Guest party details."
}

type MenuItem is {
  itemId is MenuItemId with {
    briefly "Item"
    described by "Menu item identifier."
  }
  name is String(1, 100) with {
    briefly "Name"
    described by "Item name."
  }
  description is String(1, 300) with {
    briefly "Description"
    described by "Item description."
  }
  price is Decimal(8, 2) with {
    briefly "Price"
    described by "Item price."
  }
  courseType is CourseType with {
    briefly "Course"
    described by "Course category."
  }
  kitchenStation is KitchenStationId with {
    briefly "Station"
    described by "Preparing station."
  }
  preparationTime is Duration with {
    briefly "Prep time"
    described by "Preparation time."
  }
} with {
  briefly "Menu item"
  described by "Restaurant menu item."
}

type OrderLineItem is {
  lineNumber is Natural with {
    briefly "Line"
    described by "Line number."
  }
  menuItem is MenuItem with {
    briefly "Item"
    described by "Menu item."
  }
  quantity is Natural with {
    briefly "Quantity"
    described by "Item quantity."
  }
  modifications is many optional String(1, 200) with {
    briefly "Mods"
    described by "Item modifications."
  }
  seatNumber is optional Natural with {
    briefly "Seat"
    described by "Seat number."
  }
  itemStatus is ItemStatus with {
    briefly "Status"
    described by "Item status."
  }
  unitPrice is Decimal(8, 2) with {
    briefly "Price"
    described by "Unit price."
  }
  lineTotal is Decimal(8, 2) with {
    briefly "Total"
    described by "Line total."
  }
  orderedAt is TimeStamp with {
    briefly "Ordered"
    described by "Order time."
  }
} with {
  briefly "Order line item"
  described by "Individual item in order."
}

type KitchenTicket is {
  ticketId is UUID with {
    briefly "Ticket"
    described by "Ticket identifier."
  }
  orderId is TableOrderId with {
    briefly "Order"
    described by "Associated order."
  }
  station is KitchenStationId with {
    briefly "Station"
    described by "Kitchen station."
  }
  items is many OrderLineItem with {
    briefly "Items"
    described by "Items for this station."
  }
  priority is Natural with {
    briefly "Priority"
    described by "Ticket priority."
  }
  createdAt is TimeStamp with {
    briefly "Created"
    described by "Creation time."
  }
} with {
  briefly "Kitchen ticket"
  described by "Kitchen order ticket."
}

type PaymentInfo is {
  subtotal is Decimal(10, 2) with {
    briefly "Subtotal"
    described by "Order subtotal."
  }
  taxAmount is Decimal(10, 2) with {
    briefly "Tax"
    described by "Tax amount."
  }
  tipAmount is optional Decimal(10, 2) with {
    briefly "Tip"
    described by "Tip amount."
  }
  appliedDiscountAmount is optional Decimal(10, 2) with {
    briefly "Discount"
    described by "Discount amount."
  }
  totalAmount is Decimal(10, 2) with {
    briefly "Total"
    described by "Total amount."
  }
  amountPaid is Decimal(10, 2) with {
    briefly "Paid"
    described by "Amount paid."
  }
  paymentStatus is PaymentStatus with {
    briefly "Status"
    described by "Payment status."
  }
} with {
  briefly "Payment info"
  described by "Order payment details."
}

type SplitPayment is {
  seatNumber is optional Natural with {
    briefly "Seat"
    described by "Seat number if by seat."
  }
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Split amount."
  }
  paymentMethod is String(1, 50) with {
    briefly "Method"
    described by "Payment method."
  }
  transactionId is String(1, 100) with {
    briefly "Transaction"
    described by "Transaction ID."
  }
} with {
  briefly "Split payment"
  described by "Individual split payment."
}
