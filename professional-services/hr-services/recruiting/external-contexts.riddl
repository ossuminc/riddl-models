// Recruiting - External Contexts

context JobBoardIntegration is {

  command PostJobListing is {
    requisitionId is RequisitionId with { briefly "Requisition" described by "Requisition ID." }
    jobTitle is String(3, 200) with { briefly "Title" described by "Job title." }
    jobDescription is String(10, 5000) with { briefly "Description" described by "Job description text." }
    location is String(3, 200) with { briefly "Location" described by "Job location." }
    boardName is String(3, 100) with { briefly "Board" described by "Target job board name." }
  } with {
    briefly "Post job listing"
    described by "Posts a job to an external job board."
  }

  event JobListingPosted is {
    requisitionId is RequisitionId with { briefly "Requisition" described by "Requisition ID." }
    boardName is String(3, 100) with { briefly "Board" described by "Job board name." }
    externalListingId is String(3, 200) with { briefly "Listing ID" described by "External listing identifier." }
    postedAt is TimeStamp with { briefly "Posted" described by "When the listing was posted." }
  } with {
    briefly "Job listing posted"
    described by "Emitted when a job is posted to a board."
  }

  command RemoveJobListing is {
    requisitionId is RequisitionId with { briefly "Requisition" described by "Requisition ID." }
    boardName is String(3, 100) with { briefly "Board" described by "Job board name." }
    externalListingId is String(3, 200) with { briefly "Listing ID" described by "External listing identifier." }
  } with {
    briefly "Remove job listing"
    described by "Removes a job listing from a board."
  }

  event JobListingRemoved is {
    requisitionId is RequisitionId with { briefly "Requisition" described by "Requisition ID." }
    boardName is String(3, 100) with { briefly "Board" described by "Job board name." }
    removedAt is TimeStamp with { briefly "Removed" described by "When the listing was removed." }
  } with {
    briefly "Job listing removed"
    described by "Emitted when a listing is removed from a board."
  }

  query GetApplicationsFromBoard is {
    boardName is String(3, 100) with { briefly "Board" described by "Job board name." }
    requisitionId is RequisitionId with { briefly "Requisition" described by "Requisition ID." }
  } with {
    briefly "Get applications from board"
    described by "Retrieves new applications from an external board."
  }

  result BoardApplications is {
    applications is many CandidateProfile with { briefly "Applications" described by "Candidate applications." }
    retrievedAt is TimeStamp with { briefly "Retrieved" described by "Retrieval time." }
  } with {
    briefly "Board applications"
    described by "Applications received from a job board."
  }

} with {
  option is external
  briefly "External job board integration"
  described by "Integration with external job boards for posting and sourcing."
}

context BackgroundCheckService is {

  command InitiateBackgroundCheck is {
    requisitionId is RequisitionId with { briefly "Requisition" described by "Requisition ID." }
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
    candidateName is String(3, 200) with { briefly "Name" described by "Candidate full name." }
    checkTypes is many String(3, 100) with { briefly "Check types" described by "Types of checks to run." }
  } with {
    briefly "Initiate background check"
    described by "Starts a background check for a candidate."
  }

  event BackgroundCheckCompleted is {
    requisitionId is RequisitionId with { briefly "Requisition" described by "Requisition ID." }
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
    passed is Boolean with { briefly "Passed" described by "Whether the check passed." }
    findings is optional String(3, 5000) with { briefly "Findings" described by "Check findings summary." }
    completedAt is TimeStamp with { briefly "Completed" described by "Completion time." }
  } with {
    briefly "Background check completed"
    described by "Emitted when a background check is finished."
  }

  query GetCheckStatus is {
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
  } with {
    briefly "Get check status"
    described by "Gets background check progress."
  }

  result CheckStatus is {
    candidateId is CandidateId with { briefly "Candidate" described by "Candidate ID." }
    status is String(3, 50) with { briefly "Status" described by "Check status." }
    estimatedCompletion is optional Date with { briefly "Estimated" described by "Estimated completion date." }
  } with {
    briefly "Check status"
    described by "Background check status."
  }

} with {
  option is external
  briefly "External background check service"
  described by "Third-party background screening and verification service."
}
