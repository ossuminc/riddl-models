// Contract Lifecycle - Shared Types

type ContractId is Id(ContractContext.Contract) with {
  briefly "Contract identifier"
  described by "Unique identifier for a contract."
}

type PartyId is UUID with {
  briefly "Party identifier"
  described by "Reference to a contracting party."
}

type TemplateId is UUID with {
  briefly "Template identifier"
  described by "Reference to a contract template."
}

type ObligationId is UUID with {
  briefly "Obligation identifier"
  described by "Reference to a contract obligation."
}

type ContractStatus is any of {
  Drafting,
  InReview,
  Redlining,
  PendingApproval,
  Approved,
  PendingSignature,
  Executed,
  Active,
  Expired,
  Terminated,
  Renewed
} with {
  briefly "Contract status"
  described by "Current status of a contract."
}

type ContractType is any of {
  ServiceAgreement,
  NDA,
  MasterServices,
  StatementOfWork,
  License,
  Employment,
  Vendor,
  Partnership,
  Lease,
  Amendment
} with {
  briefly "Contract type"
  described by "Type of legal contract."
}

type ApprovalStatus is any of {
  Pending,
  Approved,
  Rejected,
  ConditionallyApproved
} with {
  briefly "Approval status"
  described by "Status of an approval decision."
}

type ObligationType is any of {
  Payment,
  Delivery,
  Performance,
  Reporting,
  Compliance,
  Confidentiality,
  Insurance,
  Indemnification
} with {
  briefly "Obligation type"
  described by "Category of contract obligation."
}

type ContractParty is {
  partyId is PartyId with {
    briefly "Party ID"
    described by "Party identifier."
  }
  partyName is String(3, 200) with {
    briefly "Name"
    described by "Legal name of the party."
  }
  role is String(3, 100) with {
    briefly "Role"
    described by "Role in the contract."
  }
  email is String(5, 254) with {
    briefly "Email"
    described by "Contact email address."
  }
  signatoryName is optional String(3, 200) with {
    briefly "Signatory"
    described by "Name of the authorized signatory."
  }
} with {
  briefly "Contract party"
  described by "A party to the contract."
}

type ContractInfo is {
  contractId is ContractId with {
    briefly "Contract ID"
    described by "Contract identifier."
  }
  title is String(3, 300) with {
    briefly "Title"
    described by "Contract title."
  }
  contractType is ContractType with {
    briefly "Type"
    described by "Type of contract."
  }
  parties is many ContractParty with {
    briefly "Parties"
    described by "Contracting parties."
  }
  effectiveDate is Date with {
    briefly "Effective date"
    described by "Date contract takes effect."
  }
  expirationDate is optional Date with {
    briefly "Expiration date"
    described by "Date contract expires."
  }
  totalValue is optional Decimal(14, 2) with {
    briefly "Value"
    described by "Total contract value."
  }
  currency is optional String(3, 3) with {
    briefly "Currency"
    described by "Currency code."
  }
} with {
  briefly "Contract info"
  described by "Core contract details."
}

type ReviewComment is {
  commentId is UUID with {
    briefly "Comment ID"
    described by "Comment identifier."
  }
  reviewer is String(3, 200) with {
    briefly "Reviewer"
    described by "Name of reviewer."
  }
  section is String(3, 200) with {
    briefly "Section"
    described by "Contract section referenced."
  }
  comment is String(3, 2000) with {
    briefly "Comment"
    described by "Review comment text."
  }
  severity is String(3, 50) with {
    briefly "Severity"
    described by "Comment severity level."
  }
  resolved is Boolean with {
    briefly "Resolved"
    described by "Whether comment is resolved."
  }
  createdAt is TimeStamp with {
    briefly "Created"
    described by "Comment creation time."
  }
} with {
  briefly "Review comment"
  described by "A comment from contract review."
}

type RedlineChange is {
  changeId is UUID with {
    briefly "Change ID"
    described by "Change identifier."
  }
  section is String(3, 200) with {
    briefly "Section"
    described by "Affected section."
  }
  originalText is String(3, 5000) with {
    briefly "Original"
    described by "Original text."
  }
  proposedText is String(3, 5000) with {
    briefly "Proposed"
    described by "Proposed replacement text."
  }
  proposedBy is String(3, 200) with {
    briefly "Proposed by"
    described by "Person proposing change."
  }
  accepted is optional Boolean with {
    briefly "Accepted"
    described by "Whether change was accepted."
  }
} with {
  briefly "Redline change"
  described by "A tracked change during redlining."
}

type ApprovalRecord is {
  approverId is UUID with {
    briefly "Approver ID"
    described by "Approver identifier."
  }
  approverName is String(3, 200) with {
    briefly "Approver name"
    described by "Name of approver."
  }
  decision is ApprovalStatus with {
    briefly "Decision"
    described by "Approval decision."
  }
  comments is optional String(3, 2000) with {
    briefly "Comments"
    described by "Approval comments."
  }
  conditions is optional String(3, 2000) with {
    briefly "Conditions"
    described by "Conditions for approval."
  }
  decidedAt is TimeStamp with {
    briefly "Decided"
    described by "Decision time."
  }
} with {
  briefly "Approval record"
  described by "Record of an approval decision."
}

type SignatureRecord is {
  signatoryId is PartyId with {
    briefly "Signatory ID"
    described by "Signatory identifier."
  }
  signatoryName is String(3, 200) with {
    briefly "Name"
    described by "Signatory name."
  }
  signedAt is TimeStamp with {
    briefly "Signed"
    described by "Signature time."
  }
  signatureMethod is String(3, 100) with {
    briefly "Method"
    described by "Signature method used."
  }
  ipAddress is optional String(3, 50) with {
    briefly "IP address"
    described by "IP address at signing."
  }
} with {
  briefly "Signature record"
  described by "Record of a contract signature."
}

type Obligation is {
  obligationId is ObligationId with {
    briefly "Obligation ID"
    described by "Obligation identifier."
  }
  obligationType is ObligationType with {
    briefly "Type"
    described by "Obligation type."
  }
  description is String(3, 1000) with {
    briefly "Description"
    described by "Obligation description."
  }
  responsibleParty is PartyId with {
    briefly "Responsible"
    described by "Party responsible for fulfillment."
  }
  dueDate is optional Date with {
    briefly "Due date"
    described by "Obligation due date."
  }
  recurring is Boolean with {
    briefly "Recurring"
    described by "Whether obligation recurs."
  }
  frequencyDays is optional Natural with {
    briefly "Frequency"
    described by "Recurrence frequency in days."
  }
  fulfilled is Boolean with {
    briefly "Fulfilled"
    described by "Whether obligation is fulfilled."
  }
} with {
  briefly "Obligation"
  described by "A contractual obligation to track."
}

type RenewalTerms is {
  autoRenew is Boolean with {
    briefly "Auto-renew"
    described by "Whether contract auto-renews."
  }
  renewalPeriodDays is Natural with {
    briefly "Renewal period"
    described by "Renewal period in days."
  }
  noticePeriodDays is Natural with {
    briefly "Notice period"
    described by "Required notice period in days."
  }
  renewalCount is Natural with {
    briefly "Renewal count"
    described by "Number of times renewed."
  }
  maxRenewals is optional Natural with {
    briefly "Max renewals"
    described by "Maximum allowed renewals."
  }
} with {
  briefly "Renewal terms"
  described by "Contract renewal terms and tracking."
}
