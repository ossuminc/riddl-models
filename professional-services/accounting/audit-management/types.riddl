// Audit Management - Shared Types
type EngagementId is Id(AuditContext.AuditEngagement)  with {
  briefly "Engagement identifier"
  described as {
    |Unique identifier for an audit engagement.
  }
}
type ClientId is UUID with {
  briefly "Client identifier"
  described as {
    |Reference to an audit client.
  }
}
type AuditorId is UUID with {
  briefly "Auditor identifier"
  described as {
    |Reference to an auditor.
  }
}
type WorkpaperId is UUID with {
  briefly "Workpaper identifier"
  described as {
    |Reference to a workpaper.
  }
}
type FindingId is UUID with {
  briefly "Finding identifier"
  described as {
    |Reference to an audit finding.
  }
}
type EngagementStatus is any of {
  PlanningPhase,
  FieldworkPhase,
  ReviewPhase,
  DraftingPhase,
  IssuedPhase,
  ClosedPhase,
  CancelledPhase
} with {
  briefly "Engagement status"
  described as {
    |Status of an audit engagement.
  }
}
type AuditType is any of {
  Financial,
  Compliance,
  Operational,
  Internal,
  Forensic,
  Integrated
} with {
  briefly "Audit type"
  described as {
    |Type of audit engagement.
  }
}
type FindingSeverity is any of {
  Critical,
  Major,
  Moderate,
  Minor,
  Advisory
} with {
  briefly "Finding severity"
  described as {
    |Severity of an audit finding.
  }
}
type ReviewStatus is any of {
  Draft,
  ManagerReview,
  PartnerReview,
  Approved,
  Rejected,
  Revised
} with {
  briefly "Review status"
  described as {
    |Status in the review cycle.
  }
}
type RiskLevel is any of {
  High,
  Medium,
  Low
} with {
  briefly "Risk level"
  described as {
    |Assessment of risk level.
  }
}
type EngagementInfo is {
  engagementId: EngagementId with {
    briefly "Engagement ID"
    described as {
      |Engagement identifier.
    }
  }
  clientId: ClientId with {
    briefly "Client"
    described as {
      |Client identifier.
    }
  }
  clientName: String(3,200) with {
    briefly "Client name"
    described as {
      |Name of the audit client.
    }
  }
  auditType: AuditType with {
    briefly "Audit type"
    described as {
      |Type of audit.
    }
  }
  fiscalYearEnd: Date with {
    briefly "Fiscal year end"
    described as {
      |Client fiscal year end date.
    }
  }
  plannedStartDate: Date with {
    briefly "Planned start"
    described as {
      |Planned fieldwork start date.
    }
  }
  plannedEndDate: Date with {
    briefly "Planned end"
    described as {
      |Planned fieldwork end date.
    }
  }
  riskAssessment: RiskLevel with {
    briefly "Risk assessment"
    described as {
      |Overall engagement risk.
    }
  }
} with {
  briefly "Engagement info"
  described as {
    |Audit engagement details.
  }
}
type TeamMember is {
  auditorId: AuditorId with {
    briefly "Auditor ID"
    described as {
      |Auditor identifier.
    }
  }
  auditorName: String(3,150) with {
    briefly "Name"
    described as {
      |Auditor name.
    }
  }
  role: String(3,100) with {
    briefly "Role"
    described as {
      |Team role assignment.
    }
  }
  hoursAllocated: Decimal(6,2) with {
    briefly "Hours"
    described as {
      |Allocated hours.
    }
  }
} with {
  briefly "Team member"
  described as {
    |Audit team member assignment.
  }
}
type Workpaper is {
  workpaperId: WorkpaperId with {
    briefly "Workpaper ID"
    described as {
      |Workpaper identifier.
    }
  }
  title: String(3,300) with {
    briefly "Title"
    described as {
      |Workpaper title.
    }
  }
  section: String(3,100) with {
    briefly "Section"
    described as {
      |Audit section reference.
    }
  }
  preparedBy: AuditorId with {
    briefly "Prepared by"
    described as {
      |Auditor who prepared workpaper.
    }
  }
  preparedDate: Date with {
    briefly "Prepared date"
    described as {
      |Date workpaper was prepared.
    }
  }
  reviewStatus: ReviewStatus with {
    briefly "Review status"
    described as {
      |Current review status.
    }
  }
  updatedReviewedBy: AuditorId? with {
    briefly "Reviewed by"
    described as {
      |Auditor who reviewed workpaper.
    }
  }
  reviewNotes: String(1,2000)? with {
    briefly "Review notes"
    described as {
      |Notes from reviewer.
    }
  }
} with {
  briefly "Workpaper"
  described as {
    |Audit workpaper documentation.
  }
}
type AuditFinding is {
  findingId: FindingId with {
    briefly "Finding ID"
    described as {
      |Finding identifier.
    }
  }
  title: String(3,300) with {
    briefly "Title"
    described as {
      |Finding title.
    }
  }
  description: String(3,5000) with {
    briefly "Description"
    described as {
      |Detailed finding description.
    }
  }
  severity: FindingSeverity with {
    briefly "Severity"
    described as {
      |Finding severity level.
    }
  }
  recommendation: String(3,3000) with {
    briefly "Recommendation"
    described as {
      |Recommended remediation.
    }
  }
  managementResponse: String(1,3000)? with {
    briefly "Management response"
    described as {
      |Client management response.
    }
  }
  relatedWorkpaper: WorkpaperId with {
    briefly "Related workpaper"
    described as {
      |Supporting workpaper reference.
    }
  }
  identifiedBy: AuditorId with {
    briefly "Identified by"
    described as {
      |Auditor who identified finding.
    }
  }
  identifiedDate: Date with {
    briefly "Identified date"
    described as {
      |Date finding was identified.
    }
  }
} with {
  briefly "Audit finding"
  described as {
    |Audit finding with recommendation.
  }
}
type ReviewCycle is {
  reviewedBy: AuditorId with {
    briefly "Reviewer"
    described as {
      |Reviewing auditor.
    }
  }
  reviewDate: Date with {
    briefly "Review date"
    described as {
      |Date of review.
    }
  }
  reviewDecision: ReviewStatus with {
    briefly "Status"
    described as {
      |Review decision.
    }
  }
  comments: String(1,2000)? with {
    briefly "Comments"
    described as {
      |Review comments.
    }
  }
} with {
  briefly "Review cycle"
  described as {
    |Single review cycle entry.
  }
}
type AuditReport is {
  reportTitle: String(3,300) with {
    briefly "Title"
    described as {
      |Report title.
    }
  }
  opinionType: String(3,100) with {
    briefly "Opinion type"
    described as {
      |Audit opinion type.
    }
  }
  updatedIssuedDate: Date? with {
    briefly "Issued date"
    described as {
      |Date report was issued.
    }
  }
  findings: AuditFinding+ with {
    briefly "Findings"
    described as {
      |Reported findings.
    }
  }
  reviewHistory: ReviewCycle+ with {
    briefly "Review history"
    described as {
      |Report review history.
    }
  }
} with {
  briefly "Audit report"
  described as {
    |Formal audit report.
  }
}
