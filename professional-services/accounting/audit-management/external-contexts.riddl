// Audit Management - External Contexts

context DocumentManagement is {

  command StoreDocument is {
    documentId is UUID with { briefly "Document ID" described by "Document identifier." }
    engagementId is EngagementId with { briefly "Engagement" described by "Engagement ID." }
    documentType is String(3, 100) with { briefly "Type" described by "Document type." }
    content is String(1, 50000) with { briefly "Content" described by "Document content." }
  } with {
    briefly "Store document"
    described by "Stores a document in the document management system."
  }

  event DocumentStored is {
    documentId is UUID with { briefly "Document ID" described by "Document identifier." }
    storedAt is TimeStamp with { briefly "Stored" described by "Storage time." }
  } with {
    briefly "Document stored"
    described by "Emitted when document is stored."
  }

  query RetrieveDocument is {
    documentId is UUID with { briefly "Document ID" described by "Document identifier." }
  } with {
    briefly "Retrieve document"
    described by "Retrieves a stored document."
  }

  result DocumentContent is {
    documentId is UUID with { briefly "Document ID" described by "Document identifier." }
    documentType is String(3, 100) with { briefly "Type" described by "Document type." }
    content is String(1, 50000) with { briefly "Content" described by "Document content." }
    lastModified is TimeStamp with { briefly "Modified" described by "Last modification time." }
  } with {
    briefly "Document content"
    described by "Retrieved document content."
  }

  command ArchiveEngagementDocuments is {
    engagementId is EngagementId with { briefly "Engagement" described by "Engagement ID." }
    retentionYears is Natural with { briefly "Retention" described by "Retention period in years." }
  } with {
    briefly "Archive engagement documents"
    described by "Archives all documents for an engagement."
  }

  event EngagementDocumentsArchived is {
    engagementId is EngagementId with { briefly "Engagement" described by "Engagement ID." }
    archivedAt is TimeStamp with { briefly "Archived" described by "Archive time." }
  } with {
    briefly "Engagement documents archived"
    described by "Emitted when engagement documents are archived."
  }

} with {
  option is external
  briefly "External document management"
  described by "Document management and archival system."
}

context RegulatoryFiling is {

  command SubmitFiling is {
    filingId is UUID with { briefly "Filing ID" described by "Filing identifier." }
    engagementId is EngagementId with { briefly "Engagement" described by "Engagement ID." }
    regulatoryBody is String(3, 200) with { briefly "Regulatory body" described by "Target regulatory body." }
    filingType is String(3, 100) with { briefly "Filing type" described by "Type of filing." }
    reportContent is String(1, 50000) with { briefly "Content" described by "Filing content." }
  } with {
    briefly "Submit filing"
    described by "Submits a regulatory filing."
  }

  event FilingSubmitted is {
    filingId is UUID with { briefly "Filing ID" described by "Filing identifier." }
    submittedAt is TimeStamp with { briefly "Submitted" described by "Submission time." }
    confirmationNumber is String(3, 100) with { briefly "Confirmation" described by "Filing confirmation number." }
  } with {
    briefly "Filing submitted"
    described by "Emitted when filing is submitted."
  }

  query GetFilingStatus is {
    filingId is UUID with { briefly "Filing ID" described by "Filing identifier." }
  } with {
    briefly "Get filing status"
    described by "Checks status of a regulatory filing."
  }

  result FilingStatus is {
    filingId is UUID with { briefly "Filing ID" described by "Filing identifier." }
    status is String(3, 50) with { briefly "Status" described by "Filing status." }
    receivedDate is optional Date with { briefly "Received" described by "Date filing was received." }
    acceptedDate is optional Date with { briefly "Accepted" described by "Date filing was accepted." }
  } with {
    briefly "Filing status"
    described by "Status of a regulatory filing."
  }

} with {
  option is external
  briefly "External regulatory filing"
  described by "Regulatory filing and compliance system."
}
