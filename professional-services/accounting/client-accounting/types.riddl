// Client Accounting - Shared Types
type EngagementId is Id(EngagementContext.Engagement)  with {
  briefly "Engagement identifier"
  described as {
    |Unique identifier for an engagement.
  }
}
type ClientId is UUID with {
  briefly "Client identifier"
  described as {
    |Reference to a client.
  }
}
type AccountantId is UUID with {
  briefly "Accountant identifier"
  described as {
    |Reference to an accountant.
  }
}
type AccountId is UUID with {
  briefly "Account identifier"
  described as {
    |Reference to a GL account.
  }
}
type TransactionId is UUID with {
  briefly "Transaction identifier"
  described as {
    |Reference to a transaction.
  }
}
type EngagementStatus is any of {
  Proposed,
  Active,
  OnHold,
  Completed,
  Terminated
} with {
  briefly "Engagement status"
  described as {
    |Current engagement state.
  }
}
type ServiceType is any of {
  Bookkeeping,
  Payroll,
  TaxPreparation,
  TaxPlanning,
  FinancialReporting,
  Compilation,
  Review,
  Audit,
  Advisory,
  Other
} with {
  briefly "Service type"
  described as {
    |Type of accounting service.
  }
}
type AccountType is any of {
  Asset,
  Liability,
  Equity,
  Revenue,
  Expense
} with {
  briefly "Account type"
  described as {
    |GL account category.
  }
}
type TransactionType is any of {
  JournalEntryTxn,
  InvoiceTxn,
  Payment,
  Receipt,
  Transfer,
  Adjustment,
  Depreciation,
  Accrual,
  Reversal
} with {
  briefly "Transaction type"
  described as {
    |Type of financial transaction.
  }
}
type Address is {
  street: String(1,200) with {
    briefly "Street"
    described as {
      |Street address.
    }
  }
  city: String(1,100) with {
    briefly "City"
    described as {
      |City.
    }
  }
  state: String(2,50) with {
    briefly "State"
    described as {
      |State.
    }
  }
  postalCode: String(5,10) with {
    briefly "Postal"
    described as {
      |ZIP code.
    }
  }
} with {
  briefly "Address"
  described as {
    |Physical address.
  }
}
type ClientInfo is {
  clientId: ClientId with {
    briefly "Client"
    described as {
      |Client identifier.
    }
  }
  name: String(1,200) with {
    briefly "Name"
    described as {
      |Client name.
    }
  }
  businessType: String(1,100) with {
    briefly "Type"
    described as {
      |Business type.
    }
  }
  taxId: String(9,11) with {
    briefly "Tax ID"
    described as {
      |EIN or SSN.
    }
  }
  address: Address with {
    briefly "Address"
    described as {
      |Business address.
    }
  }
  phone: String(10,20) with {
    briefly "Phone"
    described as {
      |Phone number.
    }
  }
  email: String(5,254) with {
    briefly "Email"
    described as {
      |Email address.
    }
  }
  fiscalYearEnd: Date with {
    briefly "FYE"
    described as {
      |Fiscal year end.
    }
  }
} with {
  briefly "Client info"
  described as {
    |Client information.
  }
}
type EngagementTerms is {
  serviceTypes: ServiceType+ with {
    briefly "Services"
    described as {
      |Services to provide.
    }
  }
  startDate: Date with {
    briefly "Start"
    described as {
      |Engagement start.
    }
  }
  updatedEndDate: Date? with {
    briefly "End"
    described as {
      |Engagement end.
    }
  }
  billingRate: Decimal(8,2) with {
    briefly "Rate"
    described as {
      |Hourly billing rate.
    }
  }
  estimatedFees: Decimal(10,2) with {
    briefly "Fees"
    described as {
      |Estimated fees.
    }
  }
  billingFrequency: String(1,50) with {
    briefly "Frequency"
    described as {
      |Billing frequency.
    }
  }
} with {
  briefly "Engagement terms"
  described as {
    |Engagement agreement terms.
  }
}
type ChartOfAccounts is {
  accountId: AccountId with {
    briefly "Account"
    described as {
      |Account identifier.
    }
  }
  accountNumber: String(1,20) with {
    briefly "Number"
    described as {
      |Account number.
    }
  }
  accountName: String(1,200) with {
    briefly "Name"
    described as {
      |Account name.
    }
  }
  accountType: AccountType with {
    briefly "Type"
    described as {
      |Account type.
    }
  }
  parentAccount: AccountId? with {
    briefly "Parent"
    described as {
      |Parent account.
    }
  }
  isActive: Boolean with {
    briefly "Active"
    described as {
      |Account is active.
    }
  }
} with {
  briefly "Chart of accounts"
  described as {
    |GL account definition.
  }
}
type JournalEntry is {
  transactionId: TransactionId with {
    briefly "Transaction"
    described as {
      |Transaction identifier.
    }
  }
  transactionDate: Date with {
    briefly "Date"
    described as {
      |Transaction date.
    }
  }
  transactionType: TransactionType with {
    briefly "Type"
    described as {
      |Transaction type.
    }
  }
  description: String(1,500) with {
    briefly "Description"
    described as {
      |Entry description.
    }
  }
  journalLineItems: JournalLineItem+ with {
    briefly "Lines"
    described as {
      |Entry line items.
    }
  }
  reference: String(1,100)? with {
    briefly "Reference"
    described as {
      |External reference.
    }
  }
  preparedBy: AccountantId with {
    briefly "Prepared by"
    described as {
      |Preparing accountant.
    }
  }
  approvedBy: AccountantId? with {
    briefly "Approved by"
    described as {
      |Approving accountant.
    }
  }
} with {
  briefly "Journal entry"
  described as {
    |General ledger entry.
  }
}
type JournalLineItem is {
  accountId: AccountId with {
    briefly "Account"
    described as {
      |GL account.
    }
  }
  debit: Decimal(14,2)? with {
    briefly "Debit"
    described as {
      |Debit amount.
    }
  }
  credit: Decimal(14,2)? with {
    briefly "Credit"
    described as {
      |Credit amount.
    }
  }
  memo: String(1,200)? with {
    briefly "Memo"
    described as {
      |Line memo.
    }
  }
} with {
  briefly "Journal line item"
  described as {
    |Entry line item.
  }
}
type FinancialStatement is {
  statementType: String(1,50) with {
    briefly "Type"
    described as {
      |Statement type.
    }
  }
  periodStart: Date with {
    briefly "Start"
    described as {
      |Period start.
    }
  }
  periodEnd: Date with {
    briefly "End"
    described as {
      |Period end.
    }
  }
  preparedAt: TimeStamp with {
    briefly "Prepared"
    described as {
      |Preparation time.
    }
  }
  preparedBy: AccountantId with {
    briefly "By"
    described as {
      |Prepared by.
    }
  }
  updatedReviewedBy: AccountantId? with {
    briefly "Reviewed"
    described as {
      |Reviewed by.
    }
  }
} with {
  briefly "Financial statement"
  described as {
    |Financial statement info.
  }
}
type TimeEntry is {
  date: Date with {
    briefly "Date"
    described as {
      |Work date.
    }
  }
  hours: Decimal(4,2) with {
    briefly "Hours"
    described as {
      |Hours worked.
    }
  }
  description: String(1,500) with {
    briefly "Description"
    described as {
      |Work description.
    }
  }
  accountantId: AccountantId with {
    briefly "Accountant"
    described as {
      |Working accountant.
    }
  }
  billable: Boolean with {
    briefly "Billable"
    described as {
      |Is billable time.
    }
  }
} with {
  briefly "Time entry"
  described as {
    |Billable time record.
  }
}
type Invoice is {
  invoiceNumber: String(1,50) with {
    briefly "Number"
    described as {
      |Invoice number.
    }
  }
  invoiceDate: Date with {
    briefly "Date"
    described as {
      |Invoice date.
    }
  }
  dueDate: Date with {
    briefly "Due"
    described as {
      |Due date.
    }
  }
  invoiceAmount: Decimal(10,2) with {
    briefly "Amount"
    described as {
      |Invoice amount.
    }
  }
  paymentStatus: String(1,50) with {
    briefly "Status"
    described as {
      |Payment status.
    }
  }
  invoiceLineItems: InvoiceLineItem+ with {
    briefly "Lines"
    described as {
      |Invoice lines.
    }
  }
} with {
  briefly "Invoice"
  described as {
    |Client invoice.
  }
}
type InvoiceLineItem is {
  description: String(1,200) with {
    briefly "Description"
    described as {
      |Line description.
    }
  }
  quantity: Decimal(8,2) with {
    briefly "Quantity"
    described as {
      |Quantity.
    }
  }
  rate: Decimal(8,2) with {
    briefly "Rate"
    described as {
      |Unit rate.
    }
  }
  lineAmount: Decimal(10,2) with {
    briefly "Amount"
    described as {
      |Line amount.
    }
  }
} with {
  briefly "Invoice line item"
  described as {
    |Invoice line.
  }
}
type ReconciliationInfo is {
  accountId: AccountId with {
    briefly "Account"
    described as {
      |Reconciled account.
    }
  }
  periodEnd: Date with {
    briefly "Period"
    described as {
      |Period end date.
    }
  }
  bookBalance: Decimal(14,2) with {
    briefly "Book"
    described as {
      |Book balance.
    }
  }
  statementBalance: Decimal(14,2) with {
    briefly "Statement"
    described as {
      |Bank statement balance.
    }
  }
  reconciledAt: TimeStamp with {
    briefly "Reconciled"
    described as {
      |Reconciliation time.
    }
  }
  reconciledBy: AccountantId with {
    briefly "By"
    described as {
      |Reconciled by.
    }
  }
} with {
  briefly "Reconciliation info"
  described as {
    |Account reconciliation.
  }
}
