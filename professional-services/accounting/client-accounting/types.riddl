// Client Accounting - Shared Types

type EngagementId is Id(EngagementContext.Engagement) with {
  briefly "Engagement identifier"
  described by "Unique identifier for an engagement."
}

type ClientId is UUID with {
  briefly "Client identifier"
  described by "Reference to a client."
}

type AccountantId is UUID with {
  briefly "Accountant identifier"
  described by "Reference to an accountant."
}

type AccountId is UUID with {
  briefly "Account identifier"
  described by "Reference to a GL account."
}

type TransactionId is UUID with {
  briefly "Transaction identifier"
  described by "Reference to a transaction."
}

type EngagementStatus is any of {
  Proposed,
  Active,
  OnHold,
  Completed,
  Terminated
} with {
  briefly "Engagement status"
  described by "Current engagement state."
}

type ServiceType is any of {
  Bookkeeping,
  Payroll,
  TaxPreparation,
  TaxPlanning,
  FinancialReporting,
  Compilation,
  Review,
  Audit,
  Advisory,
  Other
} with {
  briefly "Service type"
  described by "Type of accounting service."
}

type AccountType is any of {
  Asset,
  Liability,
  Equity,
  Revenue,
  Expense
} with {
  briefly "Account type"
  described by "GL account category."
}

type TransactionType is any of {
  JournalEntry,
  Invoice,
  Payment,
  Receipt,
  Transfer,
  Adjustment,
  Depreciation,
  Accrual,
  Reversal
} with {
  briefly "Transaction type"
  described by "Type of financial transaction."
}

type Address is {
  street is String(1, 200) with {
    briefly "Street"
    described by "Street address."
  }
  city is String(1, 100) with {
    briefly "City"
    described by "City."
  }
  state is String(2, 50) with {
    briefly "State"
    described by "State."
  }
  postalCode is String(5, 10) with {
    briefly "Postal"
    described by "ZIP code."
  }
} with {
  briefly "Address"
  described by "Physical address."
}

type ClientInfo is {
  clientId is ClientId with {
    briefly "Client"
    described by "Client identifier."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Client name."
  }
  businessType is String(1, 100) with {
    briefly "Type"
    described by "Business type."
  }
  taxId is String(9, 11) with {
    briefly "Tax ID"
    described by "EIN or SSN."
  }
  address is Address with {
    briefly "Address"
    described by "Business address."
  }
  phone is String(10, 20) with {
    briefly "Phone"
    described by "Phone number."
  }
  email is String(5, 254) with {
    briefly "Email"
    described by "Email address."
  }
  fiscalYearEnd is Date with {
    briefly "FYE"
    described by "Fiscal year end."
  }
} with {
  briefly "Client info"
  described by "Client information."
}

type EngagementTerms is {
  serviceTypes is many ServiceType with {
    briefly "Services"
    described by "Services to provide."
  }
  startDate is Date with {
    briefly "Start"
    described by "Engagement start."
  }
  endDate is optional Date with {
    briefly "End"
    described by "Engagement end."
  }
  billingRate is Decimal(8, 2) with {
    briefly "Rate"
    described by "Hourly billing rate."
  }
  estimatedFees is Decimal(10, 2) with {
    briefly "Fees"
    described by "Estimated fees."
  }
  billingFrequency is String(1, 50) with {
    briefly "Frequency"
    described by "Billing frequency."
  }
} with {
  briefly "Engagement terms"
  described by "Engagement agreement terms."
}

type ChartOfAccounts is {
  accountId is AccountId with {
    briefly "Account"
    described by "Account identifier."
  }
  accountNumber is String(1, 20) with {
    briefly "Number"
    described by "Account number."
  }
  accountName is String(1, 200) with {
    briefly "Name"
    described by "Account name."
  }
  accountType is AccountType with {
    briefly "Type"
    described by "Account type."
  }
  parentAccount is optional AccountId with {
    briefly "Parent"
    described by "Parent account."
  }
  isActive is Boolean with {
    briefly "Active"
    described by "Account is active."
  }
} with {
  briefly "Chart of accounts"
  described by "GL account definition."
}

type JournalEntry is {
  transactionId is TransactionId with {
    briefly "Transaction"
    described by "Transaction identifier."
  }
  transactionDate is Date with {
    briefly "Date"
    described by "Transaction date."
  }
  transactionType is TransactionType with {
    briefly "Type"
    described by "Transaction type."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Entry description."
  }
  lineItems is many JournalLineItem with {
    briefly "Lines"
    described by "Entry line items."
  }
  reference is optional String(1, 100) with {
    briefly "Reference"
    described by "External reference."
  }
  preparedBy is AccountantId with {
    briefly "Prepared by"
    described by "Preparing accountant."
  }
  approvedBy is optional AccountantId with {
    briefly "Approved by"
    described by "Approving accountant."
  }
} with {
  briefly "Journal entry"
  described by "General ledger entry."
}

type JournalLineItem is {
  accountId is AccountId with {
    briefly "Account"
    described by "GL account."
  }
  debit is optional Decimal(14, 2) with {
    briefly "Debit"
    described by "Debit amount."
  }
  credit is optional Decimal(14, 2) with {
    briefly "Credit"
    described by "Credit amount."
  }
  memo is optional String(1, 200) with {
    briefly "Memo"
    described by "Line memo."
  }
} with {
  briefly "Journal line item"
  described by "Entry line item."
}

type FinancialStatement is {
  statementType is String(1, 50) with {
    briefly "Type"
    described by "Statement type."
  }
  periodStart is Date with {
    briefly "Start"
    described by "Period start."
  }
  periodEnd is Date with {
    briefly "End"
    described by "Period end."
  }
  preparedAt is TimeStamp with {
    briefly "Prepared"
    described by "Preparation time."
  }
  preparedBy is AccountantId with {
    briefly "By"
    described by "Prepared by."
  }
  reviewedBy is optional AccountantId with {
    briefly "Reviewed"
    described by "Reviewed by."
  }
} with {
  briefly "Financial statement"
  described by "Financial statement info."
}

type TimeEntry is {
  date is Date with {
    briefly "Date"
    described by "Work date."
  }
  hours is Decimal(4, 2) with {
    briefly "Hours"
    described by "Hours worked."
  }
  description is String(1, 500) with {
    briefly "Description"
    described by "Work description."
  }
  accountantId is AccountantId with {
    briefly "Accountant"
    described by "Working accountant."
  }
  billable is Boolean with {
    briefly "Billable"
    described by "Is billable time."
  }
} with {
  briefly "Time entry"
  described by "Billable time record."
}

type Invoice is {
  invoiceNumber is String(1, 50) with {
    briefly "Number"
    described by "Invoice number."
  }
  invoiceDate is Date with {
    briefly "Date"
    described by "Invoice date."
  }
  dueDate is Date with {
    briefly "Due"
    described by "Due date."
  }
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Invoice amount."
  }
  status is String(1, 50) with {
    briefly "Status"
    described by "Payment status."
  }
  lineItems is many InvoiceLineItem with {
    briefly "Lines"
    described by "Invoice lines."
  }
} with {
  briefly "Invoice"
  described by "Client invoice."
}

type InvoiceLineItem is {
  description is String(1, 200) with {
    briefly "Description"
    described by "Line description."
  }
  quantity is Decimal(8, 2) with {
    briefly "Quantity"
    described by "Quantity."
  }
  rate is Decimal(8, 2) with {
    briefly "Rate"
    described by "Unit rate."
  }
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Line amount."
  }
} with {
  briefly "Invoice line item"
  described by "Invoice line."
}

type ReconciliationInfo is {
  accountId is AccountId with {
    briefly "Account"
    described by "Reconciled account."
  }
  periodEnd is Date with {
    briefly "Period"
    described by "Period end date."
  }
  bookBalance is Decimal(14, 2) with {
    briefly "Book"
    described by "Book balance."
  }
  statementBalance is Decimal(14, 2) with {
    briefly "Statement"
    described by "Bank statement balance."
  }
  reconciledAt is TimeStamp with {
    briefly "Reconciled"
    described by "Reconciliation time."
  }
  reconciledBy is AccountantId with {
    briefly "By"
    described by "Reconciled by."
  }
} with {
  briefly "Reconciliation info"
  described by "Account reconciliation."
}
