// Revenue Assurance - Shared Types
type AuditCaseId is Id(RevenueAssuranceContext.AuditCase)  with {
  briefly "Audit case identifier"
  described as {
    |Unique identifier for an audit case.
  }
}
type BillingRecordId is UUID with {
  briefly "Billing record identifier"
  described as {
    |Reference to a billing record.
  }
}
type UsageRecordId is UUID with {
  briefly "Usage record identifier"
  described as {
    |Reference to a network usage record.
  }
}
type CustomerId is UUID with {
  briefly "Customer identifier"
  described as {
    |Reference to a customer account.
  }
}
type ServiceId is UUID with {
  briefly "Service identifier"
  described as {
    |Reference to a subscribed service.
  }
}
type CaseStatus is any of {
  Opened,
  Investigating,
  Reconciling,
  Escalated,
  Resolved,
  Closed,
  Cancelled
} with {
  briefly "Case status"
  described as {
    |Audit case lifecycle status.
  }
}
type LeakageType is any of {
  Unbilled,
  Underbilled,
  Overbilled,
  DuplicateCharge,
  MissingDiscount,
  RatingError,
  NetworkMismatch
} with {
  briefly "Leakage type"
  described as {
    |Classification of revenue leakage.
  }
}
type CasePriority is any of {
  Low,
  Medium,
  High,
  Critical
} with {
  briefly "Case priority"
  described as {
    |Audit case processing priority.
  }
}
type ResolutionAction is any of {
  BillingCorrected,
  CreditIssued,
  ServiceCorrected,
  NoActionRequired,
  EscalatedToManagement
} with {
  briefly "Resolution action"
  described as {
    |Action taken to resolve a case.
  }
}
type AuditCaseInfo is {
  caseId: AuditCaseId with {
    briefly "Case ID"
    described as {
      |Audit case identifier.
    }
  }
  customerId: CustomerId with {
    briefly "Customer"
    described as {
      |Affected customer identifier.
    }
  }
  serviceId: ServiceId with {
    briefly "Service"
    described as {
      |Affected service identifier.
    }
  }
  leakageType: LeakageType with {
    briefly "Leakage type"
    described as {
      |Type of revenue leakage detected.
    }
  }
  priority: CasePriority with {
    briefly "Priority"
    described as {
      |Case priority level.
    }
  }
  description: String(1,1000) with {
    briefly "Description"
    described as {
      |Detailed description of the discrepancy.
    }
  }
} with {
  briefly "Audit case info"
  described as {
    |Core audit case details.
  }
}
type BillingRecord is {
  billingRecordId: BillingRecordId with {
    briefly "Record ID"
    described as {
      |Billing record identifier.
    }
  }
  customerId: CustomerId with {
    briefly "Customer"
    described as {
      |Customer identifier.
    }
  }
  serviceId: ServiceId with {
    briefly "Service"
    described as {
      |Service identifier.
    }
  }
  billingPeriodStart: Date with {
    briefly "Period start"
    described as {
      |Billing period start date.
    }
  }
  billingPeriodEnd: Date with {
    briefly "Period end"
    described as {
      |Billing period end date.
    }
  }
  billedAmount: Decimal(12,2) with {
    briefly "Billed amount"
    described as {
      |Amount billed to customer.
    }
  }
  billedUsage: Decimal(12,2) with {
    briefly "Billed usage"
    described as {
      |Usage quantity billed.
    }
  }
  usageUnit: String(1,50) with {
    briefly "Usage unit"
    described as {
      |Unit of usage measurement.
    }
  }
} with {
  briefly "Billing record"
  described as {
    |Customer billing record for a period.
  }
}
type UsageRecord is {
  usageRecordId: UsageRecordId with {
    briefly "Record ID"
    described as {
      |Usage record identifier.
    }
  }
  customerId: CustomerId with {
    briefly "Customer"
    described as {
      |Customer identifier.
    }
  }
  serviceId: ServiceId with {
    briefly "Service"
    described as {
      |Service identifier.
    }
  }
  usageStart: TimeStamp with {
    briefly "Usage start"
    described as {
      |Usage session start time.
    }
  }
  usageEnd: TimeStamp with {
    briefly "Usage end"
    described as {
      |Usage session end time.
    }
  }
  actualUsage: Decimal(12,2) with {
    briefly "Actual usage"
    described as {
      |Measured network usage quantity.
    }
  }
  usageUnit: String(1,50) with {
    briefly "Usage unit"
    described as {
      |Unit of usage measurement.
    }
  }
  networkElement: String(1,100) with {
    briefly "Network element"
    described as {
      |Source network element.
    }
  }
} with {
  briefly "Usage record"
  described as {
    |Network usage record from mediation.
  }
}
type ReconciliationResult is {
  billingRecordId: BillingRecordId with {
    briefly "Billing record"
    described as {
      |Reconciled billing record.
    }
  }
  usageRecordId: UsageRecordId with {
    briefly "Usage record"
    described as {
      |Reconciled usage record.
    }
  }
  billedAmount: Decimal(12,2) with {
    briefly "Billed"
    described as {
      |Amount billed.
    }
  }
  expectedAmount: Decimal(12,2) with {
    briefly "Expected"
    described as {
      |Expected amount based on usage.
    }
  }
  variance: Decimal(12,2) with {
    briefly "Variance"
    described as {
      |Difference between billed and expected.
    }
  }
  variancePercent: Decimal(5,2) with {
    briefly "Variance percent"
    described as {
      |Variance as percentage.
    }
  }
  matched: Boolean with {
    briefly "Matched"
    described as {
      |Whether records reconcile within threshold.
    }
  }
} with {
  briefly "Reconciliation result"
  described as {
    |Result of reconciling billing against usage.
  }
}
type ResolutionDetails is {
  action: ResolutionAction with {
    briefly "Action"
    described as {
      |Resolution action taken.
    }
  }
  updatedAdjustmentAmount: Decimal(12,2)? with {
    briefly "Adjustment"
    described as {
      |Financial adjustment amount.
    }
  }
  notes: String(1,2000) with {
    briefly "Notes"
    described as {
      |Resolution notes and explanation.
    }
  }
  resolvedBy: String(1,100) with {
    briefly "Resolved by"
    described as {
      |Person who resolved the case.
    }
  }
} with {
  briefly "Resolution details"
  described as {
    |Details of audit case resolution.
  }
}
