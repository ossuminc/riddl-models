// Types for the Usage Billing Domain
// === Identifier Types ===
type AccountId is Id(BillingContext.BillingAccount)  with {
  briefly "Unique identifier for a billing account"
  described as {
    |References a specific customer billing account in the system.
  }
}
type UsageRecordId is UUID with {
  briefly "Unique identifier for a usage record"
  described as {
    |References a specific metered usage event captured from the network.
  }
}
type InvoiceId is UUID with {
  briefly "Unique identifier for an invoice"
  described as {
    |References a specific invoice generated for a billing period.
  }
}
type RatePlanId is String with {
  briefly "Identifier for a rate plan"
  described as {
    |References the pricing plan applied to calculate charges.
  }
}
type PaymentId is String with {
  briefly "Identifier for a payment transaction"
  described as {
    |References a payment made against an invoice.
  }
}
// === Enumeration Types ===
type UsageType is any of {
  Voice,
  Data,
  SMS,
  MMS,
  Roaming,
  International,
  Premium
} with {
  briefly "Categories of telecommunications usage"
  described as {
    | Defines the different types of usage that can be billed:
    | - Voice: Regular voice calls
    | - Data: Mobile or fixed data consumption
    | - SMS: Short message service
    | - MMS: Multimedia messaging service
    | - Roaming: Usage while on partner networks
    | - International: Cross-border communications
    | - Premium: Value-added services
  }
}
type InvoiceStatus is any of {
  Draft,
  Generated,
  Sent,
  Paid,
  PartiallyPaid,
  Overdue,
  Disputed,
  Cancelled
} with {
  briefly "Status of an invoice in its lifecycle"
  described as {
    | Tracks the current state of an invoice from creation through payment:
    | Draft indicates the invoice is being prepared, Generated means it is
    | ready for delivery, Sent indicates customer notification, and payment
    | states track the collection process.
  }
}
type AccountStatus is any of {
  ActiveStatus,
  SuspendedStatus,
  ClosedStatus,
  PendingActivationStatus
} with {
  briefly "Status of a billing account"
  described as {
    | Indicates the current operational state of a customer billing account.
    | Active accounts can incur usage, Suspended accounts are blocked due to
    | non-payment or other issues, and Closed accounts are no longer active.
  }
}
type PaymentMethod is any of {
  CreditCard,
  DebitCard,
  BankTransfer,
  DirectDebit,
  Check,
  Prepaid
} with {
  briefly "Supported payment methods"
  described as {
    |The different ways customers can pay their invoices.
  }
}
type EmailAddress is Pattern("[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}") with {
  briefly "Email address"
  described as {
    |RFC-compliant email address pattern.
  }
}
// === Value Types ===
type MonetaryAmount is {
  numericAmount: Decimal(15,2) with {
    briefly "Amount"
    described as {
      |Numeric value.
    }
  }
  currency: String with {
    briefly "Currency"
    described as {
      |Currency code.
    }
  }
} with {
  briefly "Represents a monetary value with currency"
  described as {
    |Used for all financial amounts including charges, credits, and payments.
  }
}
type Duration is Integer with {
  briefly "Duration in seconds"
  described as {
    |Used to measure call duration for voice usage billing.
  }
}
type DataVolume is Integer with {
  briefly "Data volume in bytes"
  described as {
    |Used to measure data consumption for usage billing.
  }
}
type PhoneNumber is Pattern("\\+?[1-9]\\d{1,14}") with {
  briefly "E.164 formatted phone number"
  described as {
    |International phone number format for identifying calling parties.
  }
}
// === Record Types ===
type UsageRecordData is {
  recordId: UsageRecordId with {
    briefly "Record ID"
    described as {
      |Usage record identifier.
    }
  }
  accountId: AccountId with {
    briefly "Account"
    described as {
      |Billing account.
    }
  }
  usageType: UsageType with {
    briefly "Type"
    described as {
      |Usage category.
    }
  }
  startTime: TimeStamp with {
    briefly "Start"
    described as {
      |Usage start time.
    }
  }
  endTime: TimeStamp with {
    briefly "End"
    described as {
      |Usage end time.
    }
  }
  duration: Duration with {
    briefly "Duration"
    described as {
      |Call duration.
    }
  }
  dataVolume: DataVolume with {
    briefly "Volume"
    described as {
      |Data consumed.
    }
  }
  originatingNumber: PhoneNumber with {
    briefly "From"
    described as {
      |Originating number.
    }
  }
  terminatingNumber: PhoneNumber with {
    briefly "To"
    described as {
      |Terminating number.
    }
  }
  networkElement: String with {
    briefly "Network"
    described as {
      |Network element.
    }
  }
  rated: Boolean with {
    briefly "Rated"
    described as {
      |Whether rated.
    }
  }
  ratedAmount: MonetaryAmount with {
    briefly "Amount"
    described as {
      |Rated amount.
    }
  }
} with {
  briefly "A single usage event captured from the network"
  described as {
    | Represents a metered usage event such as a voice call, data session,
    | or message transmission. Contains all details needed for rating and
    | billing including timing, volume, and party information.
  }
}
type InvoiceLineItem is {
  description: String with {
    briefly "Description"
    described as {
      |Line item description.
    }
  }
  usageType: UsageType with {
    briefly "Type"
    described as {
      |Usage category.
    }
  }
  quantity: Number with {
    briefly "Quantity"
    described as {
      |Number of units.
    }
  }
  unitPrice: MonetaryAmount with {
    briefly "Price"
    described as {
      |Per unit price.
    }
  }
  totalAmount: MonetaryAmount with {
    briefly "Total"
    described as {
      |Line total.
    }
  }
} with {
  briefly "A single line item on an invoice"
  described as {
    | Represents a billable item on a customer invoice, which may aggregate
    | multiple usage records or represent a fixed charge like a subscription fee.
  }
}
type InvoiceData is {
  invoiceId: InvoiceId with {
    briefly "Invoice ID"
    described as {
      |Invoice identifier.
    }
  }
  accountId: AccountId with {
    briefly "Account"
    described as {
      |Billing account.
    }
  }
  billingPeriodStart: Date with {
    briefly "Start"
    described as {
      |Period start.
    }
  }
  billingPeriodEnd: Date with {
    briefly "End"
    described as {
      |Period end.
    }
  }
  issueDate: Date with {
    briefly "Issued"
    described as {
      |Issue date.
    }
  }
  dueDate: Date with {
    briefly "Due"
    described as {
      |Due date.
    }
  }
  lineItems: InvoiceLineItem+ with {
    briefly "Items"
    described as {
      |Line items.
    }
  }
  subtotal: MonetaryAmount with {
    briefly "Subtotal"
    described as {
      |Subtotal.
    }
  }
  taxes: MonetaryAmount with {
    briefly "Taxes"
    described as {
      |Tax amount.
    }
  }
  totalAmount: MonetaryAmount with {
    briefly "Total"
    described as {
      |Total amount.
    }
  }
  invoiceStatus: InvoiceStatus with {
    briefly "Status"
    described as {
      |Invoice status.
    }
  }
  paymentsMade: MonetaryAmount with {
    briefly "Payments"
    described as {
      |Payments received.
    }
  }
} with {
  briefly "A customer invoice for a billing period"
  described as {
    | Contains all charges for a customer billing period including usage-based
    | charges, recurring fees, taxes, and payment tracking information.
  }
}
type RatePlan is {
  planId: RatePlanId with {
    briefly "Plan ID"
    described as {
      |Rate plan identifier.
    }
  }
  planName: String with {
    briefly "Name"
    described as {
      |Plan name.
    }
  }
  voiceRatePerMinute: MonetaryAmount with {
    briefly "Voice rate"
    described as {
      |Per minute rate.
    }
  }
  dataRatePerMB: MonetaryAmount with {
    briefly "Data rate"
    described as {
      |Per MB rate.
    }
  }
  smsRate: MonetaryAmount with {
    briefly "SMS rate"
    described as {
      |Per SMS rate.
    }
  }
  mmsRate: MonetaryAmount with {
    briefly "MMS rate"
    described as {
      |Per MMS rate.
    }
  }
  includedMinutes: Integer with {
    briefly "Minutes"
    described as {
      |Included minutes.
    }
  }
  includedDataMB: Integer with {
    briefly "Data"
    described as {
      |Included data MB.
    }
  }
  includedSMS: Integer with {
    briefly "SMS"
    described as {
      |Included SMS.
    }
  }
  monthlyFee: MonetaryAmount with {
    briefly "Fee"
    described as {
      |Monthly fee.
    }
  }
  effectiveFrom: Date with {
    briefly "From"
    described as {
      |Effective from.
    }
  }
  effectiveTo: Date? with {
    briefly "To"
    described as {
      |Effective until.
    }
  }
} with {
  briefly "Pricing plan defining rates for usage types"
  described as {
    | Defines the pricing structure applied to customer usage including
    | per-unit rates, included allowances, and recurring monthly fees.
  }
}
type CustomerInfo is {
  firstName: String with {
    briefly "First"
    described as {
      |First name.
    }
  }
  lastName: String with {
    briefly "Last"
    described as {
      |Last name.
    }
  }
  email: EmailAddress with {
    briefly "Email"
    described as {
      |Email address.
    }
  }
  phone: PhoneNumber with {
    briefly "Phone"
    described as {
      |Phone number.
    }
  }
  billingAddress: Address with {
    briefly "Address"
    described as {
      |Billing address.
    }
  }
} with {
  briefly "Customer contact and billing information"
  described as {
    |Contains the customer details needed for invoicing and communication.
  }
}
type Address is {
  street1: String with {
    briefly "Street 1"
    described as {
      |Street line 1.
    }
  }
  street2: String? with {
    briefly "Street 2"
    described as {
      |Street line 2.
    }
  }
  city: String with {
    briefly "City"
    described as {
      |City.
    }
  }
  state: String with {
    briefly "State"
    described as {
      |State or province.
    }
  }
  postalCode: String with {
    briefly "Postal"
    described as {
      |Postal code.
    }
  }
  country: String with {
    briefly "Country"
    described as {
      |Country.
    }
  }
} with {
  briefly "Physical mailing address"
  described as {
    |Used for billing address and service location.
  }
}
type PaymentRecord is {
  paymentId: PaymentId with {
    briefly "Payment ID"
    described as {
      |Payment identifier.
    }
  }
  invoiceId: InvoiceId with {
    briefly "Invoice"
    described as {
      |Invoice paid.
    }
  }
  amount: MonetaryAmount with {
    briefly "Amount"
    described as {
      |Payment amount.
    }
  }
  method: PaymentMethod with {
    briefly "Method"
    described as {
      |Payment method.
    }
  }
  transactionDate: TimeStamp with {
    briefly "Date"
    described as {
      |Transaction date.
    }
  }
  referenceNumber: String with {
    briefly "Reference"
    described as {
      |Reference number.
    }
  }
  paymentStatus: String with {
    briefly "Status"
    described as {
      |Payment status.
    }
  }
} with {
  briefly "Record of a payment transaction"
  described as {
    |Tracks payments received against customer invoices.
  }
}
type AccountSummary is {
  accountId: AccountId with {
    briefly "Account"
    described as {
      |Account identifier.
    }
  }
  customerName: String with {
    briefly "Name"
    described as {
      |Customer name.
    }
  }
  currentBalance: MonetaryAmount with {
    briefly "Balance"
    described as {
      |Current balance.
    }
  }
  lastPaymentDate: Date? with {
    briefly "Last paid"
    described as {
      |Last payment date.
    }
  }
  lastPaymentAmount: MonetaryAmount? with {
    briefly "Last amount"
    described as {
      |Last payment amount.
    }
  }
  accountStatus: AccountStatus with {
    briefly "Status"
    described as {
      |Account status.
    }
  }
  unbilledUsage: MonetaryAmount with {
    briefly "Unbilled"
    described as {
      |Unbilled usage amount.
    }
  }
} with {
  briefly "Summary view of account status"
  described as {
    |Provides a quick overview of account health and current balances.
  }
}
