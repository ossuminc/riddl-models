// Types for the Usage Billing Domain

// === Identifier Types ===

type AccountId is Id(BillingContext.BillingAccount) with {
  briefly "Unique identifier for a billing account"
  described by "References a specific customer billing account in the system."
}

type UsageRecordId is UUID with {
  briefly "Unique identifier for a usage record"
  described by "References a specific metered usage event captured from the network."
}

type InvoiceId is UUID with {
  briefly "Unique identifier for an invoice"
  described by "References a specific invoice generated for a billing period."
}

type RatePlanId is String with {
  briefly "Identifier for a rate plan"
  described by "References the pricing plan applied to calculate charges."
}

type PaymentId is String with {
  briefly "Identifier for a payment transaction"
  described by "References a payment made against an invoice."
}

// === Enumeration Types ===

type UsageType is any of {
  Voice, Data, SMS, MMS, Roaming, International, Premium
} with {
  briefly "Categories of telecommunications usage"
  described by {
    | Defines the different types of usage that can be billed:
    | - Voice: Regular voice calls
    | - Data: Mobile or fixed data consumption
    | - SMS: Short message service
    | - MMS: Multimedia messaging service
    | - Roaming: Usage while on partner networks
    | - International: Cross-border communications
    | - Premium: Value-added services
  }
}

type InvoiceStatus is any of {
  Draft, Generated, Sent, Paid, PartiallyPaid, Overdue, Disputed, Cancelled
} with {
  briefly "Status of an invoice in its lifecycle"
  described by {
    | Tracks the current state of an invoice from creation through payment:
    | Draft indicates the invoice is being prepared, Generated means it is
    | ready for delivery, Sent indicates customer notification, and payment
    | states track the collection process.
  }
}

type AccountStatus is any of {
  ActiveStatus, SuspendedStatus, ClosedStatus, PendingActivationStatus
} with {
  briefly "Status of a billing account"
  described by {
    | Indicates the current operational state of a customer billing account.
    | Active accounts can incur usage, Suspended accounts are blocked due to
    | non-payment or other issues, and Closed accounts are no longer active.
  }
}

type PaymentMethod is any of {
  CreditCard, DebitCard, BankTransfer, DirectDebit, Check, Prepaid
} with {
  briefly "Supported payment methods"
  described by "The different ways customers can pay their invoices."
}

type EmailAddress is Pattern("[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}") with {
  briefly "Email address"
  described by "RFC-compliant email address pattern."
}

// === Value Types ===

type MonetaryAmount is {
  amount is Decimal(15, 2) with { briefly "Amount" described by "Numeric value." }
  currency is String with { briefly "Currency" described by "Currency code." }
} with {
  briefly "Represents a monetary value with currency"
  described by "Used for all financial amounts including charges, credits, and payments."
}

type Duration is Integer with {
  briefly "Duration in seconds"
  described by "Used to measure call duration for voice usage billing."
}

type DataVolume is Integer with {
  briefly "Data volume in bytes"
  described by "Used to measure data consumption for usage billing."
}

type PhoneNumber is Pattern("\\+?[1-9]\\d{1,14}") with {
  briefly "E.164 formatted phone number"
  described by "International phone number format for identifying calling parties."
}

// === Record Types ===

type UsageRecordData is {
  recordId is UsageRecordId with { briefly "Record ID" described by "Usage record identifier." }
  accountId is AccountId with { briefly "Account" described by "Billing account." }
  usageType is UsageType with { briefly "Type" described by "Usage category." }
  startTime is TimeStamp with { briefly "Start" described by "Usage start time." }
  endTime is TimeStamp with { briefly "End" described by "Usage end time." }
  duration is Duration with { briefly "Duration" described by "Call duration." }
  dataVolume is DataVolume with { briefly "Volume" described by "Data consumed." }
  originatingNumber is PhoneNumber with { briefly "From" described by "Originating number." }
  terminatingNumber is PhoneNumber with { briefly "To" described by "Terminating number." }
  networkElement is String with { briefly "Network" described by "Network element." }
  rated is Boolean with { briefly "Rated" described by "Whether rated." }
  ratedAmount is MonetaryAmount with { briefly "Amount" described by "Rated amount." }
} with {
  briefly "A single usage event captured from the network"
  described by {
    | Represents a metered usage event such as a voice call, data session,
    | or message transmission. Contains all details needed for rating and
    | billing including timing, volume, and party information.
  }
}

type InvoiceLineItem is {
  description is String with { briefly "Description" described by "Line item description." }
  usageType is UsageType with { briefly "Type" described by "Usage category." }
  quantity is Number with { briefly "Quantity" described by "Number of units." }
  unitPrice is MonetaryAmount with { briefly "Price" described by "Per unit price." }
  totalAmount is MonetaryAmount with { briefly "Total" described by "Line total." }
} with {
  briefly "A single line item on an invoice"
  described by {
    | Represents a billable item on a customer invoice, which may aggregate
    | multiple usage records or represent a fixed charge like a subscription fee.
  }
}

type InvoiceData is {
  invoiceId is InvoiceId with { briefly "Invoice ID" described by "Invoice identifier." }
  accountId is AccountId with { briefly "Account" described by "Billing account." }
  billingPeriodStart is Date with { briefly "Start" described by "Period start." }
  billingPeriodEnd is Date with { briefly "End" described by "Period end." }
  issueDate is Date with { briefly "Issued" described by "Issue date." }
  dueDate is Date with { briefly "Due" described by "Due date." }
  lineItems is many InvoiceLineItem with { briefly "Items" described by "Line items." }
  subtotal is MonetaryAmount with { briefly "Subtotal" described by "Subtotal." }
  taxes is MonetaryAmount with { briefly "Taxes" described by "Tax amount." }
  totalAmount is MonetaryAmount with { briefly "Total" described by "Total amount." }
  status is InvoiceStatus with { briefly "Status" described by "Invoice status." }
  paymentsMade is MonetaryAmount with { briefly "Payments" described by "Payments received." }
} with {
  briefly "A customer invoice for a billing period"
  described by {
    | Contains all charges for a customer billing period including usage-based
    | charges, recurring fees, taxes, and payment tracking information.
  }
}

type RatePlan is {
  planId is RatePlanId with { briefly "Plan ID" described by "Rate plan identifier." }
  planName is String with { briefly "Name" described by "Plan name." }
  voiceRatePerMinute is MonetaryAmount with { briefly "Voice rate" described by "Per minute rate." }
  dataRatePerMB is MonetaryAmount with { briefly "Data rate" described by "Per MB rate." }
  smsRate is MonetaryAmount with { briefly "SMS rate" described by "Per SMS rate." }
  mmsRate is MonetaryAmount with { briefly "MMS rate" described by "Per MMS rate." }
  includedMinutes is Integer with { briefly "Minutes" described by "Included minutes." }
  includedDataMB is Integer with { briefly "Data" described by "Included data MB." }
  includedSMS is Integer with { briefly "SMS" described by "Included SMS." }
  monthlyFee is MonetaryAmount with { briefly "Fee" described by "Monthly fee." }
  effectiveFrom is Date with { briefly "From" described by "Effective from." }
  effectiveTo is optional Date with { briefly "To" described by "Effective until." }
} with {
  briefly "Pricing plan defining rates for usage types"
  described by {
    | Defines the pricing structure applied to customer usage including
    | per-unit rates, included allowances, and recurring monthly fees.
  }
}

type CustomerInfo is {
  firstName is String with { briefly "First" described by "First name." }
  lastName is String with { briefly "Last" described by "Last name." }
  email is EmailAddress with { briefly "Email" described by "Email address." }
  phone is PhoneNumber with { briefly "Phone" described by "Phone number." }
  billingAddress is Address with { briefly "Address" described by "Billing address." }
} with {
  briefly "Customer contact and billing information"
  described by "Contains the customer details needed for invoicing and communication."
}

type Address is {
  street1 is String with { briefly "Street 1" described by "Street line 1." }
  street2 is optional String with { briefly "Street 2" described by "Street line 2." }
  city is String with { briefly "City" described by "City." }
  state is String with { briefly "State" described by "State or province." }
  postalCode is String with { briefly "Postal" described by "Postal code." }
  country is String with { briefly "Country" described by "Country." }
} with {
  briefly "Physical mailing address"
  described by "Used for billing address and service location."
}

type PaymentRecord is {
  paymentId is PaymentId with { briefly "Payment ID" described by "Payment identifier." }
  invoiceId is InvoiceId with { briefly "Invoice" described by "Invoice paid." }
  amount is MonetaryAmount with { briefly "Amount" described by "Payment amount." }
  method is PaymentMethod with { briefly "Method" described by "Payment method." }
  transactionDate is TimeStamp with { briefly "Date" described by "Transaction date." }
  referenceNumber is String with { briefly "Reference" described by "Reference number." }
  status is String with { briefly "Status" described by "Payment status." }
} with {
  briefly "Record of a payment transaction"
  described by "Tracks payments received against customer invoices."
}

type AccountSummary is {
  accountId is AccountId with { briefly "Account" described by "Account identifier." }
  customerName is String with { briefly "Name" described by "Customer name." }
  currentBalance is MonetaryAmount with { briefly "Balance" described by "Current balance." }
  lastPaymentDate is optional Date with { briefly "Last paid" described by "Last payment date." }
  lastPaymentAmount is optional MonetaryAmount with { briefly "Last amount" described by "Last payment amount." }
  accountStatus is AccountStatus with { briefly "Status" described by "Account status." }
  unbilledUsage is MonetaryAmount with { briefly "Unbilled" described by "Unbilled usage amount." }
} with {
  briefly "Summary view of account status"
  described by "Provides a quick overview of account health and current balances."
}
