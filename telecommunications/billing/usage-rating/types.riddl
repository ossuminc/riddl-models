// Usage Rating - Shared Types
type UsageRecordId is Id(RatingContext.UsageRecord)  with {
  briefly "Usage record identifier"
  described as {
    |Unique identifier for a usage record.
  }
}
type AccountId is UUID with {
  briefly "Account identifier"
  described as {
    |Reference to a customer billing account.
  }
}
type RatePlanId is UUID with {
  briefly "Rate plan identifier"
  described as {
    |Reference to a rate plan.
  }
}
type SubscriberId is UUID with {
  briefly "Subscriber identifier"
  described as {
    |Reference to a subscriber line or device.
  }
}
type UsageType is any of {
  Voice,
  Data,
  SMS,
  MMS,
  Roaming,
  Premium
} with {
  briefly "Usage type"
  described as {
    |Type of telecom usage.
  }
}
type RatingStatus is any of {
  Received,
  Validated,
  RatePlanResolved,
  Rated,
  Disputed,
  Rejected,
  Submitted
} with {
  briefly "Rating status"
  described as {
    |Status of usage rating processing.
  }
}
type ChargeCategory is any of {
  BaseUsage,
  Overage,
  RoamingSurcharge,
  PremiumContent,
  Discount,
  Promotional
} with {
  briefly "Charge category"
  described as {
    |Category of a usage charge.
  }
}
type CallDirection is any of {
  Inbound,
  Outbound,
  ForwardedCall
} with {
  briefly "Call direction"
  described as {
    |Direction of a voice call.
  }
}
type CallDetailRecord is {
  recordId: UUID with {
    briefly "Record ID"
    described as {
      |CDR record identifier.
    }
  }
  subscriberId: SubscriberId with {
    briefly "Subscriber"
    described as {
      |Subscriber identifier.
    }
  }
  usageType: UsageType with {
    briefly "Usage type"
    described as {
      |Type of usage.
    }
  }
  direction: CallDirection? with {
    briefly "Direction"
    described as {
      |Call direction for voice usage.
    }
  }
  originNumber: String(3,50) with {
    briefly "Origin"
    described as {
      |Originating number or address.
    }
  }
  destinationNumber: String(3,50) with {
    briefly "Destination"
    described as {
      |Destination number or address.
    }
  }
  startTime: TimeStamp with {
    briefly "Start"
    described as {
      |Usage start time.
    }
  }
  endTime: TimeStamp with {
    briefly "End"
    described as {
      |Usage end time.
    }
  }
  durationSeconds: Natural with {
    briefly "Duration"
    described as {
      |Duration in seconds.
    }
  }
  dataBytes: Natural? with {
    briefly "Data bytes"
    described as {
      |Data volume in bytes for data usage.
    }
  }
  cellTowerId: String(3,50)? with {
    briefly "Cell tower"
    described as {
      |Serving cell tower identifier.
    }
  }
  roamingIndicator: Boolean with {
    briefly "Roaming"
    described as {
      |Whether usage occurred while roaming.
    }
  }
} with {
  briefly "Call detail record"
  described as {
    |Raw usage event from the network.
  }
}
type RatePlanInfo is {
  ratePlanId: RatePlanId with {
    briefly "Rate plan ID"
    described as {
      |Rate plan identifier.
    }
  }
  planName: String(3,100) with {
    briefly "Plan name"
    described as {
      |Name of the rate plan.
    }
  }
  voiceRatePerMinute: Decimal(8,4) with {
    briefly "Voice rate"
    described as {
      |Per-minute voice rate.
    }
  }
  dataRatePerMB: Decimal(8,4) with {
    briefly "Data rate"
    described as {
      |Per-megabyte data rate.
    }
  }
  smsRate: Decimal(8,4) with {
    briefly "SMS rate"
    described as {
      |Per-message SMS rate.
    }
  }
  roamingMultiplier: Decimal(4,2) with {
    briefly "Roaming multiplier"
    described as {
      |Multiplier applied for roaming usage.
    }
  }
  includedVoiceMinutes: Natural with {
    briefly "Included minutes"
    described as {
      |Included voice minutes per billing cycle.
    }
  }
  includedDataMB: Natural with {
    briefly "Included data"
    described as {
      |Included data megabytes per billing cycle.
    }
  }
  includedSMS: Natural with {
    briefly "Included SMS"
    described as {
      |Included SMS messages per billing cycle.
    }
  }
} with {
  briefly "Rate plan information"
  described as {
    |Rate plan details used for charge calculation.
  }
}
type UsageCharge is {
  chargeCategory: ChargeCategory with {
    briefly "Category"
    described as {
      |Charge category.
    }
  }
  description: String(3,200) with {
    briefly "Description"
    described as {
      |Charge description.
    }
  }
  quantity: Decimal(12,4) with {
    briefly "Quantity"
    described as {
      |Rated quantity.
    }
  }
  unitRate: Decimal(8,4) with {
    briefly "Unit rate"
    described as {
      |Rate per unit.
    }
  }
  amount: Decimal(10,2) with {
    briefly "Amount"
    described as {
      |Calculated charge amount.
    }
  }
  currencyCode: String(3,3) with {
    briefly "Currency"
    described as {
      |ISO currency code.
    }
  }
} with {
  briefly "Usage charge"
  described as {
    |A calculated charge for rated usage.
  }
}
type RejectionReason is {
  code: String(3,20) with {
    briefly "Code"
    described as {
      |Rejection reason code.
    }
  }
  message: String(3,500) with {
    briefly "Message"
    described as {
      |Rejection description.
    }
  }
} with {
  briefly "Rejection reason"
  described as {
    |Reason a usage record was rejected.
  }
}
