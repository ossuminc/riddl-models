// Usage Rating - Shared Types

type UsageRecordId is Id(RatingContext.UsageRecord) with {
  briefly "Usage record identifier"
  described by "Unique identifier for a usage record."
}

type AccountId is UUID with {
  briefly "Account identifier"
  described by "Reference to a customer billing account."
}

type RatePlanId is UUID with {
  briefly "Rate plan identifier"
  described by "Reference to a rate plan."
}

type SubscriberId is UUID with {
  briefly "Subscriber identifier"
  described by "Reference to a subscriber line or device."
}

type UsageType is any of {
  Voice,
  Data,
  SMS,
  MMS,
  Roaming,
  Premium
} with {
  briefly "Usage type"
  described by "Type of telecom usage."
}

type RatingStatus is any of {
  Received,
  Validated,
  RatePlanResolved,
  Rated,
  Disputed,
  Rejected,
  Submitted
} with {
  briefly "Rating status"
  described by "Status of usage rating processing."
}

type ChargeCategory is any of {
  BaseUsage,
  Overage,
  RoamingSurcharge,
  PremiumContent,
  Discount,
  Promotional
} with {
  briefly "Charge category"
  described by "Category of a usage charge."
}

type CallDirection is any of {
  Inbound,
  Outbound,
  ForwardedCall
} with {
  briefly "Call direction"
  described by "Direction of a voice call."
}

type CallDetailRecord is {
  recordId is UUID with {
    briefly "Record ID"
    described by "CDR record identifier."
  }
  subscriberId is SubscriberId with {
    briefly "Subscriber"
    described by "Subscriber identifier."
  }
  usageType is UsageType with {
    briefly "Usage type"
    described by "Type of usage."
  }
  direction is optional CallDirection with {
    briefly "Direction"
    described by "Call direction for voice usage."
  }
  originNumber is String(3, 50) with {
    briefly "Origin"
    described by "Originating number or address."
  }
  destinationNumber is String(3, 50) with {
    briefly "Destination"
    described by "Destination number or address."
  }
  startTime is TimeStamp with {
    briefly "Start"
    described by "Usage start time."
  }
  endTime is TimeStamp with {
    briefly "End"
    described by "Usage end time."
  }
  durationSeconds is Natural with {
    briefly "Duration"
    described by "Duration in seconds."
  }
  dataBytes is optional Natural with {
    briefly "Data bytes"
    described by "Data volume in bytes for data usage."
  }
  cellTowerId is optional String(3, 50) with {
    briefly "Cell tower"
    described by "Serving cell tower identifier."
  }
  roamingIndicator is Boolean with {
    briefly "Roaming"
    described by "Whether usage occurred while roaming."
  }
} with {
  briefly "Call detail record"
  described by "Raw usage event from the network."
}

type RatePlanInfo is {
  ratePlanId is RatePlanId with {
    briefly "Rate plan ID"
    described by "Rate plan identifier."
  }
  planName is String(3, 100) with {
    briefly "Plan name"
    described by "Name of the rate plan."
  }
  voiceRatePerMinute is Decimal(8, 4) with {
    briefly "Voice rate"
    described by "Per-minute voice rate."
  }
  dataRatePerMB is Decimal(8, 4) with {
    briefly "Data rate"
    described by "Per-megabyte data rate."
  }
  smsRate is Decimal(8, 4) with {
    briefly "SMS rate"
    described by "Per-message SMS rate."
  }
  roamingMultiplier is Decimal(4, 2) with {
    briefly "Roaming multiplier"
    described by "Multiplier applied for roaming usage."
  }
  includedVoiceMinutes is Natural with {
    briefly "Included minutes"
    described by "Included voice minutes per billing cycle."
  }
  includedDataMB is Natural with {
    briefly "Included data"
    described by "Included data megabytes per billing cycle."
  }
  includedSMS is Natural with {
    briefly "Included SMS"
    described by "Included SMS messages per billing cycle."
  }
} with {
  briefly "Rate plan information"
  described by "Rate plan details used for charge calculation."
}

type UsageCharge is {
  chargeCategory is ChargeCategory with {
    briefly "Category"
    described by "Charge category."
  }
  description is String(3, 200) with {
    briefly "Description"
    described by "Charge description."
  }
  quantity is Decimal(12, 4) with {
    briefly "Quantity"
    described by "Rated quantity."
  }
  unitRate is Decimal(8, 4) with {
    briefly "Unit rate"
    described by "Rate per unit."
  }
  amount is Decimal(10, 2) with {
    briefly "Amount"
    described by "Calculated charge amount."
  }
  currencyCode is String(3, 3) with {
    briefly "Currency"
    described by "ISO currency code."
  }
} with {
  briefly "Usage charge"
  described by "A calculated charge for rated usage."
}

type RejectionReason is {
  code is String(3, 20) with {
    briefly "Code"
    described by "Rejection reason code."
  }
  message is String(3, 500) with {
    briefly "Message"
    described by "Rejection description."
  }
} with {
  briefly "Rejection reason"
  described by "Reason a usage record was rejected."
}
