// Equipment Inventory - External Contexts
context ProcurementSystem is {
  command SubmitPurchaseOrder is  {
    purchaseOrderId: PurchaseOrderId with {
      briefly "PO ID"
      described as {
        |Purchase order identifier.
      }
    }
    vendorId: VendorId with {
      briefly "Vendor"
      described as {
        |Vendor identifier.
      }
    }
    items: EquipmentDetails+ with {
      briefly "Items"
      described as {
        |Equipment items to order.
      }
    }
    totalAmount: Decimal(14,2) with {
      briefly "Amount"
      described as {
        |Total order amount.
      }
    }
  } with {
    briefly "Submit purchase order"
    described as {
      |Submits equipment purchase order.
    }
  }
  event PurchaseOrderConfirmed is  {
    purchaseOrderId: PurchaseOrderId with {
      briefly "PO ID"
      described as {
        |Purchase order identifier.
      }
    }
    estimatedDelivery: Date with {
      briefly "Delivery"
      described as {
        |Estimated delivery date.
      }
    }
  } with {
    briefly "Purchase order confirmed"
    described as {
      |Emitted when vendor confirms order.
    }
  }
  query GetVendorCatalog is  {
    vendorId: VendorId with {
      briefly "Vendor"
      described as {
        |Vendor identifier.
      }
    }
    filterCategory: EquipmentCategory? with {
      briefly "Category"
      described as {
        |Filter by category.
      }
    }
  } with {
    briefly "Get vendor catalog"
    described as {
      |Retrieves vendor equipment catalog.
    }
  }
  result VendorCatalog is  {
    vendorId: VendorId with {
      briefly "Vendor"
      described as {
        |Vendor identifier.
      }
    }
    items: EquipmentDetails+ with {
      briefly "Items"
      described as {
        |Available equipment.
      }
    }
  } with {
    briefly "Vendor catalog"
    described as {
      |Vendor equipment catalog.
    }
  }
} with {
  option external()
  briefly "External procurement"
  described as {
    |Equipment procurement system.
  }
}
context NetworkManagementSystem is {
  query GetNetworkTopology is  {
    siteId: SiteId with {
      briefly "Site"
      described as {
        |Site identifier.
      }
    }
  } with {
    briefly "Get network topology"
    described as {
      |Retrieves network topology at a site.
    }
  }
  result NetworkTopology is  {
    siteId: SiteId with {
      briefly "Site"
      described as {
        |Site identifier.
      }
    }
    elements: String(1,200)+ with {
      briefly "Elements"
      described as {
        |Network element identifiers.
      }
    }
    connections: String(1,500)+ with {
      briefly "Connections"
      described as {
        |Element connections.
      }
    }
  } with {
    briefly "Network topology"
    described as {
      |Network topology information.
    }
  }
  command RegisterNetworkElement is  {
    elementId: String(1,200) with {
      briefly "Element"
      described as {
        |Network element identifier.
      }
    }
    equipmentId: EquipmentItemId with {
      briefly "Equipment"
      described as {
        |Equipment item reference.
      }
    }
    ipAddress: String(1,50) with {
      briefly "IP"
      described as {
        |IP address.
      }
    }
  } with {
    briefly "Register network element"
    described as {
      |Registers equipment as network element.
    }
  }
  event NetworkElementRegistered is  {
    elementId: String(1,200) with {
      briefly "Element"
      described as {
        |Network element identifier.
      }
    }
    registeredAt: TimeStamp with {
      briefly "Registered"
      described as {
        |Registration time.
      }
    }
  } with {
    briefly "Network element registered"
    described as {
      |Emitted when element is registered.
    }
  }
} with {
  option external()
  briefly "External network management"
  described as {
    |Network management system.
  }
}
