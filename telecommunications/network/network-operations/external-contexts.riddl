// Network Operations - External Contexts

context NetworkMonitoringSystem is {

  query GetElementHealth is {
    elementId is NetworkElementId with { briefly "Element" described by "Element ID." }
  } with {
    briefly "Get element health"
    described by "Gets health status of a network element."
  }

  result ElementHealthStatus is {
    elementId is NetworkElementId with { briefly "Element" described by "Element ID." }
    healthStatus is String(3, 50) with { briefly "Status" described by "Element health status." }
    metrics is many HealthMetric with { briefly "Metrics" described by "Health metrics." }
    lastPolled is TimeStamp with { briefly "Polled" described by "Last poll time." }
  } with {
    briefly "Element health status"
    described by "Health status of a network element."
  }

  event AlarmRaised is {
    alarmId is UUID with { briefly "Alarm" described by "Alarm ID." }
    elementId is NetworkElementId with { briefly "Element" described by "Element ID." }
    severity is IncidentSeverity with { briefly "Severity" described by "Alarm severity." }
    message is String(3, 500) with { briefly "Message" described by "Alarm message." }
    raisedAt is TimeStamp with { briefly "Raised" described by "Time alarm was raised." }
  } with {
    briefly "Alarm raised"
    described by "Emitted when a network alarm is raised."
  }

  event AlarmCleared is {
    alarmId is UUID with { briefly "Alarm" described by "Alarm ID." }
    elementId is NetworkElementId with { briefly "Element" described by "Element ID." }
    clearedAt is TimeStamp with { briefly "Cleared" described by "Time alarm was cleared." }
  } with {
    briefly "Alarm cleared"
    described by "Emitted when a network alarm is cleared."
  }

} with {
  option is external
  briefly "External network monitoring"
  described by "Network monitoring and alarm management system."
}

context ChangeManagementSystem is {

  command SubmitChangeRequest is {
    changeRequestId is ChangeRequestId with { briefly "Change ID" described by "Change request ID." }
    description is String(3, 2000) with { briefly "Description" described by "Change description." }
    affectedElements is many NetworkElementId with { briefly "Elements" described by "Affected elements." }
    scheduledFor is TimeStamp with { briefly "Scheduled" described by "Scheduled execution time." }
    requestedBy is OperatorId with { briefly "Requester" described by "Requesting operator." }
  } with {
    briefly "Submit change request"
    described by "Submits a network change request."
  }

  event ChangeApproved is {
    changeRequestId is ChangeRequestId with { briefly "Change ID" described by "Change request ID." }
    approvedBy is OperatorId with { briefly "Approved by" described by "Approving authority." }
    approvedAt is TimeStamp with { briefly "Approved" described by "Approval time." }
  } with {
    briefly "Change approved"
    described by "Emitted when a change request is approved."
  }

  event ChangeCompleted is {
    changeRequestId is ChangeRequestId with { briefly "Change ID" described by "Change request ID." }
    success is Boolean with { briefly "Success" described by "Whether change succeeded." }
    completedAt is TimeStamp with { briefly "Completed" described by "Completion time." }
  } with {
    briefly "Change completed"
    described by "Emitted when a change request is completed."
  }

} with {
  option is external
  briefly "External change management"
  described by "Network change management and approval system."
}

context CapacityPlanningSystem is {

  query GetCapacityForecast is {
    elementId is NetworkElementId with { briefly "Element" described by "Element ID." }
    forecastDays is Natural with { briefly "Days" described by "Forecast horizon in days." }
  } with {
    briefly "Get capacity forecast"
    described by "Gets capacity forecast for a network element."
  }

  result CapacityForecast is {
    elementId is NetworkElementId with { briefly "Element" described by "Element ID." }
    currentUtilization is Decimal(5, 2) with { briefly "Current" described by "Current utilization percent." }
    projectedPeak is Decimal(5, 2) with { briefly "Projected" described by "Projected peak utilization." }
    exhaustionDate is optional Date with { briefly "Exhaustion" described by "Projected capacity exhaustion date." }
    recommendation is String(3, 1000) with { briefly "Recommendation" described by "Capacity recommendation." }
  } with {
    briefly "Capacity forecast"
    described by "Network capacity forecast."
  }

  event CapacityThresholdBreached is {
    elementId is NetworkElementId with { briefly "Element" described by "Element ID." }
    metricName is String(3, 100) with { briefly "Metric" described by "Breached metric name." }
    currentValue is Decimal(12, 4) with { briefly "Value" described by "Current value." }
    threshold is Decimal(12, 4) with { briefly "Threshold" described by "Threshold value." }
    breachedAt is TimeStamp with { briefly "Breached" described by "Breach time." }
  } with {
    briefly "Capacity threshold breached"
    described by "Emitted when capacity threshold is exceeded."
  }

} with {
  option is external
  briefly "External capacity planning"
  described by "Network capacity planning and forecasting system."
}
