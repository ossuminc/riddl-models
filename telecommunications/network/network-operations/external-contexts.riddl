// Network Operations - External Contexts
context NetworkMonitoringSystem is {
  query GetElementHealth is  {
    elementId: NetworkElementId with {
      briefly "Element"
      described as {
        |Element ID.
      }
    }
  } with {
    briefly "Get element health"
    described as {
      |Gets health status of a network element.
    }
  }
  result ElementHealthStatus is  {
    elementId: NetworkElementId with {
      briefly "Element"
      described as {
        |Element ID.
      }
    }
    healthStatus: String(3,50) with {
      briefly "Status"
      described as {
        |Element health status.
      }
    }
    metrics: HealthMetric+ with {
      briefly "Metrics"
      described as {
        |Health metrics.
      }
    }
    lastPolled: TimeStamp with {
      briefly "Polled"
      described as {
        |Last poll time.
      }
    }
  } with {
    briefly "Element health status"
    described as {
      |Health status of a network element.
    }
  }
  event AlarmRaised is  {
    alarmId: UUID with {
      briefly "Alarm"
      described as {
        |Alarm ID.
      }
    }
    elementId: NetworkElementId with {
      briefly "Element"
      described as {
        |Element ID.
      }
    }
    severity: IncidentSeverity with {
      briefly "Severity"
      described as {
        |Alarm severity.
      }
    }
    message: String(3,500) with {
      briefly "Message"
      described as {
        |Alarm message.
      }
    }
    raisedAt: TimeStamp with {
      briefly "Raised"
      described as {
        |Time alarm was raised.
      }
    }
  } with {
    briefly "Alarm raised"
    described as {
      |Emitted when a network alarm is raised.
    }
  }
  event AlarmCleared is  {
    alarmId: UUID with {
      briefly "Alarm"
      described as {
        |Alarm ID.
      }
    }
    elementId: NetworkElementId with {
      briefly "Element"
      described as {
        |Element ID.
      }
    }
    clearedAt: TimeStamp with {
      briefly "Cleared"
      described as {
        |Time alarm was cleared.
      }
    }
  } with {
    briefly "Alarm cleared"
    described as {
      |Emitted when a network alarm is cleared.
    }
  }
} with {
  option external()
  briefly "External network monitoring"
  described as {
    |Network monitoring and alarm management system.
  }
}
context ChangeManagementSystem is {
  command SubmitChangeRequest is  {
    changeRequestId: ChangeRequestId with {
      briefly "Change ID"
      described as {
        |Change request ID.
      }
    }
    description: String(3,2000) with {
      briefly "Description"
      described as {
        |Change description.
      }
    }
    affectedElements: NetworkElementId+ with {
      briefly "Elements"
      described as {
        |Affected elements.
      }
    }
    scheduledFor: TimeStamp with {
      briefly "Scheduled"
      described as {
        |Scheduled execution time.
      }
    }
    requestedBy: OperatorId with {
      briefly "Requester"
      described as {
        |Requesting operator.
      }
    }
  } with {
    briefly "Submit change request"
    described as {
      |Submits a network change request.
    }
  }
  event ChangeApproved is  {
    changeRequestId: ChangeRequestId with {
      briefly "Change ID"
      described as {
        |Change request ID.
      }
    }
    approvedBy: OperatorId with {
      briefly "Approved by"
      described as {
        |Approving authority.
      }
    }
    approvedAt: TimeStamp with {
      briefly "Approved"
      described as {
        |Approval time.
      }
    }
  } with {
    briefly "Change approved"
    described as {
      |Emitted when a change request is approved.
    }
  }
  event ChangeCompleted is  {
    changeRequestId: ChangeRequestId with {
      briefly "Change ID"
      described as {
        |Change request ID.
      }
    }
    success: Boolean with {
      briefly "Success"
      described as {
        |Whether change succeeded.
      }
    }
    completedAt: TimeStamp with {
      briefly "Completed"
      described as {
        |Completion time.
      }
    }
  } with {
    briefly "Change completed"
    described as {
      |Emitted when a change request is completed.
    }
  }
} with {
  option external()
  briefly "External change management"
  described as {
    |Network change management and approval system.
  }
}
context CapacityPlanningSystem is {
  query GetCapacityForecast is  {
    elementId: NetworkElementId with {
      briefly "Element"
      described as {
        |Element ID.
      }
    }
    forecastDays: Natural with {
      briefly "Days"
      described as {
        |Forecast horizon in days.
      }
    }
  } with {
    briefly "Get capacity forecast"
    described as {
      |Gets capacity forecast for a network element.
    }
  }
  result CapacityForecast is  {
    elementId: NetworkElementId with {
      briefly "Element"
      described as {
        |Element ID.
      }
    }
    currentUtilization: Decimal(5,2) with {
      briefly "Current"
      described as {
        |Current utilization percent.
      }
    }
    projectedPeak: Decimal(5,2) with {
      briefly "Projected"
      described as {
        |Projected peak utilization.
      }
    }
    exhaustionDate: Date? with {
      briefly "Exhaustion"
      described as {
        |Projected capacity exhaustion date.
      }
    }
    recommendation: String(3,1000) with {
      briefly "Recommendation"
      described as {
        |Capacity recommendation.
      }
    }
  } with {
    briefly "Capacity forecast"
    described as {
      |Network capacity forecast.
    }
  }
  event CapacityThresholdBreached is  {
    elementId: NetworkElementId with {
      briefly "Element"
      described as {
        |Element ID.
      }
    }
    metricName: String(3,100) with {
      briefly "Metric"
      described as {
        |Breached metric name.
      }
    }
    currentValue: Decimal(12,4) with {
      briefly "Value"
      described as {
        |Current value.
      }
    }
    threshold: Decimal(12,4) with {
      briefly "Threshold"
      described as {
        |Threshold value.
      }
    }
    breachedAt: TimeStamp with {
      briefly "Breached"
      described as {
        |Breach time.
      }
    }
  } with {
    briefly "Capacity threshold breached"
    described as {
      |Emitted when capacity threshold is exceeded.
    }
  }
} with {
  option external()
  briefly "External capacity planning"
  described as {
    |Network capacity planning and forecasting system.
  }
}
