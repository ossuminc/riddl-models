// Trouble Ticketing - Shared Types

type EmailAddress is String(5, 254) with {
  briefly "Email address"
  described by "An email address."
}

type TicketId is Id(TicketContext.TroubleTicket) with {
  briefly "Ticket identifier"
  described by "Unique identifier for a trouble ticket."
}

type CustomerId is UUID with {
  briefly "Customer identifier"
  described by "Unique identifier for a customer."
}

type AccountNumber is String(1, 20) with {
  briefly "Account number"
  described by "Customer account number."
}

type TicketStatus is any of {
  Open,
  Assigned,
  InProgress,
  Pending,
  Escalated,
  Resolved,
  Closed
} with {
  briefly "Ticket status"
  described by "Trouble ticket lifecycle status."
}

type TicketPriority is any of {
  Low,
  Medium,
  High,
  Critical,
  Emergency
} with {
  briefly "Ticket priority"
  described by "Issue urgency level."
}

type IssueCategory is any of {
  ServiceOutage,
  SlowSpeed,
  Intermittent,
  Billing,
  Equipment,
  Installation,
  Upgrade,
  Other
} with {
  briefly "Issue category"
  described by "Type of service issue."
}

type CustomerInfo is {
  customerId is CustomerId with {
    briefly "Customer ID"
    described by "Customer identifier."
  }
  accountNumber is AccountNumber with {
    briefly "Account"
    described by "Account number."
  }
  name is String(1, 200) with {
    briefly "Name"
    described by "Customer name."
  }
  phone is String(1, 30) with {
    briefly "Phone"
    described by "Contact phone."
  }
  email is optional EmailAddress with {
    briefly "Email"
    described by "Contact email."
  }
  serviceAddress is String(1, 500) with {
    briefly "Address"
    described by "Service address."
  }
} with {
  briefly "Customer info"
  described by "Customer contact details."
}

type IssueDescription is {
  summary is String(1, 200) with {
    briefly "Summary"
    described by "Brief issue summary."
  }
  description is String(1, 5000) with {
    briefly "Description"
    described by "Detailed description."
  }
  category is IssueCategory with {
    briefly "Category"
    described by "Issue category."
  }
  affectedServices is many optional String(1, 100) with {
    briefly "Services"
    described by "Affected services."
  }
  symptoms is many optional String(1, 200) with {
    briefly "Symptoms"
    described by "Observed symptoms."
  }
  reportedAt is TimeStamp with {
    briefly "Reported"
    described by "Report time."
  }
} with {
  briefly "Issue description"
  described by "Problem details."
}

type DiagnosticResult is {
  testName is String(1, 100) with {
    briefly "Test"
    described by "Diagnostic test name."
  }
  result is String(1, 50) with {
    briefly "Result"
    described by "Pass, fail, warning."
  }
  details is optional String(1, 2000) with {
    briefly "Details"
    described by "Test details."
  }
  testedAt is TimeStamp with {
    briefly "Tested"
    described by "Test time."
  }
} with {
  briefly "Diagnostic result"
  described by "Diagnostic test outcome."
}

type WorkNote is {
  noteId is UUID with {
    briefly "Note ID"
    described by "Note identifier."
  }
  author is String(1, 100) with {
    briefly "Author"
    described by "Note author."
  }
  content is String(1, 5000) with {
    briefly "Content"
    described by "Note content."
  }
  isInternal is Boolean with {
    briefly "Internal"
    described by "Internal only."
  }
  createdAt is TimeStamp with {
    briefly "Created"
    described by "Creation time."
  }
} with {
  briefly "Work note"
  described by "Ticket work note."
}

type DispatchInfo is {
  dispatchId is UUID with {
    briefly "Dispatch ID"
    described by "Dispatch identifier."
  }
  technicianId is UUID with {
    briefly "Technician"
    described by "Assigned technician."
  }
  technicianName is String(1, 100) with {
    briefly "Name"
    described by "Technician name."
  }
  scheduledTime is TimeStamp with {
    briefly "Scheduled"
    described by "Scheduled time."
  }
  estimatedDuration is Natural with {
    briefly "Duration"
    described by "Est. duration minutes."
  }
  status is String(1, 20) with {
    briefly "Status"
    described by "Dispatch status."
  }
} with {
  briefly "Dispatch info"
  described by "Field dispatch details."
}

type ResolutionInfo is {
  rootCause is String(1, 1000) with {
    briefly "Root cause"
    described by "Root cause of issue."
  }
  resolution is String(1, 2000) with {
    briefly "Resolution"
    described by "How it was resolved."
  }
  resolvedBy is String(1, 100) with {
    briefly "Resolved by"
    described by "Resolver name."
  }
  resolvedAt is TimeStamp with {
    briefly "Resolved"
    described by "Resolution time."
  }
  preventiveMeasures is optional String(1, 1000) with {
    briefly "Preventive"
    described by "Preventive measures."
  }
} with {
  briefly "Resolution info"
  described by "Issue resolution details."
}

type EscalationInfo is {
  escalatedTo is String(1, 100) with {
    briefly "Escalated to"
    described by "Escalation target."
  }
  reason is String(1, 1000) with {
    briefly "Reason"
    described by "Escalation reason."
  }
  escalatedBy is String(1, 100) with {
    briefly "Escalated by"
    described by "Who escalated."
  }
  escalatedAt is TimeStamp with {
    briefly "Escalated"
    described by "Escalation time."
  }
  slaDeadline is optional TimeStamp with {
    briefly "SLA"
    described by "SLA deadline."
  }
} with {
  briefly "Escalation info"
  described by "Escalation details."
}

type SLAMetrics is {
  responseTarget is Natural with {
    briefly "Response"
    described by "Response target minutes."
  }
  resolutionTarget is Natural with {
    briefly "Resolution"
    described by "Resolution target minutes."
  }
  responseActual is optional Natural with {
    briefly "Actual response"
    described by "Actual response time."
  }
  resolutionActual is optional Natural with {
    briefly "Actual resolution"
    described by "Actual resolution time."
  }
  isWithinSLA is optional Boolean with {
    briefly "Within SLA"
    described by "Met SLA targets."
  }
} with {
  briefly "SLA metrics"
  described by "Service level agreement data."
}
